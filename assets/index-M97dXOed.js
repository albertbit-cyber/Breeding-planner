var tx=Object.defineProperty;var mo=e=>{throw TypeError(e)};var nx=(e,s,i)=>s in e?tx(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var tr=(e,s,i)=>nx(e,typeof s!="symbol"?s+"":s,i),ms=(e,s,i)=>s.has(e)||mo("Cannot "+i);var pt=(e,s,i)=>(ms(e,s,"read from private field"),i?i.call(e):s.get(e)),on=(e,s,i)=>s.has(e)?mo("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,i),ln=(e,s,i,o)=>(ms(e,s,"write to private field"),o?o.call(e,i):s.set(e,i),i),Zt=(e,s,i)=>(ms(e,s,"access private method"),i);var Pr=(e,s,i,o)=>({set _(a){ln(e,s,a,i)},get _(){return pt(e,s,o)}});(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var s=e.default;if(typeof s=="function"){var i=function o(){return this instanceof o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var o,a={},c=null,d=null;if(s!=null)for(o in s.ref!==void 0&&(d=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,o)&&!L$1.hasOwnProperty(o)&&(a[o]=s[o]);var g=arguments.length-2;if(g===1)a.children=i;else if(1<g){for(var h=Array(g),j=0;j<g;j++)h[j]=arguments[j+2];a.children=h}if(e&&e.defaultProps)for(o in g=e.defaultProps,g)a[o]===void 0&&(a[o]=g[o]);return{$$typeof:l$1,type:e,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,i,o,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,a=a(d),e=o===""?"."+Q$1(d,0):o,I$1(a)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(a,s,i,"",function(j){return j})):a!=null&&(O$1(a)&&(a=N$1(a,i+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+e)),s.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(e))for(var g=0;g<e.length;g++){c=e[g];var h=o+Q$1(c,g);d+=R$1(c,s,i,h,a)}else if(h=A$1(e),typeof h=="function")for(e=h.call(e),g=0;!(c=e.next()).done;)c=c.value,h=o+Q$1(c,g++),d+=R$1(c,s,i,h,a);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,s,i){if(e==null)return e;var o=[],a=0;return R$1(e,o,"","",function(c){return s.call(i,c,a++)}),o}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$1({},e.props),a=e.key,c=e.ref,d=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,d=K$1.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(h in s)J.call(s,h)&&!L$1.hasOwnProperty(h)&&(o[h]=s[h]===void 0&&g!==void 0?g[h]:s[h])}var h=arguments.length-2;if(h===1)o.children=i;else if(1<h){g=Array(h);for(var j=0;j<h;j++)g[j]=arguments[j+2];o.children=g}return{$$typeof:l$1,type:e.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var o,a={},c=null,d=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(d=s.ref);for(o in s)m$1.call(s,o)&&!p$1.hasOwnProperty(o)&&(a[o]=s[o]);if(e&&e.defaultProps)for(o in s=e.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:k,type:e,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(_t,yt){var jt=_t.length;_t.push(yt);e:for(;0<jt;){var St=jt-1>>>1,At=_t[St];if(0<a(At,yt))_t[St]=yt,_t[jt]=At,jt=St;else break e}}function i(_t){return _t.length===0?null:_t[0]}function o(_t){if(_t.length===0)return null;var yt=_t[0],jt=_t.pop();if(jt!==yt){_t[0]=jt;e:for(var St=0,At=_t.length,mt=At>>>1;St<mt;){var ht=2*(St+1)-1,vt=_t[ht],Rt=ht+1,Pt=_t[Rt];if(0>a(vt,jt))Rt<At&&0>a(Pt,vt)?(_t[St]=Pt,_t[Rt]=jt,St=Rt):(_t[St]=vt,_t[ht]=jt,St=ht);else if(Rt<At&&0>a(Pt,jt))_t[St]=Pt,_t[Rt]=jt,St=Rt;else break e}}return yt}function a(_t,yt){var jt=_t.sortIndex-yt.sortIndex;return jt!==0?jt:_t.id-yt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var h=[],j=[],b=1,_=null,st=3,tt=!1,nt=!1,xt=!1,ut=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(_t){for(var yt=i(j);yt!==null;){if(yt.callback===null)o(j);else if(yt.startTime<=_t)o(j),yt.sortIndex=yt.expirationTime,s(h,yt);else break;yt=i(j)}}function it(_t){if(xt=!1,at(_t),!nt)if(i(h)!==null)nt=!0,Ft(et);else{var yt=i(j);yt!==null&&bt(it,yt.startTime-_t)}}function et(_t,yt){nt=!1,xt&&(xt=!1,_e(lt),lt=-1),tt=!0;var jt=st;try{for(at(yt),_=i(h);_!==null&&(!(_.expirationTime>yt)||_t&&!ct());){var St=_.callback;if(typeof St=="function"){_.callback=null,st=_.priorityLevel;var At=St(_.expirationTime<=yt);yt=e.unstable_now(),typeof At=="function"?_.callback=At:_===i(h)&&o(h),at(yt)}else o(h);_=i(h)}if(_!==null)var mt=!0;else{var ht=i(j);ht!==null&&bt(it,ht.startTime-yt),mt=!1}return mt}finally{_=null,st=jt,tt=!1}}var ot=!1,rt=null,lt=-1,ft=5,dt=-1;function ct(){return!(e.unstable_now()-dt<ft)}function Et(){if(rt!==null){var _t=e.unstable_now();dt=_t;var yt=!0;try{yt=rt(!0,_t)}finally{yt?gt():(ot=!1,rt=null)}}else ot=!1}var gt;if(typeof $=="function")gt=function(){$(Et)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,Dt=Lt.port2;Lt.port1.onmessage=Et,gt=function(){Dt.postMessage(null)}}else gt=function(){ut(Et,0)};function Ft(_t){rt=_t,ot||(ot=!0,gt())}function bt(_t,yt){lt=ut(function(){_t(e.unstable_now())},yt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_t){_t.callback=null},e.unstable_continueExecution=function(){nt||tt||(nt=!0,Ft(et))},e.unstable_forceFrameRate=function(_t){0>_t||125<_t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ft=0<_t?Math.floor(1e3/_t):5},e.unstable_getCurrentPriorityLevel=function(){return st},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(_t){switch(st){case 1:case 2:case 3:var yt=3;break;default:yt=st}var jt=st;st=yt;try{return _t()}finally{st=jt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_t,yt){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var jt=st;st=_t;try{return yt()}finally{st=jt}},e.unstable_scheduleCallback=function(_t,yt,jt){var St=e.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?St+jt:St):jt=St,_t){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=jt+At,_t={id:b++,callback:yt,priorityLevel:_t,startTime:jt,expirationTime:At,sortIndex:-1},jt>St?(_t.sortIndex=jt,s(j,_t),i(h)===null&&_t===i(j)&&(xt?(_e(lt),lt=-1):xt=!0,bt(it,jt-St))):(_t.sortIndex=At,s(h,_t),nt||tt||(nt=!0,Ft(et))),_t},e.unstable_shouldYield=ct,e.unstable_wrapCallback=function(_t){var yt=st;return function(){var jt=st;st=yt;try{return _t.apply(this,arguments)}finally{st=jt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,o){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,o){if(s===null||typeof s>"u"||pa(e,s,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,o,a,c,d){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,o){var a=z.hasOwnProperty(s)?z[s]:null;(a!==null?a.type!==0:o||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,a,o)&&(i=null),o||a===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):a.mustUseProperty?e[a.propertyName]=i===null?a.type===3?!1:"":i:(s=a.attributeName,o=a.attributeNamespace,i===null?e.removeAttribute(s):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,o?e.setAttributeNS(o,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var o=j}Reflect.construct(e,[],s)}else{try{s.call()}catch(j){o=j}e.call(s.prototype)}else{try{throw Error()}catch(j){o=j}e()}}catch(j){if(j&&o&&typeof j.stack=="string"){for(var a=j.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,g=c.length-1;1<=d&&0<=g&&a[d]!==c[g];)g--;for(;1<=d&&0<=g;d--,g--)if(a[d]!==c[g]){if(d!==1||g!==1)do if(d--,g--,0>g||a[d]!==c[g]){var h=`
`+a[d].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=d&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),o=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),o="";return e&&(o=Ta(e)?e.checked?"true":"false":e.value),e=o,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,o=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),o=s.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var o=s.type;if(!(o!=="submit"&&o!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,o){if(e=e.options,s){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=s.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,a=0;a<e.length;a++){if(e[a].value===i){e[a].selected=!0,o&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),o=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,o,a){MSApp.execUnsafeLocalFunction(function(){return e(s,i,o,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var o=i.indexOf("--")===0,a=rb(i,s[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,a):e[i]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var o=Db(i);if(o===null)return null;i=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,o,a,c,d,g,h){var j=Array.prototype.slice.call(arguments,3);try{s.apply(i,j)}catch(b){this.onError(b)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,o,a,c,d,g,h){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,o,a,c,d,g,h){if(Tb.apply(this,arguments),Ob){if(Ob){var j=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=j)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,o=s;;){var a=i.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){i=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===i)return Xb(a),e;if(c===o)return Xb(a),s;c=c.sibling}throw Error(p(188))}if(i.return!==o.return)i=a,o=c;else{for(var d=!1,g=a.child;g;){if(g===i){d=!0,i=a,o=c;break}if(g===o){d=!0,o=a,i=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===i){d=!0,i=c,o=a;break}if(g===o){d=!0,o=c,i=a;break}g=g.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==o)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var o=0,a=e.suspendedLanes,c=e.pingedLanes,d=i&268435455;if(d!==0){var g=d&~a;g!==0?o=tc(g):(c&=d,c!==0&&(o=tc(c)))}else d=i&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(s!==0&&s!==o&&!(s&a)&&(a=o&-o,c=s&-s,a>=c||a===16&&(c&4194240)!==0))return s;if(o&4&&(o|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=o;0<s;)i=31-oc(s),a=1<<i,o|=e[i],s&=~a;return o}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),g=1<<d,h=a[d];h===-1?(!(g&i)||g&o)&&(a[d]=vc(g,s)):h<=s&&(e.expiredLanes|=g),c&=~g}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var a=31-oc(i),c=1<<a;s[a]=0,o[a]=-1,e[a]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var o=31-oc(i),a=1<<o;a&s|e[o]&s&&(e[o]|=s),i&=~a}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,o,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=o,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Uc(e,s,i,o,a){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,o,a),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,o,a),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,o,a)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);wb=o,i.target.dispatchEvent(o),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(a){return ad(a,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var o=Kc[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)o=Qc[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function gd(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function fd(e,s,i,o){if(dd){var a=Yc(e,s,i,o);if(a===null)hd(e,s,o,id,i),Sc(e,o);else if(Uc(a,e,s,i,o))o.stopPropagation();else if(Sc(e,o),s&4&&-1<Rc.indexOf(e)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(e,s,i,o),c===null&&hd(e,s,o,id,i),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(e,s,o,null,i)}}var id=null;function Yc(e,s,i,o){if(id=null,e=xb(o),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(e=0;e<i&&s[e]===a[e];e++);var d=i-e;for(o=1;o<=d&&s[i-o]===a[c-o];o++);return md=a.slice(e,1<o?1-o:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,o,a,c,d){this._reactName=i,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(i=e[g],this[g]=i?i(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,o){Eb(o),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,o),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),o=Object.keys(s);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var a=i[o];if(!ja.call(s,a)||!He(e[a],s[a]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=s&&o>=s)return{node:i,offset:s-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,o=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(o!==null&&Ne(i)){if(s=o.start,e=o.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=i.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!e.extend&&c>o&&(a=o,o=c,c=a),a=Ke(i,c);var d=Ke(i,o);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),c>o?(e.addRange(s),e.extend(d.node,d.offset)):(s.setEnd(d.node,d.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:o}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var o=e.type||"unknown-event";e.currentTarget=i,Ub(o,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],a=o.event;o=o.listeners;e:{var c=void 0;if(s)for(var d=o.length-1;0<=d;d--){var g=o[d],h=g.instance,j=g.currentTarget;if(g=g.listener,h!==c&&a.isPropagationStopped())break e;nf(a,g,j),c=h}else for(d=0;d<o.length;d++){if(g=o[d],h=g.instance,j=g.currentTarget,g=g.listener,h!==c&&a.isPropagationStopped())break e;nf(a,g,j),c=h}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var o=e+"__bubble";i.has(o)||(pf(s,e,2,!1),i.add(o))}function qf(e,s,i){var o=0;s&&(o|=4),pf(i,e,o,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,o){switch(jd(s)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}i=a.bind(null,s,i,e),a=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),o?a!==void 0?e.addEventListener(s,i,{capture:!0,passive:a}):e.addEventListener(s,i,!0):a!==void 0?e.addEventListener(s,i,{passive:a}):e.addEventListener(s,i,!1)}function hd(e,s,i,o,a){var c=o;if(!(s&1)&&!(s&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var g=o.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var h=d.tag;if((h===3||h===4)&&(h=d.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;d=d.return}for(;g!==null;){if(d=Wc(g),d===null)return;if(h=d.tag,h===5||h===6){o=c=d;continue e}g=g.parentNode}}o=o.return}Jb(function(){var j=c,b=xb(i),_=[];e:{var st=df.get(e);if(st!==void 0){var tt=td,nt=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":tt=Rd;break;case"focusin":nt="focus",tt=Fd;break;case"focusout":nt="blur",tt=Fd;break;case"beforeblur":case"afterblur":tt=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Vd;break;case $e:case af:case bf:tt=Hd;break;case cf:tt=Xd;break;case"scroll":tt=vd;break;case"wheel":tt=Zd;break;case"copy":case"cut":case"paste":tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Td}var xt=(s&4)!==0,ut=!xt&&e==="scroll",_e=xt?st!==null?st+"Capture":null:st;xt=[];for(var $=j,at;$!==null;){at=$;var it=at.stateNode;if(at.tag===5&&it!==null&&(at=it,_e!==null&&(it=Kb($,_e),it!=null&&xt.push(tf($,it,at)))),ut)break;$=$.return}0<xt.length&&(st=new tt(st,nt,null,i,b),_.push({event:st,listeners:xt}))}}if(!(s&7)){e:{if(st=e==="mouseover"||e==="pointerover",tt=e==="mouseout"||e==="pointerout",st&&i!==wb&&(nt=i.relatedTarget||i.fromElement)&&(Wc(nt)||nt[uf]))break e;if((tt||st)&&(st=b.window===b?b:(st=b.ownerDocument)?st.defaultView||st.parentWindow:window,tt?(nt=i.relatedTarget||i.toElement,tt=j,nt=nt?Wc(nt):null,nt!==null&&(ut=Vb(nt),nt!==ut||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(tt=null,nt=j),tt!==nt)){if(xt=Bd,it="onMouseLeave",_e="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(xt=Td,it="onPointerLeave",_e="onPointerEnter",$="pointer"),ut=tt==null?st:ue(tt),at=nt==null?st:ue(nt),st=new xt(it,$+"leave",tt,i,b),st.target=ut,st.relatedTarget=at,it=null,Wc(b)===j&&(xt=new xt(_e,$+"enter",nt,i,b),xt.target=at,xt.relatedTarget=ut,it=xt),ut=it,tt&&nt)t:{for(xt=tt,_e=nt,$=0,at=xt;at;at=vf(at))$++;for(at=0,it=_e;it;it=vf(it))at++;for(;0<$-at;)xt=vf(xt),$--;for(;0<at-$;)_e=vf(_e),at--;for(;$--;){if(xt===_e||_e!==null&&xt===_e.alternate)break t;xt=vf(xt),_e=vf(_e)}xt=null}else xt=null;tt!==null&&wf(_,st,tt,xt,!1),nt!==null&&ut!==null&&wf(_,ut,nt,xt,!0)}}e:{if(st=j?ue(j):window,tt=st.nodeName&&st.nodeName.toLowerCase(),tt==="select"||tt==="input"&&st.type==="file")var et=ve;else if(me(st))if(we)et=Fe;else{et=De;var ot=Ce}else(tt=st.nodeName)&&tt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(et=Ee);if(et&&(et=et(e,j))){ne(_,et,i,b);break e}ot&&ot(e,st,j),e==="focusout"&&(ot=st._wrapperState)&&ot.controlled&&st.type==="number"&&cb(st,"number",st.value)}switch(ot=j?ue(j):window,e){case"focusin":(me(ot)||ot.contentEditable==="true")&&(Qe=ot,Re=j,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_,i,b);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_,i,b)}var rt;if(ae)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ie?ge(e,i)&&(lt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(lt="onCompositionStart");lt&&(de&&i.locale!=="ko"&&(ie||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ie&&(rt=nd()):(kd=b,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ot=oe(j,lt),0<ot.length&&(lt=new Ld(lt,e,null,i,b),_.push({event:lt,listeners:ot}),rt?lt.data=rt:(rt=he(i),rt!==null&&(lt.data=rt)))),(rt=ce?je(e,i):ke(e,i))&&(j=oe(j,"onBeforeInput"),0<j.length&&(b=new Ld("onBeforeInput","beforeinput",null,i,b),_.push({event:b,listeners:j}),b.data=rt))}se(_,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",o=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(e,i),c!=null&&o.unshift(tf(e,c,a)),c=Kb(e,s),c!=null&&o.push(tf(e,c,a))),e=e.return}return o}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,o,a){for(var c=s._reactName,d=[];i!==null&&i!==o;){var g=i,h=g.alternate,j=g.stateNode;if(h!==null&&h===o)break;g.tag===5&&j!==null&&(g=j,a?(h=Kb(i,c),h!=null&&d.unshift(tf(i,h,g))):a||(h=Kb(i,c),h!=null&&d.push(tf(i,h,g)))),i=i.return}d.length!==0&&e.push({event:s,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,o=0;do{var a=i.nextSibling;if(e.removeChild(i),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(o===0){e.removeChild(a),bd(s);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=a}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===s)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in i)a[c]=s[c];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var o=e.stateNode;if(s=s.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var a in o)if(!(a in s))throw Error(p(108,Ra(e)||"Unknown",a));return A({},i,o)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var o=e.stateNode;if(!o)throw Error(p(169));i?(e=bg(e,s,Xf),o.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),a}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var o=rg;e=sg;var a=32-oc(o)-1;o&=~(1<<a),i+=1;var c=32-oc(s)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(s)+a|i<<a|o,sg=c+e}else rg=1<<c|i<<a|o,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var o=xg;s&&Cg(e,s)?Ag(o,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var o=i.stateNode}if(!o)throw Error(p(147,e));var a=o,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(d){var g=a.refs;d===null?delete g[c]:g[c]=d},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(_e,$){if(e){var at=_e.deletions;at===null?(_e.deletions=[$],_e.flags|=16):at.push($)}}function i(_e,$){if(!e)return null;for(;$!==null;)s(_e,$),$=$.sibling;return null}function o(_e,$){for(_e=new Map;$!==null;)$.key!==null?_e.set($.key,$):_e.set($.index,$),$=$.sibling;return _e}function a(_e,$){return _e=Pg(_e,$),_e.index=0,_e.sibling=null,_e}function c(_e,$,at){return _e.index=at,e?(at=_e.alternate,at!==null?(at=at.index,at<$?(_e.flags|=2,$):at):(_e.flags|=2,$)):(_e.flags|=1048576,$)}function d(_e){return e&&_e.alternate===null&&(_e.flags|=2),_e}function g(_e,$,at,it){return $===null||$.tag!==6?($=Qg(at,_e.mode,it),$.return=_e,$):($=a($,at),$.return=_e,$)}function h(_e,$,at,it){var et=at.type;return et===ya?b(_e,$,at.props.children,it,at.key):$!==null&&($.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ha&&Ng(et)===$.type)?(it=a($,at.props),it.ref=Lg(_e,$,at),it.return=_e,it):(it=Rg(at.type,at.key,at.props,null,_e.mode,it),it.ref=Lg(_e,$,at),it.return=_e,it)}function j(_e,$,at,it){return $===null||$.tag!==4||$.stateNode.containerInfo!==at.containerInfo||$.stateNode.implementation!==at.implementation?($=Sg(at,_e.mode,it),$.return=_e,$):($=a($,at.children||[]),$.return=_e,$)}function b(_e,$,at,it,et){return $===null||$.tag!==7?($=Tg(at,_e.mode,it,et),$.return=_e,$):($=a($,at),$.return=_e,$)}function _(_e,$,at){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Qg(""+$,_e.mode,at),$.return=_e,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case va:return at=Rg($.type,$.key,$.props,null,_e.mode,at),at.ref=Lg(_e,null,$),at.return=_e,at;case wa:return $=Sg($,_e.mode,at),$.return=_e,$;case Ha:var it=$._init;return _(_e,it($._payload),at)}if(eb($)||Ka($))return $=Tg($,_e.mode,at,null),$.return=_e,$;Mg(_e,$)}return null}function st(_e,$,at,it){var et=$!==null?$.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return et!==null?null:g(_e,$,""+at,it);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===et?h(_e,$,at,it):null;case wa:return at.key===et?j(_e,$,at,it):null;case Ha:return et=at._init,st(_e,$,et(at._payload),it)}if(eb(at)||Ka(at))return et!==null?null:b(_e,$,at,it,null);Mg(_e,at)}return null}function tt(_e,$,at,it,et){if(typeof it=="string"&&it!==""||typeof it=="number")return _e=_e.get(at)||null,g($,_e,""+it,et);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return _e=_e.get(it.key===null?at:it.key)||null,h($,_e,it,et);case wa:return _e=_e.get(it.key===null?at:it.key)||null,j($,_e,it,et);case Ha:var ot=it._init;return tt(_e,$,at,ot(it._payload),et)}if(eb(it)||Ka(it))return _e=_e.get(at)||null,b($,_e,it,et,null);Mg($,it)}return null}function nt(_e,$,at,it){for(var et=null,ot=null,rt=$,lt=$=0,ft=null;rt!==null&&lt<at.length;lt++){rt.index>lt?(ft=rt,rt=null):ft=rt.sibling;var dt=st(_e,rt,at[lt],it);if(dt===null){rt===null&&(rt=ft);break}e&&rt&&dt.alternate===null&&s(_e,rt),$=c(dt,$,lt),ot===null?et=dt:ot.sibling=dt,ot=dt,rt=ft}if(lt===at.length)return i(_e,rt),I&&tg(_e,lt),et;if(rt===null){for(;lt<at.length;lt++)rt=_(_e,at[lt],it),rt!==null&&($=c(rt,$,lt),ot===null?et=rt:ot.sibling=rt,ot=rt);return I&&tg(_e,lt),et}for(rt=o(_e,rt);lt<at.length;lt++)ft=tt(rt,_e,lt,at[lt],it),ft!==null&&(e&&ft.alternate!==null&&rt.delete(ft.key===null?lt:ft.key),$=c(ft,$,lt),ot===null?et=ft:ot.sibling=ft,ot=ft);return e&&rt.forEach(function(ct){return s(_e,ct)}),I&&tg(_e,lt),et}function xt(_e,$,at,it){var et=Ka(at);if(typeof et!="function")throw Error(p(150));if(at=et.call(at),at==null)throw Error(p(151));for(var ot=et=null,rt=$,lt=$=0,ft=null,dt=at.next();rt!==null&&!dt.done;lt++,dt=at.next()){rt.index>lt?(ft=rt,rt=null):ft=rt.sibling;var ct=st(_e,rt,dt.value,it);if(ct===null){rt===null&&(rt=ft);break}e&&rt&&ct.alternate===null&&s(_e,rt),$=c(ct,$,lt),ot===null?et=ct:ot.sibling=ct,ot=ct,rt=ft}if(dt.done)return i(_e,rt),I&&tg(_e,lt),et;if(rt===null){for(;!dt.done;lt++,dt=at.next())dt=_(_e,dt.value,it),dt!==null&&($=c(dt,$,lt),ot===null?et=dt:ot.sibling=dt,ot=dt);return I&&tg(_e,lt),et}for(rt=o(_e,rt);!dt.done;lt++,dt=at.next())dt=tt(rt,_e,lt,dt.value,it),dt!==null&&(e&&dt.alternate!==null&&rt.delete(dt.key===null?lt:dt.key),$=c(dt,$,lt),ot===null?et=dt:ot.sibling=dt,ot=dt);return e&&rt.forEach(function(Et){return s(_e,Et)}),I&&tg(_e,lt),et}function ut(_e,$,at,it){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var et=at.key,ot=$;ot!==null;){if(ot.key===et){if(et=at.type,et===ya){if(ot.tag===7){i(_e,ot.sibling),$=a(ot,at.props.children),$.return=_e,_e=$;break e}}else if(ot.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===Ha&&Ng(et)===ot.type){i(_e,ot.sibling),$=a(ot,at.props),$.ref=Lg(_e,ot,at),$.return=_e,_e=$;break e}i(_e,ot);break}else s(_e,ot);ot=ot.sibling}at.type===ya?($=Tg(at.props.children,_e.mode,it,at.key),$.return=_e,_e=$):(it=Rg(at.type,at.key,at.props,null,_e.mode,it),it.ref=Lg(_e,$,at),it.return=_e,_e=it)}return d(_e);case wa:e:{for(ot=at.key;$!==null;){if($.key===ot)if($.tag===4&&$.stateNode.containerInfo===at.containerInfo&&$.stateNode.implementation===at.implementation){i(_e,$.sibling),$=a($,at.children||[]),$.return=_e,_e=$;break e}else{i(_e,$);break}else s(_e,$);$=$.sibling}$=Sg(at,_e.mode,it),$.return=_e,_e=$}return d(_e);case Ha:return ot=at._init,ut(_e,$,ot(at._payload),it)}if(eb(at))return nt(_e,$,at,it);if(Ka(at))return xt(_e,$,at,it);Mg(_e,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,$!==null&&$.tag===6?(i(_e,$.sibling),$=a($,at),$.return=_e,_e=$):(i(_e,$),$=Qg(at,_e.mode,it),$.return=_e,_e=$),d(_e)):i(_e,$)}return ut}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),e===i)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,i,o){var a=s.interleaved;return a===null?(i.next=i,gh(s)):(i.next=a.next,a.next=i),s.interleaved=i,ih(e,o)}function ih(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),o.pending=s,ih(e,i)}return a=o.interleaved,a===null?(s.next=s,gh(o)):(s.next=a.next,a.next=s),o.interleaved=s,ih(e,i)}function oh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}function ph(e,s){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var a=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?a=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?a=c=s:c=c.next=s}else a=c=s;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function qh(e,s,i,o){var a=e.updateQueue;jh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var h=g,j=h.next;h.next=null,d===null?c=j:d.next=j,d=h;var b=e.alternate;b!==null&&(b=b.updateQueue,g=b.lastBaseUpdate,g!==d&&(g===null?b.firstBaseUpdate=j:g.next=j,b.lastBaseUpdate=h))}if(c!==null){var _=a.baseState;d=0,b=j=h=null,g=c;do{var st=g.lane,tt=g.eventTime;if((o&st)===st){b!==null&&(b=b.next={eventTime:tt,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var nt=e,xt=g;switch(st=s,tt=i,xt.tag){case 1:if(nt=xt.payload,typeof nt=="function"){_=nt.call(tt,_,st);break e}_=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=xt.payload,st=typeof nt=="function"?nt.call(tt,_,st):nt,st==null)break e;_=A({},_,st);break e;case 2:jh=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,st=a.effects,st===null?a.effects=[g]:st.push(g))}else tt={eventTime:tt,lane:st,tag:g.tag,payload:g.payload,callback:g.callback,next:null},b===null?(j=b=tt,h=_):b=b.next=tt,d|=st;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;st=g,g=st.next,st.next=null,a.lastBaseUpdate=st,a.shared.pending=null}}while(!0);if(b===null&&(h=_),a.baseState=h,a.firstBaseUpdate=j,a.lastBaseUpdate=b,s=a.shared.interleaved,s!==null){a=s;do d|=a.lane,a=a.next;while(a!==s)}else c===null&&(a.shared.lanes=0);rh|=d,e.lanes=d,e.memoizedState=_}}function sh(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var o=e[s],a=o.callback;if(a!==null){if(o.callback=null,o=i,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),i=lb(s,e.type);s!==i&&(G(vh,e),G(uh,i))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Nh(e,s,i,o,a,c){if(Hh=c,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=i(o,a),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=i(o,a)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=N,a=o.baseQueue,c=i.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,i.pending=null}if(a!==null){c=a.next,o=o.baseState;var g=d=null,h=null,j=c;do{var b=j.lane;if((Hh&b)===b)h!==null&&(h=h.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),o=j.hasEagerState?j.eagerState:e(o,j.action);else{var _={lane:b,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};h===null?(g=h=_,d=o):h=h.next=_,M.lanes|=b,rh|=b}j=j.next}while(j!==null&&j!==c);h===null?d=o:h.next=g,He(o,s.memoizedState)||(dh=!0),s.memoizedState=o,s.baseState=d,s.baseQueue=h,i.lastRenderedState=o}if(e=i.interleaved,e!==null){a=e;do c=a.lane,M.lanes|=c,rh|=c,a=a.next;while(a!==e)}else a===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,c=s.memoizedState;if(a!==null){i.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);He(c,s.memoizedState)||(dh=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,o]}function Yh(){}function Zh(e,s){var i=M,o=Uh(),a=s(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,dh=!0),o=o.queue,$h(ai.bind(null,i,o,e),[e]),o.getSnapshot!==s||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,o,a,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,s,a)}return a}function di(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function ci(e,s,i,o){s.value=i,s.getSnapshot=o,ei(s)&&fi(e)}function ai(e,s,i){return i(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,i,o){return e={tag:e,create:s,destroy:i,deps:o,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,i,o){var a=Th();M.flags|=e,a.memoizedState=bi(1|s,i,void 0,o===void 0?null:o)}function li(e,s,i,o){var a=Uh();o=o===void 0?null:o;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,o!==null&&Mh(o,d.deps)){a.memoizedState=bi(s,i,c,o);return}}M.flags|=e,a.memoizedState=bi(1|s,i,c,o)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,i){return i=i!=null?i.concat([e]):null,li(4,4,pi.bind(null,s,e),i)}function ri(){}function si(e,s){var i=Uh();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Mh(s,o[1])?o[0]:(i.memoizedState=[e,s],e)}function ti(e,s){var i=Uh();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Mh(s,o[1])?o[0]:(e=e(),i.memoizedState=[e,s],e)}function ui(e,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=i)}function vi(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var o=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=i,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(e,s,i){var o=yi(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,i);else if(i=hh(e,s,i,o),i!==null){var a=R();gi(i,e,o,a),Bi(i,s,o)}}function ii(e,s,i){var o=yi(e),a={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var d=s.lastRenderedState,g=c(d,i);if(a.hasEagerState=!0,a.eagerState=g,He(g,d)){var h=s.interleaved;h===null?(a.next=a,gh(s)):(a.next=h.next,h.next=a),s.interleaved=a;return}}catch{}finally{}i=hh(e,s,a,o),i!==null&&(a=R(),gi(i,e,o,a),Bi(i,s,o))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Bi(e,s,i){if(i&4194240){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var i=Th();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var o=Th();return s=i!==void 0?i(s):s,o.memoizedState=o.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=xi.bind(null,M,e),[o.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var o=M,a=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),Q===null)throw Error(p(349));Hh&30||di(o,s,i)}a.memoizedState=i;var c={value:i,getSnapshot:s};return a.queue=c,mi(ai.bind(null,o,c,e),[e]),o.flags|=2048,bi(9,ci.bind(null,o,c,i,s),void 0,null),i},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var i=sg,o=rg;i=(o&~(1<<32-oc(o)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}function Di(e,s,i,o){s=e.memoizedState,i=i(o,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var o=R(),a=yi(e),c=mh(o,a);c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,a),s!==null&&(gi(s,e,a,o),oh(s,e,a))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var o=R(),a=yi(e),c=mh(o,a);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,a),s!==null&&(gi(s,e,a,o),oh(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=R(),o=yi(e),a=mh(i,o);a.tag=2,s!=null&&(a.callback=s),s=nh(e,a,o),s!==null&&(gi(s,e,o,i),oh(s,e,o))}};function Fi(e,s,i,o,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,c,d):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,o)||!Ie(a,c):!0}function Gi(e,s,i){var o=!1,a=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=eh(c):(a=Zf(s)?Xf:H.current,o=s.contextTypes,c=(o=o!=null)?Yf(e,a):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),s}function Hi(e,s,i,o){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,o),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,i,o){var a=e.stateNode;a.props=i,a.state=e.memoizedState,a.refs={},kh(e);var c=s.contextType;typeof c=="object"&&c!==null?a.context=eh(c):(c=Zf(s)?Xf:H.current,a.context=Yf(e,c)),a.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Di(e,s,c,i),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Ei.enqueueReplaceState(a,a.state,null),qh(e,i,a,o),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var i="",o=s;do i+=Pa(o),o=o.return;while(o);var a=i}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:a,digest:null}}function Ki(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var o=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=o),Li(e,s)},i}function Qi(e,s,i){i=mh(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var a=s.value;i.payload=function(){return o(a)},i.callback=function(){Li(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(e,s),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=s.stack;this.componentDidCatch(s.value,{componentStack:d!==null?d:""})}),i}function Si(e,s,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Mi;var a=new Set;o.set(s,a)}else a=o.get(s),a===void 0&&(a=new Set,o.set(s,a));a.has(i)||(a.add(i),e=Ti.bind(null,e,s,i),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,i,o,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,i,o){s.child=e===null?Vg(s,null,i,o):Ug(s,e.child,i,o)}function Yi(e,s,i,o,a){i=i.render;var c=s.ref;return ch(s,a),o=Nh(e,s,i,o,c,a),i=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Zi(e,s,a)):(I&&i&&vg(s),s.flags|=1,Xi(e,s,o,a),s.child)}function $i(e,s,i,o,a){if(e===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,bj(e,s,c,o,a)):(e=Rg(i.type,null,o,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,o)&&e.ref===s.ref)return Zi(e,s,a)}return s.flags|=1,e=Pg(c,o),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,i,o,a){if(e!==null){var c=e.memoizedProps;if(Ie(c,o)&&e.ref===s.ref)if(dh=!1,s.pendingProps=o=c,(e.lanes&a)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,a)}return cj(e,s,i,o,a)}function dj(e,s,i){var o=s.pendingProps,a=o.children,c=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:i,G(ej,fj),fj|=o}else c!==null?(o=c.baseLanes|i,s.memoizedState=null):o=i,G(ej,fj),fj|=o;return Xi(e,s,a,i),s.child}function gj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,i,o,a){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),ch(s,a),i=Nh(e,s,i,o,c,a),o=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Zi(e,s,a)):(I&&o&&vg(s),s.flags|=1,Xi(e,s,i,a),s.child)}function hj(e,s,i,o,a){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(ch(s,a),s.stateNode===null)ij(e,s),Gi(s,i,o),Ii(s,i,o,a),o=!0;else if(e===null){var d=s.stateNode,g=s.memoizedProps;d.props=g;var h=d.context,j=i.contextType;typeof j=="object"&&j!==null?j=eh(j):(j=Zf(i)?Xf:H.current,j=Yf(s,j));var b=i.getDerivedStateFromProps,_=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function";_||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==o||h!==j)&&Hi(s,d,o,j),jh=!1;var st=s.memoizedState;d.state=st,qh(s,o,d,a),h=s.memoizedState,g!==o||st!==h||Wf.current||jh?(typeof b=="function"&&(Di(s,i,b,o),h=s.memoizedState),(g=jh||Fi(s,i,g,o,st,h,j))?(_||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=h),d.props=o,d.state=h,d.context=j,o=g):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{d=s.stateNode,lh(e,s),g=s.memoizedProps,j=s.type===s.elementType?g:Ci(s.type,g),d.props=j,_=s.pendingProps,st=d.context,h=i.contextType,typeof h=="object"&&h!==null?h=eh(h):(h=Zf(i)?Xf:H.current,h=Yf(s,h));var tt=i.getDerivedStateFromProps;(b=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==_||st!==h)&&Hi(s,d,o,h),jh=!1,st=s.memoizedState,d.state=st,qh(s,o,d,a);var nt=s.memoizedState;g!==_||st!==nt||Wf.current||jh?(typeof tt=="function"&&(Di(s,i,tt,o),nt=s.memoizedState),(j=jh||Fi(s,i,j,o,st,nt,h)||!1)?(b||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,nt,h),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,nt,h)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&st===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&st===e.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=nt),d.props=o,d.state=nt,d.context=h,o=j):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&st===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&st===e.memoizedState||(s.flags|=1024),o=!1)}return jj(e,s,i,o,c,a)}function jj(e,s,i,o,a,c){gj(e,s);var d=(s.flags&128)!==0;if(!o&&!d)return a&&dg(s,i,!1),Zi(e,s,c);o=s.stateNode,Wi.current=s;var g=d&&typeof i.getDerivedStateFromError!="function"?null:o.render();return s.flags|=1,e!==null&&d?(s.child=Ug(s,e.child,null,c),s.child=Ug(s,null,g,c)):Xi(e,s,g,c),s.memoizedState=o.state,a&&dg(s,i,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,i,o,a){return Ig(),Jg(a),s.flags|=256,Xi(e,s,i,o),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,i){var o=s.pendingProps,a=L.current,c=!1,d=(s.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),G(L,a&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(d=o.children,e=o.fallback,c?(o=s.mode,c=s.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,o,0,null),e=Tg(e,o,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=nj(i),s.memoizedState=mj,e):qj(s,d));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return rj(e,s,d,o,g,a,i);if(c){c=o.fallback,d=s.mode,a=e.child,g=a.sibling;var h={mode:"hidden",children:o.children};return!(d&1)&&s.child!==a?(o=s.child,o.childLanes=0,o.pendingProps=h,s.deletions=null):(o=Pg(a,h),o.subtreeFlags=a.subtreeFlags&14680064),g!==null?c=Pg(g,c):(c=Tg(c,d,i,null),c.flags|=2),c.return=s,o.return=s,o.sibling=c,s.child=o,o=c,c=s.child,d=e.child.memoizedState,d=d===null?nj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~i,s.memoizedState=mj,o}return c=e.child,e=c.sibling,o=Pg(c,{mode:"visible",children:o.children}),!(s.mode&1)&&(o.lanes=i),o.return=s,o.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=o,s.memoizedState=null,o}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,i,o){return o!==null&&Jg(o),Ug(s,e.child,null,i),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,i,o,a,c,d){if(i)return s.flags&256?(s.flags&=-257,o=Ki(Error(p(422))),sj(e,s,d,o)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=o.fallback,a=s.mode,o=pj({mode:"visible",children:o.children},a,0,null),c=Tg(c,a,d,null),c.flags|=2,o.return=s,c.return=s,o.sibling=c,s.child=o,s.mode&1&&Ug(s,e.child,null,d),s.child.memoizedState=nj(d),s.memoizedState=mj,c);if(!(s.mode&1))return sj(e,s,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var g=o.dgst;return o=g,c=Error(p(419)),o=Ki(c,o,void 0),sj(e,s,d,o)}if(g=(d&e.childLanes)!==0,dh||g){if(o=Q,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ih(e,a),gi(o,e,a,-1))}return tj(),o=Ki(Error(p(421))),sj(e,s,d,o)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),a._reactRetry=s,null):(e=c.treeContext,yg=Lf(a.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,o.children),s.flags|=4096,s)}function vj(e,s,i){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s),bh(e.return,s,i)}function wj(e,s,i,o,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=i,c.tailMode=a)}function xj(e,s,i){var o=s.pendingProps,a=o.revealOrder,c=o.tail;if(Xi(e,s,o.children,i),o=L.current,o&2)o=o&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,i,s);else if(e.tag===19)vj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G(L,o),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(i=s.child,a=null;i!==null;)e=i.alternate,e!==null&&Ch(e)===null&&(a=i),i=i.sibling;i=a,i===null?(a=s.child,s.child=null):(a=i.sibling,i.sibling=null),wj(s,!1,a,i,c);break;case"backwards":for(i=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ch(e)===null){s.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}wj(s,!0,i,null,c);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=Pg(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pg(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(e,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var o=s.type._context,a=s.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=a;break;case 13:if(o=s.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(e,s,i):(G(L,L.current&1),e=Zi(e,s,i),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(o=(i&s.childLanes)!==0,e.flags&128){if(o)return xj(e,s,i);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,i)}return Zi(e,s,i)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(e,s,i,o){var a=e.memoizedProps;if(a!==o){e=s.stateNode,xh(uh.current);var c=null;switch(i){case"input":a=Ya(e,a),o=Ya(e,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(e,a),o=gb(e,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf)}ub(i,o);var d;i=null;for(j in a)if(!o.hasOwnProperty(j)&&a.hasOwnProperty(j)&&a[j]!=null)if(j==="style"){var g=a[j];for(d in g)g.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?c||(c=[]):(c=c||[]).push(j,null));for(j in o){var h=o[j];if(g=a!=null?a[j]:void 0,o.hasOwnProperty(j)&&h!==g&&(h!=null||g!=null))if(j==="style")if(g){for(d in g)!g.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in h)h.hasOwnProperty(d)&&g[d]!==h[d]&&(i||(i={}),i[d]=h[d])}else i||(c||(c=[]),c.push(j,i)),i=h;else j==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,g=g?g.__html:void 0,h!=null&&g!==h&&(c=c||[]).push(j,h)):j==="children"?typeof h!="string"&&typeof h!="number"||(c=c||[]).push(j,""+h):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea.hasOwnProperty(j)?(h!=null&&j==="onScroll"&&D("scroll",e),c||g===h||(c=[])):(c=c||[]).push(j,h))}i&&(c=c||[]).push("style",i);var j=c;(s.updateQueue=j)&&(s.flags|=4)}};Cj=function(e,s,i,o){i!==o&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(s)for(var a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=i,s}function Ej(e,s,i){var o=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return o=s.stateNode,zh(),E(Wf),E(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var a=xh(wh.current);if(i=s.type,e!==null&&s.stateNode!=null)Bj(e,s,i,o,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!o){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){o=s.stateNode,i=s.type;var c=s.memoizedProps;switch(o[Of]=s,o[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,c),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D("invalid",o);break;case"textarea":hb(o,c),D("invalid",o)}ub(i,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var g=c[d];d==="children"?typeof g=="string"?o.textContent!==g&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,g,e),a=["children",g]):typeof g=="number"&&o.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,g,e),a=["children",""+g]):ea.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",o)}switch(i){case"input":Va(o),db(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,s.updateQueue=o,o!==null&&(s.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=d.createElement(i,{is:o.is}):(e=d.createElement(i),i==="select"&&(d=e,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):e=d.createElementNS(e,i),e[Of]=s,e[Pf]=o,zj(e,s,!1,!1),s.stateNode=e;e:{switch(d=vb(i,o),i){case"dialog":D("cancel",e),D("close",e),a=o;break;case"iframe":case"object":case"embed":D("load",e),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],e);a=o;break;case"source":D("error",e),a=o;break;case"img":case"image":case"link":D("error",e),D("load",e),a=o;break;case"details":D("toggle",e),a=o;break;case"input":Za(e,o),a=Ya(e,o),D("invalid",e);break;case"option":a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,o),a=gb(e,o),D("invalid",e);break;default:a=o}ub(i,a),g=a;for(c in g)if(g.hasOwnProperty(c)){var h=g[c];c==="style"?sb(e,h):c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&nb(e,h)):c==="children"?typeof h=="string"?(i!=="textarea"||h!=="")&&ob(e,h):typeof h=="number"&&ob(e,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?h!=null&&c==="onScroll"&&D("scroll",e):h!=null&&ta(e,c,h,d))}switch(i){case"input":Va(e),db(e,o,!1);break;case"textarea":Va(e),jb(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa(o.value));break;case"select":e.multiple=!!o.multiple,c=o.value,c!=null?fb(e,!!o.multiple,c,!1):o.defaultValue!=null&&fb(e,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,o);else{if(typeof o!="string"&&s.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(o=s.stateNode,i=s.memoizedProps,o[Of]=s,(c=o.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Of]=s,s.stateNode=o}return S(s),null;case 13:if(E(L),o=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),c=s.memoizedState,c===null)return S(s),null;if(o=(s.flags&128)!==0,d=c.rendering,d===null)if(o)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(d=Ch(e),d!==null){for(s.flags|=128,Dj(c,!1),o=d.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),s.subtreeFlags=0,o=i,i=s.child;i!==null;)c=i,e=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Gj&&(s.flags|=128,o=!0,Dj(c,!1),s.lanes=4194304)}else{if(!o)if(e=Ch(d),e!==null){if(s.flags|=128,o=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,o=!0,Dj(c,!1),s.lanes=4194304);c.isBackwards?(d.sibling=s.child,s.child=d):(i=c.last,i!==null?i.sibling=d:s.child=d,c.last=d)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,o?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),o=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(s.flags|=8192),o&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){W(e,s,o)}else i.current=null}function Mj(e,s,i){try{i()}catch(o){W(e,s,o)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,g=-1,h=-1,j=0,b=0,_=e,st=null;t:for(;;){for(var tt;_!==i||a!==0&&_.nodeType!==3||(g=d+a),_!==c||o!==0&&_.nodeType!==3||(h=d+o),_.nodeType===3&&(d+=_.nodeValue.length),(tt=_.firstChild)!==null;)st=_,_=tt;for(;;){if(_===e)break t;if(st===i&&++j===a&&(g=d),st===c&&++b===o&&(h=d),(tt=_.nextSibling)!==null)break;_=st,st=_.parentNode}_=tt}i=g===-1||h===-1?null:{start:g,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var nt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var xt=nt.memoizedProps,ut=nt.memoizedState,_e=s.stateNode,$=_e.getSnapshotBeforeUpdate(s.elementType===s.type?xt:Ci(s.type,xt),ut);_e.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var at=s.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(it){W(s,s.return,it)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return nt=Nj,Nj=!1,nt}function Pj(e,s,i){var o=s.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&Mj(s,i,c)}a=a.next}while(a!==o)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==s)}}function Rj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(o!==4&&(e=e.child,e!==null))for(Vj(e,s,i),e=e.sibling;e!==null;)Vj(e,s,i),e=e.sibling}function Wj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}var X=null,Xj=!1;function Yj(e,s,i){for(i=i.child;i!==null;)Zj(e,s,i),i=i.sibling}function Zj(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var o=X,a=Xj;X=null,Yj(e,s,i),X=o,Xj=a,X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X,i.stateNode));break;case 4:o=X,a=Xj,X=i.stateNode.containerInfo,Xj=!0,Yj(e,s,i),X=o,Xj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(i,s,d),a=a.next}while(a!==o)}Yj(e,s,i);break;case 1:if(!U&&(Lj(i,s),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(g){W(i,s,g)}Yj(e,s,i);break;case 21:Yj(e,s,i);break;case 22:i.mode&1?(U=(o=U)||i.memoizedState!==null,Yj(e,s,i),U=o):Yj(e,s,i);break;default:Yj(e,s,i)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Kj),s.forEach(function(o){var a=bk.bind(null,e,o);i.has(o)||(i.add(o),o.then(a,a))})}}function ck(e,s){var i=s.deletions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];try{var c=e,d=s,g=d;e:for(;g!==null;){switch(g.tag){case 5:X=g.stateNode,Xj=!1;break e;case 3:X=g.stateNode.containerInfo,Xj=!0;break e;case 4:X=g.stateNode.containerInfo,Xj=!0;break e}g=g.return}if(X===null)throw Error(p(160));Zj(c,d,a),X=null,Xj=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(j){W(a,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),o&4){try{Pj(3,e,e.return),Qj(3,e)}catch(xt){W(e,e.return,xt)}try{Pj(5,e,e.return)}catch(xt){W(e,e.return,xt)}}break;case 1:ck(s,e),ek(e),o&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,e),ek(e),o&512&&i!==null&&Lj(i,i.return),e.flags&32){var a=e.stateNode;try{ob(a,"")}catch(xt){W(e,e.return,xt)}}if(o&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=i!==null?i.memoizedProps:c,g=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(g,d);var j=vb(g,c);for(d=0;d<h.length;d+=2){var b=h[d],_=h[d+1];b==="style"?sb(a,_):b==="dangerouslySetInnerHTML"?nb(a,_):b==="children"?ob(a,_):ta(a,b,_,j)}switch(g){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var st=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var tt=c.value;tt!=null?fb(a,!!c.multiple,tt,!1):st!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(xt){W(e,e.return,xt)}}break;case 6:if(ck(s,e),ek(e),o&4){if(e.stateNode===null)throw Error(p(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(xt){W(e,e.return,xt)}}break;case 3:if(ck(s,e),ek(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(xt){W(e,e.return,xt)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(fk=B())),o&4&&ak(e);break;case 22:if(b=i!==null&&i.memoizedState!==null,e.mode&1?(U=(j=U)||b,ck(s,e),U=j):ck(s,e),ek(e),o&8192){if(j=e.memoizedState!==null,(e.stateNode.isHidden=j)&&!b&&e.mode&1)for(V=e,b=e.child;b!==null;){for(_=V=b;V!==null;){switch(st=V,tt=st.child,st.tag){case 0:case 11:case 14:case 15:Pj(4,st,st.return);break;case 1:Lj(st,st.return);var nt=st.stateNode;if(typeof nt.componentWillUnmount=="function"){o=st,i=st.return;try{s=o,nt.props=s.memoizedProps,nt.state=s.memoizedState,nt.componentWillUnmount()}catch(xt){W(o,i,xt)}}break;case 5:Lj(st,st.return);break;case 22:if(st.memoizedState!==null){gk(_);continue}}tt!==null?(tt.return=st,V=tt):gk(_)}b=b.sibling}e:for(b=null,_=e;;){if(_.tag===5){if(b===null){b=_;try{a=_.stateNode,j?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=_.stateNode,h=_.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null,g.style.display=rb("display",d))}catch(xt){W(e,e.return,xt)}}}else if(_.tag===6){if(b===null)try{_.stateNode.nodeValue=j?"":_.memoizedProps}catch(xt){W(e,e.return,xt)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;b===_&&(b=null),_=_.return}b===_&&(b=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ck(s,e),ek(e),o&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Tj(i)){var o=i;break e}i=i.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Uj(e);Wj(e,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,g=Uj(e);Vj(e,g,d);break;default:throw Error(p(161))}}catch(h){W(e,e.return,h)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,i){V=e,ik(e)}function ik(e,s,i){for(var o=(e.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Jj;if(!d){var g=a.alternate,h=g!==null&&g.memoizedState!==null||U;g=Jj;var j=U;if(Jj=d,(U=h)&&!j)for(V=a;V!==null;)d=V,h=d.child,d.tag===22&&d.memoizedState!==null?jk(a):h!==null?(h.return=d,V=h):jk(a);for(;c!==null;)V=c,ik(c),c=c.sibling;V=a,Jj=g,U=j}kk(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var o=s.stateNode;if(s.flags&4&&!U)if(i===null)o.componentDidMount();else{var a=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);o.componentDidUpdate(a,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&sh(s,c,o);break;case 3:var d=s.updateQueue;if(d!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,d,i)}break;case 5:var g=s.stateNode;if(i===null&&s.flags&4){i=g;var h=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var b=j.memoizedState;if(b!==null){var _=b.dehydrated;_!==null&&bd(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch(st){W(s,s.return,st)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(h){W(s,i,h)}break;case 1:var o=s.stateNode;if(typeof o.componentDidMount=="function"){var a=s.return;try{o.componentDidMount()}catch(h){W(s,a,h)}}var c=s.return;try{Rj(s)}catch(h){W(s,c,h)}break;case 5:var d=s.return;try{Rj(s)}catch(h){W(s,d,h)}}}catch(h){W(s,s.return,h)}if(s===e){V=null;break}var g=s.sibling;if(g!==null){g.return=s.return,V=g;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,i,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,i,o),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(e,Z)),Dk(e,o),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var i=e.callbackNode;wc(e,s);var o=uc(e,e===Q?Z:0);if(o===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=o&-o,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(o)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Hk()&&e.callbackNode!==i)return null;var o=uc(e,e===Q?Z:0);if(o===0)return null;if(o&30||o&e.expiredLanes||s)s=Ik(e,o);else{s=o;var a=K;K|=2;var c=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(g){Mk(e,g)}while(!0);$g(),mk.current=c,K=a,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(a=xc(e),a!==0&&(o=a,s=Nk(e,a))),s===1)throw i=pk,Kk(e,0),Ck(e,o),Dk(e,B()),i;if(s===6)Ck(e,o);else{if(a=e.current.alternate,!(o&30)&&!Ok(a)&&(s=Ik(e,o),s===2&&(c=xc(e),c!==0&&(o=c,s=Nk(e,c))),s===1))throw i=pk,Kk(e,0),Ck(e,o),Dk(e,B()),i;switch(e.finishedWork=a,e.finishedLanes=o,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,o),(o&130023424)===o&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(a=e.suspendedLanes,(a&o)!==o){R(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,o),(o&4194240)===o)break;for(s=e.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=s[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),o);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===i?Gk.bind(null,e):null}function Nk(e,s){var i=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=i,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var a=i[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),o=1<<i;e[i]=-1,s&=~o}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var i=Ik(e,s);if(e.tag!==0&&i===2){var o=xc(e);o!==0&&(s=o,i=Nk(e,o))}if(i===1)throw i=pk,Kk(e,0),Ck(e,s),Dk(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,o=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=o,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var o=i;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],o=i.interleaved,o!==null){i.interleaved=null;var a=o.next,c=i.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}i.pending=o}fh=null}return e}function Mk(e,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var c=e,d=i.return,g=i,h=s;if(s=Z,g.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var j=h,b=g,_=b.tag;if(!(b.mode&1)&&(_===0||_===11||_===15)){var st=b.alternate;st?(b.updateQueue=st.updateQueue,b.memoizedState=st.memoizedState,b.lanes=st.lanes):(b.updateQueue=null,b.memoizedState=null)}var tt=Ui(d);if(tt!==null){tt.flags&=-257,Vi(tt,d,g,c,s),tt.mode&1&&Si(c,j,s),s=tt,h=j;var nt=s.updateQueue;if(nt===null){var xt=new Set;xt.add(h),s.updateQueue=xt}else nt.add(h);break e}else{if(!(s&1)){Si(c,j,s),tj();break e}h=Error(p(426))}}else if(I&&g.mode&1){var ut=Ui(d);if(ut!==null){!(ut.flags&65536)&&(ut.flags|=256),Vi(ut,d,g,c,s),Jg(Ji(h,g));break e}}c=h=Ji(h,g),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var _e=Ni(c,h,s);ph(c,_e);break e;case 1:g=h;var $=c.type,at=c.stateNode;if(!(c.flags&128)&&(typeof $.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){c.flags|=65536,s&=-s,c.lanes|=s;var it=Qi(c,g,s);ph(c,it);break e}}c=c.return}while(c!==null)}Sk(i)}catch(et){s=et,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var i=K;K|=2;var o=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(a){Mk(e,a)}while(!0);if($g(),K=i,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,i){var o=C,a=ok.transition;try{ok.transition=null,C=1,Wk(e,s,i,o)}finally{ok.transition=a,C=o}return null}function Wk(e,s,i,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var a=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var g=K;K|=4,nk.current=null,Oj(e,i),dk(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,hk(i),dc(),K=g,C=d,ok.transition=c}else e.current=i;if(vk&&(vk=!1,wk=e,xk=a),c=e.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(e,B()),s!==null)for(o=e.onRecoverableError,i=0;i<s.length;i++)a=s[i],o(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var o=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var g=c.deletions;if(g!==null){for(var h=0;h<g.length;h++){var j=g[h];for(V=j;V!==null;){var b=V;switch(b.tag){case 0:case 11:case 15:Pj(8,b,c)}var _=b.child;if(_!==null)_.return=b,V=_;else for(;V!==null;){b=V;var st=b.sibling,tt=b.return;if(Sj(b),b===j){V=null;break}if(st!==null){st.return=tt,V=st;break}V=tt}}}var nt=c.alternate;if(nt!==null){var xt=nt.child;if(xt!==null){nt.child=null;do{var ut=xt.sibling;xt.sibling=null,xt=ut}while(xt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var _e=c.sibling;if(_e!==null){_e.return=c.return,V=_e;break e}V=c.return}}var $=e.current;for(V=$;V!==null;){d=V;var at=d.child;if(d.subtreeFlags&2064&&at!==null)at.return=d,V=at;else e:for(d=$;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(et){W(g,g.return,et)}if(g===d){V=null;break e}var it=g.sibling;if(it!==null){it.return=g.return,V=it;break e}V=g.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}o=!0}return o}finally{C=i,ok.transition=s}}return!1}function Xk(e,s,i){s=Ji(i,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,i){if(e.tag===3)Xk(e,e,i);else for(;s!==null;){if(s.tag===3){Xk(s,e,i);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){e=Ji(i,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,i){var o=e.pingCache;o!==null&&o.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&i,Q===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=i),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();e=ih(e,s),e!==null&&(Ac(e,s,i),Dk(e,i))}function uj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(e,i)}function bk(e,s){var i=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;a!==null&&(i=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(s),Yk(e,i)}var Vk;Vk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return dh=!1,yj(e,s,i);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var o=s.type;ij(e,s),e=s.pendingProps;var a=Yf(s,H.current);ch(s,i),a=Nh(null,s,o,e,a,i);var c=Sh();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(o)?(c=!0,cg(s)):c=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(s),a.updater=Ei,s.stateNode=a,a._reactInternals=s,Ii(s,o,e,i),s=jj(null,s,o,!0,c,i)):(s.tag=0,I&&c&&vg(s),Xi(null,s,a,i),s=s.child),s;case 16:o=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,a=o._init,o=a(o._payload),s.type=o,a=s.tag=Zk(o),e=Ci(o,e),a){case 0:s=cj(null,s,o,e,i);break e;case 1:s=hj(null,s,o,e,i);break e;case 11:s=Yi(null,s,o,e,i);break e;case 14:s=$i(null,s,o,Ci(o.type,e),i);break e}throw Error(p(306,o,""))}return s;case 0:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),cj(e,s,o,a,i);case 1:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),hj(e,s,o,a,i);case 3:e:{if(kj(s),e===null)throw Error(p(387));o=s.pendingProps,c=s.memoizedState,a=c.element,lh(e,s),qh(s,o,null,i);var d=s.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){a=Ji(Error(p(423)),s),s=lj(e,s,o,i,a);break e}else if(o!==a){a=Ji(Error(p(424)),s),s=lj(e,s,o,i,a);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,o,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),o===a){s=Zi(e,s,i);break e}Xi(e,s,o,i)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),o=s.type,a=s.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(s.flags|=32),gj(e,s),Xi(e,s,d,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,i);case 4:return yh(s,s.stateNode.containerInfo),o=s.pendingProps,e===null?s.child=Ug(s,null,o,i):Xi(e,s,o,i),s.child;case 11:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),Yi(e,s,o,a,i);case 7:return Xi(e,s,s.pendingProps,i),s.child;case 8:return Xi(e,s,s.pendingProps.children,i),s.child;case 12:return Xi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(o=s.type._context,a=s.pendingProps,c=s.memoizedProps,d=a.value,G(Wg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){s=Zi(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var g=c.dependencies;if(g!==null){d=c.child;for(var h=g.firstContext;h!==null;){if(h.context===o){if(c.tag===1){h=mh(-1,i&-i),h.tag=2;var j=c.updateQueue;if(j!==null){j=j.shared;var b=j.pending;b===null?h.next=h:(h.next=b.next,b.next=h),j.pending=h}}c.lanes|=i,h=c.alternate,h!==null&&(h.lanes|=i),bh(c.return,i,s),g.lanes|=i;break}h=h.next}}else if(c.tag===10)d=c.type===s.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,g=d.alternate,g!==null&&(g.lanes|=i),bh(d,i,s),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===s){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(e,s,a.children,i),s=s.child}return s;case 9:return a=s.type,o=s.pendingProps.children,ch(s,i),a=eh(a),o=o(a),s.flags|=1,Xi(e,s,o,i),s.child;case 14:return o=s.type,a=Ci(o,s.pendingProps),a=Ci(o.type,a),$i(e,s,o,a,i);case 15:return bj(e,s,s.type,s.pendingProps,i);case 17:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),ij(e,s),s.tag=1,Zf(o)?(e=!0,cg(s)):e=!1,ch(s,i),Gi(s,o,a),Ii(s,o,a,i),jj(null,s,o,!0,e,i);case 19:return xj(e,s,i);case 22:return dj(e,s,i)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,o){return new $k(e,s,i,o)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rg(e,s,i,o,a,c){var d=2;if(o=e,typeof e=="function")aj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Tg(i.children,a,c,s);case za:d=8,a|=8;break;case Aa:return e=Bg(12,i,s,a|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,a),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,a),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(i,a,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(d,i,s,a),s.elementType=e,s.type=o,s.lanes=c,s}function Tg(e,s,i,o){return e=Bg(7,e,o,s),e.lanes=i,e}function pj(e,s,i,o){return e=Bg(22,e,o,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function Qg(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function Sg(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,i,o,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bl(e,s,i,o,a,c,d,g,h){return e=new al(e,s,i,g,h),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,s,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:e,containerInfo:s,implementation:i}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function el(e,s,i,o,a,c,d,g,h){return e=bl(i,o,!0,e,a,c,d,g,h),e.context=dl(null),i=e.current,o=R(),a=yi(i),c=mh(o,a),c.callback=s??null,nh(i,c,a),e.current.lanes=a,Ac(e,a,o),Dk(e,o),e}function fl(e,s,i,o){var a=s.current,c=R(),d=yi(a);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(c,d),s.payload={element:e},o=o===void 0?null:o,o!==null&&(s.callback=o),e=nh(a,s,d),e!==null&&(gi(e,a,d,c),oh(e,a,d)),d}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,i,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var j=gl(d);c.call(j)}}var d=el(s,o,e,0,null,!1,!1,"",pl);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Rk(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof o=="function"){var g=o;o=function(){var j=gl(h);g.call(j)}}var h=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,h,i,o)}),h}function rl(e,s,i,o,a){var c=i._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var g=a;a=function(){var h=gl(d);g.call(h)}}fl(s,d,e,a)}else d=ql(i,s,e,a,o);return gl(d)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(e,1);if(o!==null){var a=R();gi(o,e,1,a)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var i=R();gi(s,e,134217728,i)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),i=ih(e,s);if(i!==null){var o=R();gi(i,e,s,o)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var o=i[s];if(o!==e&&o.form===e.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var i=!1,o="",a=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=bl(e,1,!1,null,null,i,!1,o,a),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!nl(e))throw Error(p(405));var o=i!=null&&i.hydratedSources||null,a=!1,c="",d=kl;if(i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),s=el(s,null,e,1,i??null,a,!1,c,d),e[uf]=s.current,sf(e),o)for(e=0;e<o.length;e++)i=o[e],a=i._getVersion,a=a(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,a]:s.mutableSourceEagerHydrationData.push(i,a);return new ml(s)};reactDom_production_min.render=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,o){if(!ol(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,i,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(s,i,o){let a=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),g=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(i.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const j=h.endsWith(".css"),b=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const _=document.createElement("link");if(_.rel=j?"stylesheet":scriptRel,j||(_.as="script"),_.crossOrigin="",_.href=h,g&&_.setAttribute("nonce",g),document.head.appendChild(_),j)return new Promise((st,tt)=>{_.addEventListener("load",st),_.addEventListener("error",()=>tt(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return a.then(d=>{for(const g of d||[])g.status==="rejected"&&c(g.reason);return s().catch(c)})};var browser={},canPromise$1=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},qrcode={},utils$1={};let toSJISFunction;const CODEWORDS_COUNT=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];utils$1.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};utils$1.getSymbolTotalCodewords=function(s){return CODEWORDS_COUNT[s]};utils$1.getBCHDigit=function(e){let s=0;for(;e!==0;)s++,e>>>=1;return s};utils$1.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');toSJISFunction=s};utils$1.isKanjiModeEnabled=function(){return typeof toSJISFunction<"u"};utils$1.toSJIS=function(s){return toSJISFunction(s)};var errorCorrectionLevel={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function s(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,a){if(e.isValid(o))return o;try{return s(o)}catch{return a}}})(errorCorrectionLevel);function BitBuffer$1(){this.buffer=[],this.length=0}BitBuffer$1.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)===1},put:function(e,s){for(let i=0;i<s;i++)this.putBit((e>>>s-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var bitBuffer=BitBuffer$1;function BitMatrix$1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}BitMatrix$1.prototype.set=function(e,s,i,o){const a=e*this.size+s;this.data[a]=i,o&&(this.reservedBit[a]=!0)};BitMatrix$1.prototype.get=function(e,s){return this.data[e*this.size+s]};BitMatrix$1.prototype.xor=function(e,s,i){this.data[e*this.size+s]^=i};BitMatrix$1.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]};var bitMatrix=BitMatrix$1,alignmentPattern={};(function(e){const s=utils$1.getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const a=Math.floor(o/7)+2,c=s(o),d=c===145?26:Math.ceil((c-13)/(2*a-2))*2,g=[c-7];for(let h=1;h<a-1;h++)g[h]=g[h-1]-d;return g.push(6),g.reverse()},e.getPositions=function(o){const a=[],c=e.getRowColCoords(o),d=c.length;for(let g=0;g<d;g++)for(let h=0;h<d;h++)g===0&&h===0||g===0&&h===d-1||g===d-1&&h===0||a.push([c[g],c[h]]);return a}})(alignmentPattern);var finderPattern={};const getSymbolSize=utils$1.getSymbolSize,FINDER_PATTERN_SIZE=7;finderPattern.getPositions=function(s){const i=getSymbolSize(s);return[[0,0],[i-FINDER_PATTERN_SIZE,0],[0,i-FINDER_PATTERN_SIZE]]};var maskPattern={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const c=a.size;let d=0,g=0,h=0,j=null,b=null;for(let _=0;_<c;_++){g=h=0,j=b=null;for(let st=0;st<c;st++){let tt=a.get(_,st);tt===j?g++:(g>=5&&(d+=s.N1+(g-5)),j=tt,g=1),tt=a.get(st,_),tt===b?h++:(h>=5&&(d+=s.N1+(h-5)),b=tt,h=1)}g>=5&&(d+=s.N1+(g-5)),h>=5&&(d+=s.N1+(h-5))}return d},e.getPenaltyN2=function(a){const c=a.size;let d=0;for(let g=0;g<c-1;g++)for(let h=0;h<c-1;h++){const j=a.get(g,h)+a.get(g,h+1)+a.get(g+1,h)+a.get(g+1,h+1);(j===4||j===0)&&d++}return d*s.N2},e.getPenaltyN3=function(a){const c=a.size;let d=0,g=0,h=0;for(let j=0;j<c;j++){g=h=0;for(let b=0;b<c;b++)g=g<<1&2047|a.get(j,b),b>=10&&(g===1488||g===93)&&d++,h=h<<1&2047|a.get(b,j),b>=10&&(h===1488||h===93)&&d++}return d*s.N3},e.getPenaltyN4=function(a){let c=0;const d=a.data.length;for(let h=0;h<d;h++)c+=a.data[h];return Math.abs(Math.ceil(c*100/d/5)-10)*s.N4};function i(o,a,c){switch(o){case e.Patterns.PATTERN000:return(a+c)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return c%3===0;case e.Patterns.PATTERN011:return(a+c)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(c/3))%2===0;case e.Patterns.PATTERN101:return a*c%2+a*c%3===0;case e.Patterns.PATTERN110:return(a*c%2+a*c%3)%2===0;case e.Patterns.PATTERN111:return(a*c%3+(a+c)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(a,c){const d=c.size;for(let g=0;g<d;g++)for(let h=0;h<d;h++)c.isReserved(h,g)||c.xor(h,g,i(a,h,g))},e.getBestMask=function(a,c){const d=Object.keys(e.Patterns).length;let g=0,h=1/0;for(let j=0;j<d;j++){c(j),e.applyMask(j,a);const b=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(j,a),b<h&&(h=b,g=j)}return g}})(maskPattern);var errorCorrectionCode={};const ECLevel$1=errorCorrectionLevel,EC_BLOCKS_TABLE=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],EC_CODEWORDS_TABLE=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];errorCorrectionCode.getBlocksCount=function(s,i){switch(i){case ECLevel$1.L:return EC_BLOCKS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_BLOCKS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_BLOCKS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_BLOCKS_TABLE[(s-1)*4+3];default:return}};errorCorrectionCode.getTotalCodewordsCount=function(s,i){switch(i){case ECLevel$1.L:return EC_CODEWORDS_TABLE[(s-1)*4+0];case ECLevel$1.M:return EC_CODEWORDS_TABLE[(s-1)*4+1];case ECLevel$1.Q:return EC_CODEWORDS_TABLE[(s-1)*4+2];case ECLevel$1.H:return EC_CODEWORDS_TABLE[(s-1)*4+3];default:return}};var polynomial={},galoisField={};const EXP_TABLE=new Uint8Array(512),LOG_TABLE=new Uint8Array(256);(function(){let s=1;for(let i=0;i<255;i++)EXP_TABLE[i]=s,LOG_TABLE[s]=i,s<<=1,s&256&&(s^=285);for(let i=255;i<512;i++)EXP_TABLE[i]=EXP_TABLE[i-255]})();galoisField.log=function(s){if(s<1)throw new Error("log("+s+")");return LOG_TABLE[s]};galoisField.exp=function(s){return EXP_TABLE[s]};galoisField.mul=function(s,i){return s===0||i===0?0:EXP_TABLE[LOG_TABLE[s]+LOG_TABLE[i]]};(function(e){const s=galoisField;e.mul=function(o,a){const c=new Uint8Array(o.length+a.length-1);for(let d=0;d<o.length;d++)for(let g=0;g<a.length;g++)c[d+g]^=s.mul(o[d],a[g]);return c},e.mod=function(o,a){let c=new Uint8Array(o);for(;c.length-a.length>=0;){const d=c[0];for(let h=0;h<a.length;h++)c[h]^=s.mul(a[h],d);let g=0;for(;g<c.length&&c[g]===0;)g++;c=c.slice(g)}return c},e.generateECPolynomial=function(o){let a=new Uint8Array([1]);for(let c=0;c<o;c++)a=e.mul(a,new Uint8Array([1,s.exp(c)]));return a}})(polynomial);const Polynomial=polynomial;function ReedSolomonEncoder$1(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ReedSolomonEncoder$1.prototype.initialize=function(s){this.degree=s,this.genPoly=Polynomial.generateECPolynomial(this.degree)};ReedSolomonEncoder$1.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(s.length+this.degree);i.set(s);const o=Polynomial.mod(i,this.genPoly),a=this.degree-o.length;if(a>0){const c=new Uint8Array(this.degree);return c.set(o,a),c}return o};var reedSolomonEncoder=ReedSolomonEncoder$1,version={},mode={},versionCheck={};versionCheck.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var regex={};const numeric="[0-9]+",alphanumeric="[A-Z $%*+\\-./:]+";let kanji="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kanji=kanji.replace(/u/g,"\\u");const byte="(?:(?![A-Z0-9 $%*+\\-./:]|"+kanji+`)(?:.|[\r
]))+`;regex.KANJI=new RegExp(kanji,"g");regex.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");regex.BYTE=new RegExp(byte,"g");regex.NUMERIC=new RegExp(numeric,"g");regex.ALPHANUMERIC=new RegExp(alphanumeric,"g");const TEST_KANJI=new RegExp("^"+kanji+"$"),TEST_NUMERIC=new RegExp("^"+numeric+"$"),TEST_ALPHANUMERIC=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");regex.testKanji=function(s){return TEST_KANJI.test(s)};regex.testNumeric=function(s){return TEST_NUMERIC.test(s)};regex.testAlphanumeric=function(s){return TEST_ALPHANUMERIC.test(s)};(function(e){const s=versionCheck,i=regex;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(c,d){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!s.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?c.ccBits[0]:d<27?c.ccBits[1]:c.ccBits[2]},e.getBestModeForData=function(c){return i.testNumeric(c)?e.NUMERIC:i.testAlphanumeric(c)?e.ALPHANUMERIC:i.testKanji(c)?e.KANJI:e.BYTE},e.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},e.isValid=function(c){return c&&c.bit&&c.ccBits};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(c,d){if(e.isValid(c))return c;try{return o(c)}catch{return d}}})(mode);(function(e){const s=utils$1,i=errorCorrectionCode,o=errorCorrectionLevel,a=mode,c=versionCheck,d=7973,g=s.getBCHDigit(d);function h(st,tt,nt){for(let xt=1;xt<=40;xt++)if(tt<=e.getCapacity(xt,nt,st))return xt}function j(st,tt){return a.getCharCountIndicator(st,tt)+4}function b(st,tt){let nt=0;return st.forEach(function(xt){const ut=j(xt.mode,tt);nt+=ut+xt.getBitsLength()}),nt}function _(st,tt){for(let nt=1;nt<=40;nt++)if(b(st,nt)<=e.getCapacity(nt,tt,a.MIXED))return nt}e.from=function(tt,nt){return c.isValid(tt)?parseInt(tt,10):nt},e.getCapacity=function(tt,nt,xt){if(!c.isValid(tt))throw new Error("Invalid QR Code version");typeof xt>"u"&&(xt=a.BYTE);const ut=s.getSymbolTotalCodewords(tt),_e=i.getTotalCodewordsCount(tt,nt),$=(ut-_e)*8;if(xt===a.MIXED)return $;const at=$-j(xt,tt);switch(xt){case a.NUMERIC:return Math.floor(at/10*3);case a.ALPHANUMERIC:return Math.floor(at/11*2);case a.KANJI:return Math.floor(at/13);case a.BYTE:default:return Math.floor(at/8)}},e.getBestVersionForData=function(tt,nt){let xt;const ut=o.from(nt,o.M);if(Array.isArray(tt)){if(tt.length>1)return _(tt,ut);if(tt.length===0)return 1;xt=tt[0]}else xt=tt;return h(xt.mode,xt.getLength(),ut)},e.getEncodedBits=function(tt){if(!c.isValid(tt)||tt<7)throw new Error("Invalid QR Code version");let nt=tt<<12;for(;s.getBCHDigit(nt)-g>=0;)nt^=d<<s.getBCHDigit(nt)-g;return tt<<12|nt}})(version);var formatInfo={};const Utils$3=utils$1,G15=1335,G15_MASK=21522,G15_BCH=Utils$3.getBCHDigit(G15);formatInfo.getEncodedBits=function(s,i){const o=s.bit<<3|i;let a=o<<10;for(;Utils$3.getBCHDigit(a)-G15_BCH>=0;)a^=G15<<Utils$3.getBCHDigit(a)-G15_BCH;return(o<<10|a)^G15_MASK};var segments={};const Mode$4=mode;function NumericData(e){this.mode=Mode$4.NUMERIC,this.data=e.toString()}NumericData.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};NumericData.prototype.getLength=function(){return this.data.length};NumericData.prototype.getBitsLength=function(){return NumericData.getBitsLength(this.data.length)};NumericData.prototype.write=function(s){let i,o,a;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),a=parseInt(o,10),s.put(a,10);const c=this.data.length-i;c>0&&(o=this.data.substr(i),a=parseInt(o,10),s.put(a,c*3+1))};var numericData=NumericData;const Mode$3=mode,ALPHA_NUM_CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function AlphanumericData(e){this.mode=Mode$3.ALPHANUMERIC,this.data=e}AlphanumericData.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};AlphanumericData.prototype.getLength=function(){return this.data.length};AlphanumericData.prototype.getBitsLength=function(){return AlphanumericData.getBitsLength(this.data.length)};AlphanumericData.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=ALPHA_NUM_CHARS.indexOf(this.data[i])*45;o+=ALPHA_NUM_CHARS.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(ALPHA_NUM_CHARS.indexOf(this.data[i]),6)};var alphanumericData=AlphanumericData;const Mode$2=mode;function ByteData(e){this.mode=Mode$2.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}ByteData.getBitsLength=function(s){return s*8};ByteData.prototype.getLength=function(){return this.data.length};ByteData.prototype.getBitsLength=function(){return ByteData.getBitsLength(this.data.length)};ByteData.prototype.write=function(e){for(let s=0,i=this.data.length;s<i;s++)e.put(this.data[s],8)};var byteData=ByteData;const Mode$1=mode,Utils$2=utils$1;function KanjiData(e){this.mode=Mode$1.KANJI,this.data=e}KanjiData.getBitsLength=function(s){return s*13};KanjiData.prototype.getLength=function(){return this.data.length};KanjiData.prototype.getBitsLength=function(){return KanjiData.getBitsLength(this.data.length)};KanjiData.prototype.write=function(e){let s;for(s=0;s<this.data.length;s++){let i=Utils$2.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),e.put(i,13)}};var kanjiData=KanjiData,dijkstra={exports:{}};(function(e){var s={single_source_shortest_paths:function(i,o,a){var c={},d={};d[o]=0;var g=s.PriorityQueue.make();g.push(o,0);for(var h,j,b,_,st,tt,nt,xt,ut;!g.empty();){h=g.pop(),j=h.value,_=h.cost,st=i[j]||{};for(b in st)st.hasOwnProperty(b)&&(tt=st[b],nt=_+tt,xt=d[b],ut=typeof d[b]>"u",(ut||xt>nt)&&(d[b]=nt,g.push(b,nt),c[b]=j))}if(typeof a<"u"&&typeof d[a]>"u"){var _e=["Could not find a path from ",o," to ",a,"."].join("");throw new Error(_e)}return c},extract_shortest_path_from_predecessor_list:function(i,o){for(var a=[],c=o;c;)a.push(c),i[c],c=i[c];return a.reverse(),a},find_path:function(i,o,a){var c=s.single_source_shortest_paths(i,o,a);return s.extract_shortest_path_from_predecessor_list(c,a)},PriorityQueue:{make:function(i){var o=s.PriorityQueue,a={},c;i=i||{};for(c in o)o.hasOwnProperty(c)&&(a[c]=o[c]);return a.queue=[],a.sorter=i.sorter||o.default_sorter,a},default_sorter:function(i,o){return i.cost-o.cost},push:function(i,o){var a={value:i,cost:o};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=s})(dijkstra);var dijkstraExports=dijkstra.exports;(function(e){const s=mode,i=numericData,o=alphanumericData,a=byteData,c=kanjiData,d=regex,g=utils$1,h=dijkstraExports;function j(_e){return unescape(encodeURIComponent(_e)).length}function b(_e,$,at){const it=[];let et;for(;(et=_e.exec(at))!==null;)it.push({data:et[0],index:et.index,mode:$,length:et[0].length});return it}function _(_e){const $=b(d.NUMERIC,s.NUMERIC,_e),at=b(d.ALPHANUMERIC,s.ALPHANUMERIC,_e);let it,et;return g.isKanjiModeEnabled()?(it=b(d.BYTE,s.BYTE,_e),et=b(d.KANJI,s.KANJI,_e)):(it=b(d.BYTE_KANJI,s.BYTE,_e),et=[]),$.concat(at,it,et).sort(function(rt,lt){return rt.index-lt.index}).map(function(rt){return{data:rt.data,mode:rt.mode,length:rt.length}})}function st(_e,$){switch($){case s.NUMERIC:return i.getBitsLength(_e);case s.ALPHANUMERIC:return o.getBitsLength(_e);case s.KANJI:return c.getBitsLength(_e);case s.BYTE:return a.getBitsLength(_e)}}function tt(_e){return _e.reduce(function($,at){const it=$.length-1>=0?$[$.length-1]:null;return it&&it.mode===at.mode?($[$.length-1].data+=at.data,$):($.push(at),$)},[])}function nt(_e){const $=[];for(let at=0;at<_e.length;at++){const it=_e[at];switch(it.mode){case s.NUMERIC:$.push([it,{data:it.data,mode:s.ALPHANUMERIC,length:it.length},{data:it.data,mode:s.BYTE,length:it.length}]);break;case s.ALPHANUMERIC:$.push([it,{data:it.data,mode:s.BYTE,length:it.length}]);break;case s.KANJI:$.push([it,{data:it.data,mode:s.BYTE,length:j(it.data)}]);break;case s.BYTE:$.push([{data:it.data,mode:s.BYTE,length:j(it.data)}])}}return $}function xt(_e,$){const at={},it={start:{}};let et=["start"];for(let ot=0;ot<_e.length;ot++){const rt=_e[ot],lt=[];for(let ft=0;ft<rt.length;ft++){const dt=rt[ft],ct=""+ot+ft;lt.push(ct),at[ct]={node:dt,lastCount:0},it[ct]={};for(let Et=0;Et<et.length;Et++){const gt=et[Et];at[gt]&&at[gt].node.mode===dt.mode?(it[gt][ct]=st(at[gt].lastCount+dt.length,dt.mode)-st(at[gt].lastCount,dt.mode),at[gt].lastCount+=dt.length):(at[gt]&&(at[gt].lastCount=dt.length),it[gt][ct]=st(dt.length,dt.mode)+4+s.getCharCountIndicator(dt.mode,$))}}et=lt}for(let ot=0;ot<et.length;ot++)it[et[ot]].end=0;return{map:it,table:at}}function ut(_e,$){let at;const it=s.getBestModeForData(_e);if(at=s.from($,it),at!==s.BYTE&&at.bit<it.bit)throw new Error('"'+_e+'" cannot be encoded with mode '+s.toString(at)+`.
 Suggested mode is: `+s.toString(it));switch(at===s.KANJI&&!g.isKanjiModeEnabled()&&(at=s.BYTE),at){case s.NUMERIC:return new i(_e);case s.ALPHANUMERIC:return new o(_e);case s.KANJI:return new c(_e);case s.BYTE:return new a(_e)}}e.fromArray=function($){return $.reduce(function(at,it){return typeof it=="string"?at.push(ut(it,null)):it.data&&at.push(ut(it.data,it.mode)),at},[])},e.fromString=function($,at){const it=_($,g.isKanjiModeEnabled()),et=nt(it),ot=xt(et,at),rt=h.find_path(ot.map,"start","end"),lt=[];for(let ft=1;ft<rt.length-1;ft++)lt.push(ot.table[rt[ft]].node);return e.fromArray(tt(lt))},e.rawSplit=function($){return e.fromArray(_($,g.isKanjiModeEnabled()))}})(segments);const Utils$1=utils$1,ECLevel=errorCorrectionLevel,BitBuffer=bitBuffer,BitMatrix=bitMatrix,AlignmentPattern=alignmentPattern,FinderPattern=finderPattern,MaskPattern=maskPattern,ECCode=errorCorrectionCode,ReedSolomonEncoder=reedSolomonEncoder,Version=version,FormatInfo=formatInfo,Mode=mode,Segments=segments;function setupFinderPattern(e,s){const i=e.size,o=FinderPattern.getPositions(s);for(let a=0;a<o.length;a++){const c=o[a][0],d=o[a][1];for(let g=-1;g<=7;g++)if(!(c+g<=-1||i<=c+g))for(let h=-1;h<=7;h++)d+h<=-1||i<=d+h||(g>=0&&g<=6&&(h===0||h===6)||h>=0&&h<=6&&(g===0||g===6)||g>=2&&g<=4&&h>=2&&h<=4?e.set(c+g,d+h,!0,!0):e.set(c+g,d+h,!1,!0))}}function setupTimingPattern(e){const s=e.size;for(let i=8;i<s-8;i++){const o=i%2===0;e.set(i,6,o,!0),e.set(6,i,o,!0)}}function setupAlignmentPattern(e,s){const i=AlignmentPattern.getPositions(s);for(let o=0;o<i.length;o++){const a=i[o][0],c=i[o][1];for(let d=-2;d<=2;d++)for(let g=-2;g<=2;g++)d===-2||d===2||g===-2||g===2||d===0&&g===0?e.set(a+d,c+g,!0,!0):e.set(a+d,c+g,!1,!0)}}function setupVersionInfo(e,s){const i=e.size,o=Version.getEncodedBits(s);let a,c,d;for(let g=0;g<18;g++)a=Math.floor(g/3),c=g%3+i-8-3,d=(o>>g&1)===1,e.set(a,c,d,!0),e.set(c,a,d,!0)}function setupFormatInfo(e,s,i){const o=e.size,a=FormatInfo.getEncodedBits(s,i);let c,d;for(c=0;c<15;c++)d=(a>>c&1)===1,c<6?e.set(c,8,d,!0):c<8?e.set(c+1,8,d,!0):e.set(o-15+c,8,d,!0),c<8?e.set(8,o-c-1,d,!0):c<9?e.set(8,15-c-1+1,d,!0):e.set(8,15-c-1,d,!0);e.set(o-8,8,1,!0)}function setupData(e,s){const i=e.size;let o=-1,a=i-1,c=7,d=0;for(let g=i-1;g>0;g-=2)for(g===6&&g--;;){for(let h=0;h<2;h++)if(!e.isReserved(a,g-h)){let j=!1;d<s.length&&(j=(s[d]>>>c&1)===1),e.set(a,g-h,j),c--,c===-1&&(d++,c=7)}if(a+=o,a<0||i<=a){a-=o,o=-o;break}}}function createData(e,s,i){const o=new BitBuffer;i.forEach(function(h){o.put(h.mode.bit,4),o.put(h.getLength(),Mode.getCharCountIndicator(h.mode,e)),h.write(o)});const a=Utils$1.getSymbolTotalCodewords(e),c=ECCode.getTotalCodewordsCount(e,s),d=(a-c)*8;for(o.getLengthInBits()+4<=d&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const g=(d-o.getLengthInBits())/8;for(let h=0;h<g;h++)o.put(h%2?17:236,8);return createCodewords(o,e,s)}function createCodewords(e,s,i){const o=Utils$1.getSymbolTotalCodewords(s),a=ECCode.getTotalCodewordsCount(s,i),c=o-a,d=ECCode.getBlocksCount(s,i),g=o%d,h=d-g,j=Math.floor(o/d),b=Math.floor(c/d),_=b+1,st=j-b,tt=new ReedSolomonEncoder(st);let nt=0;const xt=new Array(d),ut=new Array(d);let _e=0;const $=new Uint8Array(e.buffer);for(let rt=0;rt<d;rt++){const lt=rt<h?b:_;xt[rt]=$.slice(nt,nt+lt),ut[rt]=tt.encode(xt[rt]),nt+=lt,_e=Math.max(_e,lt)}const at=new Uint8Array(o);let it=0,et,ot;for(et=0;et<_e;et++)for(ot=0;ot<d;ot++)et<xt[ot].length&&(at[it++]=xt[ot][et]);for(et=0;et<st;et++)for(ot=0;ot<d;ot++)at[it++]=ut[ot][et];return at}function createSymbol(e,s,i,o){let a;if(Array.isArray(e))a=Segments.fromArray(e);else if(typeof e=="string"){let j=s;if(!j){const b=Segments.rawSplit(e);j=Version.getBestVersionForData(b,i)}a=Segments.fromString(e,j||40)}else throw new Error("Invalid data");const c=Version.getBestVersionForData(a,i);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=c;else if(s<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);const d=createData(s,i,a),g=Utils$1.getSymbolSize(s),h=new BitMatrix(g);return setupFinderPattern(h,s),setupTimingPattern(h),setupAlignmentPattern(h,s),setupFormatInfo(h,i,0),s>=7&&setupVersionInfo(h,s),setupData(h,d),isNaN(o)&&(o=MaskPattern.getBestMask(h,setupFormatInfo.bind(null,h,i))),MaskPattern.applyMask(o,h),setupFormatInfo(h,i,o),{modules:h,version:s,errorCorrectionLevel:i,maskPattern:o,segments:a}}qrcode.create=function(s,i){if(typeof s>"u"||s==="")throw new Error("No input text");let o=ECLevel.M,a,c;return typeof i<"u"&&(o=ECLevel.from(i.errorCorrectionLevel,ECLevel.M),a=Version.from(i.version),c=MaskPattern.from(i.maskPattern),i.toSJISFunc&&Utils$1.setToSJISFunction(i.toSJISFunc)),createSymbol(s,a,o,c)};var canvas={},utils={};(function(e){function s(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let o=i.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+i);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(c){return[c,c]}))),o.length===6&&o.push("F","F");const a=parseInt(o.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const a=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,c=o.width&&o.width>=21?o.width:void 0,d=o.scale||4;return{width:c,scale:c?4:d,margin:a,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,a){return a.width&&a.width>=o+a.margin*2?a.width/(o+a.margin*2):a.scale},e.getImageWidth=function(o,a){const c=e.getScale(o,a);return Math.floor((o+a.margin*2)*c)},e.qrToImageData=function(o,a,c){const d=a.modules.size,g=a.modules.data,h=e.getScale(d,c),j=Math.floor((d+c.margin*2)*h),b=c.margin*h,_=[c.color.light,c.color.dark];for(let st=0;st<j;st++)for(let tt=0;tt<j;tt++){let nt=(st*j+tt)*4,xt=c.color.light;if(st>=b&&tt>=b&&st<j-b&&tt<j-b){const ut=Math.floor((st-b)/h),_e=Math.floor((tt-b)/h);xt=_[g[ut*d+_e]?1:0]}o[nt++]=xt.r,o[nt++]=xt.g,o[nt++]=xt.b,o[nt]=xt.a}}})(utils);(function(e){const s=utils;function i(a,c,d){a.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=d,c.width=d,c.style.height=d+"px",c.style.width=d+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(c,d,g){let h=g,j=d;typeof h>"u"&&(!d||!d.getContext)&&(h=d,d=void 0),d||(j=o()),h=s.getOptions(h);const b=s.getImageWidth(c.modules.size,h),_=j.getContext("2d"),st=_.createImageData(b,b);return s.qrToImageData(st.data,c,h),i(_,j,b),_.putImageData(st,0,0),j},e.renderToDataURL=function(c,d,g){let h=g;typeof h>"u"&&(!d||!d.getContext)&&(h=d,d=void 0),h||(h={});const j=e.render(c,d,h),b=h.type||"image/png",_=h.rendererOpts||{};return j.toDataURL(b,_.quality)}})(canvas);var svgTag={};const Utils=utils;function getColorAttrib(e,s){const i=e.a/255,o=s+'="'+e.hex+'"';return i<1?o+" "+s+'-opacity="'+i.toFixed(2).slice(1)+'"':o}function svgCmd(e,s,i){let o=e+s;return typeof i<"u"&&(o+=" "+i),o}function qrToPath(e,s,i){let o="",a=0,c=!1,d=0;for(let g=0;g<e.length;g++){const h=Math.floor(g%s),j=Math.floor(g/s);!h&&!c&&(c=!0),e[g]?(d++,g>0&&h>0&&e[g-1]||(o+=c?svgCmd("M",h+i,.5+j+i):svgCmd("m",a,0),a=0,c=!1),h+1<s&&e[g+1]||(o+=svgCmd("h",d),d=0)):a++}return o}svgTag.render=function(s,i,o){const a=Utils.getOptions(i),c=s.modules.size,d=s.modules.data,g=c+a.margin*2,h=a.color.light.a?"<path "+getColorAttrib(a.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",j="<path "+getColorAttrib(a.color.dark,"stroke")+' d="'+qrToPath(d,c,a.margin)+'"/>',b='viewBox="0 0 '+g+" "+g+'"',st='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+b+' shape-rendering="crispEdges">'+h+j+`</svg>
`;return typeof o=="function"&&o(null,st),st};const canPromise=canPromise$1,QRCode=qrcode,CanvasRenderer=canvas,SvgRenderer=svgTag;function renderCanvas(e,s,i,o,a){const c=[].slice.call(arguments,1),d=c.length,g=typeof c[d-1]=="function";if(!g&&!canPromise())throw new Error("Callback required as last argument");if(g){if(d<2)throw new Error("Too few arguments provided");d===2?(a=i,i=s,s=o=void 0):d===3&&(s.getContext&&typeof a>"u"?(a=o,o=void 0):(a=o,o=i,i=s,s=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(i=s,s=o=void 0):d===2&&!s.getContext&&(o=i,i=s,s=void 0),new Promise(function(h,j){try{const b=QRCode.create(i,o);h(e(b,s,o))}catch(b){j(b)}})}try{const h=QRCode.create(i,o);a(null,e(h,s,o))}catch(h){a(h)}}browser.create=QRCode.create;browser.toCanvas=renderCanvas.bind(null,CanvasRenderer.render);browser.toDataURL=renderCanvas.bind(null,CanvasRenderer.renderToDataURL);browser.toString=renderCanvas.bind(null,function(e,s,i){return SvgRenderer.render(e,i)});var jsQR$1={exports:{}};(function(e,s){(function(o,a){e.exports=a()})(typeof self<"u"?self:commonjsGlobal,function(){return function(i){var o={};function a(c){if(o[c])return o[c].exports;var d=o[c]={i:c,l:!1,exports:{}};return i[c].call(d.exports,d,d.exports,a),d.l=!0,d.exports}return a.m=i,a.c=o,a.d=function(c,d,g){a.o(c,d)||Object.defineProperty(c,d,{configurable:!1,enumerable:!0,get:g})},a.n=function(c){var d=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(d,"a",d),d},a.o=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)},a.p="",a(a.s=3)}([function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=function(){function d(g,h){this.width=h,this.height=g.length/h,this.data=g}return d.createEmpty=function(g,h){return new d(new Uint8ClampedArray(g*h),g)},d.prototype.get=function(g,h){return g<0||g>=this.width||h<0||h>=this.height?!1:!!this.data[h*this.width+g]},d.prototype.set=function(g,h,j){this.data[h*this.width+g]=j?1:0},d.prototype.setRegion=function(g,h,j,b,_){for(var st=h;st<h+b;st++)for(var tt=g;tt<g+j;tt++)this.set(tt,st,!!_)},d}();o.BitMatrix=c},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(2);function d(h,j){return h^j}o.addOrSubtractGF=d;var g=function(){function h(j,b,_){this.primitive=j,this.size=b,this.generatorBase=_,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var st=1,tt=0;tt<this.size;tt++)this.expTable[tt]=st,st=st*2,st>=this.size&&(st=(st^this.primitive)&this.size-1);for(var tt=0;tt<this.size-1;tt++)this.logTable[this.expTable[tt]]=tt;this.zero=new c.default(this,Uint8ClampedArray.from([0])),this.one=new c.default(this,Uint8ClampedArray.from([1]))}return h.prototype.multiply=function(j,b){return j===0||b===0?0:this.expTable[(this.logTable[j]+this.logTable[b])%(this.size-1)]},h.prototype.inverse=function(j){if(j===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[j]-1]},h.prototype.buildMonomial=function(j,b){if(j<0)throw new Error("Invalid monomial degree less than 0");if(b===0)return this.zero;var _=new Uint8ClampedArray(j+1);return _[0]=b,new c.default(this,_)},h.prototype.log=function(j){if(j===0)throw new Error("Can't take log(0)");return this.logTable[j]},h.prototype.exp=function(j){return this.expTable[j]},h}();o.default=g},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(1),d=function(){function g(h,j){if(j.length===0)throw new Error("No coefficients.");this.field=h;var b=j.length;if(b>1&&j[0]===0){for(var _=1;_<b&&j[_]===0;)_++;if(_===b)this.coefficients=h.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(b-_);for(var st=0;st<this.coefficients.length;st++)this.coefficients[st]=j[_+st]}}else this.coefficients=j}return g.prototype.degree=function(){return this.coefficients.length-1},g.prototype.isZero=function(){return this.coefficients[0]===0},g.prototype.getCoefficient=function(h){return this.coefficients[this.coefficients.length-1-h]},g.prototype.addOrSubtract=function(h){var j;if(this.isZero())return h;if(h.isZero())return this;var b=this.coefficients,_=h.coefficients;b.length>_.length&&(j=[_,b],b=j[0],_=j[1]);for(var st=new Uint8ClampedArray(_.length),tt=_.length-b.length,nt=0;nt<tt;nt++)st[nt]=_[nt];for(var nt=tt;nt<_.length;nt++)st[nt]=c.addOrSubtractGF(b[nt-tt],_[nt]);return new g(this.field,st)},g.prototype.multiply=function(h){if(h===0)return this.field.zero;if(h===1)return this;for(var j=this.coefficients.length,b=new Uint8ClampedArray(j),_=0;_<j;_++)b[_]=this.field.multiply(this.coefficients[_],h);return new g(this.field,b)},g.prototype.multiplyPoly=function(h){if(this.isZero()||h.isZero())return this.field.zero;for(var j=this.coefficients,b=j.length,_=h.coefficients,st=_.length,tt=new Uint8ClampedArray(b+st-1),nt=0;nt<b;nt++)for(var xt=j[nt],ut=0;ut<st;ut++)tt[nt+ut]=c.addOrSubtractGF(tt[nt+ut],this.field.multiply(xt,_[ut]));return new g(this.field,tt)},g.prototype.multiplyByMonomial=function(h,j){if(h<0)throw new Error("Invalid degree less than 0");if(j===0)return this.field.zero;for(var b=this.coefficients.length,_=new Uint8ClampedArray(b+h),st=0;st<b;st++)_[st]=this.field.multiply(this.coefficients[st],j);return new g(this.field,_)},g.prototype.evaluateAt=function(h){var j=0;if(h===0)return this.getCoefficient(0);var b=this.coefficients.length;if(h===1)return this.coefficients.forEach(function(st){j=c.addOrSubtractGF(j,st)}),j;j=this.coefficients[0];for(var _=1;_<b;_++)j=c.addOrSubtractGF(this.field.multiply(h,j),this.coefficients[_]);return j},g}();o.default=d},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(4),d=a(5),g=a(11),h=a(12);function j(st){var tt=h.locate(st);if(!tt)return null;for(var nt=0,xt=tt;nt<xt.length;nt++){var ut=xt[nt],_e=g.extract(st,ut),$=d.decode(_e.matrix);if($)return{binaryData:$.bytes,data:$.text,chunks:$.chunks,version:$.version,location:{topRightCorner:_e.mappingFunction(ut.dimension,0),topLeftCorner:_e.mappingFunction(0,0),bottomRightCorner:_e.mappingFunction(ut.dimension,ut.dimension),bottomLeftCorner:_e.mappingFunction(0,ut.dimension),topRightFinderPattern:ut.topRight,topLeftFinderPattern:ut.topLeft,bottomLeftFinderPattern:ut.bottomLeft,bottomRightAlignmentPattern:ut.alignmentPattern}}}return null}var b={inversionAttempts:"attemptBoth"};function _(st,tt,nt,xt){xt===void 0&&(xt={});var ut=b;Object.keys(ut||{}).forEach(function(rt){ut[rt]=xt[rt]||ut[rt]});var _e=ut.inversionAttempts==="attemptBoth"||ut.inversionAttempts==="invertFirst",$=ut.inversionAttempts==="onlyInvert"||ut.inversionAttempts==="invertFirst",at=c.binarize(st,tt,nt,_e),it=at.binarized,et=at.inverted,ot=j($?et:it);return!ot&&(ut.inversionAttempts==="attemptBoth"||ut.inversionAttempts==="invertFirst")&&(ot=j($?it:et)),ot}_.default=_,o.default=_},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(0),d=8,g=24;function h(_,st,tt){return _<st?st:_>tt?tt:_}var j=function(){function _(st,tt){this.width=st,this.data=new Uint8ClampedArray(st*tt)}return _.prototype.get=function(st,tt){return this.data[tt*this.width+st]},_.prototype.set=function(st,tt,nt){this.data[tt*this.width+st]=nt},_}();function b(_,st,tt,nt){if(_.length!==st*tt*4)throw new Error("Malformed data passed to binarizer.");for(var xt=new j(st,tt),ut=0;ut<st;ut++)for(var _e=0;_e<tt;_e++){var $=_[(_e*st+ut)*4+0],at=_[(_e*st+ut)*4+1],it=_[(_e*st+ut)*4+2];xt.set(ut,_e,.2126*$+.7152*at+.0722*it)}for(var et=Math.ceil(st/d),ot=Math.ceil(tt/d),rt=new j(et,ot),lt=0;lt<ot;lt++)for(var ft=0;ft<et;ft++){for(var dt=0,ct=1/0,Et=0,_e=0;_e<d;_e++)for(var ut=0;ut<d;ut++){var gt=xt.get(ft*d+ut,lt*d+_e);dt+=gt,ct=Math.min(ct,gt),Et=Math.max(Et,gt)}var Lt=dt/Math.pow(d,2);if(Et-ct<=g&&(Lt=ct/2,lt>0&&ft>0)){var Dt=(rt.get(ft,lt-1)+2*rt.get(ft-1,lt)+rt.get(ft-1,lt-1))/4;ct<Dt&&(Lt=Dt)}rt.set(ft,lt,Lt)}var Ft=c.BitMatrix.createEmpty(st,tt),bt=null;nt&&(bt=c.BitMatrix.createEmpty(st,tt));for(var lt=0;lt<ot;lt++)for(var ft=0;ft<et;ft++){for(var _t=h(ft,2,et-3),yt=h(lt,2,ot-3),dt=0,jt=-2;jt<=2;jt++)for(var St=-2;St<=2;St++)dt+=rt.get(_t+jt,yt+St);for(var At=dt/25,jt=0;jt<d;jt++)for(var St=0;St<d;St++){var ut=ft*d+jt,_e=lt*d+St,mt=xt.get(ut,_e);Ft.set(ut,_e,mt<=At),nt&&bt.set(ut,_e,!(mt<=At))}}return nt?{binarized:Ft,inverted:bt}:{binarized:Ft}}o.binarize=b},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(0),d=a(6),g=a(9),h=a(10);function j(it,et){for(var ot=it^et,rt=0;ot;)rt++,ot&=ot-1;return rt}function b(it,et){return et<<1|it}var _=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],st=[function(it){return(it.y+it.x)%2===0},function(it){return it.y%2===0},function(it){return it.x%3===0},function(it){return(it.y+it.x)%3===0},function(it){return(Math.floor(it.y/2)+Math.floor(it.x/3))%2===0},function(it){return it.x*it.y%2+it.x*it.y%3===0},function(it){return(it.y*it.x%2+it.y*it.x%3)%2===0},function(it){return((it.y+it.x)%2+it.y*it.x%3)%2===0}];function tt(it){var et=17+4*it.versionNumber,ot=c.BitMatrix.createEmpty(et,et);ot.setRegion(0,0,9,9,!0),ot.setRegion(et-8,0,8,9,!0),ot.setRegion(0,et-8,9,8,!0);for(var rt=0,lt=it.alignmentPatternCenters;rt<lt.length;rt++)for(var ft=lt[rt],dt=0,ct=it.alignmentPatternCenters;dt<ct.length;dt++){var Et=ct[dt];ft===6&&Et===6||ft===6&&Et===et-7||ft===et-7&&Et===6||ot.setRegion(ft-2,Et-2,5,5,!0)}return ot.setRegion(6,9,1,et-17,!0),ot.setRegion(9,6,et-17,1,!0),it.versionNumber>6&&(ot.setRegion(et-11,0,3,6,!0),ot.setRegion(0,et-11,6,3,!0)),ot}function nt(it,et,ot){for(var rt=st[ot.dataMask],lt=it.height,ft=tt(et),dt=[],ct=0,Et=0,gt=!0,Lt=lt-1;Lt>0;Lt-=2){Lt===6&&Lt--;for(var Dt=0;Dt<lt;Dt++)for(var Ft=gt?lt-1-Dt:Dt,bt=0;bt<2;bt++){var _t=Lt-bt;if(!ft.get(_t,Ft)){Et++;var yt=it.get(_t,Ft);rt({y:Ft,x:_t})&&(yt=!yt),ct=b(yt,ct),Et===8&&(dt.push(ct),Et=0,ct=0)}}gt=!gt}return dt}function xt(it){var et=it.height,ot=Math.floor((et-17)/4);if(ot<=6)return h.VERSIONS[ot-1];for(var rt=0,lt=5;lt>=0;lt--)for(var ft=et-9;ft>=et-11;ft--)rt=b(it.get(ft,lt),rt);for(var dt=0,ft=5;ft>=0;ft--)for(var lt=et-9;lt>=et-11;lt--)dt=b(it.get(ft,lt),dt);for(var ct=1/0,Et,gt=0,Lt=h.VERSIONS;gt<Lt.length;gt++){var Dt=Lt[gt];if(Dt.infoBits===rt||Dt.infoBits===dt)return Dt;var Ft=j(rt,Dt.infoBits);Ft<ct&&(Et=Dt,ct=Ft),Ft=j(dt,Dt.infoBits),Ft<ct&&(Et=Dt,ct=Ft)}if(ct<=3)return Et}function ut(it){for(var et=0,ot=0;ot<=8;ot++)ot!==6&&(et=b(it.get(ot,8),et));for(var rt=7;rt>=0;rt--)rt!==6&&(et=b(it.get(8,rt),et));for(var lt=it.height,ft=0,rt=lt-1;rt>=lt-7;rt--)ft=b(it.get(8,rt),ft);for(var ot=lt-8;ot<lt;ot++)ft=b(it.get(ot,8),ft);for(var dt=1/0,ct=null,Et=0,gt=_;Et<gt.length;Et++){var Lt=gt[Et],Dt=Lt.bits,Ft=Lt.formatInfo;if(Dt===et||Dt===ft)return Ft;var bt=j(et,Dt);bt<dt&&(ct=Ft,dt=bt),et!==ft&&(bt=j(ft,Dt),bt<dt&&(ct=Ft,dt=bt))}return dt<=3?ct:null}function _e(it,et,ot){var rt=et.errorCorrectionLevels[ot],lt=[],ft=0;if(rt.ecBlocks.forEach(function(yt){for(var jt=0;jt<yt.numBlocks;jt++)lt.push({numDataCodewords:yt.dataCodewordsPerBlock,codewords:[]}),ft+=yt.dataCodewordsPerBlock+rt.ecCodewordsPerBlock}),it.length<ft)return null;it=it.slice(0,ft);for(var dt=rt.ecBlocks[0].dataCodewordsPerBlock,ct=0;ct<dt;ct++)for(var Et=0,gt=lt;Et<gt.length;Et++){var Lt=gt[Et];Lt.codewords.push(it.shift())}if(rt.ecBlocks.length>1)for(var Dt=rt.ecBlocks[0].numBlocks,Ft=rt.ecBlocks[1].numBlocks,ct=0;ct<Ft;ct++)lt[Dt+ct].codewords.push(it.shift());for(;it.length>0;)for(var bt=0,_t=lt;bt<_t.length;bt++){var Lt=_t[bt];Lt.codewords.push(it.shift())}return lt}function $(it){var et=xt(it);if(!et)return null;var ot=ut(it);if(!ot)return null;var rt=nt(it,et,ot),lt=_e(rt,et,ot.errorCorrectionLevel);if(!lt)return null;for(var ft=lt.reduce(function(bt,_t){return bt+_t.numDataCodewords},0),dt=new Uint8ClampedArray(ft),ct=0,Et=0,gt=lt;Et<gt.length;Et++){var Lt=gt[Et],Dt=g.decode(Lt.codewords,Lt.codewords.length-Lt.numDataCodewords);if(!Dt)return null;for(var Ft=0;Ft<Lt.numDataCodewords;Ft++)dt[ct++]=Dt[Ft]}try{return d.decode(dt,et.versionNumber)}catch{return null}}function at(it){if(it==null)return null;var et=$(it);if(et)return et;for(var ot=0;ot<it.width;ot++)for(var rt=ot+1;rt<it.height;rt++)it.get(ot,rt)!==it.get(rt,ot)&&(it.set(ot,rt,!it.get(ot,rt)),it.set(rt,ot,!it.get(rt,ot)));return $(it)}o.decode=at},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(7),d=a(8),g;(function(xt){xt.Numeric="numeric",xt.Alphanumeric="alphanumeric",xt.Byte="byte",xt.Kanji="kanji",xt.ECI="eci"})(g=o.Mode||(o.Mode={}));var h;(function(xt){xt[xt.Terminator=0]="Terminator",xt[xt.Numeric=1]="Numeric",xt[xt.Alphanumeric=2]="Alphanumeric",xt[xt.Byte=4]="Byte",xt[xt.Kanji=8]="Kanji",xt[xt.ECI=7]="ECI"})(h||(h={}));function j(xt,ut){for(var _e=[],$="",at=[10,12,14][ut],it=xt.readBits(at);it>=3;){var et=xt.readBits(10);if(et>=1e3)throw new Error("Invalid numeric value above 999");var ot=Math.floor(et/100),rt=Math.floor(et/10)%10,lt=et%10;_e.push(48+ot,48+rt,48+lt),$+=ot.toString()+rt.toString()+lt.toString(),it-=3}if(it===2){var et=xt.readBits(7);if(et>=100)throw new Error("Invalid numeric value above 99");var ot=Math.floor(et/10),rt=et%10;_e.push(48+ot,48+rt),$+=ot.toString()+rt.toString()}else if(it===1){var et=xt.readBits(4);if(et>=10)throw new Error("Invalid numeric value above 9");_e.push(48+et),$+=et.toString()}return{bytes:_e,text:$}}var b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function _(xt,ut){for(var _e=[],$="",at=[9,11,13][ut],it=xt.readBits(at);it>=2;){var et=xt.readBits(11),ot=Math.floor(et/45),rt=et%45;_e.push(b[ot].charCodeAt(0),b[rt].charCodeAt(0)),$+=b[ot]+b[rt],it-=2}if(it===1){var ot=xt.readBits(6);_e.push(b[ot].charCodeAt(0)),$+=b[ot]}return{bytes:_e,text:$}}function st(xt,ut){for(var _e=[],$="",at=[8,16,16][ut],it=xt.readBits(at),et=0;et<it;et++){var ot=xt.readBits(8);_e.push(ot)}try{$+=decodeURIComponent(_e.map(function(rt){return"%"+("0"+rt.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:_e,text:$}}function tt(xt,ut){for(var _e=[],$="",at=[8,10,12][ut],it=xt.readBits(at),et=0;et<it;et++){var ot=xt.readBits(13),rt=Math.floor(ot/192)<<8|ot%192;rt<7936?rt+=33088:rt+=49472,_e.push(rt>>8,rt&255),$+=String.fromCharCode(d.shiftJISTable[rt])}return{bytes:_e,text:$}}function nt(xt,ut){for(var _e,$,at,it,et=new c.BitStream(xt),ot=ut<=9?0:ut<=26?1:2,rt={text:"",bytes:[],chunks:[],version:ut};et.available()>=4;){var lt=et.readBits(4);if(lt===h.Terminator)return rt;if(lt===h.ECI)et.readBits(1)===0?rt.chunks.push({type:g.ECI,assignmentNumber:et.readBits(7)}):et.readBits(1)===0?rt.chunks.push({type:g.ECI,assignmentNumber:et.readBits(14)}):et.readBits(1)===0?rt.chunks.push({type:g.ECI,assignmentNumber:et.readBits(21)}):rt.chunks.push({type:g.ECI,assignmentNumber:-1});else if(lt===h.Numeric){var ft=j(et,ot);rt.text+=ft.text,(_e=rt.bytes).push.apply(_e,ft.bytes),rt.chunks.push({type:g.Numeric,text:ft.text})}else if(lt===h.Alphanumeric){var dt=_(et,ot);rt.text+=dt.text,($=rt.bytes).push.apply($,dt.bytes),rt.chunks.push({type:g.Alphanumeric,text:dt.text})}else if(lt===h.Byte){var ct=st(et,ot);rt.text+=ct.text,(at=rt.bytes).push.apply(at,ct.bytes),rt.chunks.push({type:g.Byte,bytes:ct.bytes,text:ct.text})}else if(lt===h.Kanji){var Et=tt(et,ot);rt.text+=Et.text,(it=rt.bytes).push.apply(it,Et.bytes),rt.chunks.push({type:g.Kanji,bytes:Et.bytes,text:Et.text})}}if(et.available()===0||et.readBits(et.available())===0)return rt}o.decode=nt},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=function(){function d(g){this.byteOffset=0,this.bitOffset=0,this.bytes=g}return d.prototype.readBits=function(g){if(g<1||g>32||g>this.available())throw new Error("Cannot read "+g.toString()+" bits");var h=0;if(this.bitOffset>0){var j=8-this.bitOffset,b=g<j?g:j,_=j-b,st=255>>8-b<<_;h=(this.bytes[this.byteOffset]&st)>>_,g-=b,this.bitOffset+=b,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(g>0){for(;g>=8;)h=h<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,g-=8;if(g>0){var _=8-g,st=255>>_<<_;h=h<<g|(this.bytes[this.byteOffset]&st)>>_,this.bitOffset+=g}}return h},d.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},d}();o.BitStream=c},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0}),o.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(1),d=a(2);function g(_,st,tt,nt){var xt;st.degree()<tt.degree()&&(xt=[tt,st],st=xt[0],tt=xt[1]);for(var ut=st,_e=tt,$=_.zero,at=_.one;_e.degree()>=nt/2;){var it=ut,et=$;if(ut=_e,$=at,ut.isZero())return null;_e=it;for(var ot=_.zero,rt=ut.getCoefficient(ut.degree()),lt=_.inverse(rt);_e.degree()>=ut.degree()&&!_e.isZero();){var ft=_e.degree()-ut.degree(),dt=_.multiply(_e.getCoefficient(_e.degree()),lt);ot=ot.addOrSubtract(_.buildMonomial(ft,dt)),_e=_e.addOrSubtract(ut.multiplyByMonomial(ft,dt))}if(at=ot.multiplyPoly($).addOrSubtract(et),_e.degree()>=ut.degree())return null}var ct=at.getCoefficient(0);if(ct===0)return null;var Et=_.inverse(ct);return[at.multiply(Et),_e.multiply(Et)]}function h(_,st){var tt=st.degree();if(tt===1)return[st.getCoefficient(1)];for(var nt=new Array(tt),xt=0,ut=1;ut<_.size&&xt<tt;ut++)st.evaluateAt(ut)===0&&(nt[xt]=_.inverse(ut),xt++);return xt!==tt?null:nt}function j(_,st,tt){for(var nt=tt.length,xt=new Array(nt),ut=0;ut<nt;ut++){for(var _e=_.inverse(tt[ut]),$=1,at=0;at<nt;at++)ut!==at&&($=_.multiply($,c.addOrSubtractGF(1,_.multiply(tt[at],_e))));xt[ut]=_.multiply(st.evaluateAt(_e),_.inverse($)),_.generatorBase!==0&&(xt[ut]=_.multiply(xt[ut],_e))}return xt}function b(_,st){var tt=new Uint8ClampedArray(_.length);tt.set(_);for(var nt=new c.default(285,256,0),xt=new d.default(nt,tt),ut=new Uint8ClampedArray(st),_e=!1,$=0;$<st;$++){var at=xt.evaluateAt(nt.exp($+nt.generatorBase));ut[ut.length-1-$]=at,at!==0&&(_e=!0)}if(!_e)return tt;var it=new d.default(nt,ut),et=g(nt,nt.buildMonomial(st,1),it,st);if(et===null)return null;var ot=h(nt,et[0]);if(ot==null)return null;for(var rt=j(nt,et[1],ot),lt=0;lt<ot.length;lt++){var ft=tt.length-1-nt.log(ot[lt]);if(ft<0)return null;tt[ft]=c.addOrSubtractGF(tt[ft],rt[lt])}return tt}o.decode=b},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0}),o.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=a(0);function d(b,_,st,tt){var nt=b.x-_.x+st.x-tt.x,xt=b.y-_.y+st.y-tt.y;if(nt===0&&xt===0)return{a11:_.x-b.x,a12:_.y-b.y,a13:0,a21:st.x-_.x,a22:st.y-_.y,a23:0,a31:b.x,a32:b.y,a33:1};var ut=_.x-st.x,_e=tt.x-st.x,$=_.y-st.y,at=tt.y-st.y,it=ut*at-_e*$,et=(nt*at-_e*xt)/it,ot=(ut*xt-nt*$)/it;return{a11:_.x-b.x+et*_.x,a12:_.y-b.y+et*_.y,a13:et,a21:tt.x-b.x+ot*tt.x,a22:tt.y-b.y+ot*tt.y,a23:ot,a31:b.x,a32:b.y,a33:1}}function g(b,_,st,tt){var nt=d(b,_,st,tt);return{a11:nt.a22*nt.a33-nt.a23*nt.a32,a12:nt.a13*nt.a32-nt.a12*nt.a33,a13:nt.a12*nt.a23-nt.a13*nt.a22,a21:nt.a23*nt.a31-nt.a21*nt.a33,a22:nt.a11*nt.a33-nt.a13*nt.a31,a23:nt.a13*nt.a21-nt.a11*nt.a23,a31:nt.a21*nt.a32-nt.a22*nt.a31,a32:nt.a12*nt.a31-nt.a11*nt.a32,a33:nt.a11*nt.a22-nt.a12*nt.a21}}function h(b,_){return{a11:b.a11*_.a11+b.a21*_.a12+b.a31*_.a13,a12:b.a12*_.a11+b.a22*_.a12+b.a32*_.a13,a13:b.a13*_.a11+b.a23*_.a12+b.a33*_.a13,a21:b.a11*_.a21+b.a21*_.a22+b.a31*_.a23,a22:b.a12*_.a21+b.a22*_.a22+b.a32*_.a23,a23:b.a13*_.a21+b.a23*_.a22+b.a33*_.a23,a31:b.a11*_.a31+b.a21*_.a32+b.a31*_.a33,a32:b.a12*_.a31+b.a22*_.a32+b.a32*_.a33,a33:b.a13*_.a31+b.a23*_.a32+b.a33*_.a33}}function j(b,_){for(var st=g({x:3.5,y:3.5},{x:_.dimension-3.5,y:3.5},{x:_.dimension-6.5,y:_.dimension-6.5},{x:3.5,y:_.dimension-3.5}),tt=d(_.topLeft,_.topRight,_.alignmentPattern,_.bottomLeft),nt=h(tt,st),xt=c.BitMatrix.createEmpty(_.dimension,_.dimension),ut=function(ot,rt){var lt=nt.a13*ot+nt.a23*rt+nt.a33;return{x:(nt.a11*ot+nt.a21*rt+nt.a31)/lt,y:(nt.a12*ot+nt.a22*rt+nt.a32)/lt}},_e=0;_e<_.dimension;_e++)for(var $=0;$<_.dimension;$++){var at=$+.5,it=_e+.5,et=ut(at,it);xt.set($,_e,b.get(Math.floor(et.x),Math.floor(et.y)))}return{matrix:xt,mappingFunction:ut}}o.extract=j},function(i,o,a){Object.defineProperty(o,"__esModule",{value:!0});var c=4,d=.5,g=1.5,h=function(at,it){return Math.sqrt(Math.pow(it.x-at.x,2)+Math.pow(it.y-at.y,2))};function j(at){return at.reduce(function(it,et){return it+et})}function b(at,it,et){var ot,rt,lt,ft,dt=h(at,it),ct=h(it,et),Et=h(at,et),gt,Lt,Dt;return ct>=dt&&ct>=Et?(ot=[it,at,et],gt=ot[0],Lt=ot[1],Dt=ot[2]):Et>=ct&&Et>=dt?(rt=[at,it,et],gt=rt[0],Lt=rt[1],Dt=rt[2]):(lt=[at,et,it],gt=lt[0],Lt=lt[1],Dt=lt[2]),(Dt.x-Lt.x)*(gt.y-Lt.y)-(Dt.y-Lt.y)*(gt.x-Lt.x)<0&&(ft=[Dt,gt],gt=ft[0],Dt=ft[1]),{bottomLeft:gt,topLeft:Lt,topRight:Dt}}function _(at,it,et,ot){var rt=(j(tt(at,et,ot,5))/7+j(tt(at,it,ot,5))/7+j(tt(et,at,ot,5))/7+j(tt(it,at,ot,5))/7)/4;if(rt<1)throw new Error("Invalid module size");var lt=Math.round(h(at,it)/rt),ft=Math.round(h(at,et)/rt),dt=Math.floor((lt+ft)/2)+7;switch(dt%4){case 0:dt++;break;case 2:dt--;break}return{dimension:dt,moduleSize:rt}}function st(at,it,et,ot){var rt=[{x:Math.floor(at.x),y:Math.floor(at.y)}],lt=Math.abs(it.y-at.y)>Math.abs(it.x-at.x),ft,dt,ct,Et;lt?(ft=Math.floor(at.y),dt=Math.floor(at.x),ct=Math.floor(it.y),Et=Math.floor(it.x)):(ft=Math.floor(at.x),dt=Math.floor(at.y),ct=Math.floor(it.x),Et=Math.floor(it.y));for(var gt=Math.abs(ct-ft),Lt=Math.abs(Et-dt),Dt=Math.floor(-gt/2),Ft=ft<ct?1:-1,bt=dt<Et?1:-1,_t=!0,yt=ft,jt=dt;yt!==ct+Ft;yt+=Ft){var St=lt?jt:yt,At=lt?yt:jt;if(et.get(St,At)!==_t&&(_t=!_t,rt.push({x:St,y:At}),rt.length===ot+1))break;if(Dt+=Lt,Dt>0){if(jt===Et)break;jt+=bt,Dt-=gt}}for(var mt=[],ht=0;ht<ot;ht++)rt[ht]&&rt[ht+1]?mt.push(h(rt[ht],rt[ht+1])):mt.push(0);return mt}function tt(at,it,et,ot){var rt,lt=it.y-at.y,ft=it.x-at.x,dt=st(at,it,et,Math.ceil(ot/2)),ct=st(at,{x:at.x-ft,y:at.y-lt},et,Math.ceil(ot/2)),Et=dt.shift()+ct.shift()-1;return(rt=ct.concat(Et)).concat.apply(rt,dt)}function nt(at,it){var et=j(at)/j(it),ot=0;return it.forEach(function(rt,lt){ot+=Math.pow(at[lt]-rt*et,2)}),{averageSize:et,error:ot}}function xt(at,it,et){try{var ot=tt(at,{x:-1,y:at.y},et,it.length),rt=tt(at,{x:at.x,y:-1},et,it.length),lt={x:Math.max(0,at.x-at.y)-1,y:Math.max(0,at.y-at.x)-1},ft=tt(at,lt,et,it.length),dt={x:Math.min(et.width,at.x+at.y)+1,y:Math.min(et.height,at.y+at.x)+1},ct=tt(at,dt,et,it.length),Et=nt(ot,it),gt=nt(rt,it),Lt=nt(ft,it),Dt=nt(ct,it),Ft=Math.sqrt(Et.error*Et.error+gt.error*gt.error+Lt.error*Lt.error+Dt.error*Dt.error),bt=(Et.averageSize+gt.averageSize+Lt.averageSize+Dt.averageSize)/4,_t=(Math.pow(Et.averageSize-bt,2)+Math.pow(gt.averageSize-bt,2)+Math.pow(Lt.averageSize-bt,2)+Math.pow(Dt.averageSize-bt,2))/bt;return Ft+_t}catch{return 1/0}}function ut(at,it){for(var et=Math.round(it.x);at.get(et,Math.round(it.y));)et--;for(var ot=Math.round(it.x);at.get(ot,Math.round(it.y));)ot++;for(var rt=(et+ot)/2,lt=Math.round(it.y);at.get(Math.round(rt),lt);)lt--;for(var ft=Math.round(it.y);at.get(Math.round(rt),ft);)ft++;var dt=(lt+ft)/2;return{x:rt,y:dt}}function _e(at){for(var it=[],et=[],ot=[],rt=[],lt=function(St){for(var At=0,mt=!1,ht=[0,0,0,0,0],vt=function(Pt){var Bt=at.get(Pt,St);if(Bt===mt)At++;else{ht=[ht[1],ht[2],ht[3],ht[4],At],At=1,mt=Bt;var Ut=j(ht)/7,Nt=Math.abs(ht[0]-Ut)<Ut&&Math.abs(ht[1]-Ut)<Ut&&Math.abs(ht[2]-3*Ut)<3*Ut&&Math.abs(ht[3]-Ut)<Ut&&Math.abs(ht[4]-Ut)<Ut&&!Bt,It=j(ht.slice(-3))/3,Ht=Math.abs(ht[2]-It)<It&&Math.abs(ht[3]-It)<It&&Math.abs(ht[4]-It)<It&&Bt;if(Nt){var Qt=Pt-ht[3]-ht[4],tn=Qt-ht[2],an={startX:tn,endX:Qt,y:St},Wt=et.filter(function(kt){return tn>=kt.bottom.startX&&tn<=kt.bottom.endX||Qt>=kt.bottom.startX&&tn<=kt.bottom.endX||tn<=kt.bottom.startX&&Qt>=kt.bottom.endX&&ht[2]/(kt.bottom.endX-kt.bottom.startX)<g&&ht[2]/(kt.bottom.endX-kt.bottom.startX)>d});Wt.length>0?Wt[0].bottom=an:et.push({top:an,bottom:an})}if(Ht){var Xt=Pt-ht[4],wt=Xt-ht[3],an={startX:wt,y:St,endX:Xt},Wt=rt.filter(function(zt){return wt>=zt.bottom.startX&&wt<=zt.bottom.endX||Xt>=zt.bottom.startX&&wt<=zt.bottom.endX||wt<=zt.bottom.startX&&Xt>=zt.bottom.endX&&ht[2]/(zt.bottom.endX-zt.bottom.startX)<g&&ht[2]/(zt.bottom.endX-zt.bottom.startX)>d});Wt.length>0?Wt[0].bottom=an:rt.push({top:an,bottom:an})}}},Rt=-1;Rt<=at.width;Rt++)vt(Rt);it.push.apply(it,et.filter(function(Pt){return Pt.bottom.y!==St&&Pt.bottom.y-Pt.top.y>=2})),et=et.filter(function(Pt){return Pt.bottom.y===St}),ot.push.apply(ot,rt.filter(function(Pt){return Pt.bottom.y!==St})),rt=rt.filter(function(Pt){return Pt.bottom.y===St})},ft=0;ft<=at.height;ft++)lt(ft);it.push.apply(it,et.filter(function(St){return St.bottom.y-St.top.y>=2})),ot.push.apply(ot,rt);var dt=it.filter(function(St){return St.bottom.y-St.top.y>=2}).map(function(St){var At=(St.top.startX+St.top.endX+St.bottom.startX+St.bottom.endX)/4,mt=(St.top.y+St.bottom.y+1)/2;if(at.get(Math.round(At),Math.round(mt))){var ht=[St.top.endX-St.top.startX,St.bottom.endX-St.bottom.startX,St.bottom.y-St.top.y+1],vt=j(ht)/ht.length,Rt=xt({x:Math.round(At),y:Math.round(mt)},[1,1,3,1,1],at);return{score:Rt,x:At,y:mt,size:vt}}}).filter(function(St){return!!St}).sort(function(St,At){return St.score-At.score}).map(function(St,At,mt){if(At>c)return null;var ht=mt.filter(function(Rt,Pt){return At!==Pt}).map(function(Rt){return{x:Rt.x,y:Rt.y,score:Rt.score+Math.pow(Rt.size-St.size,2)/St.size,size:Rt.size}}).sort(function(Rt,Pt){return Rt.score-Pt.score});if(ht.length<2)return null;var vt=St.score+ht[0].score+ht[1].score;return{points:[St].concat(ht.slice(0,2)),score:vt}}).filter(function(St){return!!St}).sort(function(St,At){return St.score-At.score});if(dt.length===0)return null;var ct=b(dt[0].points[0],dt[0].points[1],dt[0].points[2]),Et=ct.topRight,gt=ct.topLeft,Lt=ct.bottomLeft,Dt=$(at,ot,Et,gt,Lt),Ft=[];Dt&&Ft.push({alignmentPattern:{x:Dt.alignmentPattern.x,y:Dt.alignmentPattern.y},bottomLeft:{x:Lt.x,y:Lt.y},dimension:Dt.dimension,topLeft:{x:gt.x,y:gt.y},topRight:{x:Et.x,y:Et.y}});var bt=ut(at,Et),_t=ut(at,gt),yt=ut(at,Lt),jt=$(at,ot,bt,_t,yt);return jt&&Ft.push({alignmentPattern:{x:jt.alignmentPattern.x,y:jt.alignmentPattern.y},bottomLeft:{x:yt.x,y:yt.y},topLeft:{x:_t.x,y:_t.y},topRight:{x:bt.x,y:bt.y},dimension:jt.dimension}),Ft.length===0?null:Ft}o.locate=_e;function $(at,it,et,ot,rt){var lt,ft,dt;try{lt=_(ot,et,rt,at),ft=lt.dimension,dt=lt.moduleSize}catch{return null}var ct={x:et.x-ot.x+rt.x,y:et.y-ot.y+rt.y},Et=(h(ot,rt)+h(ot,et))/2/dt,gt=1-3/Et,Lt={x:ot.x+gt*(ct.x-ot.x),y:ot.y+gt*(ct.y-ot.y)},Dt=it.map(function(bt){var _t=(bt.top.startX+bt.top.endX+bt.bottom.startX+bt.bottom.endX)/4,yt=(bt.top.y+bt.bottom.y+1)/2;if(at.get(Math.floor(_t),Math.floor(yt))){var jt=[bt.top.endX-bt.top.startX,bt.bottom.endX-bt.bottom.startX,bt.bottom.y-bt.top.y+1];j(jt)/jt.length;var St=xt({x:Math.floor(_t),y:Math.floor(yt)},[1,1,1],at),At=St+h({x:_t,y:yt},Lt);return{x:_t,y:yt,score:At}}}).filter(function(bt){return!!bt}).sort(function(bt,_t){return bt.score-_t.score}),Ft=Et>=15&&Dt.length?Dt[0]:Lt;return{alignmentPattern:Ft,dimension:ft}}}]).default})})(jsQR$1);var jsQRExports=jsQR$1.exports;const jsQR=getDefaultExportFromCjs(jsQRExports);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports$1){(function(s,i){module.exports=s.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,s)=>{var Yn;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=yt,s.bytesToString=It,s.createValidAbsoluteUrl=St,s.getModificationDate=fn,s.getUuid=Ln,s.getVerbosityLevel=Dt,s.info=Ft,s.isArrayBuffer=qt,s.isArrayEqual=Cn,s.isNodeJS=void 0,s.normalizeUnicode=wn,s.objectFromMap=an,s.objectSize=tn,s.setVerbosityLevel=Lt,s.shadow=At,s.string32=Qt,s.stringToBytes=Ht,s.stringToPDFString=en,s.stringToUTF8String=un,s.unreachable=_t,s.utf8StringToString=pn,s.warn=bt;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=i;const o=[1,0,0,1,0,0];s.IDENTITY_MATRIX=o;const a=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=a;const c=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;s.LINE_FACTOR=d;const g=.35;s.LINE_DESCENT_FACTOR=g;const h=g/d;s.BASELINE_FACTOR=h;const j={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=j;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=b;const _="pdfjs_internal_editor_";s.AnnotationEditorPrefix=_;const st={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=st;const tt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=tt;const nt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=nt;const xt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=xt;const ut={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=ut;const _e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=_e;const $={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=$;const at={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=at;const it={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=it;const et={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=et;const ot={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=ot;const rt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=rt;const lt={O:"PageOpen",C:"PageClose"};s.PageActionEventType=lt;const ft={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=ft;const dt={NONE:0,BINARY:1};s.CMapCompressionType=dt;const ct={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=ct;const Et={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=Et;let gt=ft.WARNINGS;function Lt(gn){Number.isInteger(gn)&&(gt=gn)}function Dt(){return gt}function Ft(gn){gt>=ft.INFOS&&console.log(`Info: ${gn}`)}function bt(gn){gt>=ft.WARNINGS&&console.log(`Warning: ${gn}`)}function _t(gn){throw new Error(gn)}function yt(gn,rn){gn||_t(rn)}function jt(gn){switch(gn==null?void 0:gn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function St(gn,rn=null,sn=null){if(!gn)return null;try{if(sn&&typeof gn=="string"){if(sn.addDefaultProtocol&&gn.startsWith("www.")){const Wn=gn.match(/\./g);(Wn==null?void 0:Wn.length)>=2&&(gn=`http://${gn}`)}if(sn.tryConvertEncoding)try{gn=un(gn)}catch{}}const Sn=rn?new URL(gn,rn):new URL(gn);if(jt(Sn))return Sn}catch{}return null}function At(gn,rn,sn,Sn=!1){return Object.defineProperty(gn,rn,{value:sn,enumerable:!Sn,configurable:!0,writable:!1}),sn}const mt=function(){function rn(sn,Sn){this.constructor===rn&&_t("Cannot initialize BaseException."),this.message=sn,this.name=Sn}return rn.prototype=new Error,rn.constructor=rn,rn}();s.BaseException=mt;class ht extends mt{constructor(rn,sn){super(rn,"PasswordException"),this.code=sn}}s.PasswordException=ht;class vt extends mt{constructor(rn,sn){super(rn,"UnknownErrorException"),this.details=sn}}s.UnknownErrorException=vt;class Rt extends mt{constructor(rn){super(rn,"InvalidPDFException")}}s.InvalidPDFException=Rt;class Pt extends mt{constructor(rn){super(rn,"MissingPDFException")}}s.MissingPDFException=Pt;class Bt extends mt{constructor(rn,sn){super(rn,"UnexpectedResponseException"),this.status=sn}}s.UnexpectedResponseException=Bt;class Ut extends mt{constructor(rn){super(rn,"FormatError")}}s.FormatError=Ut;class Nt extends mt{constructor(rn){super(rn,"AbortException")}}s.AbortException=Nt;function It(gn){(typeof gn!="object"||(gn==null?void 0:gn.length)===void 0)&&_t("Invalid argument for bytesToString");const rn=gn.length,sn=8192;if(rn<sn)return String.fromCharCode.apply(null,gn);const Sn=[];for(let Wn=0;Wn<rn;Wn+=sn){const Vn=Math.min(Wn+sn,rn),Gt=gn.subarray(Wn,Vn);Sn.push(String.fromCharCode.apply(null,Gt))}return Sn.join("")}function Ht(gn){typeof gn!="string"&&_t("Invalid argument for stringToBytes");const rn=gn.length,sn=new Uint8Array(rn);for(let Sn=0;Sn<rn;++Sn)sn[Sn]=gn.charCodeAt(Sn)&255;return sn}function Qt(gn){return String.fromCharCode(gn>>24&255,gn>>16&255,gn>>8&255,gn&255)}function tn(gn){return Object.keys(gn).length}function an(gn){const rn=Object.create(null);for(const[sn,Sn]of gn)rn[sn]=Sn;return rn}function Wt(){const gn=new Uint8Array(4);return gn[0]=1,new Uint32Array(gn.buffer,0,1)[0]===1}function Xt(){try{return new Function(""),!0}catch{return!1}}class wt{static get isLittleEndian(){return At(this,"isLittleEndian",Wt())}static get isEvalSupported(){return At(this,"isEvalSupported",Xt())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?At(this,"platform",{isWin:!1,isMac:!1}):At(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var rn,sn;return At(this,"isCSSRoundSupported",(sn=(rn=globalThis.CSS)==null?void 0:rn.supports)==null?void 0:sn.call(rn,"width: round(1.5px, 1px)"))}}s.FeatureTest=wt;const kt=[...Array(256).keys()].map(gn=>gn.toString(16).padStart(2,"0"));class Tt{static makeHexColor(rn,sn,Sn){return`#${kt[rn]}${kt[sn]}${kt[Sn]}`}static scaleMinMax(rn,sn){let Sn;rn[0]?(rn[0]<0&&(Sn=sn[0],sn[0]=sn[1],sn[1]=Sn),sn[0]*=rn[0],sn[1]*=rn[0],rn[3]<0&&(Sn=sn[2],sn[2]=sn[3],sn[3]=Sn),sn[2]*=rn[3],sn[3]*=rn[3]):(Sn=sn[0],sn[0]=sn[2],sn[2]=Sn,Sn=sn[1],sn[1]=sn[3],sn[3]=Sn,rn[1]<0&&(Sn=sn[2],sn[2]=sn[3],sn[3]=Sn),sn[2]*=rn[1],sn[3]*=rn[1],rn[2]<0&&(Sn=sn[0],sn[0]=sn[1],sn[1]=Sn),sn[0]*=rn[2],sn[1]*=rn[2]),sn[0]+=rn[4],sn[1]+=rn[4],sn[2]+=rn[5],sn[3]+=rn[5]}static transform(rn,sn){return[rn[0]*sn[0]+rn[2]*sn[1],rn[1]*sn[0]+rn[3]*sn[1],rn[0]*sn[2]+rn[2]*sn[3],rn[1]*sn[2]+rn[3]*sn[3],rn[0]*sn[4]+rn[2]*sn[5]+rn[4],rn[1]*sn[4]+rn[3]*sn[5]+rn[5]]}static applyTransform(rn,sn){const Sn=rn[0]*sn[0]+rn[1]*sn[2]+sn[4],Wn=rn[0]*sn[1]+rn[1]*sn[3]+sn[5];return[Sn,Wn]}static applyInverseTransform(rn,sn){const Sn=sn[0]*sn[3]-sn[1]*sn[2],Wn=(rn[0]*sn[3]-rn[1]*sn[2]+sn[2]*sn[5]-sn[4]*sn[3])/Sn,Vn=(-rn[0]*sn[1]+rn[1]*sn[0]+sn[4]*sn[1]-sn[5]*sn[0])/Sn;return[Wn,Vn]}static getAxialAlignedBoundingBox(rn,sn){const Sn=this.applyTransform(rn,sn),Wn=this.applyTransform(rn.slice(2,4),sn),Vn=this.applyTransform([rn[0],rn[3]],sn),Gt=this.applyTransform([rn[2],rn[1]],sn);return[Math.min(Sn[0],Wn[0],Vn[0],Gt[0]),Math.min(Sn[1],Wn[1],Vn[1],Gt[1]),Math.max(Sn[0],Wn[0],Vn[0],Gt[0]),Math.max(Sn[1],Wn[1],Vn[1],Gt[1])]}static inverseTransform(rn){const sn=rn[0]*rn[3]-rn[1]*rn[2];return[rn[3]/sn,-rn[1]/sn,-rn[2]/sn,rn[0]/sn,(rn[2]*rn[5]-rn[4]*rn[3])/sn,(rn[4]*rn[1]-rn[5]*rn[0])/sn]}static singularValueDecompose2dScale(rn){const sn=[rn[0],rn[2],rn[1],rn[3]],Sn=rn[0]*sn[0]+rn[1]*sn[2],Wn=rn[0]*sn[1]+rn[1]*sn[3],Vn=rn[2]*sn[0]+rn[3]*sn[2],Gt=rn[2]*sn[1]+rn[3]*sn[3],hn=(Sn+Gt)/2,vn=Math.sqrt((Sn+Gt)**2-4*(Sn*Gt-Vn*Wn))/2,Tn=hn+vn||1,In=hn-vn||1;return[Math.sqrt(Tn),Math.sqrt(In)]}static normalizeRect(rn){const sn=rn.slice(0);return rn[0]>rn[2]&&(sn[0]=rn[2],sn[2]=rn[0]),rn[1]>rn[3]&&(sn[1]=rn[3],sn[3]=rn[1]),sn}static intersect(rn,sn){const Sn=Math.max(Math.min(rn[0],rn[2]),Math.min(sn[0],sn[2])),Wn=Math.min(Math.max(rn[0],rn[2]),Math.max(sn[0],sn[2]));if(Sn>Wn)return null;const Vn=Math.max(Math.min(rn[1],rn[3]),Math.min(sn[1],sn[3])),Gt=Math.min(Math.max(rn[1],rn[3]),Math.max(sn[1],sn[3]));return Vn>Gt?null:[Sn,Vn,Wn,Gt]}static bezierBoundingBox(rn,sn,Sn,Wn,Vn,Gt,hn,vn){const Tn=[],In=[[],[]];let kn,Ot,Mt,Yt,xn,dn,En,yn;for(let Vt=0;Vt<2;++Vt){if(Vt===0?(Ot=6*rn-12*Sn+6*Vn,kn=-3*rn+9*Sn-9*Vn+3*hn,Mt=3*Sn-3*rn):(Ot=6*sn-12*Wn+6*Gt,kn=-3*sn+9*Wn-9*Gt+3*vn,Mt=3*Wn-3*sn),Math.abs(kn)<1e-12){if(Math.abs(Ot)<1e-12)continue;Yt=-Mt/Ot,0<Yt&&Yt<1&&Tn.push(Yt);continue}En=Ot*Ot-4*Mt*kn,yn=Math.sqrt(En),!(En<0)&&(xn=(-Ot+yn)/(2*kn),0<xn&&xn<1&&Tn.push(xn),dn=(-Ot-yn)/(2*kn),0<dn&&dn<1&&Tn.push(dn))}let Mn=Tn.length,_n;const Bn=Mn;for(;Mn--;)Yt=Tn[Mn],_n=1-Yt,In[0][Mn]=_n*_n*_n*rn+3*_n*_n*Yt*Sn+3*_n*Yt*Yt*Vn+Yt*Yt*Yt*hn,In[1][Mn]=_n*_n*_n*sn+3*_n*_n*Yt*Wn+3*_n*Yt*Yt*Gt+Yt*Yt*Yt*vn;return In[0][Bn]=rn,In[1][Bn]=sn,In[0][Bn+1]=hn,In[1][Bn+1]=vn,In[0].length=In[1].length=Bn+2,[Math.min(...In[0]),Math.min(...In[1]),Math.max(...In[0]),Math.max(...In[1])]}}s.Util=Tt;const zt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function en(gn){if(gn[0]>=""){let sn;if(gn[0]===""&&gn[1]===""?sn="utf-16be":gn[0]===""&&gn[1]===""?sn="utf-16le":gn[0]===""&&gn[1]===""&&gn[2]===""&&(sn="utf-8"),sn)try{const Sn=new TextDecoder(sn,{fatal:!0}),Wn=Ht(gn);return Sn.decode(Wn)}catch(Sn){bt(`stringToPDFString: "${Sn}".`)}}const rn=[];for(let sn=0,Sn=gn.length;sn<Sn;sn++){const Wn=zt[gn.charCodeAt(sn)];rn.push(Wn?String.fromCharCode(Wn):gn.charAt(sn))}return rn.join("")}function un(gn){return decodeURIComponent(escape(gn))}function pn(gn){return unescape(encodeURIComponent(gn))}function qt(gn){return typeof gn=="object"&&(gn==null?void 0:gn.byteLength)!==void 0}function Cn(gn,rn){if(gn.length!==rn.length)return!1;for(let sn=0,Sn=gn.length;sn<Sn;sn++)if(gn[sn]!==rn[sn])return!1;return!0}function fn(gn=new Date){return[gn.getUTCFullYear().toString(),(gn.getUTCMonth()+1).toString().padStart(2,"0"),gn.getUTCDate().toString().padStart(2,"0"),gn.getUTCHours().toString().padStart(2,"0"),gn.getUTCMinutes().toString().padStart(2,"0"),gn.getUTCSeconds().toString().padStart(2,"0")].join("")}class On{constructor(){on(this,Yn,!1);this.promise=new Promise((rn,sn)=>{this.resolve=Sn=>{ln(this,Yn,!0),rn(Sn)},this.reject=Sn=>{ln(this,Yn,!0),sn(Sn)}})}get settled(){return pt(this,Yn)}}Yn=new WeakMap,s.PromiseCapability=On;let An=null,Rn=null;function wn(gn){return An||(An=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Rn=new Map([["","t"]])),gn.replaceAll(An,(rn,sn,Sn)=>sn?sn.normalize("NFKC"):Rn.get(Sn))}function Ln(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const gn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(gn);else for(let rn=0;rn<32;rn++)gn[rn]=Math.floor(Math.random()*255);return It(gn)}const $n="pdfjs_internal_id_";s.AnnotationPrefix=$n},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var e,i,o,a,Br,Xr,g,h,j,b,_,st,tt,nt,xt,qr,_e,$,Es,it,et;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(rt){if(typeof rt=="string"||rt instanceof URL?rt={url:rt}:(0,_util.isArrayBuffer)(rt)&&(rt={data:rt}),typeof rt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!rt.url&&!rt.data&&!rt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const lt=new PDFDocumentLoadingTask,{docId:ft}=lt,dt=rt.url?getUrlProp(rt.url):null,ct=rt.data?getDataProp(rt.data):null,Et=rt.httpHeaders||null,gt=rt.withCredentials===!0,Lt=rt.password??null,Dt=rt.range instanceof PDFDataRangeTransport?rt.range:null,Ft=Number.isInteger(rt.rangeChunkSize)&&rt.rangeChunkSize>0?rt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let bt=rt.worker instanceof PDFWorker?rt.worker:null;const _t=rt.verbosity,yt=typeof rt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(rt.docBaseUrl)?rt.docBaseUrl:null,jt=typeof rt.cMapUrl=="string"?rt.cMapUrl:null,St=rt.cMapPacked!==!1,At=rt.CMapReaderFactory||DefaultCMapReaderFactory,mt=typeof rt.standardFontDataUrl=="string"?rt.standardFontDataUrl:null,ht=rt.StandardFontDataFactory||DefaultStandardFontDataFactory,vt=rt.stopAtErrors!==!0,Rt=Number.isInteger(rt.maxImageSize)&&rt.maxImageSize>-1?rt.maxImageSize:-1,Pt=rt.isEvalSupported!==!1,Bt=typeof rt.isOffscreenCanvasSupported=="boolean"?rt.isOffscreenCanvasSupported:!_util.isNodeJS,Ut=Number.isInteger(rt.canvasMaxAreaInBytes)?rt.canvasMaxAreaInBytes:-1,Nt=typeof rt.disableFontFace=="boolean"?rt.disableFontFace:_util.isNodeJS,It=rt.fontExtraProperties===!0,Ht=rt.enableXfa===!0,Qt=rt.ownerDocument||globalThis.document,tn=rt.disableRange===!0,an=rt.disableStream===!0,Wt=rt.disableAutoFetch===!0,Xt=rt.pdfBug===!0,wt=Dt?Dt.length:rt.length??NaN,kt=typeof rt.useSystemFonts=="boolean"?rt.useSystemFonts:!_util.isNodeJS&&!Nt,Tt=typeof rt.useWorkerFetch=="boolean"?rt.useWorkerFetch:At===_display_utils.DOMCMapReaderFactory&&ht===_display_utils.DOMStandardFontDataFactory&&jt&&mt&&(0,_display_utils.isValidFetchUrl)(jt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(mt,document.baseURI),zt=rt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Qt}),en=rt.filterFactory||new DefaultFilterFactory({docId:ft,ownerDocument:Qt}),un=null;(0,_util.setVerbosityLevel)(_t);const pn={canvasFactory:zt,filterFactory:en};if(Tt||(pn.cMapReaderFactory=new At({baseUrl:jt,isCompressed:St}),pn.standardFontDataFactory=new ht({baseUrl:mt})),!bt){const fn={verbosity:_t,port:_worker_options.GlobalWorkerOptions.workerPort};bt=fn.port?PDFWorker.fromPort(fn):new PDFWorker(fn),lt._worker=bt}const qt={docId:ft,apiVersion:"3.11.174",data:ct,password:Lt,disableAutoFetch:Wt,rangeChunkSize:Ft,length:wt,docBaseUrl:yt,enableXfa:Ht,evaluatorOptions:{maxImageSize:Rt,disableFontFace:Nt,ignoreErrors:vt,isEvalSupported:Pt,isOffscreenCanvasSupported:Bt,canvasMaxAreaInBytes:Ut,fontExtraProperties:It,useSystemFonts:kt,cMapUrl:Tt?jt:null,standardFontDataUrl:Tt?mt:null}},Cn={ignoreErrors:vt,isEvalSupported:Pt,disableFontFace:Nt,fontExtraProperties:It,enableXfa:Ht,ownerDocument:Qt,disableAutoFetch:Wt,pdfBug:Xt,styleElement:un};return bt.promise.then(function(){if(lt.destroyed)throw new Error("Loading aborted");const fn=_fetchDocument(bt,qt),On=new Promise(function(An){let Rn;Dt?Rn=new _transport_stream.PDFDataTransportStream({length:wt,initialData:Dt.initialData,progressiveDone:Dt.progressiveDone,contentDispositionFilename:Dt.contentDispositionFilename,disableRange:tn,disableStream:an},Dt):ct||(Rn=(Ln=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ln):(0,_display_utils.isValidFetchUrl)(Ln.url)?new _displayFetch_stream.PDFFetchStream(Ln):new _displayNetwork.PDFNetworkStream(Ln))({url:dt,length:wt,httpHeaders:Et,withCredentials:gt,rangeChunkSize:Ft,disableRange:tn,disableStream:an})),An(Rn)});return Promise.all([fn,On]).then(function([An,Rn]){if(lt.destroyed)throw new Error("Loading aborted");const wn=new _message_handler.MessageHandler(ft,An,bt.port),Ln=new WorkerTransport(wn,lt,Rn,Cn,pn);lt._transport=Ln,wn.send("Ready",null)})}).catch(lt._capability.reject),lt}async function _fetchDocument(rt,lt){if(rt.destroyed)throw new Error("Worker was destroyed");const ft=await rt.messageHandler.sendWithPromise("GetDocRequest",lt,lt.data?[lt.data.buffer]:null);if(rt.destroyed)throw new Error("Worker was destroyed");return ft}function getUrlProp(rt){if(rt instanceof URL)return rt.href;try{return new URL(rt,window.location).href}catch{if(_util.isNodeJS&&typeof rt=="string")return rt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(rt){if(_util.isNodeJS&&typeof Buffer<"u"&&rt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(rt instanceof Uint8Array&&rt.byteLength===rt.buffer.byteLength)return rt;if(typeof rt=="string")return(0,_util.stringToBytes)(rt);if(typeof rt=="object"&&!isNaN(rt==null?void 0:rt.length)||(0,_util.isArrayBuffer)(rt))return new Uint8Array(rt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Pr(s,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var lt,ft,dt;this.destroyed=!0;try{(lt=this._worker)!=null&&lt.port&&(this._worker._pendingDestroy=!0),await((ft=this._transport)==null?void 0:ft.destroy())}catch(ct){throw(dt=this._worker)!=null&&dt.port&&delete this._worker._pendingDestroy,ct}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,on(s,e,0);let PDFDocumentLoadingTask=s;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(lt,ft,dt=!1,ct=null){this.length=lt,this.initialData=ft,this.progressiveDone=dt,this.contentDispositionFilename=ct,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(lt){this._rangeListeners.push(lt)}addProgressListener(lt){this._progressListeners.push(lt)}addProgressiveReadListener(lt){this._progressiveReadListeners.push(lt)}addProgressiveDoneListener(lt){this._progressiveDoneListeners.push(lt)}onDataRange(lt,ft){for(const dt of this._rangeListeners)dt(lt,ft)}onDataProgress(lt,ft){this._readyCapability.promise.then(()=>{for(const dt of this._progressListeners)dt(lt,ft)})}onDataProgressiveRead(lt){this._readyCapability.promise.then(()=>{for(const ft of this._progressiveReadListeners)ft(lt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const lt of this._progressiveDoneListeners)lt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(lt,ft){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(lt,ft){this._pdfInfo=lt,this._transport=ft,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(dt=>{if(!dt)return dt;const ct=[];for(const Et in dt)ct.push(...dt[Et]);return ct}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(lt){return this._transport.getPage(lt)}getPageIndex(lt){return this._transport.getPageIndex(lt)}getDestinations(){return this._transport.getDestinations()}getDestination(lt){return this._transport.getDestination(lt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(lt=!1){return this._transport.startCleanup(lt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(lt,ft,dt,ct=!1){on(this,a);on(this,i,null);on(this,o,!1);this._pageIndex=lt,this._pageInfo=ft,this._transport=dt,this._stats=ct?new _display_utils.StatTimer:null,this._pdfBug=ct,this.commonObjs=dt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:lt,rotation:ft=this.rotate,offsetX:dt=0,offsetY:ct=0,dontFlip:Et=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:lt,rotation:ft,offsetX:dt,offsetY:ct,dontFlip:Et})}getAnnotations({intent:lt="display"}={}){const ft=this._transport.getRenderingIntent(lt);return this._transport.getAnnotations(this._pageIndex,ft.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var lt;return((lt=this._transport._htmlForXfa)==null?void 0:lt.children[this._pageIndex])||null}render({canvasContext:lt,viewport:ft,intent:dt="display",annotationMode:ct=_util.AnnotationMode.ENABLE,transform:Et=null,background:gt=null,optionalContentConfigPromise:Lt=null,annotationCanvasMap:Dt=null,pageColors:Ft=null,printAnnotationStorage:bt=null}){var ht,vt;(ht=this._stats)==null||ht.time("Overall");const _t=this._transport.getRenderingIntent(dt,ct,bt);ln(this,o,!1),Zt(this,a,Xr).call(this),Lt||(Lt=this._transport.getOptionalContentConfig());let yt=this._intentStates.get(_t.cacheKey);yt||(yt=Object.create(null),this._intentStates.set(_t.cacheKey,yt)),yt.streamReaderCancelTimeout&&(clearTimeout(yt.streamReaderCancelTimeout),yt.streamReaderCancelTimeout=null);const jt=!!(_t.renderingIntent&_util.RenderingIntentFlag.PRINT);yt.displayReadyCapability||(yt.displayReadyCapability=new _util.PromiseCapability,yt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(vt=this._stats)==null||vt.time("Page Request"),this._pumpOperatorList(_t));const St=Rt=>{var Pt,Bt;yt.renderTasks.delete(At),(this._maybeCleanupAfterRender||jt)&&ln(this,o,!0),Zt(this,a,Br).call(this,!jt),Rt?(At.capability.reject(Rt),this._abortOperatorList({intentState:yt,reason:Rt instanceof Error?Rt:new Error(Rt)})):At.capability.resolve(),(Pt=this._stats)==null||Pt.timeEnd("Rendering"),(Bt=this._stats)==null||Bt.timeEnd("Overall")},At=new InternalRenderTask({callback:St,params:{canvasContext:lt,viewport:ft,transform:Et,background:gt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Dt,operatorList:yt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!jt,pdfBug:this._pdfBug,pageColors:Ft});(yt.renderTasks||(yt.renderTasks=new Set)).add(At);const mt=At.task;return Promise.all([yt.displayReadyCapability.promise,Lt]).then(([Rt,Pt])=>{var Bt;if(this.destroyed){St();return}(Bt=this._stats)==null||Bt.time("Rendering"),At.initializeGraphics({transparency:Rt,optionalContentConfig:Pt}),At.operatorListChanged()}).catch(St),mt}getOperatorList({intent:lt="display",annotationMode:ft=_util.AnnotationMode.ENABLE,printAnnotationStorage:dt=null}={}){var Dt;function ct(){gt.operatorList.lastChunk&&(gt.opListReadCapability.resolve(gt.operatorList),gt.renderTasks.delete(Lt))}const Et=this._transport.getRenderingIntent(lt,ft,dt,!0);let gt=this._intentStates.get(Et.cacheKey);gt||(gt=Object.create(null),this._intentStates.set(Et.cacheKey,gt));let Lt;return gt.opListReadCapability||(Lt=Object.create(null),Lt.operatorListChanged=ct,gt.opListReadCapability=new _util.PromiseCapability,(gt.renderTasks||(gt.renderTasks=new Set)).add(Lt),gt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Dt=this._stats)==null||Dt.time("Page Request"),this._pumpOperatorList(Et)),gt.opListReadCapability.promise}streamTextContent({includeMarkedContent:lt=!1,disableNormalization:ft=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:lt===!0,disableNormalization:ft===!0},{highWaterMark:100,size(ct){return ct.items.length}})}getTextContent(lt={}){if(this._transport._htmlForXfa)return this.getXfa().then(dt=>_xfa_text.XfaText.textContent(dt));const ft=this.streamTextContent(lt);return new Promise(function(dt,ct){function Et(){gt.read().then(function({value:Dt,done:Ft}){if(Ft){dt(Lt);return}Object.assign(Lt.styles,Dt.styles),Lt.items.push(...Dt.items),Et()},ct)}const gt=ft.getReader(),Lt={items:[],styles:Object.create(null)};Et()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const lt=[];for(const ft of this._intentStates.values())if(this._abortOperatorList({intentState:ft,reason:new Error("Page was destroyed."),force:!0}),!ft.opListReadCapability)for(const dt of ft.renderTasks)lt.push(dt.completed),dt.cancel();return this.objs.clear(),ln(this,o,!1),Zt(this,a,Xr).call(this),Promise.all(lt)}cleanup(lt=!1){ln(this,o,!0);const ft=Zt(this,a,Br).call(this,!1);return lt&&ft&&this._stats&&(this._stats=new _display_utils.StatTimer),ft}_startRenderPage(lt,ft){var ct,Et;const dt=this._intentStates.get(ft);dt&&((ct=this._stats)==null||ct.timeEnd("Page Request"),(Et=dt.displayReadyCapability)==null||Et.resolve(lt))}_renderPageChunk(lt,ft){for(let dt=0,ct=lt.length;dt<ct;dt++)ft.operatorList.fnArray.push(lt.fnArray[dt]),ft.operatorList.argsArray.push(lt.argsArray[dt]);ft.operatorList.lastChunk=lt.lastChunk,ft.operatorList.separateAnnots=lt.separateAnnots;for(const dt of ft.renderTasks)dt.operatorListChanged();lt.lastChunk&&Zt(this,a,Br).call(this,!0)}_pumpOperatorList({renderingIntent:lt,cacheKey:ft,annotationStorageSerializable:dt}){const{map:ct,transfers:Et}=dt,Lt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:lt,cacheKey:ft,annotationStorage:ct},Et).getReader(),Dt=this._intentStates.get(ft);Dt.streamReader=Lt;const Ft=()=>{Lt.read().then(({value:bt,done:_t})=>{if(_t){Dt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(bt,Dt),Ft())},bt=>{if(Dt.streamReader=null,!this._transport.destroyed){if(Dt.operatorList){Dt.operatorList.lastChunk=!0;for(const _t of Dt.renderTasks)_t.operatorListChanged();Zt(this,a,Br).call(this,!0)}if(Dt.displayReadyCapability)Dt.displayReadyCapability.reject(bt);else if(Dt.opListReadCapability)Dt.opListReadCapability.reject(bt);else throw bt}})};Ft()}_abortOperatorList({intentState:lt,reason:ft,force:dt=!1}){if(lt.streamReader){if(lt.streamReaderCancelTimeout&&(clearTimeout(lt.streamReaderCancelTimeout),lt.streamReaderCancelTimeout=null),!dt){if(lt.renderTasks.size>0)return;if(ft instanceof _display_utils.RenderingCancelledException){let ct=RENDERING_CANCELLED_TIMEOUT;ft.extraDelay>0&&ft.extraDelay<1e3&&(ct+=ft.extraDelay),lt.streamReaderCancelTimeout=setTimeout(()=>{lt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:lt,reason:ft,force:!0})},ct);return}}if(lt.streamReader.cancel(new _util.AbortException(ft.message)).catch(()=>{}),lt.streamReader=null,!this._transport.destroyed){for(const[ct,Et]of this._intentStates)if(Et===lt){this._intentStates.delete(ct);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,o=new WeakMap,a=new WeakSet,Br=function(lt=!1){if(Zt(this,a,Xr).call(this),!pt(this,o)||this.destroyed)return!1;if(lt)return ln(this,i,setTimeout(()=>{ln(this,i,null),Zt(this,a,Br).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ft,operatorList:dt}of this._intentStates.values())if(ft.size>0||!dt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ln(this,o,!1),!0},Xr=function(){pt(this,i)&&(clearTimeout(pt(this,i)),ln(this,i,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){on(this,g,new Set);on(this,h,Promise.resolve())}postMessage(lt,ft){const dt={data:structuredClone(lt,ft?{transfer:ft}:null)};pt(this,h).then(()=>{for(const ct of pt(this,g))ct.call(this,dt)})}addEventListener(lt,ft){pt(this,g).add(ft)}removeEventListener(lt,ft){pt(this,g).delete(ft)}terminate(){pt(this,g).clear()}}g=new WeakMap,h=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const rt=(j=document==null?void 0:document.currentScript)==null?void 0:j.src;rt&&(PDFWorkerUtil.fallbackWorkerSrc=rt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(rt,lt){let ft;try{if(ft=new URL(rt),!ft.origin||ft.origin==="null")return!1}catch{return!1}const dt=new URL(lt,ft);return ft.origin===dt.origin},PDFWorkerUtil.createCDNWrapper=function(rt){const lt=`importScripts("${rt}");`;return URL.createObjectURL(new Blob([lt]))}}const _PDFWorker=class _PDFWorker{constructor({name:rt=null,port:lt=null,verbosity:ft=(0,_util.getVerbosityLevel)()}={}){var dt;if(this.name=rt,this.destroyed=!1,this.verbosity=ft,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,lt){if((dt=pt(_PDFWorker,b))!=null&&dt.has(lt))throw new Error("Cannot use more than one PDFWorker per port.");(pt(_PDFWorker,b)||ln(_PDFWorker,b,new WeakMap)).set(lt,this),this._initializeFromPort(lt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(rt){this._port=rt,this._messageHandler=new _message_handler.MessageHandler("main","worker",rt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:rt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,rt)||(rt=PDFWorkerUtil.createCDNWrapper(new URL(rt,window.location).href));const lt=new Worker(rt),ft=new _message_handler.MessageHandler("main","worker",lt),dt=()=>{lt.removeEventListener("error",ct),ft.destroy(),lt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ct=()=>{this._webWorker||dt()};lt.addEventListener("error",ct),ft.on("test",gt=>{if(lt.removeEventListener("error",ct),this.destroyed){dt();return}gt?(this._messageHandler=ft,this._port=lt,this._webWorker=lt,this._readyCapability.resolve(),ft.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ft.destroy(),lt.terminate())}),ft.on("ready",gt=>{if(lt.removeEventListener("error",ct),this.destroyed){dt();return}try{Et()}catch{this._setupFakeWorker()}});const Et=()=>{const gt=new Uint8Array;ft.send("test",gt,[gt.buffer])};Et();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(rt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const lt=new LoopbackPort;this._port=lt;const ft=`fake${PDFWorkerUtil.fakeWorkerId++}`,dt=new _message_handler.MessageHandler(ft+"_worker",ft,lt);rt.setup(dt,lt);const ct=new _message_handler.MessageHandler(ft,ft+"_worker",lt);this._messageHandler=ct,this._readyCapability.resolve(),ct.send("configure",{verbosity:this.verbosity})}).catch(rt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${rt.message}".`))})}destroy(){var rt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(rt=pt(_PDFWorker,b))==null||rt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(rt){var ft;if(!(rt!=null&&rt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const lt=(ft=pt(this,b))==null?void 0:ft.get(rt.port);if(lt){if(lt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return lt}return new _PDFWorker(rt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var rt;try{return((rt=globalThis.pdfjsWorker)==null?void 0:rt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};b=new WeakMap,on(_PDFWorker,b);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(lt,ft,dt,ct,Et){on(this,xt);on(this,_,new Map);on(this,st,new Map);on(this,tt,new Map);on(this,nt,null);this.messageHandler=lt,this.loadingTask=ft,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:ct.ownerDocument,styleElement:ct.styleElement}),this._params=ct,this.canvasFactory=Et.canvasFactory,this.filterFactory=Et.filterFactory,this.cMapReaderFactory=Et.cMapReaderFactory,this.standardFontDataFactory=Et.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=dt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(lt,ft=_util.AnnotationMode.ENABLE,dt=null,ct=!1){let Et=_util.RenderingIntentFlag.DISPLAY,gt=_annotation_storage.SerializableEmpty;switch(lt){case"any":Et=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Et=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${lt}`)}switch(ft){case _util.AnnotationMode.DISABLE:Et+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Et+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Et+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,gt=(Et&_util.RenderingIntentFlag.PRINT&&dt instanceof _annotation_storage.PrintAnnotationStorage?dt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ft}`)}return ct&&(Et+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Et,cacheKey:`${Et}_${gt.hash}`,annotationStorageSerializable:gt}}destroy(){var dt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(dt=pt(this,nt))==null||dt.reject(new Error("Worker was destroyed during onPassword callback"));const lt=[];for(const ct of pt(this,st).values())lt.push(ct._destroy());pt(this,st).clear(),pt(this,tt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ft=this.messageHandler.sendWithPromise("Terminate",null);return lt.push(ft),Promise.all(lt).then(()=>{var ct;this.commonObjs.clear(),this.fontLoader.clear(),pt(this,_).clear(),this.filterFactory.destroy(),(ct=this._networkStream)==null||ct.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:lt,loadingTask:ft}=this;lt.on("GetReader",(dt,ct)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Et=>{this._lastProgress={loaded:Et.loaded,total:Et.total}},ct.onPull=()=>{this._fullReader.read().then(function({value:Et,done:gt}){if(gt){ct.close();return}(0,_util.assert)(Et instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(Et),1,[Et])}).catch(Et=>{ct.error(Et)})},ct.onCancel=Et=>{this._fullReader.cancel(Et),ct.ready.catch(gt=>{if(!this.destroyed)throw gt})}}),lt.on("ReaderHeadersReady",dt=>{const ct=new _util.PromiseCapability,Et=this._fullReader;return Et.headersReady.then(()=>{var gt;(!Et.isStreamingSupported||!Et.isRangeSupported)&&(this._lastProgress&&((gt=ft.onProgress)==null||gt.call(ft,this._lastProgress)),Et.onProgress=Lt=>{var Dt;(Dt=ft.onProgress)==null||Dt.call(ft,{loaded:Lt.loaded,total:Lt.total})}),ct.resolve({isStreamingSupported:Et.isStreamingSupported,isRangeSupported:Et.isRangeSupported,contentLength:Et.contentLength})},ct.reject),ct.promise}),lt.on("GetRangeReader",(dt,ct)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Et=this._networkStream.getRangeReader(dt.begin,dt.end);if(!Et){ct.close();return}ct.onPull=()=>{Et.read().then(function({value:gt,done:Lt}){if(Lt){ct.close();return}(0,_util.assert)(gt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(gt),1,[gt])}).catch(gt=>{ct.error(gt)})},ct.onCancel=gt=>{Et.cancel(gt),ct.ready.catch(Lt=>{if(!this.destroyed)throw Lt})}}),lt.on("GetDoc",({pdfInfo:dt})=>{this._numPages=dt.numPages,this._htmlForXfa=dt.htmlForXfa,delete dt.htmlForXfa,ft._capability.resolve(new PDFDocumentProxy(dt,this))}),lt.on("DocException",function(dt){let ct;switch(dt.name){case"PasswordException":ct=new _util.PasswordException(dt.message,dt.code);break;case"InvalidPDFException":ct=new _util.InvalidPDFException(dt.message);break;case"MissingPDFException":ct=new _util.MissingPDFException(dt.message);break;case"UnexpectedResponseException":ct=new _util.UnexpectedResponseException(dt.message,dt.status);break;case"UnknownErrorException":ct=new _util.UnknownErrorException(dt.message,dt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ft._capability.reject(ct)}),lt.on("PasswordRequest",dt=>{if(ln(this,nt,new _util.PromiseCapability),ft.onPassword){const ct=Et=>{Et instanceof Error?pt(this,nt).reject(Et):pt(this,nt).resolve({password:Et})};try{ft.onPassword(ct,dt.code)}catch(Et){pt(this,nt).reject(Et)}}else pt(this,nt).reject(new _util.PasswordException(dt.message,dt.code));return pt(this,nt).promise}),lt.on("DataLoaded",dt=>{var ct;(ct=ft.onProgress)==null||ct.call(ft,{loaded:dt.length,total:dt.length}),this.downloadInfoCapability.resolve(dt)}),lt.on("StartRenderPage",dt=>{if(this.destroyed)return;pt(this,st).get(dt.pageIndex)._startRenderPage(dt.transparency,dt.cacheKey)}),lt.on("commonobj",([dt,ct,Et])=>{var gt;if(!this.destroyed&&!this.commonObjs.has(dt))switch(ct){case"Font":const Lt=this._params;if("error"in Et){const bt=Et.error;(0,_util.warn)(`Error during font loading: ${bt}`),this.commonObjs.resolve(dt,bt);break}const Dt=Lt.pdfBug&&((gt=globalThis.FontInspector)!=null&&gt.enabled)?(bt,_t)=>globalThis.FontInspector.fontAdded(bt,_t):null,Ft=new _font_loader.FontFaceObject(Et,{isEvalSupported:Lt.isEvalSupported,disableFontFace:Lt.disableFontFace,ignoreErrors:Lt.ignoreErrors,inspectFont:Dt});this.fontLoader.bind(Ft).catch(bt=>lt.sendWithPromise("FontFallback",{id:dt})).finally(()=>{!Lt.fontExtraProperties&&Ft.data&&(Ft.data=null),this.commonObjs.resolve(dt,Ft)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(dt,Et);break;default:throw new Error(`Got unknown common object type ${ct}`)}}),lt.on("obj",([dt,ct,Et,gt])=>{var Dt;if(this.destroyed)return;const Lt=pt(this,st).get(ct);if(!Lt.objs.has(dt))switch(Et){case"Image":if(Lt.objs.resolve(dt,gt),gt){let Ft;if(gt.bitmap){const{width:bt,height:_t}=gt;Ft=bt*_t*4}else Ft=((Dt=gt.data)==null?void 0:Dt.length)||0;Ft>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Lt._maybeCleanupAfterRender=!0)}break;case"Pattern":Lt.objs.resolve(dt,gt);break;default:throw new Error(`Got unknown object type ${Et}`)}}),lt.on("DocProgress",dt=>{var ct;this.destroyed||(ct=ft.onProgress)==null||ct.call(ft,{loaded:dt.loaded,total:dt.total})}),lt.on("FetchBuiltInCMap",dt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(dt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),lt.on("FetchStandardFontData",dt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(dt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var dt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:lt,transfers:ft}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:lt,filename:((dt=this._fullReader)==null?void 0:dt.filename)??null},ft).finally(()=>{this.annotationStorage.resetModified()})}getPage(lt){if(!Number.isInteger(lt)||lt<=0||lt>this._numPages)return Promise.reject(new Error("Invalid page request."));const ft=lt-1,dt=pt(this,tt).get(ft);if(dt)return dt;const ct=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ft}).then(Et=>{if(this.destroyed)throw new Error("Transport destroyed");const gt=new PDFPageProxy(ft,Et,this,this._params.pdfBug);return pt(this,st).set(ft,gt),gt});return pt(this,tt).set(ft,ct),ct}getPageIndex(lt){return typeof lt!="object"||lt===null||!Number.isInteger(lt.num)||lt.num<0||!Number.isInteger(lt.gen)||lt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:lt.num,gen:lt.gen})}getAnnotations(lt,ft){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:lt,intent:ft})}getFieldObjects(){return Zt(this,xt,qr).call(this,"GetFieldObjects")}hasJSActions(){return Zt(this,xt,qr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(lt){return typeof lt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:lt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Zt(this,xt,qr).call(this,"GetDocJSActions")}getPageJSActions(lt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:lt})}getStructTree(lt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:lt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(lt=>new _optional_content_config.OptionalContentConfig(lt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const lt="GetMetadata",ft=pt(this,_).get(lt);if(ft)return ft;const dt=this.messageHandler.sendWithPromise(lt,null).then(ct=>{var Et,gt;return{info:ct[0],metadata:ct[1]?new _metadata.Metadata(ct[1]):null,contentDispositionFilename:((Et=this._fullReader)==null?void 0:Et.filename)??null,contentLength:((gt=this._fullReader)==null?void 0:gt.contentLength)??null}});return pt(this,_).set(lt,dt),dt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(lt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ft of pt(this,st).values())if(!ft.cleanup())throw new Error(`startCleanup: Page ${ft.pageNumber} is currently rendering.`);this.commonObjs.clear(),lt||this.fontLoader.clear(),pt(this,_).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:lt,enableXfa:ft}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:lt,enableXfa:ft})}}_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakSet,qr=function(lt,ft=null){const dt=pt(this,_).get(lt);if(dt)return dt;const ct=this.messageHandler.sendWithPromise(lt,ft);return pt(this,_).set(lt,ct),ct};class PDFObjects{constructor(){on(this,$);on(this,_e,Object.create(null))}get(lt,ft=null){if(ft){const ct=Zt(this,$,Es).call(this,lt);return ct.capability.promise.then(()=>ft(ct.data)),null}const dt=pt(this,_e)[lt];if(!(dt!=null&&dt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${lt}.`);return dt.data}has(lt){const ft=pt(this,_e)[lt];return(ft==null?void 0:ft.capability.settled)||!1}resolve(lt,ft=null){const dt=Zt(this,$,Es).call(this,lt);dt.data=ft,dt.capability.resolve()}clear(){var lt;for(const ft in pt(this,_e)){const{data:dt}=pt(this,_e)[ft];(lt=dt==null?void 0:dt.bitmap)==null||lt.close()}ln(this,_e,Object.create(null))}}_e=new WeakMap,$=new WeakSet,Es=function(lt){var ft;return(ft=pt(this,_e))[lt]||(ft[lt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(lt){on(this,it,null);ln(this,it,lt),this.onContinue=null}get promise(){return pt(this,it).capability.promise}cancel(lt=0){pt(this,it).cancel(null,lt)}get separateAnnots(){const{separateAnnots:lt}=pt(this,it).operatorList;if(!lt)return!1;const{annotationCanvasMap:ft}=pt(this,it);return lt.form||lt.canvas&&(ft==null?void 0:ft.size)>0}}it=new WeakMap,exports$1.RenderTask=RenderTask;const ot=class ot{constructor({callback:lt,params:ft,objs:dt,commonObjs:ct,annotationCanvasMap:Et,operatorList:gt,pageIndex:Lt,canvasFactory:Dt,filterFactory:Ft,useRequestAnimationFrame:bt=!1,pdfBug:_t=!1,pageColors:yt=null}){this.callback=lt,this.params=ft,this.objs=dt,this.commonObjs=ct,this.annotationCanvasMap=Et,this.operatorListIdx=null,this.operatorList=gt,this._pageIndex=Lt,this.canvasFactory=Dt,this.filterFactory=Ft,this._pdfBug=_t,this.pageColors=yt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=bt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ft.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:lt=!1,optionalContentConfig:ft}){var Lt,Dt;if(this.cancelled)return;if(this._canvas){if(pt(ot,et).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");pt(ot,et).add(this._canvas)}this._pdfBug&&((Lt=globalThis.StepperManager)!=null&&Lt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:dt,viewport:ct,transform:Et,background:gt}=this.params;this.gfx=new _canvas.CanvasGraphics(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ft},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Et,viewport:ct,transparency:lt,background:gt}),this.operatorListIdx=0,this.graphicsReady=!0,(Dt=this.graphicsReadyCallback)==null||Dt.call(this)}cancel(lt=null,ft=0){var dt;this.running=!1,this.cancelled=!0,(dt=this.gfx)==null||dt.endDrawing(),pt(ot,et).delete(this._canvas),this.callback(lt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ft))}operatorListChanged(){var lt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(lt=this.stepper)==null||lt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),pt(ot,et).delete(this._canvas),this.callback())))}};et=new WeakMap,on(ot,et,new WeakSet);let InternalRenderTask=ot;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(e,s,i)=>{var j,b,_,Eo,tt;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var o=i(1),a=i(4),c=i(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=d;class g{constructor(){on(this,_);on(this,j,!1);on(this,b,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(xt,ut){const _e=pt(this,b).get(xt);return _e===void 0?ut:Object.assign(ut,_e)}getRawValue(xt){return pt(this,b).get(xt)}remove(xt){if(pt(this,b).delete(xt),pt(this,b).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const ut of pt(this,b).values())if(ut instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(xt,ut){const _e=pt(this,b).get(xt);let $=!1;if(_e!==void 0)for(const[at,it]of Object.entries(ut))_e[at]!==it&&($=!0,_e[at]=it);else $=!0,pt(this,b).set(xt,ut);$&&Zt(this,_,Eo).call(this),ut instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(ut.constructor._type)}has(xt){return pt(this,b).has(xt)}getAll(){return pt(this,b).size>0?(0,o.objectFromMap)(pt(this,b)):null}setAll(xt){for(const[ut,_e]of Object.entries(xt))this.setValue(ut,_e)}get size(){return pt(this,b).size}resetModified(){pt(this,j)&&(ln(this,j,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(pt(this,b).size===0)return d;const xt=new Map,ut=new c.MurmurHash3_64,_e=[],$=Object.create(null);let at=!1;for(const[it,et]of pt(this,b)){const ot=et instanceof a.AnnotationEditor?et.serialize(!1,$):et;ot&&(xt.set(it,ot),ut.update(`${it}:${JSON.stringify(ot)}`),at||(at=!!ot.bitmap))}if(at)for(const it of xt.values())it.bitmap&&_e.push(it.bitmap);return xt.size>0?{map:xt,hash:ut.hexdigest(),transfers:_e}:d}}j=new WeakMap,b=new WeakMap,_=new WeakSet,Eo=function(){pt(this,j)||(ln(this,j,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=g;class h extends g{constructor(ut){super();on(this,tt);const{map:_e,hash:$,transfers:at}=ut.serializable,it=structuredClone(_e,at?{transfer:at}:null);ln(this,tt,{map:it,hash:$,transfers:at})}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return pt(this,tt)}}tt=new WeakMap,s.PrintAnnotationStorage=h},(e,s,i)=>{var h,j,b,_,st,tt,nt,xt,ut,_e,$,at,it,et,ot,gs,Cs,ft,As,ys,go,Co,Ao,bs,yo;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var o=i(5),a=i(1),c=i(6);const bt=class bt{constructor(yt){on(this,ot);on(this,h,"");on(this,j,!1);on(this,b,null);on(this,_,null);on(this,st,null);on(this,tt,!1);on(this,nt,null);on(this,xt,this.focusin.bind(this));on(this,ut,this.focusout.bind(this));on(this,_e,!1);on(this,$,!1);on(this,at,!1);tr(this,"_initialOptions",Object.create(null));tr(this,"_uiManager",null);tr(this,"_focusEventsAllowed",!0);tr(this,"_l10nPromise",null);on(this,it,!1);on(this,et,bt._zIndex++);this.constructor===bt&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=yt.parent,this.id=yt.id,this.width=this.height=null,this.pageIndex=yt.parent.pageIndex,this.name=yt.name,this.div=null,this._uiManager=yt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=yt.isCentered,this._structTreeParentId=null;const{rotation:jt,rawDims:{pageWidth:St,pageHeight:At,pageX:mt,pageY:ht}}=this.parent.viewport;this.rotation=jt,this.pageRotation=(360+jt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[St,At],this.pageTranslation=[mt,ht];const[vt,Rt]=this.parentDimensions;this.x=yt.x/vt,this.y=yt.y/Rt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(yt){const jt=new g({id:yt.parent.getNextId(),parent:yt.parent,uiManager:yt._uiManager});jt.annotationElementId=yt.annotationElementId,jt.deleted=!0,jt._uiManager.addToAnnotationStorage(jt)}static initialize(yt,jt=null){if(bt._l10nPromise||(bt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(At=>[At,yt.get(At)]))),jt!=null&&jt.strings)for(const At of jt.strings)bt._l10nPromise.set(At,yt.get(At));if(bt._borderLineWidth!==-1)return;const St=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(St.getPropertyValue("--outline-width"))||0}static updateDefaultParams(yt,jt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(yt){return!1}static paste(yt,jt){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return pt(this,it)}set _isDraggable(yt){var jt;ln(this,it,yt),(jt=this.div)==null||jt.classList.toggle("draggable",yt)}center(){const[yt,jt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*jt/(yt*2),this.y+=this.width*yt/(jt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*jt/(yt*2),this.y-=this.width*yt/(jt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(yt){this._uiManager.addCommands(yt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=pt(this,et)}setParent(yt){yt!==null&&(this.pageIndex=yt.pageIndex,this.pageDimensions=yt.pageDimensions),this.parent=yt}focusin(yt){this._focusEventsAllowed&&(pt(this,_e)?ln(this,_e,!1):this.parent.setSelected(this))}focusout(yt){var St;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const jt=yt.relatedTarget;jt!=null&&jt.closest(`#${this.id}`)||(yt.preventDefault(),(St=this.parent)!=null&&St.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(yt,jt,St,At){const[mt,ht]=this.parentDimensions;[St,At]=this.screenToPageTranslation(St,At),this.x=(yt+St)/mt,this.y=(jt+At)/ht,this.fixAndSetPosition()}translate(yt,jt){Zt(this,ot,gs).call(this,this.parentDimensions,yt,jt)}translateInPage(yt,jt){Zt(this,ot,gs).call(this,this.pageDimensions,yt,jt),this.div.scrollIntoView({block:"nearest"})}drag(yt,jt){const[St,At]=this.parentDimensions;if(this.x+=yt/St,this.y+=jt/At,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Pt,y:Bt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Pt,Bt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:mt,y:ht}=this;const[vt,Rt]=Zt(this,ot,Cs).call(this);mt+=vt,ht+=Rt,this.div.style.left=`${(100*mt).toFixed(2)}%`,this.div.style.top=`${(100*ht).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[yt,jt]=this.pageDimensions;let{x:St,y:At,width:mt,height:ht}=this;switch(mt*=yt,ht*=jt,St*=yt,At*=jt,this.rotation){case 0:St=Math.max(0,Math.min(yt-mt,St)),At=Math.max(0,Math.min(jt-ht,At));break;case 90:St=Math.max(0,Math.min(yt-ht,St)),At=Math.min(jt,Math.max(mt,At));break;case 180:St=Math.min(yt,Math.max(mt,St)),At=Math.min(jt,Math.max(ht,At));break;case 270:St=Math.min(yt,Math.max(ht,St)),At=Math.max(0,Math.min(jt-mt,At));break}this.x=St/=yt,this.y=At/=jt;const[vt,Rt]=Zt(this,ot,Cs).call(this);St+=vt,At+=Rt;const{style:Pt}=this.div;Pt.left=`${(100*St).toFixed(2)}%`,Pt.top=`${(100*At).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(yt,jt){var St;return Zt(St=bt,ft,As).call(St,yt,jt,this.parentRotation)}pageTranslationToScreen(yt,jt){var St;return Zt(St=bt,ft,As).call(St,yt,jt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:yt,pageDimensions:[jt,St]}=this,At=jt*yt,mt=St*yt;return a.FeatureTest.isCSSRoundSupported?[Math.round(At),Math.round(mt)]:[At,mt]}setDims(yt,jt){var mt;const[St,At]=this.parentDimensions;this.div.style.width=`${(100*yt/St).toFixed(2)}%`,pt(this,tt)||(this.div.style.height=`${(100*jt/At).toFixed(2)}%`),(mt=pt(this,b))==null||mt.classList.toggle("small",yt<bt.SMALL_EDITOR_SIZE||jt<bt.SMALL_EDITOR_SIZE)}fixDims(){const{style:yt}=this.div,{height:jt,width:St}=yt,At=St.endsWith("%"),mt=!pt(this,tt)&&jt.endsWith("%");if(At&&mt)return;const[ht,vt]=this.parentDimensions;At||(yt.width=`${(100*parseFloat(St)/ht).toFixed(2)}%`),!pt(this,tt)&&!mt&&(yt.height=`${(100*parseFloat(jt)/vt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(pt(this,b))return;const yt=ln(this,b,document.createElement("button"));yt.className="altText";const jt=await bt._l10nPromise.get("editor_alt_text_button_label");yt.textContent=jt,yt.setAttribute("aria-label",jt),yt.tabIndex="0",yt.addEventListener("contextmenu",c.noContextMenu),yt.addEventListener("pointerdown",St=>St.stopPropagation()),yt.addEventListener("click",St=>{St.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),yt.addEventListener("keydown",St=>{St.target===yt&&St.key==="Enter"&&(St.preventDefault(),this._uiManager.editAltText(this))}),Zt(this,ot,bs).call(this),this.div.append(yt),bt.SMALL_EDITOR_SIZE||(bt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(yt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:pt(this,h),decorative:pt(this,j)}}set altTextData({altText:yt,decorative:jt}){pt(this,h)===yt&&pt(this,j)===jt||(ln(this,h,yt),ln(this,j,jt),Zt(this,ot,bs).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",pt(this,xt)),this.div.addEventListener("focusout",pt(this,ut));const[yt,jt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*jt/yt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*yt/jt).toFixed(2)}%`);const[St,At]=this.getInitialTranslation();return this.translate(St,At),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(yt){const{isMac:jt}=a.FeatureTest.platform;if(yt.button!==0||yt.ctrlKey&&jt){yt.preventDefault();return}ln(this,_e,!0),Zt(this,ot,yo).call(this,yt)}moveInDOM(){var yt;(yt=this.parent)==null||yt.moveEditorInDOM(this)}_setParentAndPosition(yt,jt,St){yt.changeParent(this),this.x=jt,this.y=St,this.fixAndSetPosition()}getRect(yt,jt){const St=this.parentScale,[At,mt]=this.pageDimensions,[ht,vt]=this.pageTranslation,Rt=yt/St,Pt=jt/St,Bt=this.x*At,Ut=this.y*mt,Nt=this.width*At,It=this.height*mt;switch(this.rotation){case 0:return[Bt+Rt+ht,mt-Ut-Pt-It+vt,Bt+Rt+Nt+ht,mt-Ut-Pt+vt];case 90:return[Bt+Pt+ht,mt-Ut+Rt+vt,Bt+Pt+It+ht,mt-Ut+Rt+Nt+vt];case 180:return[Bt-Rt-Nt+ht,mt-Ut+Pt+vt,Bt-Rt+ht,mt-Ut+Pt+It+vt];case 270:return[Bt-Pt-It+ht,mt-Ut-Rt-Nt+vt,Bt-Pt+ht,mt-Ut-Rt+vt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(yt,jt){const[St,At,mt,ht]=yt,vt=mt-St,Rt=ht-At;switch(this.rotation){case 0:return[St,jt-ht,vt,Rt];case 90:return[St,jt-At,Rt,vt];case 180:return[mt,jt-At,vt,Rt];case 270:return[mt,jt-ht,Rt,vt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ln(this,at,!0)}disableEditMode(){ln(this,at,!1)}isInEditMode(){return pt(this,at)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var yt,jt;(yt=this.div)==null||yt.addEventListener("focusin",pt(this,xt)),(jt=this.div)==null||jt.addEventListener("focusout",pt(this,ut))}serialize(yt=!1,jt=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(yt,jt,St){const At=new this.prototype.constructor({parent:jt,id:jt.getNextId(),uiManager:St});At.rotation=yt.rotation;const[mt,ht]=At.pageDimensions,[vt,Rt,Pt,Bt]=At.getRectInCurrentCoords(yt.rect,ht);return At.x=vt/mt,At.y=Rt/ht,At.width=Pt/mt,At.height=Bt/ht,At}remove(){var yt;this.div.removeEventListener("focusin",pt(this,xt)),this.div.removeEventListener("focusout",pt(this,ut)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(yt=pt(this,b))==null||yt.remove(),ln(this,b,null),ln(this,_,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Zt(this,ot,go).call(this),pt(this,nt).classList.remove("hidden"))}select(){var yt;this.makeResizable(),(yt=this.div)==null||yt.classList.add("selectedEditor")}unselect(){var yt,jt,St;(yt=pt(this,nt))==null||yt.classList.add("hidden"),(jt=this.div)==null||jt.classList.remove("selectedEditor"),(St=this.div)!=null&&St.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(yt,jt){}disableEditing(){pt(this,b)&&(pt(this,b).hidden=!0)}enableEditing(){pt(this,b)&&(pt(this,b).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return pt(this,$)}set isEditing(yt){ln(this,$,yt),this.parent&&(yt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(yt,jt){ln(this,tt,!0);const St=yt/jt,{style:At}=this.div;At.aspectRatio=St,At.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,j=new WeakMap,b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakMap,$=new WeakMap,at=new WeakMap,it=new WeakMap,et=new WeakMap,ot=new WeakSet,gs=function([yt,jt],St,At){[St,At]=this.screenToPageTranslation(St,At),this.x+=St/yt,this.y+=At/jt,this.fixAndSetPosition()},Cs=function(){const[yt,jt]=this.parentDimensions,{_borderLineWidth:St}=bt,At=St/yt,mt=St/jt;switch(this.rotation){case 90:return[-At,mt];case 180:return[At,mt];case 270:return[At,-mt];default:return[-At,-mt]}},ft=new WeakSet,As=function(yt,jt,St){switch(St){case 90:return[jt,-yt];case 180:return[-yt,-jt];case 270:return[-jt,yt];default:return[yt,jt]}},ys=function(yt){switch(yt){case 90:{const[jt,St]=this.pageDimensions;return[0,-jt/St,St/jt,0]}case 180:return[-1,0,0,-1];case 270:{const[jt,St]=this.pageDimensions;return[0,jt/St,-St/jt,0]}default:return[1,0,0,1]}},go=function(){if(pt(this,nt))return;ln(this,nt,document.createElement("div")),pt(this,nt).classList.add("resizers");const yt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||yt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const jt of yt){const St=document.createElement("div");pt(this,nt).append(St),St.classList.add("resizer",jt),St.addEventListener("pointerdown",Zt(this,ot,Co).bind(this,jt)),St.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(pt(this,nt))},Co=function(yt,jt){jt.preventDefault();const{isMac:St}=a.FeatureTest.platform;if(jt.button!==0||jt.ctrlKey&&St)return;const At=Zt(this,ot,Ao).bind(this,yt),mt=this._isDraggable;this._isDraggable=!1;const ht={passive:!0,capture:!0};window.addEventListener("pointermove",At,ht);const vt=this.x,Rt=this.y,Pt=this.width,Bt=this.height,Ut=this.parent.div.style.cursor,Nt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(jt.target).cursor;const It=()=>{this._isDraggable=mt,window.removeEventListener("pointerup",It),window.removeEventListener("blur",It),window.removeEventListener("pointermove",At,ht),this.parent.div.style.cursor=Ut,this.div.style.cursor=Nt;const Ht=this.x,Qt=this.y,tn=this.width,an=this.height;Ht===vt&&Qt===Rt&&tn===Pt&&an===Bt||this.addCommands({cmd:()=>{this.width=tn,this.height=an,this.x=Ht,this.y=Qt;const[Wt,Xt]=this.parentDimensions;this.setDims(Wt*tn,Xt*an),this.fixAndSetPosition()},undo:()=>{this.width=Pt,this.height=Bt,this.x=vt,this.y=Rt;const[Wt,Xt]=this.parentDimensions;this.setDims(Wt*Pt,Xt*Bt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",It),window.addEventListener("blur",It)},Ao=function(yt,jt){const[St,At]=this.parentDimensions,mt=this.x,ht=this.y,vt=this.width,Rt=this.height,Pt=bt.MIN_SIZE/St,Bt=bt.MIN_SIZE/At,Ut=wn=>Math.round(wn*1e4)/1e4,Nt=Zt(this,ot,ys).call(this,this.rotation),It=(wn,Ln)=>[Nt[0]*wn+Nt[2]*Ln,Nt[1]*wn+Nt[3]*Ln],Ht=Zt(this,ot,ys).call(this,360-this.rotation),Qt=(wn,Ln)=>[Ht[0]*wn+Ht[2]*Ln,Ht[1]*wn+Ht[3]*Ln];let tn,an,Wt=!1,Xt=!1;switch(yt){case"topLeft":Wt=!0,tn=(wn,Ln)=>[0,0],an=(wn,Ln)=>[wn,Ln];break;case"topMiddle":tn=(wn,Ln)=>[wn/2,0],an=(wn,Ln)=>[wn/2,Ln];break;case"topRight":Wt=!0,tn=(wn,Ln)=>[wn,0],an=(wn,Ln)=>[0,Ln];break;case"middleRight":Xt=!0,tn=(wn,Ln)=>[wn,Ln/2],an=(wn,Ln)=>[0,Ln/2];break;case"bottomRight":Wt=!0,tn=(wn,Ln)=>[wn,Ln],an=(wn,Ln)=>[0,0];break;case"bottomMiddle":tn=(wn,Ln)=>[wn/2,Ln],an=(wn,Ln)=>[wn/2,0];break;case"bottomLeft":Wt=!0,tn=(wn,Ln)=>[0,Ln],an=(wn,Ln)=>[wn,0];break;case"middleLeft":Xt=!0,tn=(wn,Ln)=>[0,Ln/2],an=(wn,Ln)=>[wn,Ln/2];break}const wt=tn(vt,Rt),kt=an(vt,Rt);let Tt=It(...kt);const zt=Ut(mt+Tt[0]),en=Ut(ht+Tt[1]);let un=1,pn=1,[qt,Cn]=this.screenToPageTranslation(jt.movementX,jt.movementY);if([qt,Cn]=Qt(qt/St,Cn/At),Wt){const wn=Math.hypot(vt,Rt);un=pn=Math.max(Math.min(Math.hypot(kt[0]-wt[0]-qt,kt[1]-wt[1]-Cn)/wn,1/vt,1/Rt),Pt/vt,Bt/Rt)}else Xt?un=Math.max(Pt,Math.min(1,Math.abs(kt[0]-wt[0]-qt)))/vt:pn=Math.max(Bt,Math.min(1,Math.abs(kt[1]-wt[1]-Cn)))/Rt;const fn=Ut(vt*un),On=Ut(Rt*pn);Tt=It(...an(fn,On));const An=zt-Tt[0],Rn=en-Tt[1];this.width=fn,this.height=On,this.x=An,this.y=Rn,this.setDims(St*fn,At*On),this.fixAndSetPosition()},bs=async function(){var St;const yt=pt(this,b);if(!yt)return;if(!pt(this,h)&&!pt(this,j)){yt.classList.remove("done"),(St=pt(this,_))==null||St.remove();return}bt._l10nPromise.get("editor_alt_text_edit_button_label").then(At=>{yt.setAttribute("aria-label",At)});let jt=pt(this,_);if(!jt){ln(this,_,jt=document.createElement("span")),jt.className="tooltip",jt.setAttribute("role","tooltip");const At=jt.id=`alt-text-tooltip-${this.id}`;yt.setAttribute("aria-describedby",At);const mt=100;yt.addEventListener("mouseenter",()=>{ln(this,st,setTimeout(()=>{ln(this,st,null),pt(this,_).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},mt))}),yt.addEventListener("mouseleave",()=>{var ht;clearTimeout(pt(this,st)),ln(this,st,null),(ht=pt(this,_))==null||ht.classList.remove("show")})}yt.classList.add("done"),jt.innerText=pt(this,j)?await bt._l10nPromise.get("editor_alt_text_decorative_tooltip"):pt(this,h),jt.parentNode||yt.append(jt)},yo=function(yt){if(!this._isDraggable)return;const jt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let St,At;jt&&(St={passive:!0,capture:!0},At=ht=>{const[vt,Rt]=this.screenToPageTranslation(ht.movementX,ht.movementY);this._uiManager.dragSelectedEditors(vt,Rt)},window.addEventListener("pointermove",At,St));const mt=()=>{if(window.removeEventListener("pointerup",mt),window.removeEventListener("blur",mt),jt&&window.removeEventListener("pointermove",At,St),ln(this,_e,!1),!this._uiManager.endDragSession()){const{isMac:ht}=a.FeatureTest.platform;yt.ctrlKey&&!ht||yt.shiftKey||yt.metaKey&&ht?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",mt),window.addEventListener("blur",mt)},on(bt,ft),tr(bt,"_borderLineWidth",-1),tr(bt,"_colorManager",new o.ColorManager),tr(bt,"_zIndex",1),tr(bt,"SMALL_EDITOR_SIZE",0);let d=bt;s.AnnotationEditor=d;class g extends d{constructor(yt){super(yt),this.annotationElementId=yt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,s,i)=>{var tt,nt,xt,ut,_e,vs,it,et,ot,rt,lt,bo,ct,Et,gt,Lt,Dt,Ft,bt,_t,yt,jt,St,At,mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It,Ht,Qt,tn,an,Wt,Xt,wt,kt,Tt,zt,en,un,pn,qt,vo,Ds,Fs,Kr,Bs,ws,dr,Nr,Do,Fo,Ss,Tr,ks;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=c,s.opacityToHex=d;var o=i(1),a=i(6);function c(Vn,Gt,hn){for(const vn of hn)Gt.addEventListener(vn,Vn[vn].bind(Vn))}function d(Vn){return Math.round(Math.min(255,Math.max(1,255*Vn))).toString(16).padStart(2,"0")}class g{constructor(){on(this,tt,0)}getId(){return`${o.AnnotationEditorPrefix}${Pr(this,tt)._++}`}}tt=new WeakMap;const at=class at{constructor(){on(this,_e);on(this,nt,(0,o.getUuid)());on(this,xt,0);on(this,ut,null)}static get _isSVGFittingCanvas(){const Gt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',vn=new OffscreenCanvas(1,3).getContext("2d"),Tn=new Image;Tn.src=Gt;const In=Tn.decode().then(()=>(vn.drawImage(Tn,0,0,1,1,0,0,1,3),new Uint32Array(vn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",In)}async getFromFile(Gt){const{lastModified:hn,name:vn,size:Tn,type:In}=Gt;return Zt(this,_e,vs).call(this,`${hn}_${vn}_${Tn}_${In}`,Gt)}async getFromUrl(Gt){return Zt(this,_e,vs).call(this,Gt,Gt)}async getFromId(Gt){pt(this,ut)||ln(this,ut,new Map);const hn=pt(this,ut).get(Gt);return hn?hn.bitmap?(hn.refCounter+=1,hn):hn.file?this.getFromFile(hn.file):this.getFromUrl(hn.url):null}getSvgUrl(Gt){const hn=pt(this,ut).get(Gt);return hn!=null&&hn.isSvg?hn.svgUrl:null}deleteId(Gt){pt(this,ut)||ln(this,ut,new Map);const hn=pt(this,ut).get(Gt);hn&&(hn.refCounter-=1,hn.refCounter===0&&(hn.bitmap=null))}isValidId(Gt){return Gt.startsWith(`image_${pt(this,nt)}_`)}};nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakSet,vs=async function(Gt,hn){pt(this,ut)||ln(this,ut,new Map);let vn=pt(this,ut).get(Gt);if(vn===null)return null;if(vn!=null&&vn.bitmap)return vn.refCounter+=1,vn;try{vn||(vn={bitmap:null,id:`image_${pt(this,nt)}_${Pr(this,xt)._++}`,refCounter:0,isSvg:!1});let Tn;if(typeof hn=="string"){vn.url=hn;const In=await fetch(hn);if(!In.ok)throw new Error(In.statusText);Tn=await In.blob()}else Tn=vn.file=hn;if(Tn.type==="image/svg+xml"){const In=at._isSVGFittingCanvas,kn=new FileReader,Ot=new Image,Mt=new Promise((Yt,xn)=>{Ot.onload=()=>{vn.bitmap=Ot,vn.isSvg=!0,Yt()},kn.onload=async()=>{const dn=vn.svgUrl=kn.result;Ot.src=await In?`${dn}#svgView(preserveAspectRatio(none))`:dn},Ot.onerror=kn.onerror=xn});kn.readAsDataURL(Tn),await Mt}else vn.bitmap=await createImageBitmap(Tn);vn.refCounter=1}catch(Tn){console.error(Tn),vn=null}return pt(this,ut).set(Gt,vn),vn&&pt(this,ut).set(vn.id,vn),vn};let h=at;class j{constructor(Gt=128){on(this,it,[]);on(this,et,!1);on(this,ot);on(this,rt,-1);ln(this,ot,Gt)}add({cmd:Gt,undo:hn,mustExec:vn,type:Tn=NaN,overwriteIfSameType:In=!1,keepUndo:kn=!1}){if(vn&&Gt(),pt(this,et))return;const Ot={cmd:Gt,undo:hn,type:Tn};if(pt(this,rt)===-1){pt(this,it).length>0&&(pt(this,it).length=0),ln(this,rt,0),pt(this,it).push(Ot);return}if(In&&pt(this,it)[pt(this,rt)].type===Tn){kn&&(Ot.undo=pt(this,it)[pt(this,rt)].undo),pt(this,it)[pt(this,rt)]=Ot;return}const Mt=pt(this,rt)+1;Mt===pt(this,ot)?pt(this,it).splice(0,1):(ln(this,rt,Mt),Mt<pt(this,it).length&&pt(this,it).splice(Mt)),pt(this,it).push(Ot)}undo(){pt(this,rt)!==-1&&(ln(this,et,!0),pt(this,it)[pt(this,rt)].undo(),ln(this,et,!1),ln(this,rt,pt(this,rt)-1))}redo(){pt(this,rt)<pt(this,it).length-1&&(ln(this,rt,pt(this,rt)+1),ln(this,et,!0),pt(this,it)[pt(this,rt)].cmd(),ln(this,et,!1))}hasSomethingToUndo(){return pt(this,rt)!==-1}hasSomethingToRedo(){return pt(this,rt)<pt(this,it).length-1}destroy(){ln(this,it,null)}}it=new WeakMap,et=new WeakMap,ot=new WeakMap,rt=new WeakMap,s.CommandManager=j;class b{constructor(Gt){on(this,lt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:hn}=o.FeatureTest.platform;for(const[vn,Tn,In={}]of Gt)for(const kn of vn){const Ot=kn.startsWith("mac+");hn&&Ot?(this.callbacks.set(kn.slice(4),{callback:Tn,options:In}),this.allKeys.add(kn.split("+").at(-1))):!hn&&!Ot&&(this.callbacks.set(kn,{callback:Tn,options:In}),this.allKeys.add(kn.split("+").at(-1)))}}exec(Gt,hn){if(!this.allKeys.has(hn.key))return;const vn=this.callbacks.get(Zt(this,lt,bo).call(this,hn));if(!vn)return;const{callback:Tn,options:{bubbles:In=!1,args:kn=[],checker:Ot=null}}=vn;Ot&&!Ot(Gt,hn)||(Tn.bind(Gt,...kn)(),In||(hn.stopPropagation(),hn.preventDefault()))}}lt=new WeakSet,bo=function(Gt){Gt.altKey&&this.buffer.push("alt"),Gt.ctrlKey&&this.buffer.push("ctrl"),Gt.metaKey&&this.buffer.push("meta"),Gt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Gt.key);const hn=this.buffer.join("+");return this.buffer.length=0,hn},s.KeyboardManager=b;const dt=class dt{get _colors(){const Gt=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(Gt),(0,o.shadow)(this,"_colors",Gt)}convert(Gt){const hn=(0,a.getRGB)(Gt);if(!window.matchMedia("(forced-colors: active)").matches)return hn;for(const[vn,Tn]of this._colors)if(Tn.every((In,kn)=>In===hn[kn]))return dt._colorsMapping.get(vn);return hn}getHexCode(Gt){const hn=this._colors.get(Gt);return hn?o.Util.makeHexColor(...hn):Gt}};tr(dt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _=dt;s.ColorManager=_;const Wn=class Wn{constructor(Gt,hn,vn,Tn,In,kn){on(this,qt);on(this,ct,null);on(this,Et,new Map);on(this,gt,new Map);on(this,Lt,null);on(this,Dt,null);on(this,Ft,new j);on(this,bt,0);on(this,_t,new Set);on(this,yt,null);on(this,jt,null);on(this,St,new Set);on(this,At,null);on(this,mt,new g);on(this,ht,!1);on(this,vt,!1);on(this,Rt,null);on(this,Pt,o.AnnotationEditorType.NONE);on(this,Bt,new Set);on(this,Ut,null);on(this,Nt,this.blur.bind(this));on(this,It,this.focus.bind(this));on(this,Ht,this.copy.bind(this));on(this,Qt,this.cut.bind(this));on(this,tn,this.paste.bind(this));on(this,an,this.keydown.bind(this));on(this,Wt,this.onEditingAction.bind(this));on(this,Xt,this.onPageChanging.bind(this));on(this,wt,this.onScaleChanging.bind(this));on(this,kt,this.onRotationChanging.bind(this));on(this,Tt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});on(this,zt,[0,0]);on(this,en,null);on(this,un,null);on(this,pn,null);ln(this,un,Gt),ln(this,pn,hn),ln(this,Lt,vn),this._eventBus=Tn,this._eventBus._on("editingaction",pt(this,Wt)),this._eventBus._on("pagechanging",pt(this,Xt)),this._eventBus._on("scalechanging",pt(this,wt)),this._eventBus._on("rotationchanging",pt(this,kt)),ln(this,Dt,In.annotationStorage),ln(this,At,In.filterFactory),ln(this,Ut,kn),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Gt=Wn.prototype,hn=In=>{const{activeElement:kn}=document;return kn&&pt(In,un).contains(kn)&&In.hasSomethingToControl()},vn=this.TRANSLATE_SMALL,Tn=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new b([[["ctrl+a","mac+meta+a"],Gt.selectAll],[["ctrl+z","mac+meta+z"],Gt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Gt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Gt.delete],[["Escape","mac+Escape"],Gt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Gt.translateSelectedEditors,{args:[-vn,0],checker:hn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Gt.translateSelectedEditors,{args:[-Tn,0],checker:hn}],[["ArrowRight","mac+ArrowRight"],Gt.translateSelectedEditors,{args:[vn,0],checker:hn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Gt.translateSelectedEditors,{args:[Tn,0],checker:hn}],[["ArrowUp","mac+ArrowUp"],Gt.translateSelectedEditors,{args:[0,-vn],checker:hn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Gt.translateSelectedEditors,{args:[0,-Tn],checker:hn}],[["ArrowDown","mac+ArrowDown"],Gt.translateSelectedEditors,{args:[0,vn],checker:hn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Gt.translateSelectedEditors,{args:[0,Tn],checker:hn}]]))}destroy(){Zt(this,qt,Kr).call(this),Zt(this,qt,Ds).call(this),this._eventBus._off("editingaction",pt(this,Wt)),this._eventBus._off("pagechanging",pt(this,Xt)),this._eventBus._off("scalechanging",pt(this,wt)),this._eventBus._off("rotationchanging",pt(this,kt));for(const Gt of pt(this,gt).values())Gt.destroy();pt(this,gt).clear(),pt(this,Et).clear(),pt(this,St).clear(),ln(this,ct,null),pt(this,Bt).clear(),pt(this,Ft).destroy(),pt(this,Lt).destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",pt(this,Ut)?pt(this,At).addHCMFilter(pt(this,Ut).foreground,pt(this,Ut).background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(pt(this,un)).direction)}editAltText(Gt){var hn;(hn=pt(this,Lt))==null||hn.editAltText(this,Gt)}onPageChanging({pageNumber:Gt}){ln(this,bt,Gt-1)}focusMainContainer(){pt(this,un).focus()}findParent(Gt,hn){for(const vn of pt(this,gt).values()){const{x:Tn,y:In,width:kn,height:Ot}=vn.div.getBoundingClientRect();if(Gt>=Tn&&Gt<=Tn+kn&&hn>=In&&hn<=In+Ot)return vn}return null}disableUserSelect(Gt=!1){pt(this,pn).classList.toggle("noUserSelect",Gt)}addShouldRescale(Gt){pt(this,St).add(Gt)}removeShouldRescale(Gt){pt(this,St).delete(Gt)}onScaleChanging({scale:Gt}){this.commitOrRemove(),this.viewParameters.realScale=Gt*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const hn of pt(this,St))hn.onScaleChanging()}onRotationChanging({pagesRotation:Gt}){this.commitOrRemove(),this.viewParameters.rotation=Gt}addToAnnotationStorage(Gt){!Gt.isEmpty()&&pt(this,Dt)&&!pt(this,Dt).has(Gt.id)&&pt(this,Dt).setValue(Gt.id,Gt)}blur(){if(!this.hasSelection)return;const{activeElement:Gt}=document;for(const hn of pt(this,Bt))if(hn.div.contains(Gt)){ln(this,Rt,[hn,Gt]),hn._focusEventsAllowed=!1;break}}focus(){if(!pt(this,Rt))return;const[Gt,hn]=pt(this,Rt);ln(this,Rt,null),hn.addEventListener("focusin",()=>{Gt._focusEventsAllowed=!0},{once:!0}),hn.focus()}addEditListeners(){Zt(this,qt,Fs).call(this),Zt(this,qt,Bs).call(this)}removeEditListeners(){Zt(this,qt,Kr).call(this),Zt(this,qt,ws).call(this)}copy(Gt){var vn;if(Gt.preventDefault(),(vn=pt(this,ct))==null||vn.commitOrRemove(),!this.hasSelection)return;const hn=[];for(const Tn of pt(this,Bt)){const In=Tn.serialize(!0);In&&hn.push(In)}hn.length!==0&&Gt.clipboardData.setData("application/pdfjs",JSON.stringify(hn))}cut(Gt){this.copy(Gt),this.delete()}paste(Gt){Gt.preventDefault();const{clipboardData:hn}=Gt;for(const In of hn.items)for(const kn of pt(this,jt))if(kn.isHandlingMimeForPasting(In.type)){kn.paste(In,this.currentLayer);return}let vn=hn.getData("application/pdfjs");if(!vn)return;try{vn=JSON.parse(vn)}catch(In){(0,o.warn)(`paste: "${In.message}".`);return}if(!Array.isArray(vn))return;this.unselectAll();const Tn=this.currentLayer;try{const In=[];for(const Mt of vn){const Yt=Tn.deserialize(Mt);if(!Yt)return;In.push(Yt)}const kn=()=>{for(const Mt of In)Zt(this,qt,Ss).call(this,Mt);Zt(this,qt,ks).call(this,In)},Ot=()=>{for(const Mt of In)Mt.remove()};this.addCommands({cmd:kn,undo:Ot,mustExec:!0})}catch(In){(0,o.warn)(`paste: "${In.message}".`)}}keydown(Gt){var hn;(hn=this.getActive())!=null&&hn.shouldGetKeyboardEvents()||Wn._keyboardManager.exec(this,Gt)}onEditingAction(Gt){["undo","redo","delete","selectAll"].includes(Gt.name)&&this[Gt.name]()}setEditingState(Gt){Gt?(Zt(this,qt,vo).call(this),Zt(this,qt,Fs).call(this),Zt(this,qt,Bs).call(this),Zt(this,qt,dr).call(this,{isEditing:pt(this,Pt)!==o.AnnotationEditorType.NONE,isEmpty:Zt(this,qt,Tr).call(this),hasSomethingToUndo:pt(this,Ft).hasSomethingToUndo(),hasSomethingToRedo:pt(this,Ft).hasSomethingToRedo(),hasSelectedEditor:!1})):(Zt(this,qt,Ds).call(this),Zt(this,qt,Kr).call(this),Zt(this,qt,ws).call(this),Zt(this,qt,dr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Gt){if(!pt(this,jt)){ln(this,jt,Gt);for(const hn of pt(this,jt))Zt(this,qt,Nr).call(this,hn.defaultPropertiesToUpdate)}}getId(){return pt(this,mt).getId()}get currentLayer(){return pt(this,gt).get(pt(this,bt))}getLayer(Gt){return pt(this,gt).get(Gt)}get currentPageIndex(){return pt(this,bt)}addLayer(Gt){pt(this,gt).set(Gt.pageIndex,Gt),pt(this,ht)?Gt.enable():Gt.disable()}removeLayer(Gt){pt(this,gt).delete(Gt.pageIndex)}updateMode(Gt,hn=null){if(pt(this,Pt)!==Gt){if(ln(this,Pt,Gt),Gt===o.AnnotationEditorType.NONE){this.setEditingState(!1),Zt(this,qt,Fo).call(this);return}this.setEditingState(!0),Zt(this,qt,Do).call(this),this.unselectAll();for(const vn of pt(this,gt).values())vn.updateMode(Gt);if(hn){for(const vn of pt(this,Et).values())if(vn.annotationElementId===hn){this.setSelected(vn),vn.enterInEditMode();break}}}}updateToolbar(Gt){Gt!==pt(this,Pt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Gt})}updateParams(Gt,hn){if(pt(this,jt)){if(Gt===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Gt);return}for(const vn of pt(this,Bt))vn.updateParams(Gt,hn);for(const vn of pt(this,jt))vn.updateDefaultParams(Gt,hn)}}enableWaiting(Gt=!1){if(pt(this,vt)!==Gt){ln(this,vt,Gt);for(const hn of pt(this,gt).values())Gt?hn.disableClick():hn.enableClick(),hn.div.classList.toggle("waiting",Gt)}}getEditors(Gt){const hn=[];for(const vn of pt(this,Et).values())vn.pageIndex===Gt&&hn.push(vn);return hn}getEditor(Gt){return pt(this,Et).get(Gt)}addEditor(Gt){pt(this,Et).set(Gt.id,Gt)}removeEditor(Gt){var hn;pt(this,Et).delete(Gt.id),this.unselect(Gt),(!Gt.annotationElementId||!pt(this,_t).has(Gt.annotationElementId))&&((hn=pt(this,Dt))==null||hn.remove(Gt.id))}addDeletedAnnotationElement(Gt){pt(this,_t).add(Gt.annotationElementId),Gt.deleted=!0}isDeletedAnnotationElement(Gt){return pt(this,_t).has(Gt)}removeDeletedAnnotationElement(Gt){pt(this,_t).delete(Gt.annotationElementId),Gt.deleted=!1}setActiveEditor(Gt){pt(this,ct)!==Gt&&(ln(this,ct,Gt),Gt&&Zt(this,qt,Nr).call(this,Gt.propertiesToUpdate))}toggleSelected(Gt){if(pt(this,Bt).has(Gt)){pt(this,Bt).delete(Gt),Gt.unselect(),Zt(this,qt,dr).call(this,{hasSelectedEditor:this.hasSelection});return}pt(this,Bt).add(Gt),Gt.select(),Zt(this,qt,Nr).call(this,Gt.propertiesToUpdate),Zt(this,qt,dr).call(this,{hasSelectedEditor:!0})}setSelected(Gt){for(const hn of pt(this,Bt))hn!==Gt&&hn.unselect();pt(this,Bt).clear(),pt(this,Bt).add(Gt),Gt.select(),Zt(this,qt,Nr).call(this,Gt.propertiesToUpdate),Zt(this,qt,dr).call(this,{hasSelectedEditor:!0})}isSelected(Gt){return pt(this,Bt).has(Gt)}unselect(Gt){Gt.unselect(),pt(this,Bt).delete(Gt),Zt(this,qt,dr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return pt(this,Bt).size!==0}undo(){pt(this,Ft).undo(),Zt(this,qt,dr).call(this,{hasSomethingToUndo:pt(this,Ft).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Zt(this,qt,Tr).call(this)})}redo(){pt(this,Ft).redo(),Zt(this,qt,dr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:pt(this,Ft).hasSomethingToRedo(),isEmpty:Zt(this,qt,Tr).call(this)})}addCommands(Gt){pt(this,Ft).add(Gt),Zt(this,qt,dr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Zt(this,qt,Tr).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Gt=[...pt(this,Bt)],hn=()=>{for(const Tn of Gt)Tn.remove()},vn=()=>{for(const Tn of Gt)Zt(this,qt,Ss).call(this,Tn)};this.addCommands({cmd:hn,undo:vn,mustExec:!0})}commitOrRemove(){var Gt;(Gt=pt(this,ct))==null||Gt.commitOrRemove()}hasSomethingToControl(){return pt(this,ct)||this.hasSelection}selectAll(){for(const Gt of pt(this,Bt))Gt.commit();Zt(this,qt,ks).call(this,pt(this,Et).values())}unselectAll(){if(pt(this,ct)){pt(this,ct).commitOrRemove();return}if(this.hasSelection){for(const Gt of pt(this,Bt))Gt.unselect();pt(this,Bt).clear(),Zt(this,qt,dr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Gt,hn,vn=!1){if(vn||this.commitOrRemove(),!this.hasSelection)return;pt(this,zt)[0]+=Gt,pt(this,zt)[1]+=hn;const[Tn,In]=pt(this,zt),kn=[...pt(this,Bt)],Ot=1e3;pt(this,en)&&clearTimeout(pt(this,en)),ln(this,en,setTimeout(()=>{ln(this,en,null),pt(this,zt)[0]=pt(this,zt)[1]=0,this.addCommands({cmd:()=>{for(const Mt of kn)pt(this,Et).has(Mt.id)&&Mt.translateInPage(Tn,In)},undo:()=>{for(const Mt of kn)pt(this,Et).has(Mt.id)&&Mt.translateInPage(-Tn,-In)},mustExec:!1})},Ot));for(const Mt of kn)Mt.translateInPage(Gt,hn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ln(this,yt,new Map);for(const Gt of pt(this,Bt))pt(this,yt).set(Gt,{savedX:Gt.x,savedY:Gt.y,savedPageIndex:Gt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!pt(this,yt))return!1;this.disableUserSelect(!1);const Gt=pt(this,yt);ln(this,yt,null);let hn=!1;for(const[{x:Tn,y:In,pageIndex:kn},Ot]of Gt)Ot.newX=Tn,Ot.newY=In,Ot.newPageIndex=kn,hn||(hn=Tn!==Ot.savedX||In!==Ot.savedY||kn!==Ot.savedPageIndex);if(!hn)return!1;const vn=(Tn,In,kn,Ot)=>{if(pt(this,Et).has(Tn.id)){const Mt=pt(this,gt).get(Ot);Mt?Tn._setParentAndPosition(Mt,In,kn):(Tn.pageIndex=Ot,Tn.x=In,Tn.y=kn)}};return this.addCommands({cmd:()=>{for(const[Tn,{newX:In,newY:kn,newPageIndex:Ot}]of Gt)vn(Tn,In,kn,Ot)},undo:()=>{for(const[Tn,{savedX:In,savedY:kn,savedPageIndex:Ot}]of Gt)vn(Tn,In,kn,Ot)},mustExec:!0}),!0}dragSelectedEditors(Gt,hn){if(pt(this,yt))for(const vn of pt(this,yt).keys())vn.drag(Gt,hn)}rebuild(Gt){if(Gt.parent===null){const hn=this.getLayer(Gt.pageIndex);hn?(hn.changeParent(Gt),hn.addOrRebuild(Gt)):(this.addEditor(Gt),this.addToAnnotationStorage(Gt),Gt.rebuild())}else Gt.parent.addOrRebuild(Gt)}isActive(Gt){return pt(this,ct)===Gt}getActive(){return pt(this,ct)}getMode(){return pt(this,Pt)}get imageManager(){return(0,o.shadow)(this,"imageManager",new h)}};ct=new WeakMap,Et=new WeakMap,gt=new WeakMap,Lt=new WeakMap,Dt=new WeakMap,Ft=new WeakMap,bt=new WeakMap,_t=new WeakMap,yt=new WeakMap,jt=new WeakMap,St=new WeakMap,At=new WeakMap,mt=new WeakMap,ht=new WeakMap,vt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,Nt=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,an=new WeakMap,Wt=new WeakMap,Xt=new WeakMap,wt=new WeakMap,kt=new WeakMap,Tt=new WeakMap,zt=new WeakMap,en=new WeakMap,un=new WeakMap,pn=new WeakMap,qt=new WeakSet,vo=function(){window.addEventListener("focus",pt(this,It)),window.addEventListener("blur",pt(this,Nt))},Ds=function(){window.removeEventListener("focus",pt(this,It)),window.removeEventListener("blur",pt(this,Nt))},Fs=function(){window.addEventListener("keydown",pt(this,an),{capture:!0})},Kr=function(){window.removeEventListener("keydown",pt(this,an),{capture:!0})},Bs=function(){document.addEventListener("copy",pt(this,Ht)),document.addEventListener("cut",pt(this,Qt)),document.addEventListener("paste",pt(this,tn))},ws=function(){document.removeEventListener("copy",pt(this,Ht)),document.removeEventListener("cut",pt(this,Qt)),document.removeEventListener("paste",pt(this,tn))},dr=function(Gt){Object.entries(Gt).some(([vn,Tn])=>pt(this,Tt)[vn]!==Tn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(pt(this,Tt),Gt)})},Nr=function(Gt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Gt})},Do=function(){if(!pt(this,ht)){ln(this,ht,!0);for(const Gt of pt(this,gt).values())Gt.enable()}},Fo=function(){if(this.unselectAll(),pt(this,ht)){ln(this,ht,!1);for(const Gt of pt(this,gt).values())Gt.disable()}},Ss=function(Gt){const hn=pt(this,gt).get(Gt.pageIndex);hn?hn.addOrRebuild(Gt):this.addEditor(Gt)},Tr=function(){if(pt(this,Et).size===0)return!0;if(pt(this,Et).size===1)for(const Gt of pt(this,Et).values())return Gt.isEmpty();return!1},ks=function(Gt){pt(this,Bt).clear();for(const hn of Gt)hn.isEmpty()||(pt(this,Bt).add(hn),hn.select());Zt(this,qt,dr).call(this,{hasSelectedEditor:!0})},tr(Wn,"TRANSLATE_SMALL",1),tr(Wn,"TRANSLATE_BIG",10);let st=Wn;s.AnnotationEditorUIManager=st},(e,s,i)=>{var bt,_t,yt,jt,St,At,mt,ht,vt,Rt,Pt,Bt,wr,Sr,js,Qr,Jr,Mr,Lr;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=rt,s.getColorValues=Et,s.getCurrentTransform=gt,s.getCurrentTransformInverse=Lt,s.getFilenameFromUrl=_e,s.getPdfFilenameFromUrl=$,s.getRGB=ct,s.getXfaPageViewport=dt,s.isDataScheme=xt,s.isPdfFile=ut,s.isValidFetchUrl=it,s.loadScript=ot,s.noContextMenu=et,s.setLayerDimensions=Dt;var o=i(7),a=i(1);const c="http://www.w3.org/2000/svg",Ft=class Ft{};tr(Ft,"CSS",96),tr(Ft,"PDF",72),tr(Ft,"PDF_TO_CSS_UNITS",Ft.CSS/Ft.PDF);let d=Ft;s.PixelsPerInch=d;class g extends o.BaseFilterFactory{constructor({docId:wt,ownerDocument:kt=globalThis.document}={}){super();on(this,Bt);on(this,bt);on(this,_t);on(this,yt);on(this,jt);on(this,St);on(this,At);on(this,mt);on(this,ht);on(this,vt);on(this,Rt);on(this,Pt,0);ln(this,yt,wt),ln(this,jt,kt)}addFilter(wt){if(!wt)return"none";let kt=pt(this,Bt,wr).get(wt);if(kt)return kt;let Tt,zt,en,un;if(wt.length===1){const fn=wt[0],On=new Array(256);for(let An=0;An<256;An++)On[An]=fn[An]/255;un=Tt=zt=en=On.join(",")}else{const[fn,On,An]=wt,Rn=new Array(256),wn=new Array(256),Ln=new Array(256);for(let $n=0;$n<256;$n++)Rn[$n]=fn[$n]/255,wn[$n]=On[$n]/255,Ln[$n]=An[$n]/255;Tt=Rn.join(","),zt=wn.join(","),en=Ln.join(","),un=`${Tt}${zt}${en}`}if(kt=pt(this,Bt,wr).get(un),kt)return pt(this,Bt,wr).set(wt,kt),kt;const pn=`g_${pt(this,yt)}_transfer_map_${Pr(this,Pt)._++}`,qt=`url(#${pn})`;pt(this,Bt,wr).set(wt,qt),pt(this,Bt,wr).set(un,qt);const Cn=Zt(this,Bt,Qr).call(this,pn);return Zt(this,Bt,Mr).call(this,Tt,zt,en,Cn),qt}addHCMFilter(wt,kt){var On;const Tt=`${wt}-${kt}`;if(pt(this,At)===Tt)return pt(this,mt);if(ln(this,At,Tt),ln(this,mt,"none"),(On=pt(this,St))==null||On.remove(),!wt||!kt)return pt(this,mt);const zt=Zt(this,Bt,Lr).call(this,wt);wt=a.Util.makeHexColor(...zt);const en=Zt(this,Bt,Lr).call(this,kt);if(kt=a.Util.makeHexColor(...en),pt(this,Bt,Sr).style.color="",wt==="#000000"&&kt==="#ffffff"||wt===kt)return pt(this,mt);const un=new Array(256);for(let An=0;An<=255;An++){const Rn=An/255;un[An]=Rn<=.03928?Rn/12.92:((Rn+.055)/1.055)**2.4}const pn=un.join(","),qt=`g_${pt(this,yt)}_hcm_filter`,Cn=ln(this,ht,Zt(this,Bt,Qr).call(this,qt));Zt(this,Bt,Mr).call(this,pn,pn,pn,Cn),Zt(this,Bt,js).call(this,Cn);const fn=(An,Rn)=>{const wn=zt[An]/255,Ln=en[An]/255,$n=new Array(Rn+1);for(let Yn=0;Yn<=Rn;Yn++)$n[Yn]=wn+Yn/Rn*(Ln-wn);return $n.join(",")};return Zt(this,Bt,Mr).call(this,fn(0,5),fn(1,5),fn(2,5),Cn),ln(this,mt,`url(#${qt})`),pt(this,mt)}addHighlightHCMFilter(wt,kt,Tt,zt){var Ln;const en=`${wt}-${kt}-${Tt}-${zt}`;if(pt(this,vt)===en)return pt(this,Rt);if(ln(this,vt,en),ln(this,Rt,"none"),(Ln=pt(this,ht))==null||Ln.remove(),!wt||!kt)return pt(this,Rt);const[un,pn]=[wt,kt].map(Zt(this,Bt,Lr).bind(this));let qt=Math.round(.2126*un[0]+.7152*un[1]+.0722*un[2]),Cn=Math.round(.2126*pn[0]+.7152*pn[1]+.0722*pn[2]),[fn,On]=[Tt,zt].map(Zt(this,Bt,Lr).bind(this));Cn<qt&&([qt,Cn,fn,On]=[Cn,qt,On,fn]),pt(this,Bt,Sr).style.color="";const An=($n,Yn,gn)=>{const rn=new Array(256),sn=(Cn-qt)/gn,Sn=$n/255,Wn=(Yn-$n)/(255*gn);let Vn=0;for(let Gt=0;Gt<=gn;Gt++){const hn=Math.round(qt+Gt*sn),vn=Sn+Gt*Wn;for(let Tn=Vn;Tn<=hn;Tn++)rn[Tn]=vn;Vn=hn+1}for(let Gt=Vn;Gt<256;Gt++)rn[Gt]=rn[Vn-1];return rn.join(",")},Rn=`g_${pt(this,yt)}_hcm_highlight_filter`,wn=ln(this,ht,Zt(this,Bt,Qr).call(this,Rn));return Zt(this,Bt,js).call(this,wn),Zt(this,Bt,Mr).call(this,An(fn[0],On[0],5),An(fn[1],On[1],5),An(fn[2],On[2],5),wn),ln(this,Rt,`url(#${Rn})`),pt(this,Rt)}destroy(wt=!1){wt&&(pt(this,mt)||pt(this,Rt))||(pt(this,_t)&&(pt(this,_t).parentNode.parentNode.remove(),ln(this,_t,null)),pt(this,bt)&&(pt(this,bt).clear(),ln(this,bt,null)),ln(this,Pt,0))}}bt=new WeakMap,_t=new WeakMap,yt=new WeakMap,jt=new WeakMap,St=new WeakMap,At=new WeakMap,mt=new WeakMap,ht=new WeakMap,vt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,Bt=new WeakSet,wr=function(){return pt(this,bt)||ln(this,bt,new Map)},Sr=function(){if(!pt(this,_t)){const wt=pt(this,jt).createElement("div"),{style:kt}=wt;kt.visibility="hidden",kt.contain="strict",kt.width=kt.height=0,kt.position="absolute",kt.top=kt.left=0,kt.zIndex=-1;const Tt=pt(this,jt).createElementNS(c,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),ln(this,_t,pt(this,jt).createElementNS(c,"defs")),wt.append(Tt),Tt.append(pt(this,_t)),pt(this,jt).body.append(wt)}return pt(this,_t)},js=function(wt){const kt=pt(this,jt).createElementNS(c,"feColorMatrix");kt.setAttribute("type","matrix"),kt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),wt.append(kt)},Qr=function(wt){const kt=pt(this,jt).createElementNS(c,"filter");return kt.setAttribute("color-interpolation-filters","sRGB"),kt.setAttribute("id",wt),pt(this,Bt,Sr).append(kt),kt},Jr=function(wt,kt,Tt){const zt=pt(this,jt).createElementNS(c,kt);zt.setAttribute("type","discrete"),zt.setAttribute("tableValues",Tt),wt.append(zt)},Mr=function(wt,kt,Tt,zt){const en=pt(this,jt).createElementNS(c,"feComponentTransfer");zt.append(en),Zt(this,Bt,Jr).call(this,en,"feFuncR",wt),Zt(this,Bt,Jr).call(this,en,"feFuncG",kt),Zt(this,Bt,Jr).call(this,en,"feFuncB",Tt)},Lr=function(wt){return pt(this,Bt,Sr).style.color=wt,ct(getComputedStyle(pt(this,Bt,Sr)).getPropertyValue("color"))},s.DOMFilterFactory=g;class h extends o.BaseCanvasFactory{constructor({ownerDocument:Xt=globalThis.document}={}){super(),this._document=Xt}_createCanvas(Xt,wt){const kt=this._document.createElement("canvas");return kt.width=Xt,kt.height=wt,kt}}s.DOMCanvasFactory=h;async function j(Wt,Xt=!1){if(it(Wt,document.baseURI)){const wt=await fetch(Wt);if(!wt.ok)throw new Error(wt.statusText);return Xt?new Uint8Array(await wt.arrayBuffer()):(0,a.stringToBytes)(await wt.text())}return new Promise((wt,kt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",Wt,!0),Xt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let zt;if(Xt&&Tt.response?zt=new Uint8Array(Tt.response):!Xt&&Tt.responseText&&(zt=(0,a.stringToBytes)(Tt.responseText)),zt){wt(zt);return}}kt(new Error(Tt.statusText))}},Tt.send(null)})}class b extends o.BaseCMapReaderFactory{_fetchData(Xt,wt){return j(Xt,this.isCompressed).then(kt=>({cMapData:kt,compressionType:wt}))}}s.DOMCMapReaderFactory=b;class _ extends o.BaseStandardFontDataFactory{_fetchData(Xt){return j(Xt,!0)}}s.DOMStandardFontDataFactory=_;class st extends o.BaseSVGFactory{_createSVG(Xt){return document.createElementNS(c,Xt)}}s.DOMSVGFactory=st;class tt{constructor({viewBox:Xt,scale:wt,rotation:kt,offsetX:Tt=0,offsetY:zt=0,dontFlip:en=!1}){this.viewBox=Xt,this.scale=wt,this.rotation=kt,this.offsetX=Tt,this.offsetY=zt;const un=(Xt[2]+Xt[0])/2,pn=(Xt[3]+Xt[1])/2;let qt,Cn,fn,On;switch(kt%=360,kt<0&&(kt+=360),kt){case 180:qt=-1,Cn=0,fn=0,On=1;break;case 90:qt=0,Cn=1,fn=1,On=0;break;case 270:qt=0,Cn=-1,fn=-1,On=0;break;case 0:qt=1,Cn=0,fn=0,On=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}en&&(fn=-fn,On=-On);let An,Rn,wn,Ln;qt===0?(An=Math.abs(pn-Xt[1])*wt+Tt,Rn=Math.abs(un-Xt[0])*wt+zt,wn=(Xt[3]-Xt[1])*wt,Ln=(Xt[2]-Xt[0])*wt):(An=Math.abs(un-Xt[0])*wt+Tt,Rn=Math.abs(pn-Xt[1])*wt+zt,wn=(Xt[2]-Xt[0])*wt,Ln=(Xt[3]-Xt[1])*wt),this.transform=[qt*wt,Cn*wt,fn*wt,On*wt,An-qt*wt*un-fn*wt*pn,Rn-Cn*wt*un-On*wt*pn],this.width=wn,this.height=Ln}get rawDims(){const{viewBox:Xt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:Xt[2]-Xt[0],pageHeight:Xt[3]-Xt[1],pageX:Xt[0],pageY:Xt[1]})}clone({scale:Xt=this.scale,rotation:wt=this.rotation,offsetX:kt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:zt=!1}={}){return new tt({viewBox:this.viewBox.slice(),scale:Xt,rotation:wt,offsetX:kt,offsetY:Tt,dontFlip:zt})}convertToViewportPoint(Xt,wt){return a.Util.applyTransform([Xt,wt],this.transform)}convertToViewportRectangle(Xt){const wt=a.Util.applyTransform([Xt[0],Xt[1]],this.transform),kt=a.Util.applyTransform([Xt[2],Xt[3]],this.transform);return[wt[0],wt[1],kt[0],kt[1]]}convertToPdfPoint(Xt,wt){return a.Util.applyInverseTransform([Xt,wt],this.transform)}}s.PageViewport=tt;class nt extends a.BaseException{constructor(Xt,wt=0){super(Xt,"RenderingCancelledException"),this.extraDelay=wt}}s.RenderingCancelledException=nt;function xt(Wt){const Xt=Wt.length;let wt=0;for(;wt<Xt&&Wt[wt].trim()==="";)wt++;return Wt.substring(wt,wt+5).toLowerCase()==="data:"}function ut(Wt){return typeof Wt=="string"&&/\.pdf$/i.test(Wt)}function _e(Wt,Xt=!1){return Xt||([Wt]=Wt.split(/[#?]/,1)),Wt.substring(Wt.lastIndexOf("/")+1)}function $(Wt,Xt="document.pdf"){if(typeof Wt!="string")return Xt;if(xt(Wt))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Xt;const wt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,kt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=wt.exec(Wt);let zt=kt.exec(Tt[1])||kt.exec(Tt[2])||kt.exec(Tt[3]);if(zt&&(zt=zt[0],zt.includes("%")))try{zt=kt.exec(decodeURIComponent(zt))[0]}catch{}return zt||Xt}class at{constructor(){tr(this,"started",Object.create(null));tr(this,"times",[])}time(Xt){Xt in this.started&&(0,a.warn)(`Timer is already running for ${Xt}`),this.started[Xt]=Date.now()}timeEnd(Xt){Xt in this.started||(0,a.warn)(`Timer has not been started for ${Xt}`),this.times.push({name:Xt,start:this.started[Xt],end:Date.now()}),delete this.started[Xt]}toString(){const Xt=[];let wt=0;for(const{name:kt}of this.times)wt=Math.max(kt.length,wt);for(const{name:kt,start:Tt,end:zt}of this.times)Xt.push(`${kt.padEnd(wt)} ${zt-Tt}ms
`);return Xt.join("")}}s.StatTimer=at;function it(Wt,Xt){try{const{protocol:wt}=Xt?new URL(Wt,Xt):new URL(Wt);return wt==="http:"||wt==="https:"}catch{return!1}}function et(Wt){Wt.preventDefault()}function ot(Wt,Xt=!1){return new Promise((wt,kt)=>{const Tt=document.createElement("script");Tt.src=Wt,Tt.onload=function(zt){Xt&&Tt.remove(),wt(zt)},Tt.onerror=function(){kt(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function rt(Wt){console.log("Deprecated API usage: "+Wt)}let lt;class ft{static toDateObject(Xt){if(!Xt||typeof Xt!="string")return null;lt||(lt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const wt=lt.exec(Xt);if(!wt)return null;const kt=parseInt(wt[1],10);let Tt=parseInt(wt[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let zt=parseInt(wt[3],10);zt=zt>=1&&zt<=31?zt:1;let en=parseInt(wt[4],10);en=en>=0&&en<=23?en:0;let un=parseInt(wt[5],10);un=un>=0&&un<=59?un:0;let pn=parseInt(wt[6],10);pn=pn>=0&&pn<=59?pn:0;const qt=wt[7]||"Z";let Cn=parseInt(wt[8],10);Cn=Cn>=0&&Cn<=23?Cn:0;let fn=parseInt(wt[9],10)||0;return fn=fn>=0&&fn<=59?fn:0,qt==="-"?(en+=Cn,un+=fn):qt==="+"&&(en-=Cn,un-=fn),new Date(Date.UTC(kt,Tt,zt,en,un,pn))}}s.PDFDateString=ft;function dt(Wt,{scale:Xt=1,rotation:wt=0}){const{width:kt,height:Tt}=Wt.attributes.style,zt=[0,0,parseInt(kt),parseInt(Tt)];return new tt({viewBox:zt,scale:Xt,rotation:wt})}function ct(Wt){if(Wt.startsWith("#")){const Xt=parseInt(Wt.slice(1),16);return[(Xt&16711680)>>16,(Xt&65280)>>8,Xt&255]}return Wt.startsWith("rgb(")?Wt.slice(4,-1).split(",").map(Xt=>parseInt(Xt)):Wt.startsWith("rgba(")?Wt.slice(5,-1).split(",").map(Xt=>parseInt(Xt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Wt}"`),[0,0,0])}function Et(Wt){const Xt=document.createElement("span");Xt.style.visibility="hidden",document.body.append(Xt);for(const wt of Wt.keys()){Xt.style.color=wt;const kt=window.getComputedStyle(Xt).color;Wt.set(wt,ct(kt))}Xt.remove()}function gt(Wt){const{a:Xt,b:wt,c:kt,d:Tt,e:zt,f:en}=Wt.getTransform();return[Xt,wt,kt,Tt,zt,en]}function Lt(Wt){const{a:Xt,b:wt,c:kt,d:Tt,e:zt,f:en}=Wt.getTransform().invertSelf();return[Xt,wt,kt,Tt,zt,en]}function Dt(Wt,Xt,wt=!1,kt=!0){if(Xt instanceof tt){const{pageWidth:Tt,pageHeight:zt}=Xt.rawDims,{style:en}=Wt,un=a.FeatureTest.isCSSRoundSupported,pn=`var(--scale-factor) * ${Tt}px`,qt=`var(--scale-factor) * ${zt}px`,Cn=un?`round(${pn}, 1px)`:`calc(${pn})`,fn=un?`round(${qt}, 1px)`:`calc(${qt})`;!wt||Xt.rotation%180===0?(en.width=Cn,en.height=fn):(en.width=fn,en.height=Cn)}kt&&Wt.setAttribute("data-main-rotation",Xt.rotation)}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var o=i(1);class a{constructor(){this.constructor===a&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(b){return"none"}addHCMFilter(b,_){return"none"}addHighlightHCMFilter(b,_,st,tt){return"none"}destroy(b=!1){}}s.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(b,_){if(b<=0||_<=0)throw new Error("Invalid canvas size");const st=this._createCanvas(b,_);return{canvas:st,context:st.getContext("2d")}}reset(b,_,st){if(!b.canvas)throw new Error("Canvas is not specified");if(_<=0||st<=0)throw new Error("Invalid canvas size");b.canvas.width=_,b.canvas.height=st}destroy(b){if(!b.canvas)throw new Error("Canvas is not specified");b.canvas.width=0,b.canvas.height=0,b.canvas=null,b.context=null}_createCanvas(b,_){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=c;class d{constructor({baseUrl:b=null,isCompressed:_=!0}){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=b,this.isCompressed=_}async fetch({name:b}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!b)throw new Error("CMap name must be specified.");const _=this.baseUrl+b+(this.isCompressed?".bcmap":""),st=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(_,st).catch(tt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData(b,_){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=d;class g{constructor({baseUrl:b=null}){this.constructor===g&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=b}async fetch({filename:b}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!b)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${b}`;return this._fetchData(_).catch(st=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData(b){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=g;class h{constructor(){this.constructor===h&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(b,_,st=!1){if(b<=0||_<=0)throw new Error("Invalid SVG dimensions");const tt=this._createSVG("svg:svg");return tt.setAttribute("version","1.1"),st||(tt.setAttribute("width",`${b}px`),tt.setAttribute("height",`${_}px`)),tt.setAttribute("preserveAspectRatio","none"),tt.setAttribute("viewBox",`0 0 ${b} ${_}`),tt}createElement(b){if(typeof b!="string")throw new Error("Invalid SVG element type");return this._createSVG(b)}_createSVG(b){(0,o.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=h},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var o=i(1);const a=3285377520,c=4294901760,d=65535;class g{constructor(j){this.h1=j?j&4294967295:a,this.h2=j?j&4294967295:a}update(j){let b,_;if(typeof j=="string"){b=new Uint8Array(j.length*2),_=0;for(let rt=0,lt=j.length;rt<lt;rt++){const ft=j.charCodeAt(rt);ft<=255?b[_++]=ft:(b[_++]=ft>>>8,b[_++]=ft&255)}}else if((0,o.isArrayBuffer)(j))b=j.slice(),_=b.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const st=_>>2,tt=_-st*4,nt=new Uint32Array(b.buffer,0,st);let xt=0,ut=0,_e=this.h1,$=this.h2;const at=3432918353,it=461845907,et=at&d,ot=it&d;for(let rt=0;rt<st;rt++)rt&1?(xt=nt[rt],xt=xt*at&c|xt*et&d,xt=xt<<15|xt>>>17,xt=xt*it&c|xt*ot&d,_e^=xt,_e=_e<<13|_e>>>19,_e=_e*5+3864292196):(ut=nt[rt],ut=ut*at&c|ut*et&d,ut=ut<<15|ut>>>17,ut=ut*it&c|ut*ot&d,$^=ut,$=$<<13|$>>>19,$=$*5+3864292196);switch(xt=0,tt){case 3:xt^=b[st*4+2]<<16;case 2:xt^=b[st*4+1]<<8;case 1:xt^=b[st*4],xt=xt*at&c|xt*et&d,xt=xt<<15|xt>>>17,xt=xt*it&c|xt*ot&d,st&1?_e^=xt:$^=xt}this.h1=_e,this.h2=$}hexdigest(){let j=this.h1,b=this.h2;return j^=b>>>1,j=j*3981806797&c|j*36045&d,b=b*4283543511&c|((b<<16|j>>>16)*2950163797&c)>>>16,j^=b>>>1,j=j*444984403&c|j*60499&d,b=b*3301882366&c|((b<<16|j>>>16)*3120437893&c)>>>16,j^=b>>>1,(j>>>0).toString(16).padStart(8,"0")+(b>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=g},(e,s,i)=>{var d;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var o=i(1);class a{constructor({ownerDocument:h=globalThis.document,styleElement:j=null}){on(this,d,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const j=this.styleElement.sheet;j.insertRule(h,j.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),pt(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||pt(this,d).has(h.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:j,src:b,style:_}=h,st=new FontFace(j,b,_);this.addNativeFontFace(st);try{await st.load(),pt(this,d).add(j)}catch{(0,o.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(st)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const b=h.createNativeFontFace();if(b){this.addNativeFontFace(b);try{await b.loaded}catch(_){throw(0,o.warn)(`Failed to load font '${b.family}': '${_}'.`),h.disableFontFace=!0,_}}return}const j=h.createFontFaceRule();if(j){if(this.insertRule(j),this.isSyncFontLoadingSupported)return;await new Promise(b=>{const _=this._queueLoadingCallback(b);this._prepareFontLoadEvent(h,_)})}}get isFontLoadingAPISupported(){var j;const h=!!((j=this._document)!=null&&j.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function j(){for((0,o.assert)(!_.done,"completeRequest() cannot be called twice."),_.done=!0;b.length>0&&b[0].done;){const st=b.shift();setTimeout(st.callback,0)}}const{loadingRequests:b}=this,_={done:!1,complete:j,callback:h};return b.push(_),_}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,j){function b(ct,Et){return ct.charCodeAt(Et)<<24|ct.charCodeAt(Et+1)<<16|ct.charCodeAt(Et+2)<<8|ct.charCodeAt(Et+3)&255}function _(ct,Et,gt,Lt){const Dt=ct.substring(0,Et),Ft=ct.substring(Et+gt);return Dt+Lt+Ft}let st,tt;const nt=this._document.createElement("canvas");nt.width=1,nt.height=1;const xt=nt.getContext("2d");let ut=0;function _e(ct,Et){if(++ut>30){(0,o.warn)("Load test font never loaded."),Et();return}if(xt.font="30px "+ct,xt.fillText(".",0,20),xt.getImageData(0,0,1,1).data[3]>0){Et();return}setTimeout(_e.bind(null,ct,Et))}const $=`lt${Date.now()}${this.loadTestFontId++}`;let at=this._loadTestFont;at=_(at,976,$.length,$);const et=16,ot=1482184792;let rt=b(at,et);for(st=0,tt=$.length-3;st<tt;st+=4)rt=rt-ot+b($,st)|0;st<$.length&&(rt=rt-ot+b($+"XXX",st)|0),at=_(at,et,4,(0,o.string32)(rt));const lt=`url(data:font/opentype;base64,${btoa(at)});`,ft=`@font-face {font-family:"${$}";src:${lt}}`;this.insertRule(ft);const dt=this._document.createElement("div");dt.style.visibility="hidden",dt.style.width=dt.style.height="10px",dt.style.position="absolute",dt.style.top=dt.style.left="0px";for(const ct of[h.loadedName,$]){const Et=this._document.createElement("span");Et.textContent="Hi",Et.style.fontFamily=ct,dt.append(Et)}this._document.body.append(dt),_e($,()=>{dt.remove(),j.complete()})}}d=new WeakMap,s.FontLoader=a;class c{constructor(h,{isEvalSupported:j=!0,disableFontFace:b=!1,ignoreErrors:_=!1,inspectFont:st=null}){this.compiledGlyphs=Object.create(null);for(const tt in h)this[tt]=h[tt];this.isEvalSupported=j!==!1,this.disableFontFace=b===!0,this.ignoreErrors=_===!0,this._inspectFont=st}createNativeFontFace(){var j;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const b={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(b.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,b)}return(j=this._inspectFont)==null||j.call(this,this),h}createFontFaceRule(){var _;if(!this.data||this.disableFontFace)return null;const h=(0,o.bytesToString)(this.data),j=`url(data:${this.mimetype};base64,${btoa(h)});`;let b;if(!this.cssFontInfo)b=`@font-face {font-family:"${this.loadedName}";src:${j}}`;else{let st=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(st+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),b=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${st}src:${j}}`}return(_=this._inspectFont)==null||_.call(this,this,j),b}getPathGenerator(h,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];let b;try{b=h.get(this.loadedName+"_path_"+j)}catch(_){if(!this.ignoreErrors)throw _;return(0,o.warn)(`getPathGenerator - ignoring character: "${_}".`),this.compiledGlyphs[j]=function(st,tt){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const _=[];for(const st of b){const tt=st.args!==void 0?st.args.join(","):"";_.push("c.",st.cmd,"(",tt,`);
`)}return this.compiledGlyphs[j]=new Function("c","size",_.join(""))}return this.compiledGlyphs[j]=function(_,st){for(const tt of b)tt.cmd==="scale"&&(tt.args=[st,-st]),_[tt.cmd].apply(_,tt.args)}}}s.FontFaceObject=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var o=i(7);i(1);const a=function(j){return new Promise((b,_)=>{require$$5.readFile(j,(tt,nt)=>{if(tt||!nt){_(new Error(tt));return}b(new Uint8Array(nt))})})};class c extends o.BaseFilterFactory{}s.NodeFilterFactory=c;class d extends o.BaseCanvasFactory{_createCanvas(b,_){return require$$5.createCanvas(b,_)}}s.NodeCanvasFactory=d;class g extends o.BaseCMapReaderFactory{_fetchData(b,_){return a(b).then(st=>({cMapData:st,compressionType:_}))}}s.NodeCMapReaderFactory=g;class h extends o.BaseStandardFontDataFactory{_fetchData(b){return a(b)}}s.NodeStandardFontDataFactory=h},(e,s,i)=>{var _t,_s,Rs;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var o=i(1),a=i(6),c=i(12),d=i(13);const g=16,h=100,j=4096,b=15,_=10,st=1e3,tt=16;function nt(At,mt){if(At._removeMirroring)throw new Error("Context is already forwarding operations.");At.__originalSave=At.save,At.__originalRestore=At.restore,At.__originalRotate=At.rotate,At.__originalScale=At.scale,At.__originalTranslate=At.translate,At.__originalTransform=At.transform,At.__originalSetTransform=At.setTransform,At.__originalResetTransform=At.resetTransform,At.__originalClip=At.clip,At.__originalMoveTo=At.moveTo,At.__originalLineTo=At.lineTo,At.__originalBezierCurveTo=At.bezierCurveTo,At.__originalRect=At.rect,At.__originalClosePath=At.closePath,At.__originalBeginPath=At.beginPath,At._removeMirroring=()=>{At.save=At.__originalSave,At.restore=At.__originalRestore,At.rotate=At.__originalRotate,At.scale=At.__originalScale,At.translate=At.__originalTranslate,At.transform=At.__originalTransform,At.setTransform=At.__originalSetTransform,At.resetTransform=At.__originalResetTransform,At.clip=At.__originalClip,At.moveTo=At.__originalMoveTo,At.lineTo=At.__originalLineTo,At.bezierCurveTo=At.__originalBezierCurveTo,At.rect=At.__originalRect,At.closePath=At.__originalClosePath,At.beginPath=At.__originalBeginPath,delete At._removeMirroring},At.save=function(){mt.save(),this.__originalSave()},At.restore=function(){mt.restore(),this.__originalRestore()},At.translate=function(vt,Rt){mt.translate(vt,Rt),this.__originalTranslate(vt,Rt)},At.scale=function(vt,Rt){mt.scale(vt,Rt),this.__originalScale(vt,Rt)},At.transform=function(vt,Rt,Pt,Bt,Ut,Nt){mt.transform(vt,Rt,Pt,Bt,Ut,Nt),this.__originalTransform(vt,Rt,Pt,Bt,Ut,Nt)},At.setTransform=function(vt,Rt,Pt,Bt,Ut,Nt){mt.setTransform(vt,Rt,Pt,Bt,Ut,Nt),this.__originalSetTransform(vt,Rt,Pt,Bt,Ut,Nt)},At.resetTransform=function(){mt.resetTransform(),this.__originalResetTransform()},At.rotate=function(vt){mt.rotate(vt),this.__originalRotate(vt)},At.clip=function(vt){mt.clip(vt),this.__originalClip(vt)},At.moveTo=function(ht,vt){mt.moveTo(ht,vt),this.__originalMoveTo(ht,vt)},At.lineTo=function(ht,vt){mt.lineTo(ht,vt),this.__originalLineTo(ht,vt)},At.bezierCurveTo=function(ht,vt,Rt,Pt,Bt,Ut){mt.bezierCurveTo(ht,vt,Rt,Pt,Bt,Ut),this.__originalBezierCurveTo(ht,vt,Rt,Pt,Bt,Ut)},At.rect=function(ht,vt,Rt,Pt){mt.rect(ht,vt,Rt,Pt),this.__originalRect(ht,vt,Rt,Pt)},At.closePath=function(){mt.closePath(),this.__originalClosePath()},At.beginPath=function(){mt.beginPath(),this.__originalBeginPath()}}class xt{constructor(mt){this.canvasFactory=mt,this.cache=Object.create(null)}getCanvas(mt,ht,vt){let Rt;return this.cache[mt]!==void 0?(Rt=this.cache[mt],this.canvasFactory.reset(Rt,ht,vt)):(Rt=this.canvasFactory.create(ht,vt),this.cache[mt]=Rt),Rt}delete(mt){delete this.cache[mt]}clear(){for(const mt in this.cache){const ht=this.cache[mt];this.canvasFactory.destroy(ht),delete this.cache[mt]}}}function ut(At,mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It){const[Ht,Qt,tn,an,Wt,Xt]=(0,a.getCurrentTransform)(At);if(Qt===0&&tn===0){const Tt=Bt*Ht+Wt,zt=Math.round(Tt),en=Ut*an+Xt,un=Math.round(en),pn=(Bt+Nt)*Ht+Wt,qt=Math.abs(Math.round(pn)-zt)||1,Cn=(Ut+It)*an+Xt,fn=Math.abs(Math.round(Cn)-un)||1;return At.setTransform(Math.sign(Ht),0,0,Math.sign(an),zt,un),At.drawImage(mt,ht,vt,Rt,Pt,0,0,qt,fn),At.setTransform(Ht,Qt,tn,an,Wt,Xt),[qt,fn]}if(Ht===0&&an===0){const Tt=Ut*tn+Wt,zt=Math.round(Tt),en=Bt*Qt+Xt,un=Math.round(en),pn=(Ut+It)*tn+Wt,qt=Math.abs(Math.round(pn)-zt)||1,Cn=(Bt+Nt)*Qt+Xt,fn=Math.abs(Math.round(Cn)-un)||1;return At.setTransform(0,Math.sign(Qt),Math.sign(tn),0,zt,un),At.drawImage(mt,ht,vt,Rt,Pt,0,0,fn,qt),At.setTransform(Ht,Qt,tn,an,Wt,Xt),[fn,qt]}At.drawImage(mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It);const wt=Math.hypot(Ht,Qt),kt=Math.hypot(tn,an);return[wt*Nt,kt*It]}function _e(At){const{width:mt,height:ht}=At;if(mt>st||ht>st)return null;const vt=1e3,Rt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Pt=mt+1;let Bt=new Uint8Array(Pt*(ht+1)),Ut,Nt,It;const Ht=mt+7&-8;let Qt=new Uint8Array(Ht*ht),tn=0;for(const kt of At.data){let Tt=128;for(;Tt>0;)Qt[tn++]=kt&Tt?0:255,Tt>>=1}let an=0;for(tn=0,Qt[tn]!==0&&(Bt[0]=1,++an),Nt=1;Nt<mt;Nt++)Qt[tn]!==Qt[tn+1]&&(Bt[Nt]=Qt[tn]?2:1,++an),tn++;for(Qt[tn]!==0&&(Bt[Nt]=2,++an),Ut=1;Ut<ht;Ut++){tn=Ut*Ht,It=Ut*Pt,Qt[tn-Ht]!==Qt[tn]&&(Bt[It]=Qt[tn]?1:8,++an);let kt=(Qt[tn]?4:0)+(Qt[tn-Ht]?8:0);for(Nt=1;Nt<mt;Nt++)kt=(kt>>2)+(Qt[tn+1]?4:0)+(Qt[tn-Ht+1]?8:0),Rt[kt]&&(Bt[It+Nt]=Rt[kt],++an),tn++;if(Qt[tn-Ht]!==Qt[tn]&&(Bt[It+Nt]=Qt[tn]?2:4,++an),an>vt)return null}for(tn=Ht*(ht-1),It=Ut*Pt,Qt[tn]!==0&&(Bt[It]=8,++an),Nt=1;Nt<mt;Nt++)Qt[tn]!==Qt[tn+1]&&(Bt[It+Nt]=Qt[tn]?4:8,++an),tn++;if(Qt[tn]!==0&&(Bt[It+Nt]=4,++an),an>vt)return null;const Wt=new Int32Array([0,Pt,-1,0,-Pt,0,0,0,1]),Xt=new Path2D;for(Ut=0;an&&Ut<=ht;Ut++){let kt=Ut*Pt;const Tt=kt+mt;for(;kt<Tt&&!Bt[kt];)kt++;if(kt===Tt)continue;Xt.moveTo(kt%Pt,Ut);const zt=kt;let en=Bt[kt];do{const un=Wt[en];do kt+=un;while(!Bt[kt]);const pn=Bt[kt];pn!==5&&pn!==10?(en=pn,Bt[kt]=0):(en=pn&51*en>>4,Bt[kt]&=en>>2|en<<2),Xt.lineTo(kt%Pt,kt/Pt|0),Bt[kt]||--an}while(zt!==kt);--Ut}return Qt=null,Bt=null,function(kt){kt.save(),kt.scale(1/mt,-1/ht),kt.translate(0,-ht),kt.fill(Xt),kt.beginPath(),kt.restore()}}class ${constructor(mt,ht){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,mt,ht])}clone(){const mt=Object.create(this);return mt.clipBox=this.clipBox.slice(),mt}setCurrentPoint(mt,ht){this.x=mt,this.y=ht}updatePathMinMax(mt,ht,vt){[ht,vt]=o.Util.applyTransform([ht,vt],mt),this.minX=Math.min(this.minX,ht),this.minY=Math.min(this.minY,vt),this.maxX=Math.max(this.maxX,ht),this.maxY=Math.max(this.maxY,vt)}updateRectMinMax(mt,ht){const vt=o.Util.applyTransform(ht,mt),Rt=o.Util.applyTransform(ht.slice(2),mt);this.minX=Math.min(this.minX,vt[0],Rt[0]),this.minY=Math.min(this.minY,vt[1],Rt[1]),this.maxX=Math.max(this.maxX,vt[0],Rt[0]),this.maxY=Math.max(this.maxY,vt[1],Rt[1])}updateScalingPathMinMax(mt,ht){o.Util.scaleMinMax(mt,ht),this.minX=Math.min(this.minX,ht[0]),this.maxX=Math.max(this.maxX,ht[1]),this.minY=Math.min(this.minY,ht[2]),this.maxY=Math.max(this.maxY,ht[3])}updateCurvePathMinMax(mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It,Ht){const Qt=o.Util.bezierBoundingBox(ht,vt,Rt,Pt,Bt,Ut,Nt,It);if(Ht){Ht[0]=Math.min(Ht[0],Qt[0],Qt[2]),Ht[1]=Math.max(Ht[1],Qt[0],Qt[2]),Ht[2]=Math.min(Ht[2],Qt[1],Qt[3]),Ht[3]=Math.max(Ht[3],Qt[1],Qt[3]);return}this.updateRectMinMax(mt,Qt)}getPathBoundingBox(mt=c.PathType.FILL,ht=null){const vt=[this.minX,this.minY,this.maxX,this.maxY];if(mt===c.PathType.STROKE){ht||(0,o.unreachable)("Stroke bounding box must include transform.");const Rt=o.Util.singularValueDecompose2dScale(ht),Pt=Rt[0]*this.lineWidth/2,Bt=Rt[1]*this.lineWidth/2;vt[0]-=Pt,vt[1]-=Bt,vt[2]+=Pt,vt[3]+=Bt}return vt}updateClipFromPath(){const mt=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(mt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(mt){this.clipBox=mt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(mt=c.PathType.FILL,ht=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(mt,ht))}}function at(At,mt){if(typeof ImageData<"u"&&mt instanceof ImageData){At.putImageData(mt,0,0);return}const ht=mt.height,vt=mt.width,Rt=ht%tt,Pt=(ht-Rt)/tt,Bt=Rt===0?Pt:Pt+1,Ut=At.createImageData(vt,tt);let Nt=0,It;const Ht=mt.data,Qt=Ut.data;let tn,an,Wt,Xt;if(mt.kind===o.ImageKind.GRAYSCALE_1BPP){const wt=Ht.byteLength,kt=new Uint32Array(Qt.buffer,0,Qt.byteLength>>2),Tt=kt.length,zt=vt+7>>3,en=4294967295,un=o.FeatureTest.isLittleEndian?4278190080:255;for(tn=0;tn<Bt;tn++){for(Wt=tn<Pt?tt:Rt,It=0,an=0;an<Wt;an++){const pn=wt-Nt;let qt=0;const Cn=pn>zt?vt:pn*8-7,fn=Cn&-8;let On=0,An=0;for(;qt<fn;qt+=8)An=Ht[Nt++],kt[It++]=An&128?en:un,kt[It++]=An&64?en:un,kt[It++]=An&32?en:un,kt[It++]=An&16?en:un,kt[It++]=An&8?en:un,kt[It++]=An&4?en:un,kt[It++]=An&2?en:un,kt[It++]=An&1?en:un;for(;qt<Cn;qt++)On===0&&(An=Ht[Nt++],On=128),kt[It++]=An&On?en:un,On>>=1}for(;It<Tt;)kt[It++]=0;At.putImageData(Ut,0,tn*tt)}}else if(mt.kind===o.ImageKind.RGBA_32BPP){for(an=0,Xt=vt*tt*4,tn=0;tn<Pt;tn++)Qt.set(Ht.subarray(Nt,Nt+Xt)),Nt+=Xt,At.putImageData(Ut,0,an),an+=tt;tn<Bt&&(Xt=vt*Rt*4,Qt.set(Ht.subarray(Nt,Nt+Xt)),At.putImageData(Ut,0,an))}else if(mt.kind===o.ImageKind.RGB_24BPP)for(Wt=tt,Xt=vt*Wt,tn=0;tn<Bt;tn++){for(tn>=Pt&&(Wt=Rt,Xt=vt*Wt),It=0,an=Xt;an--;)Qt[It++]=Ht[Nt++],Qt[It++]=Ht[Nt++],Qt[It++]=Ht[Nt++],Qt[It++]=255;At.putImageData(Ut,0,tn*tt)}else throw new Error(`bad image kind: ${mt.kind}`)}function it(At,mt){if(mt.bitmap){At.drawImage(mt.bitmap,0,0);return}const ht=mt.height,vt=mt.width,Rt=ht%tt,Pt=(ht-Rt)/tt,Bt=Rt===0?Pt:Pt+1,Ut=At.createImageData(vt,tt);let Nt=0;const It=mt.data,Ht=Ut.data;for(let Qt=0;Qt<Bt;Qt++){const tn=Qt<Pt?tt:Rt;({srcPos:Nt}=(0,d.convertBlackAndWhiteToRGBA)({src:It,srcPos:Nt,dest:Ht,width:vt,height:tn,nonBlackColor:0})),At.putImageData(Ut,0,Qt*tt)}}function et(At,mt){const ht=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const vt of ht)At[vt]!==void 0&&(mt[vt]=At[vt]);At.setLineDash!==void 0&&(mt.setLineDash(At.getLineDash()),mt.lineDashOffset=At.lineDashOffset)}function ot(At){if(At.strokeStyle=At.fillStyle="#000000",At.fillRule="nonzero",At.globalAlpha=1,At.lineWidth=1,At.lineCap="butt",At.lineJoin="miter",At.miterLimit=10,At.globalCompositeOperation="source-over",At.font="10px sans-serif",At.setLineDash!==void 0&&(At.setLineDash([]),At.lineDashOffset=0),!o.isNodeJS){const{filter:mt}=At;mt!=="none"&&mt!==""&&(At.filter="none")}}function rt(At,mt,ht,vt){const Rt=At.length;for(let Pt=3;Pt<Rt;Pt+=4){const Bt=At[Pt];if(Bt===0)At[Pt-3]=mt,At[Pt-2]=ht,At[Pt-1]=vt;else if(Bt<255){const Ut=255-Bt;At[Pt-3]=At[Pt-3]*Bt+mt*Ut>>8,At[Pt-2]=At[Pt-2]*Bt+ht*Ut>>8,At[Pt-1]=At[Pt-1]*Bt+vt*Ut>>8}}}function lt(At,mt,ht){const vt=At.length,Rt=1/255;for(let Pt=3;Pt<vt;Pt+=4){const Bt=ht?ht[At[Pt]]:At[Pt];mt[Pt]=mt[Pt]*Bt*Rt|0}}function ft(At,mt,ht){const vt=At.length;for(let Rt=3;Rt<vt;Rt+=4){const Pt=At[Rt-3]*77+At[Rt-2]*152+At[Rt-1]*28;mt[Rt]=ht?mt[Rt]*ht[Pt>>8]>>8:mt[Rt]*Pt>>16}}function dt(At,mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It,Ht){const Qt=!!Pt,tn=Qt?Pt[0]:0,an=Qt?Pt[1]:0,Wt=Qt?Pt[2]:0,Xt=Rt==="Luminosity"?ft:lt,kt=Math.min(vt,Math.ceil(1048576/ht));for(let Tt=0;Tt<vt;Tt+=kt){const zt=Math.min(kt,vt-Tt),en=At.getImageData(Ut-It,Tt+(Nt-Ht),ht,zt),un=mt.getImageData(Ut,Tt+Nt,ht,zt);Qt&&rt(en.data,tn,an,Wt),Xt(en.data,un.data,Bt),mt.putImageData(un,Ut,Tt+Nt)}}function ct(At,mt,ht,vt){const Rt=vt[0],Pt=vt[1],Bt=vt[2]-Rt,Ut=vt[3]-Pt;Bt===0||Ut===0||(dt(mt.context,ht,Bt,Ut,mt.subtype,mt.backdrop,mt.transferMap,Rt,Pt,mt.offsetX,mt.offsetY),At.save(),At.globalAlpha=1,At.globalCompositeOperation="source-over",At.setTransform(1,0,0,1,0,0),At.drawImage(ht.canvas,0,0),At.restore())}function Et(At,mt){const ht=o.Util.singularValueDecompose2dScale(At);ht[0]=Math.fround(ht[0]),ht[1]=Math.fround(ht[1]);const vt=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return mt!==void 0?mt:ht[0]<=vt||ht[1]<=vt}const gt=["butt","round","square"],Lt=["miter","round","bevel"],Dt={},Ft={},St=class St{constructor(mt,ht,vt,Rt,Pt,{optionalContentConfig:Bt,markedContentStack:Ut=null},Nt,It){on(this,_t);this.ctx=mt,this.current=new $(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ht,this.objs=vt,this.canvasFactory=Rt,this.filterFactory=Pt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ut||[],this.optionalContentConfig=Bt,this.cachedCanvases=new xt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Nt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=It,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(mt,ht=null){return typeof mt=="string"?mt.startsWith("g_")?this.commonObjs.get(mt):this.objs.get(mt):ht}beginDrawing({transform:mt,viewport:ht,transparency:vt=!1,background:Rt=null}){const Pt=this.ctx.canvas.width,Bt=this.ctx.canvas.height,Ut=this.ctx.fillStyle;if(this.ctx.fillStyle=Rt||"#ffffff",this.ctx.fillRect(0,0,Pt,Bt),this.ctx.fillStyle=Ut,vt){const Nt=this.cachedCanvases.getCanvas("transparent",Pt,Bt);this.compositeCtx=this.ctx,this.transparentCanvas=Nt.canvas,this.ctx=Nt.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ot(this.ctx),mt&&(this.ctx.transform(...mt),this.outputScaleX=mt[0],this.outputScaleY=mt[0]),this.ctx.transform(...ht.transform),this.viewportScale=ht.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(mt,ht,vt,Rt){const Pt=mt.argsArray,Bt=mt.fnArray;let Ut=ht||0;const Nt=Pt.length;if(Nt===Ut)return Ut;const It=Nt-Ut>_&&typeof vt=="function",Ht=It?Date.now()+b:0;let Qt=0;const tn=this.commonObjs,an=this.objs;let Wt;for(;;){if(Rt!==void 0&&Ut===Rt.nextBreakPoint)return Rt.breakIt(Ut,vt),Ut;if(Wt=Bt[Ut],Wt!==o.OPS.dependency)this[Wt].apply(this,Pt[Ut]);else for(const Xt of Pt[Ut]){const wt=Xt.startsWith("g_")?tn:an;if(!wt.has(Xt))return wt.get(Xt,vt),Ut}if(Ut++,Ut===Nt)return Ut;if(It&&++Qt>_){if(Date.now()>Ht)return vt(),Ut;Qt=0}}}endDrawing(){Zt(this,_t,_s).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const mt of this._cachedBitmapsMap.values()){for(const ht of mt.values())typeof HTMLCanvasElement<"u"&&ht instanceof HTMLCanvasElement&&(ht.width=ht.height=0);mt.clear()}this._cachedBitmapsMap.clear(),Zt(this,_t,Rs).call(this)}_scaleImage(mt,ht){const vt=mt.width,Rt=mt.height;let Pt=Math.max(Math.hypot(ht[0],ht[1]),1),Bt=Math.max(Math.hypot(ht[2],ht[3]),1),Ut=vt,Nt=Rt,It="prescale1",Ht,Qt;for(;Pt>2&&Ut>1||Bt>2&&Nt>1;){let tn=Ut,an=Nt;Pt>2&&Ut>1&&(tn=Ut>=16384?Math.floor(Ut/2)-1||1:Math.ceil(Ut/2),Pt/=Ut/tn),Bt>2&&Nt>1&&(an=Nt>=16384?Math.floor(Nt/2)-1||1:Math.ceil(Nt)/2,Bt/=Nt/an),Ht=this.cachedCanvases.getCanvas(It,tn,an),Qt=Ht.context,Qt.clearRect(0,0,tn,an),Qt.drawImage(mt,0,0,Ut,Nt,0,0,tn,an),mt=Ht.canvas,Ut=tn,Nt=an,It=It==="prescale1"?"prescale2":"prescale1"}return{img:mt,paintWidth:Ut,paintHeight:Nt}}_createMaskCanvas(mt){const ht=this.ctx,{width:vt,height:Rt}=mt,Pt=this.current.fillColor,Bt=this.current.patternFill,Ut=(0,a.getCurrentTransform)(ht);let Nt,It,Ht,Qt;if((mt.bitmap||mt.data)&&mt.count>1){const qt=mt.bitmap||mt.data.buffer;It=JSON.stringify(Bt?Ut:[Ut.slice(0,4),Pt]),Nt=this._cachedBitmapsMap.get(qt),Nt||(Nt=new Map,this._cachedBitmapsMap.set(qt,Nt));const Cn=Nt.get(It);if(Cn&&!Bt){const fn=Math.round(Math.min(Ut[0],Ut[2])+Ut[4]),On=Math.round(Math.min(Ut[1],Ut[3])+Ut[5]);return{canvas:Cn,offsetX:fn,offsetY:On}}Ht=Cn}Ht||(Qt=this.cachedCanvases.getCanvas("maskCanvas",vt,Rt),it(Qt.context,mt));let tn=o.Util.transform(Ut,[1/vt,0,0,-1/Rt,0,0]);tn=o.Util.transform(tn,[1,0,0,1,0,-Rt]);const an=o.Util.applyTransform([0,0],tn),Wt=o.Util.applyTransform([vt,Rt],tn),Xt=o.Util.normalizeRect([an[0],an[1],Wt[0],Wt[1]]),wt=Math.round(Xt[2]-Xt[0])||1,kt=Math.round(Xt[3]-Xt[1])||1,Tt=this.cachedCanvases.getCanvas("fillCanvas",wt,kt),zt=Tt.context,en=Math.min(an[0],Wt[0]),un=Math.min(an[1],Wt[1]);zt.translate(-en,-un),zt.transform(...tn),Ht||(Ht=this._scaleImage(Qt.canvas,(0,a.getCurrentTransformInverse)(zt)),Ht=Ht.img,Nt&&Bt&&Nt.set(It,Ht)),zt.imageSmoothingEnabled=Et((0,a.getCurrentTransform)(zt),mt.interpolate),ut(zt,Ht,0,0,Ht.width,Ht.height,0,0,vt,Rt),zt.globalCompositeOperation="source-in";const pn=o.Util.transform((0,a.getCurrentTransformInverse)(zt),[1,0,0,1,-en,-un]);return zt.fillStyle=Bt?Pt.getPattern(ht,this,pn,c.PathType.FILL):Pt,zt.fillRect(0,0,vt,Rt),Nt&&!Bt&&(this.cachedCanvases.delete("fillCanvas"),Nt.set(It,Tt.canvas)),{canvas:Tt.canvas,offsetX:Math.round(en),offsetY:Math.round(un)}}setLineWidth(mt){mt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=mt,this.ctx.lineWidth=mt}setLineCap(mt){this.ctx.lineCap=gt[mt]}setLineJoin(mt){this.ctx.lineJoin=Lt[mt]}setMiterLimit(mt){this.ctx.miterLimit=mt}setDash(mt,ht){const vt=this.ctx;vt.setLineDash!==void 0&&(vt.setLineDash(mt),vt.lineDashOffset=ht)}setRenderingIntent(mt){}setFlatness(mt){}setGState(mt){for(const[ht,vt]of mt)switch(ht){case"LW":this.setLineWidth(vt);break;case"LC":this.setLineCap(vt);break;case"LJ":this.setLineJoin(vt);break;case"ML":this.setMiterLimit(vt);break;case"D":this.setDash(vt[0],vt[1]);break;case"RI":this.setRenderingIntent(vt);break;case"FL":this.setFlatness(vt);break;case"Font":this.setFont(vt[0],vt[1]);break;case"CA":this.current.strokeAlpha=vt;break;case"ca":this.current.fillAlpha=vt,this.ctx.globalAlpha=vt;break;case"BM":this.ctx.globalCompositeOperation=vt;break;case"SMask":this.current.activeSMask=vt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(vt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const mt=this.inSMaskMode;this.current.activeSMask&&!mt?this.beginSMaskMode():!this.current.activeSMask&&mt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const mt=this.ctx.canvas.width,ht=this.ctx.canvas.height,vt="smaskGroupAt"+this.groupLevel,Rt=this.cachedCanvases.getCanvas(vt,mt,ht);this.suspendedCtx=this.ctx,this.ctx=Rt.context;const Pt=this.ctx;Pt.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),et(this.suspendedCtx,Pt),nt(Pt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),et(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(mt){if(!this.current.activeSMask)return;mt?(mt[0]=Math.floor(mt[0]),mt[1]=Math.floor(mt[1]),mt[2]=Math.ceil(mt[2]),mt[3]=Math.ceil(mt[3])):mt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ht=this.current.activeSMask,vt=this.suspendedCtx;ct(vt,ht,this.ctx,mt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(et(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const mt=this.current;this.stateStack.push(mt),this.current=mt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),et(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(mt,ht,vt,Rt,Pt,Bt){this.ctx.transform(mt,ht,vt,Rt,Pt,Bt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(mt,ht,vt){const Rt=this.ctx,Pt=this.current;let Bt=Pt.x,Ut=Pt.y,Nt,It;const Ht=(0,a.getCurrentTransform)(Rt),Qt=Ht[0]===0&&Ht[3]===0||Ht[1]===0&&Ht[2]===0,tn=Qt?vt.slice(0):null;for(let an=0,Wt=0,Xt=mt.length;an<Xt;an++)switch(mt[an]|0){case o.OPS.rectangle:Bt=ht[Wt++],Ut=ht[Wt++];const wt=ht[Wt++],kt=ht[Wt++],Tt=Bt+wt,zt=Ut+kt;Rt.moveTo(Bt,Ut),wt===0||kt===0?Rt.lineTo(Tt,zt):(Rt.lineTo(Tt,Ut),Rt.lineTo(Tt,zt),Rt.lineTo(Bt,zt)),Qt||Pt.updateRectMinMax(Ht,[Bt,Ut,Tt,zt]),Rt.closePath();break;case o.OPS.moveTo:Bt=ht[Wt++],Ut=ht[Wt++],Rt.moveTo(Bt,Ut),Qt||Pt.updatePathMinMax(Ht,Bt,Ut);break;case o.OPS.lineTo:Bt=ht[Wt++],Ut=ht[Wt++],Rt.lineTo(Bt,Ut),Qt||Pt.updatePathMinMax(Ht,Bt,Ut);break;case o.OPS.curveTo:Nt=Bt,It=Ut,Bt=ht[Wt+4],Ut=ht[Wt+5],Rt.bezierCurveTo(ht[Wt],ht[Wt+1],ht[Wt+2],ht[Wt+3],Bt,Ut),Pt.updateCurvePathMinMax(Ht,Nt,It,ht[Wt],ht[Wt+1],ht[Wt+2],ht[Wt+3],Bt,Ut,tn),Wt+=6;break;case o.OPS.curveTo2:Nt=Bt,It=Ut,Rt.bezierCurveTo(Bt,Ut,ht[Wt],ht[Wt+1],ht[Wt+2],ht[Wt+3]),Pt.updateCurvePathMinMax(Ht,Nt,It,Bt,Ut,ht[Wt],ht[Wt+1],ht[Wt+2],ht[Wt+3],tn),Bt=ht[Wt+2],Ut=ht[Wt+3],Wt+=4;break;case o.OPS.curveTo3:Nt=Bt,It=Ut,Bt=ht[Wt+2],Ut=ht[Wt+3],Rt.bezierCurveTo(ht[Wt],ht[Wt+1],Bt,Ut,Bt,Ut),Pt.updateCurvePathMinMax(Ht,Nt,It,ht[Wt],ht[Wt+1],Bt,Ut,Bt,Ut,tn),Wt+=4;break;case o.OPS.closePath:Rt.closePath();break}Qt&&Pt.updateScalingPathMinMax(Ht,tn),Pt.setCurrentPoint(Bt,Ut)}closePath(){this.ctx.closePath()}stroke(mt=!0){const ht=this.ctx,vt=this.current.strokeColor;ht.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof vt=="object"&&(vt!=null&&vt.getPattern)?(ht.save(),ht.strokeStyle=vt.getPattern(ht,this,(0,a.getCurrentTransformInverse)(ht),c.PathType.STROKE),this.rescaleAndStroke(!1),ht.restore()):this.rescaleAndStroke(!0)),mt&&this.consumePath(this.current.getClippedPathBoundingBox()),ht.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(mt=!0){const ht=this.ctx,vt=this.current.fillColor,Rt=this.current.patternFill;let Pt=!1;Rt&&(ht.save(),ht.fillStyle=vt.getPattern(ht,this,(0,a.getCurrentTransformInverse)(ht),c.PathType.FILL),Pt=!0);const Bt=this.current.getClippedPathBoundingBox();this.contentVisible&&Bt!==null&&(this.pendingEOFill?(ht.fill("evenodd"),this.pendingEOFill=!1):ht.fill()),Pt&&ht.restore(),mt&&this.consumePath(Bt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Dt}eoClip(){this.pendingClip=Ft}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const mt=this.pendingTextPaths,ht=this.ctx;if(mt===void 0){ht.beginPath();return}ht.save(),ht.beginPath();for(const vt of mt)ht.setTransform(...vt.transform),ht.translate(vt.x,vt.y),vt.addToPath(ht,vt.fontSize);ht.restore(),ht.clip(),ht.beginPath(),delete this.pendingTextPaths}setCharSpacing(mt){this.current.charSpacing=mt}setWordSpacing(mt){this.current.wordSpacing=mt}setHScale(mt){this.current.textHScale=mt/100}setLeading(mt){this.current.leading=-mt}setFont(mt,ht){var Ht;const vt=this.commonObjs.get(mt),Rt=this.current;if(!vt)throw new Error(`Can't find font for ${mt}`);if(Rt.fontMatrix=vt.fontMatrix||o.FONT_IDENTITY_MATRIX,(Rt.fontMatrix[0]===0||Rt.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+mt),ht<0?(ht=-ht,Rt.fontDirection=-1):Rt.fontDirection=1,this.current.font=vt,this.current.fontSize=ht,vt.isType3Font)return;const Pt=vt.loadedName||"sans-serif",Bt=((Ht=vt.systemFontInfo)==null?void 0:Ht.css)||`"${Pt}", ${vt.fallbackName}`;let Ut="normal";vt.black?Ut="900":vt.bold&&(Ut="bold");const Nt=vt.italic?"italic":"normal";let It=ht;ht<g?It=g:ht>h&&(It=h),this.current.fontSizeScale=ht/It,this.ctx.font=`${Nt} ${Ut} ${It}px ${Bt}`}setTextRenderingMode(mt){this.current.textRenderingMode=mt}setTextRise(mt){this.current.textRise=mt}moveText(mt,ht){this.current.x=this.current.lineX+=mt,this.current.y=this.current.lineY+=ht}setLeadingMoveText(mt,ht){this.setLeading(-ht),this.moveText(mt,ht)}setTextMatrix(mt,ht,vt,Rt,Pt,Bt){this.current.textMatrix=[mt,ht,vt,Rt,Pt,Bt],this.current.textMatrixScale=Math.hypot(mt,ht),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(mt,ht,vt,Rt){const Pt=this.ctx,Bt=this.current,Ut=Bt.font,Nt=Bt.textRenderingMode,It=Bt.fontSize/Bt.fontSizeScale,Ht=Nt&o.TextRenderingMode.FILL_STROKE_MASK,Qt=!!(Nt&o.TextRenderingMode.ADD_TO_PATH_FLAG),tn=Bt.patternFill&&!Ut.missingFile;let an;(Ut.disableFontFace||Qt||tn)&&(an=Ut.getPathGenerator(this.commonObjs,mt)),Ut.disableFontFace||tn?(Pt.save(),Pt.translate(ht,vt),Pt.beginPath(),an(Pt,It),Rt&&Pt.setTransform(...Rt),(Ht===o.TextRenderingMode.FILL||Ht===o.TextRenderingMode.FILL_STROKE)&&Pt.fill(),(Ht===o.TextRenderingMode.STROKE||Ht===o.TextRenderingMode.FILL_STROKE)&&Pt.stroke(),Pt.restore()):((Ht===o.TextRenderingMode.FILL||Ht===o.TextRenderingMode.FILL_STROKE)&&Pt.fillText(mt,ht,vt),(Ht===o.TextRenderingMode.STROKE||Ht===o.TextRenderingMode.FILL_STROKE)&&Pt.strokeText(mt,ht,vt)),Qt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(Pt),x:ht,y:vt,fontSize:It,addToPath:an})}get isFontSubpixelAAEnabled(){const{context:mt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);mt.scale(1.5,1),mt.fillText("I",0,10);const ht=mt.getImageData(0,0,10,10).data;let vt=!1;for(let Rt=3;Rt<ht.length;Rt+=4)if(ht[Rt]>0&&ht[Rt]<255){vt=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",vt)}showText(mt){const ht=this.current,vt=ht.font;if(vt.isType3Font)return this.showType3Text(mt);const Rt=ht.fontSize;if(Rt===0)return;const Pt=this.ctx,Bt=ht.fontSizeScale,Ut=ht.charSpacing,Nt=ht.wordSpacing,It=ht.fontDirection,Ht=ht.textHScale*It,Qt=mt.length,tn=vt.vertical,an=tn?1:-1,Wt=vt.defaultVMetrics,Xt=Rt*ht.fontMatrix[0],wt=ht.textRenderingMode===o.TextRenderingMode.FILL&&!vt.disableFontFace&&!ht.patternFill;Pt.save(),Pt.transform(...ht.textMatrix),Pt.translate(ht.x,ht.y+ht.textRise),It>0?Pt.scale(Ht,-1):Pt.scale(Ht,1);let kt;if(ht.patternFill){Pt.save();const pn=ht.fillColor.getPattern(Pt,this,(0,a.getCurrentTransformInverse)(Pt),c.PathType.FILL);kt=(0,a.getCurrentTransform)(Pt),Pt.restore(),Pt.fillStyle=pn}let Tt=ht.lineWidth;const zt=ht.textMatrixScale;if(zt===0||Tt===0){const pn=ht.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(pn===o.TextRenderingMode.STROKE||pn===o.TextRenderingMode.FILL_STROKE)&&(Tt=this.getSinglePixelWidth())}else Tt/=zt;if(Bt!==1&&(Pt.scale(Bt,Bt),Tt/=Bt),Pt.lineWidth=Tt,vt.isInvalidPDFjsFont){const pn=[];let qt=0;for(const Cn of mt)pn.push(Cn.unicode),qt+=Cn.width;Pt.fillText(pn.join(""),0,0),ht.x+=qt*Xt*Ht,Pt.restore(),this.compose();return}let en=0,un;for(un=0;un<Qt;++un){const pn=mt[un];if(typeof pn=="number"){en+=an*pn*Rt/1e3;continue}let qt=!1;const Cn=(pn.isSpace?Nt:0)+Ut,fn=pn.fontChar,On=pn.accent;let An,Rn,wn=pn.width;if(tn){const $n=pn.vmetric||Wt,Yn=-(pn.vmetric?$n[1]:wn*.5)*Xt,gn=$n[2]*Xt;wn=$n?-$n[0]:wn,An=Yn/Bt,Rn=(en+gn)/Bt}else An=en/Bt,Rn=0;if(vt.remeasure&&wn>0){const $n=Pt.measureText(fn).width*1e3/Rt*Bt;if(wn<$n&&this.isFontSubpixelAAEnabled){const Yn=wn/$n;qt=!0,Pt.save(),Pt.scale(Yn,1),An/=Yn}else wn!==$n&&(An+=(wn-$n)/2e3*Rt/Bt)}if(this.contentVisible&&(pn.isInFont||vt.missingFile)){if(wt&&!On)Pt.fillText(fn,An,Rn);else if(this.paintChar(fn,An,Rn,kt),On){const $n=An+Rt*On.offset.x/Bt,Yn=Rn-Rt*On.offset.y/Bt;this.paintChar(On.fontChar,$n,Yn,kt)}}const Ln=tn?wn*Xt-Cn*It:wn*Xt+Cn*It;en+=Ln,qt&&Pt.restore()}tn?ht.y-=en:ht.x+=en*Ht,Pt.restore(),this.compose()}showType3Text(mt){const ht=this.ctx,vt=this.current,Rt=vt.font,Pt=vt.fontSize,Bt=vt.fontDirection,Ut=Rt.vertical?1:-1,Nt=vt.charSpacing,It=vt.wordSpacing,Ht=vt.textHScale*Bt,Qt=vt.fontMatrix||o.FONT_IDENTITY_MATRIX,tn=mt.length,an=vt.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Wt,Xt,wt,kt;if(!(an||Pt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ht.save(),ht.transform(...vt.textMatrix),ht.translate(vt.x,vt.y),ht.scale(Ht,Bt),Wt=0;Wt<tn;++Wt){if(Xt=mt[Wt],typeof Xt=="number"){kt=Ut*Xt*Pt/1e3,this.ctx.translate(kt,0),vt.x+=kt*Ht;continue}const Tt=(Xt.isSpace?It:0)+Nt,zt=Rt.charProcOperatorList[Xt.operatorListId];if(!zt){(0,o.warn)(`Type3 character "${Xt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Xt,this.save(),ht.scale(Pt,Pt),ht.transform(...Qt),this.executeOperatorList(zt),this.restore()),wt=o.Util.applyTransform([Xt.width,0],Qt)[0]*Pt+Tt,ht.translate(wt,0),vt.x+=wt*Ht}ht.restore(),this.processingType3=null}}setCharWidth(mt,ht){}setCharWidthAndBounds(mt,ht,vt,Rt,Pt,Bt){this.ctx.rect(vt,Rt,Pt-vt,Bt-Rt),this.ctx.clip(),this.endPath()}getColorN_Pattern(mt){let ht;if(mt[0]==="TilingPattern"){const vt=mt[1],Rt=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),Pt={createCanvasGraphics:Bt=>new St(Bt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ht=new c.TilingPattern(mt,vt,this.ctx,Pt,Rt)}else ht=this._getPattern(mt[1],mt[2]);return ht}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(mt,ht,vt){const Rt=o.Util.makeHexColor(mt,ht,vt);this.ctx.strokeStyle=Rt,this.current.strokeColor=Rt}setFillRGBColor(mt,ht,vt){const Rt=o.Util.makeHexColor(mt,ht,vt);this.ctx.fillStyle=Rt,this.current.fillColor=Rt,this.current.patternFill=!1}_getPattern(mt,ht=null){let vt;return this.cachedPatterns.has(mt)?vt=this.cachedPatterns.get(mt):(vt=(0,c.getShadingPattern)(this.getObject(mt)),this.cachedPatterns.set(mt,vt)),ht&&(vt.matrix=ht),vt}shadingFill(mt){if(!this.contentVisible)return;const ht=this.ctx;this.save();const vt=this._getPattern(mt);ht.fillStyle=vt.getPattern(ht,this,(0,a.getCurrentTransformInverse)(ht),c.PathType.SHADING);const Rt=(0,a.getCurrentTransformInverse)(ht);if(Rt){const{width:Pt,height:Bt}=ht.canvas,[Ut,Nt,It,Ht]=o.Util.getAxialAlignedBoundingBox([0,0,Pt,Bt],Rt);this.ctx.fillRect(Ut,Nt,It-Ut,Ht-Nt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(mt,ht){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(mt)&&mt.length===6&&this.transform(...mt),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),ht)){const vt=ht[2]-ht[0],Rt=ht[3]-ht[1];this.ctx.rect(ht[0],ht[1],vt,Rt),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),ht),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(mt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ht=this.ctx;mt.isolated||(0,o.info)("TODO: Support non-isolated groups."),mt.knockout&&(0,o.warn)("Knockout groups not supported.");const vt=(0,a.getCurrentTransform)(ht);if(mt.matrix&&ht.transform(...mt.matrix),!mt.bbox)throw new Error("Bounding box is required.");let Rt=o.Util.getAxialAlignedBoundingBox(mt.bbox,(0,a.getCurrentTransform)(ht));const Pt=[0,0,ht.canvas.width,ht.canvas.height];Rt=o.Util.intersect(Rt,Pt)||[0,0,0,0];const Bt=Math.floor(Rt[0]),Ut=Math.floor(Rt[1]);let Nt=Math.max(Math.ceil(Rt[2])-Bt,1),It=Math.max(Math.ceil(Rt[3])-Ut,1),Ht=1,Qt=1;Nt>j&&(Ht=Nt/j,Nt=j),It>j&&(Qt=It/j,It=j),this.current.startNewPathAndClipBox([0,0,Nt,It]);let tn="groupAt"+this.groupLevel;mt.smask&&(tn+="_smask_"+this.smaskCounter++%2);const an=this.cachedCanvases.getCanvas(tn,Nt,It),Wt=an.context;Wt.scale(1/Ht,1/Qt),Wt.translate(-Bt,-Ut),Wt.transform(...vt),mt.smask?this.smaskStack.push({canvas:an.canvas,context:Wt,offsetX:Bt,offsetY:Ut,scaleX:Ht,scaleY:Qt,subtype:mt.smask.subtype,backdrop:mt.smask.backdrop,transferMap:mt.smask.transferMap||null,startTransformInverse:null}):(ht.setTransform(1,0,0,1,0,0),ht.translate(Bt,Ut),ht.scale(Ht,Qt),ht.save()),et(ht,Wt),this.ctx=Wt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ht),this.groupLevel++}endGroup(mt){if(!this.contentVisible)return;this.groupLevel--;const ht=this.ctx,vt=this.groupStack.pop();if(this.ctx=vt,this.ctx.imageSmoothingEnabled=!1,mt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Rt=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Rt);const Pt=o.Util.getAxialAlignedBoundingBox([0,0,ht.canvas.width,ht.canvas.height],Rt);this.ctx.drawImage(ht.canvas,0,0),this.ctx.restore(),this.compose(Pt)}}beginAnnotation(mt,ht,vt,Rt,Pt){if(Zt(this,_t,_s).call(this),ot(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ht)&&ht.length===4){const Bt=ht[2]-ht[0],Ut=ht[3]-ht[1];if(Pt&&this.annotationCanvasMap){vt=vt.slice(),vt[4]-=ht[0],vt[5]-=ht[1],ht=ht.slice(),ht[0]=ht[1]=0,ht[2]=Bt,ht[3]=Ut;const[Nt,It]=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:Ht}=this,Qt=Math.ceil(Bt*this.outputScaleX*Ht),tn=Math.ceil(Ut*this.outputScaleY*Ht);this.annotationCanvas=this.canvasFactory.create(Qt,tn);const{canvas:an,context:Wt}=this.annotationCanvas;this.annotationCanvasMap.set(mt,an),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Wt,this.ctx.save(),this.ctx.setTransform(Nt,0,0,-It,0,Ut*It),ot(this.ctx)}else ot(this.ctx),this.ctx.rect(ht[0],ht[1],Bt,Ut),this.ctx.clip(),this.endPath()}this.current=new $(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...vt),this.transform(...Rt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Zt(this,_t,Rs).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(mt){if(!this.contentVisible)return;const ht=mt.count;mt=this.getObject(mt.data,mt),mt.count=ht;const vt=this.ctx,Rt=this.processingType3;if(Rt&&(Rt.compiled===void 0&&(Rt.compiled=_e(mt)),Rt.compiled)){Rt.compiled(vt);return}const Pt=this._createMaskCanvas(mt),Bt=Pt.canvas;vt.save(),vt.setTransform(1,0,0,1,0,0),vt.drawImage(Bt,Pt.offsetX,Pt.offsetY),vt.restore(),this.compose()}paintImageMaskXObjectRepeat(mt,ht,vt=0,Rt=0,Pt,Bt){if(!this.contentVisible)return;mt=this.getObject(mt.data,mt);const Ut=this.ctx;Ut.save();const Nt=(0,a.getCurrentTransform)(Ut);Ut.transform(ht,vt,Rt,Pt,0,0);const It=this._createMaskCanvas(mt);Ut.setTransform(1,0,0,1,It.offsetX-Nt[4],It.offsetY-Nt[5]);for(let Ht=0,Qt=Bt.length;Ht<Qt;Ht+=2){const tn=o.Util.transform(Nt,[ht,vt,Rt,Pt,Bt[Ht],Bt[Ht+1]]),[an,Wt]=o.Util.applyTransform([0,0],tn);Ut.drawImage(It.canvas,an,Wt)}Ut.restore(),this.compose()}paintImageMaskXObjectGroup(mt){if(!this.contentVisible)return;const ht=this.ctx,vt=this.current.fillColor,Rt=this.current.patternFill;for(const Pt of mt){const{data:Bt,width:Ut,height:Nt,transform:It}=Pt,Ht=this.cachedCanvases.getCanvas("maskCanvas",Ut,Nt),Qt=Ht.context;Qt.save();const tn=this.getObject(Bt,Pt);it(Qt,tn),Qt.globalCompositeOperation="source-in",Qt.fillStyle=Rt?vt.getPattern(Qt,this,(0,a.getCurrentTransformInverse)(ht),c.PathType.FILL):vt,Qt.fillRect(0,0,Ut,Nt),Qt.restore(),ht.save(),ht.transform(...It),ht.scale(1,-1),ut(ht,Ht.canvas,0,0,Ut,Nt,0,-1,1,1),ht.restore()}this.compose()}paintImageXObject(mt){if(!this.contentVisible)return;const ht=this.getObject(mt);if(!ht){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ht)}paintImageXObjectRepeat(mt,ht,vt,Rt){if(!this.contentVisible)return;const Pt=this.getObject(mt);if(!Pt){(0,o.warn)("Dependent image isn't ready yet");return}const Bt=Pt.width,Ut=Pt.height,Nt=[];for(let It=0,Ht=Rt.length;It<Ht;It+=2)Nt.push({transform:[ht,0,0,vt,Rt[It],Rt[It+1]],x:0,y:0,w:Bt,h:Ut});this.paintInlineImageXObjectGroup(Pt,Nt)}applyTransferMapsToCanvas(mt){return this.current.transferMaps!=="none"&&(mt.filter=this.current.transferMaps,mt.drawImage(mt.canvas,0,0),mt.filter="none"),mt.canvas}applyTransferMapsToBitmap(mt){if(this.current.transferMaps==="none")return mt.bitmap;const{bitmap:ht,width:vt,height:Rt}=mt,Pt=this.cachedCanvases.getCanvas("inlineImage",vt,Rt),Bt=Pt.context;return Bt.filter=this.current.transferMaps,Bt.drawImage(ht,0,0),Bt.filter="none",Pt.canvas}paintInlineImageXObject(mt){if(!this.contentVisible)return;const ht=mt.width,vt=mt.height,Rt=this.ctx;if(this.save(),!o.isNodeJS){const{filter:Ut}=Rt;Ut!=="none"&&Ut!==""&&(Rt.filter="none")}Rt.scale(1/ht,-1/vt);let Pt;if(mt.bitmap)Pt=this.applyTransferMapsToBitmap(mt);else if(typeof HTMLElement=="function"&&mt instanceof HTMLElement||!mt.data)Pt=mt;else{const Nt=this.cachedCanvases.getCanvas("inlineImage",ht,vt).context;at(Nt,mt),Pt=this.applyTransferMapsToCanvas(Nt)}const Bt=this._scaleImage(Pt,(0,a.getCurrentTransformInverse)(Rt));Rt.imageSmoothingEnabled=Et((0,a.getCurrentTransform)(Rt),mt.interpolate),ut(Rt,Bt.img,0,0,Bt.paintWidth,Bt.paintHeight,0,-vt,ht,vt),this.compose(),this.restore()}paintInlineImageXObjectGroup(mt,ht){if(!this.contentVisible)return;const vt=this.ctx;let Rt;if(mt.bitmap)Rt=mt.bitmap;else{const Pt=mt.width,Bt=mt.height,Nt=this.cachedCanvases.getCanvas("inlineImage",Pt,Bt).context;at(Nt,mt),Rt=this.applyTransferMapsToCanvas(Nt)}for(const Pt of ht)vt.save(),vt.transform(...Pt.transform),vt.scale(1,-1),ut(vt,Rt,Pt.x,Pt.y,Pt.w,Pt.h,0,-1,1,1),vt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(mt){}markPointProps(mt,ht){}beginMarkedContent(mt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(mt,ht){mt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ht)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(mt){const ht=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(mt);const vt=this.ctx;this.pendingClip&&(ht||(this.pendingClip===Ft?vt.clip("evenodd"):vt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),vt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const mt=(0,a.getCurrentTransform)(this.ctx);if(mt[1]===0&&mt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(mt[0]),Math.abs(mt[3]));else{const ht=Math.abs(mt[0]*mt[3]-mt[2]*mt[1]),vt=Math.hypot(mt[0],mt[2]),Rt=Math.hypot(mt[1],mt[3]);this._cachedGetSinglePixelWidth=Math.max(vt,Rt)/ht}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:mt}=this.current,{a:ht,b:vt,c:Rt,d:Pt}=this.ctx.getTransform();let Bt,Ut;if(vt===0&&Rt===0){const Nt=Math.abs(ht),It=Math.abs(Pt);if(Nt===It)if(mt===0)Bt=Ut=1/Nt;else{const Ht=Nt*mt;Bt=Ut=Ht<1?1/Ht:1}else if(mt===0)Bt=1/Nt,Ut=1/It;else{const Ht=Nt*mt,Qt=It*mt;Bt=Ht<1?1/Ht:1,Ut=Qt<1?1/Qt:1}}else{const Nt=Math.abs(ht*Pt-vt*Rt),It=Math.hypot(ht,vt),Ht=Math.hypot(Rt,Pt);if(mt===0)Bt=Ht/Nt,Ut=It/Nt;else{const Qt=mt*Nt;Bt=Ht>Qt?Ht/Qt:1,Ut=It>Qt?It/Qt:1}}this._cachedScaleForStroking[0]=Bt,this._cachedScaleForStroking[1]=Ut}return this._cachedScaleForStroking}rescaleAndStroke(mt){const{ctx:ht}=this,{lineWidth:vt}=this.current,[Rt,Pt]=this.getScaleForStroking();if(ht.lineWidth=vt||1,Rt===1&&Pt===1){ht.stroke();return}const Bt=ht.getLineDash();if(mt&&ht.save(),ht.scale(Rt,Pt),Bt.length>0){const Ut=Math.max(Rt,Pt);ht.setLineDash(Bt.map(Nt=>Nt/Ut)),ht.lineDashOffset/=Ut}ht.stroke(),mt&&ht.restore()}isContentVisible(){for(let mt=this.markedContentStack.length-1;mt>=0;mt--)if(!this.markedContentStack[mt].visible)return!1;return!0}};_t=new WeakSet,_s=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Rs=function(){if(this.pageColors){const mt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(mt!=="none"){const ht=this.ctx.filter;this.ctx.filter=mt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ht}}};let bt=St;s.CanvasGraphics=bt;for(const At in o.OPS)bt.prototype[At]!==void 0&&(bt.prototype[o.OPS[At]]=bt.prototype[At])},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=tt;var o=i(1),a=i(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=c;function d(_e,$){if(!$)return;const at=$[2]-$[0],it=$[3]-$[1],et=new Path2D;et.rect($[0],$[1],at,it),_e.clip(et)}class g{constructor(){this.constructor===g&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class h extends g{constructor($){super(),this._type=$[1],this._bbox=$[2],this._colorStops=$[3],this._p0=$[4],this._p1=$[5],this._r0=$[6],this._r1=$[7],this.matrix=null}_createGradient($){let at;this._type==="axial"?at=$.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(at=$.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const it of this._colorStops)at.addColorStop(it[0],it[1]);return at}getPattern($,at,it,et){let ot;if(et===c.STROKE||et===c.FILL){const rt=at.current.getClippedPathBoundingBox(et,(0,a.getCurrentTransform)($))||[0,0,0,0],lt=Math.ceil(rt[2]-rt[0])||1,ft=Math.ceil(rt[3]-rt[1])||1,dt=at.cachedCanvases.getCanvas("pattern",lt,ft,!0),ct=dt.context;ct.clearRect(0,0,ct.canvas.width,ct.canvas.height),ct.beginPath(),ct.rect(0,0,ct.canvas.width,ct.canvas.height),ct.translate(-rt[0],-rt[1]),it=o.Util.transform(it,[1,0,0,1,rt[0],rt[1]]),ct.transform(...at.baseTransform),this.matrix&&ct.transform(...this.matrix),d(ct,this._bbox),ct.fillStyle=this._createGradient(ct),ct.fill(),ot=$.createPattern(dt.canvas,"no-repeat");const Et=new DOMMatrix(it);ot.setTransform(Et)}else d($,this._bbox),ot=this._createGradient($);return ot}}function j(_e,$,at,it,et,ot,rt,lt){const ft=$.coords,dt=$.colors,ct=_e.data,Et=_e.width*4;let gt;ft[at+1]>ft[it+1]&&(gt=at,at=it,it=gt,gt=ot,ot=rt,rt=gt),ft[it+1]>ft[et+1]&&(gt=it,it=et,et=gt,gt=rt,rt=lt,lt=gt),ft[at+1]>ft[it+1]&&(gt=at,at=it,it=gt,gt=ot,ot=rt,rt=gt);const Lt=(ft[at]+$.offsetX)*$.scaleX,Dt=(ft[at+1]+$.offsetY)*$.scaleY,Ft=(ft[it]+$.offsetX)*$.scaleX,bt=(ft[it+1]+$.offsetY)*$.scaleY,_t=(ft[et]+$.offsetX)*$.scaleX,yt=(ft[et+1]+$.offsetY)*$.scaleY;if(Dt>=yt)return;const jt=dt[ot],St=dt[ot+1],At=dt[ot+2],mt=dt[rt],ht=dt[rt+1],vt=dt[rt+2],Rt=dt[lt],Pt=dt[lt+1],Bt=dt[lt+2],Ut=Math.round(Dt),Nt=Math.round(yt);let It,Ht,Qt,tn,an,Wt,Xt,wt;for(let kt=Ut;kt<=Nt;kt++){if(kt<bt){const pn=kt<Dt?0:(Dt-kt)/(Dt-bt);It=Lt-(Lt-Ft)*pn,Ht=jt-(jt-mt)*pn,Qt=St-(St-ht)*pn,tn=At-(At-vt)*pn}else{let pn;kt>yt?pn=1:bt===yt?pn=0:pn=(bt-kt)/(bt-yt),It=Ft-(Ft-_t)*pn,Ht=mt-(mt-Rt)*pn,Qt=ht-(ht-Pt)*pn,tn=vt-(vt-Bt)*pn}let Tt;kt<Dt?Tt=0:kt>yt?Tt=1:Tt=(Dt-kt)/(Dt-yt),an=Lt-(Lt-_t)*Tt,Wt=jt-(jt-Rt)*Tt,Xt=St-(St-Pt)*Tt,wt=At-(At-Bt)*Tt;const zt=Math.round(Math.min(It,an)),en=Math.round(Math.max(It,an));let un=Et*kt+zt*4;for(let pn=zt;pn<=en;pn++)Tt=(It-pn)/(It-an),Tt<0?Tt=0:Tt>1&&(Tt=1),ct[un++]=Ht-(Ht-Wt)*Tt|0,ct[un++]=Qt-(Qt-Xt)*Tt|0,ct[un++]=tn-(tn-wt)*Tt|0,ct[un++]=255}}function b(_e,$,at){const it=$.coords,et=$.colors;let ot,rt;switch($.type){case"lattice":const lt=$.verticesPerRow,ft=Math.floor(it.length/lt)-1,dt=lt-1;for(ot=0;ot<ft;ot++){let ct=ot*lt;for(let Et=0;Et<dt;Et++,ct++)j(_e,at,it[ct],it[ct+1],it[ct+lt],et[ct],et[ct+1],et[ct+lt]),j(_e,at,it[ct+lt+1],it[ct+1],it[ct+lt],et[ct+lt+1],et[ct+1],et[ct+lt])}break;case"triangles":for(ot=0,rt=it.length;ot<rt;ot+=3)j(_e,at,it[ot],it[ot+1],it[ot+2],et[ot],et[ot+1],et[ot+2]);break;default:throw new Error("illegal figure")}}class _ extends g{constructor($){super(),this._coords=$[2],this._colors=$[3],this._figures=$[4],this._bounds=$[5],this._bbox=$[7],this._background=$[8],this.matrix=null}_createMeshCanvas($,at,it){const lt=Math.floor(this._bounds[0]),ft=Math.floor(this._bounds[1]),dt=Math.ceil(this._bounds[2])-lt,ct=Math.ceil(this._bounds[3])-ft,Et=Math.min(Math.ceil(Math.abs(dt*$[0]*1.1)),3e3),gt=Math.min(Math.ceil(Math.abs(ct*$[1]*1.1)),3e3),Lt=dt/Et,Dt=ct/gt,Ft={coords:this._coords,colors:this._colors,offsetX:-lt,offsetY:-ft,scaleX:1/Lt,scaleY:1/Dt},bt=Et+2*2,_t=gt+2*2,yt=it.getCanvas("mesh",bt,_t,!1),jt=yt.context,St=jt.createImageData(Et,gt);if(at){const mt=St.data;for(let ht=0,vt=mt.length;ht<vt;ht+=4)mt[ht]=at[0],mt[ht+1]=at[1],mt[ht+2]=at[2],mt[ht+3]=255}for(const mt of this._figures)b(St,mt,Ft);return jt.putImageData(St,2,2),{canvas:yt.canvas,offsetX:lt-2*Lt,offsetY:ft-2*Dt,scaleX:Lt,scaleY:Dt}}getPattern($,at,it,et){d($,this._bbox);let ot;if(et===c.SHADING)ot=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)($));else if(ot=o.Util.singularValueDecompose2dScale(at.baseTransform),this.matrix){const lt=o.Util.singularValueDecompose2dScale(this.matrix);ot=[ot[0]*lt[0],ot[1]*lt[1]]}const rt=this._createMeshCanvas(ot,et===c.SHADING?null:this._background,at.cachedCanvases);return et!==c.SHADING&&($.setTransform(...at.baseTransform),this.matrix&&$.transform(...this.matrix)),$.translate(rt.offsetX,rt.offsetY),$.scale(rt.scaleX,rt.scaleY),$.createPattern(rt.canvas,"no-repeat")}}class st extends g{getPattern(){return"hotpink"}}function tt(_e){switch(_e[0]){case"RadialAxial":return new h(_e);case"Mesh":return new _(_e);case"Dummy":return new st}throw new Error(`Unknown IR type: ${_e[0]}`)}const nt={COLORED:1,UNCOLORED:2},ut=class ut{constructor($,at,it,et,ot){this.operatorList=$[2],this.matrix=$[3]||[1,0,0,1,0,0],this.bbox=$[4],this.xstep=$[5],this.ystep=$[6],this.paintType=$[7],this.tilingType=$[8],this.color=at,this.ctx=it,this.canvasGraphicsFactory=et,this.baseTransform=ot}createPatternCanvas($){const at=this.operatorList,it=this.bbox,et=this.xstep,ot=this.ystep,rt=this.paintType,lt=this.tilingType,ft=this.color,dt=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+lt);const ct=it[0],Et=it[1],gt=it[2],Lt=it[3],Dt=o.Util.singularValueDecompose2dScale(this.matrix),Ft=o.Util.singularValueDecompose2dScale(this.baseTransform),bt=[Dt[0]*Ft[0],Dt[1]*Ft[1]],_t=this.getSizeAndScale(et,this.ctx.canvas.width,bt[0]),yt=this.getSizeAndScale(ot,this.ctx.canvas.height,bt[1]),jt=$.cachedCanvases.getCanvas("pattern",_t.size,yt.size,!0),St=jt.context,At=dt.createCanvasGraphics(St);At.groupLevel=$.groupLevel,this.setFillAndStrokeStyleToContext(At,rt,ft);let mt=ct,ht=Et,vt=gt,Rt=Lt;return ct<0&&(mt=0,vt+=Math.abs(ct)),Et<0&&(ht=0,Rt+=Math.abs(Et)),St.translate(-(_t.scale*mt),-(yt.scale*ht)),At.transform(_t.scale,0,0,yt.scale,0,0),St.save(),this.clipBbox(At,mt,ht,vt,Rt),At.baseTransform=(0,a.getCurrentTransform)(At.ctx),At.executeOperatorList(at),At.endDrawing(),{canvas:jt.canvas,scaleX:_t.scale,scaleY:yt.scale,offsetX:mt,offsetY:ht}}getSizeAndScale($,at,it){$=Math.abs($);const et=Math.max(ut.MAX_PATTERN_SIZE,at);let ot=Math.ceil($*it);return ot>=et?ot=et:it=ot/$,{scale:it,size:ot}}clipBbox($,at,it,et,ot){const rt=et-at,lt=ot-it;$.ctx.rect(at,it,rt,lt),$.current.updateRectMinMax((0,a.getCurrentTransform)($.ctx),[at,it,et,ot]),$.clip(),$.endPath()}setFillAndStrokeStyleToContext($,at,it){const et=$.ctx,ot=$.current;switch(at){case nt.COLORED:const rt=this.ctx;et.fillStyle=rt.fillStyle,et.strokeStyle=rt.strokeStyle,ot.fillColor=rt.fillStyle,ot.strokeColor=rt.strokeStyle;break;case nt.UNCOLORED:const lt=o.Util.makeHexColor(it[0],it[1],it[2]);et.fillStyle=lt,et.strokeStyle=lt,ot.fillColor=lt,ot.strokeColor=lt;break;default:throw new o.FormatError(`Unsupported paint type: ${at}`)}}getPattern($,at,it,et){let ot=it;et!==c.SHADING&&(ot=o.Util.transform(ot,at.baseTransform),this.matrix&&(ot=o.Util.transform(ot,this.matrix)));const rt=this.createPatternCanvas(at);let lt=new DOMMatrix(ot);lt=lt.translate(rt.offsetX,rt.offsetY),lt=lt.scale(1/rt.scaleX,1/rt.scaleY);const ft=$.createPattern(rt.canvas,"repeat");return ft.setTransform(lt),ft}};tr(ut,"MAX_PATTERN_SIZE",3e3);let xt=ut;s.TilingPattern=xt},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=c,s.convertToRGBA=a,s.grayToRGBA=g;var o=i(1);function a(h){switch(h.kind){case o.ImageKind.GRAYSCALE_1BPP:return c(h);case o.ImageKind.RGB_24BPP:return d(h)}return null}function c({src:h,srcPos:j=0,dest:b,width:_,height:st,nonBlackColor:tt=4294967295,inverseDecode:nt=!1}){const xt=o.FeatureTest.isLittleEndian?4278190080:255,[ut,_e]=nt?[tt,xt]:[xt,tt],$=_>>3,at=_&7,it=h.length;b=new Uint32Array(b.buffer);let et=0;for(let ot=0;ot<st;ot++){for(const lt=j+$;j<lt;j++){const ft=j<it?h[j]:255;b[et++]=ft&128?_e:ut,b[et++]=ft&64?_e:ut,b[et++]=ft&32?_e:ut,b[et++]=ft&16?_e:ut,b[et++]=ft&8?_e:ut,b[et++]=ft&4?_e:ut,b[et++]=ft&2?_e:ut,b[et++]=ft&1?_e:ut}if(at===0)continue;const rt=j<it?h[j++]:255;for(let lt=0;lt<at;lt++)b[et++]=rt&1<<7-lt?_e:ut}return{srcPos:j,destPos:et}}function d({src:h,srcPos:j=0,dest:b,destPos:_=0,width:st,height:tt}){let nt=0;const xt=h.length>>2,ut=new Uint32Array(h.buffer,j,xt);if(o.FeatureTest.isLittleEndian){for(;nt<xt-2;nt+=3,_+=4){const _e=ut[nt],$=ut[nt+1],at=ut[nt+2];b[_]=_e|4278190080,b[_+1]=_e>>>24|$<<8|4278190080,b[_+2]=$>>>16|at<<16|4278190080,b[_+3]=at>>>8|4278190080}for(let _e=nt*4,$=h.length;_e<$;_e+=3)b[_++]=h[_e]|h[_e+1]<<8|h[_e+2]<<16|4278190080}else{for(;nt<xt-2;nt+=3,_+=4){const _e=ut[nt],$=ut[nt+1],at=ut[nt+2];b[_]=_e|255,b[_+1]=_e<<24|$>>>8|255,b[_+2]=$<<16|at>>>16|255,b[_+3]=at<<8|255}for(let _e=nt*4,$=h.length;_e<$;_e+=3)b[_++]=h[_e]<<24|h[_e+1]<<16|h[_e+2]<<8|255}return{srcPos:j,destPos:_}}function g(h,j){if(o.FeatureTest.isLittleEndian)for(let b=0,_=h.length;b<_;b++)j[b]=h[b]*65793|4278190080;else for(let b=0,_=h.length;b<_;b++)j[b]=h[b]*16843008|255}},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const i=Object.create(null);s.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,s,i)=>{var h,Bo,wo,Zr;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var o=i(1);const a={DATA:1,ERROR:2},c={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(st){switch(st instanceof Error||typeof st=="object"&&st!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),st.name){case"AbortException":return new o.AbortException(st.message);case"MissingPDFException":return new o.MissingPDFException(st.message);case"PasswordException":return new o.PasswordException(st.message,st.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(st.message,st.status);case"UnknownErrorException":return new o.UnknownErrorException(st.message,st.details);default:return new o.UnknownErrorException(st.message,st.toString())}}class g{constructor(tt,nt,xt){on(this,h);this.sourceName=tt,this.targetName=nt,this.comObj=xt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=ut=>{const _e=ut.data;if(_e.targetName!==this.sourceName)return;if(_e.stream){Zt(this,h,wo).call(this,_e);return}if(_e.callback){const at=_e.callbackId,it=this.callbackCapabilities[at];if(!it)throw new Error(`Cannot resolve callback ${at}`);if(delete this.callbackCapabilities[at],_e.callback===a.DATA)it.resolve(_e.data);else if(_e.callback===a.ERROR)it.reject(d(_e.reason));else throw new Error("Unexpected callback case");return}const $=this.actionHandler[_e.action];if(!$)throw new Error(`Unknown action from worker: ${_e.action}`);if(_e.callbackId){const at=this.sourceName,it=_e.sourceName;new Promise(function(et){et($(_e.data))}).then(function(et){xt.postMessage({sourceName:at,targetName:it,callback:a.DATA,callbackId:_e.callbackId,data:et})},function(et){xt.postMessage({sourceName:at,targetName:it,callback:a.ERROR,callbackId:_e.callbackId,reason:d(et)})});return}if(_e.streamId){Zt(this,h,Bo).call(this,_e);return}$(_e.data)},xt.addEventListener("message",this._onComObjOnMessage)}on(tt,nt){const xt=this.actionHandler;if(xt[tt])throw new Error(`There is already an actionName called "${tt}"`);xt[tt]=nt}send(tt,nt,xt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:tt,data:nt},xt)}sendWithPromise(tt,nt,xt){const ut=this.callbackId++,_e=new o.PromiseCapability;this.callbackCapabilities[ut]=_e;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:tt,callbackId:ut,data:nt},xt)}catch($){_e.reject($)}return _e.promise}sendWithStream(tt,nt,xt,ut){const _e=this.streamId++,$=this.sourceName,at=this.targetName,it=this.comObj;return new ReadableStream({start:et=>{const ot=new o.PromiseCapability;return this.streamControllers[_e]={controller:et,startCall:ot,pullCall:null,cancelCall:null,isClosed:!1},it.postMessage({sourceName:$,targetName:at,action:tt,streamId:_e,data:nt,desiredSize:et.desiredSize},ut),ot.promise},pull:et=>{const ot=new o.PromiseCapability;return this.streamControllers[_e].pullCall=ot,it.postMessage({sourceName:$,targetName:at,stream:c.PULL,streamId:_e,desiredSize:et.desiredSize}),ot.promise},cancel:et=>{(0,o.assert)(et instanceof Error,"cancel must have a valid reason");const ot=new o.PromiseCapability;return this.streamControllers[_e].cancelCall=ot,this.streamControllers[_e].isClosed=!0,it.postMessage({sourceName:$,targetName:at,stream:c.CANCEL,streamId:_e,reason:d(et)}),ot.promise}},xt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,Bo=function(tt){const nt=tt.streamId,xt=this.sourceName,ut=tt.sourceName,_e=this.comObj,$=this,at=this.actionHandler[tt.action],it={enqueue(et,ot=1,rt){if(this.isCancelled)return;const lt=this.desiredSize;this.desiredSize-=ot,lt>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),_e.postMessage({sourceName:xt,targetName:ut,stream:c.ENQUEUE,streamId:nt,chunk:et},rt)},close(){this.isCancelled||(this.isCancelled=!0,_e.postMessage({sourceName:xt,targetName:ut,stream:c.CLOSE,streamId:nt}),delete $.streamSinks[nt])},error(et){(0,o.assert)(et instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_e.postMessage({sourceName:xt,targetName:ut,stream:c.ERROR,streamId:nt,reason:d(et)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:tt.desiredSize,ready:null};it.sinkCapability.resolve(),it.ready=it.sinkCapability.promise,this.streamSinks[nt]=it,new Promise(function(et){et(at(tt.data,it))}).then(function(){_e.postMessage({sourceName:xt,targetName:ut,stream:c.START_COMPLETE,streamId:nt,success:!0})},function(et){_e.postMessage({sourceName:xt,targetName:ut,stream:c.START_COMPLETE,streamId:nt,reason:d(et)})})},wo=function(tt){const nt=tt.streamId,xt=this.sourceName,ut=tt.sourceName,_e=this.comObj,$=this.streamControllers[nt],at=this.streamSinks[nt];switch(tt.stream){case c.START_COMPLETE:tt.success?$.startCall.resolve():$.startCall.reject(d(tt.reason));break;case c.PULL_COMPLETE:tt.success?$.pullCall.resolve():$.pullCall.reject(d(tt.reason));break;case c.PULL:if(!at){_e.postMessage({sourceName:xt,targetName:ut,stream:c.PULL_COMPLETE,streamId:nt,success:!0});break}at.desiredSize<=0&&tt.desiredSize>0&&at.sinkCapability.resolve(),at.desiredSize=tt.desiredSize,new Promise(function(it){var et;it((et=at.onPull)==null?void 0:et.call(at))}).then(function(){_e.postMessage({sourceName:xt,targetName:ut,stream:c.PULL_COMPLETE,streamId:nt,success:!0})},function(it){_e.postMessage({sourceName:xt,targetName:ut,stream:c.PULL_COMPLETE,streamId:nt,reason:d(it)})});break;case c.ENQUEUE:if((0,o.assert)($,"enqueue should have stream controller"),$.isClosed)break;$.controller.enqueue(tt.chunk);break;case c.CLOSE:if((0,o.assert)($,"close should have stream controller"),$.isClosed)break;$.isClosed=!0,$.controller.close(),Zt(this,h,Zr).call(this,$,nt);break;case c.ERROR:(0,o.assert)($,"error should have stream controller"),$.controller.error(d(tt.reason)),Zt(this,h,Zr).call(this,$,nt);break;case c.CANCEL_COMPLETE:tt.success?$.cancelCall.resolve():$.cancelCall.reject(d(tt.reason)),Zt(this,h,Zr).call(this,$,nt);break;case c.CANCEL:if(!at)break;new Promise(function(it){var et;it((et=at.onCancel)==null?void 0:et.call(at,d(tt.reason)))}).then(function(){_e.postMessage({sourceName:xt,targetName:ut,stream:c.CANCEL_COMPLETE,streamId:nt,success:!0})},function(it){_e.postMessage({sourceName:xt,targetName:ut,stream:c.CANCEL_COMPLETE,streamId:nt,reason:d(it)})}),at.sinkCapability.reject(d(tt.reason)),at.isCancelled=!0,delete this.streamSinks[nt];break;default:throw new Error("Unexpected stream case")}},Zr=async function(tt,nt){var xt,ut,_e;await Promise.allSettled([(xt=tt.startCall)==null?void 0:xt.promise,(ut=tt.pullCall)==null?void 0:ut.promise,(_e=tt.cancelCall)==null?void 0:_e.promise]),delete this.streamControllers[nt]},s.MessageHandler=g},(e,s,i)=>{var c,d;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var o=i(1);class a{constructor({parsedData:h,rawData:j}){on(this,c);on(this,d);ln(this,c,h),ln(this,d,j)}getRaw(){return pt(this,d)}get(h){return pt(this,c).get(h)??null}getAll(){return(0,o.objectFromMap)(pt(this,c))}has(h){return pt(this,c).has(h)}}c=new WeakMap,d=new WeakMap,s.Metadata=a},(e,s,i)=>{var h,j,b,_,st,tt,Ps;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var o=i(1),a=i(8);const c=Symbol("INTERNAL");class d{constructor(ut,_e){on(this,h,!0);this.name=ut,this.intent=_e}get visible(){return pt(this,h)}_setVisible(ut,_e){ut!==c&&(0,o.unreachable)("Internal method `_setVisible` called."),ln(this,h,_e)}}h=new WeakMap;class g{constructor(ut){on(this,tt);on(this,j,null);on(this,b,new Map);on(this,_,null);on(this,st,null);if(this.name=null,this.creator=null,ut!==null){this.name=ut.name,this.creator=ut.creator,ln(this,st,ut.order);for(const _e of ut.groups)pt(this,b).set(_e.id,new d(_e.name,_e.intent));if(ut.baseState==="OFF")for(const _e of pt(this,b).values())_e._setVisible(c,!1);for(const _e of ut.on)pt(this,b).get(_e)._setVisible(c,!0);for(const _e of ut.off)pt(this,b).get(_e)._setVisible(c,!1);ln(this,_,this.getHash())}}isVisible(ut){if(pt(this,b).size===0)return!0;if(!ut)return(0,o.warn)("Optional content group not defined."),!0;if(ut.type==="OCG")return pt(this,b).has(ut.id)?pt(this,b).get(ut.id).visible:((0,o.warn)(`Optional content group not found: ${ut.id}`),!0);if(ut.type==="OCMD"){if(ut.expression)return Zt(this,tt,Ps).call(this,ut.expression);if(!ut.policy||ut.policy==="AnyOn"){for(const _e of ut.ids){if(!pt(this,b).has(_e))return(0,o.warn)(`Optional content group not found: ${_e}`),!0;if(pt(this,b).get(_e).visible)return!0}return!1}else if(ut.policy==="AllOn"){for(const _e of ut.ids){if(!pt(this,b).has(_e))return(0,o.warn)(`Optional content group not found: ${_e}`),!0;if(!pt(this,b).get(_e).visible)return!1}return!0}else if(ut.policy==="AnyOff"){for(const _e of ut.ids){if(!pt(this,b).has(_e))return(0,o.warn)(`Optional content group not found: ${_e}`),!0;if(!pt(this,b).get(_e).visible)return!0}return!1}else if(ut.policy==="AllOff"){for(const _e of ut.ids){if(!pt(this,b).has(_e))return(0,o.warn)(`Optional content group not found: ${_e}`),!0;if(pt(this,b).get(_e).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${ut.policy}.`),!0}return(0,o.warn)(`Unknown group type ${ut.type}.`),!0}setVisibility(ut,_e=!0){if(!pt(this,b).has(ut)){(0,o.warn)(`Optional content group not found: ${ut}`);return}pt(this,b).get(ut)._setVisible(c,!!_e),ln(this,j,null)}get hasInitialVisibility(){return pt(this,_)===null||this.getHash()===pt(this,_)}getOrder(){return pt(this,b).size?pt(this,st)?pt(this,st).slice():[...pt(this,b).keys()]:null}getGroups(){return pt(this,b).size>0?(0,o.objectFromMap)(pt(this,b)):null}getGroup(ut){return pt(this,b).get(ut)||null}getHash(){if(pt(this,j)!==null)return pt(this,j);const ut=new a.MurmurHash3_64;for(const[_e,$]of pt(this,b))ut.update(`${_e}:${$.visible}`);return ln(this,j,ut.hexdigest())}}j=new WeakMap,b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakSet,Ps=function(ut){const _e=ut.length;if(_e<2)return!0;const $=ut[0];for(let at=1;at<_e;at++){const it=ut[at];let et;if(Array.isArray(it))et=Zt(this,tt,Ps).call(this,it);else if(pt(this,b).has(it))et=pt(this,b).get(it).visible;else return(0,o.warn)(`Optional content group not found: ${it}`),!0;switch($){case"And":if(!et)return!1;break;case"Or":if(et)return!0;break;case"Not":return!et;default:return!0}}return $==="And"},s.OptionalContentConfig=g},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var o=i(1),a=i(6);class c{constructor({length:j,initialData:b,progressiveDone:_=!1,contentDispositionFilename:st=null,disableRange:tt=!1,disableStream:nt=!1},xt){if((0,o.assert)(xt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_,this._contentDispositionFilename=st,(b==null?void 0:b.length)>0){const ut=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;this._queuedChunks.push(ut)}this._pdfDataRangeTransport=xt,this._isStreamingSupported=!nt,this._isRangeSupported=!tt,this._contentLength=j,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((ut,_e)=>{this._onReceiveData({begin:ut,chunk:_e})}),this._pdfDataRangeTransport.addProgressListener((ut,_e)=>{this._onProgress({loaded:ut,total:_e})}),this._pdfDataRangeTransport.addProgressiveReadListener(ut=>{this._onReceiveData({chunk:ut})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:j,chunk:b}){const _=b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength?b.buffer:new Uint8Array(b).buffer;if(j===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const st=this._rangeReaders.some(function(tt){return tt._begin!==j?!1:(tt._enqueue(_),!0)});(0,o.assert)(st,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}_onProgress(j){var b,_,st,tt;j.total===void 0?(_=(b=this._rangeReaders[0])==null?void 0:b.onProgress)==null||_.call(b,{loaded:j.loaded}):(tt=(st=this._fullRequestReader)==null?void 0:st.onProgress)==null||tt.call(st,{loaded:j.loaded,total:j.total})}_onProgressiveDone(){var j;(j=this._fullRequestReader)==null||j.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(j){const b=this._rangeReaders.indexOf(j);b>=0&&this._rangeReaders.splice(b,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const j=this._queuedChunks;return this._queuedChunks=null,new d(this,j,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(j,b){if(b<=this._progressiveDataLength)return null;const _=new g(this,j,b);return this._pdfDataRangeTransport.requestDataRange(j,b),this._rangeReaders.push(_),_}cancelAllRequests(j){var b;(b=this._fullRequestReader)==null||b.cancel(j);for(const _ of this._rangeReaders.slice(0))_.cancel(j);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=c;class d{constructor(j,b,_=!1,st=null){this._stream=j,this._done=_||!1,this._filename=(0,a.isPdfFile)(st)?st:null,this._queuedChunks=b||[],this._loaded=0;for(const tt of this._queuedChunks)this._loaded+=tt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),j._fullRequestReader=this,this.onProgress=null}_enqueue(j){this._done||(this._requests.length>0?this._requests.shift().resolve({value:j,done:!1}):this._queuedChunks.push(j),this._loaded+=j.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const j=new o.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g{constructor(j,b,_){this._stream=j,this._begin=b,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(j){if(!this._done){if(this._requests.length===0)this._queuedChunk=j;else{this._requests.shift().resolve({value:j,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const j=new o.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var o=i(1),a=i(20);function c(_,st,tt){return{method:"GET",headers:_,signal:tt.signal,mode:"cors",credentials:st?"include":"same-origin",redirect:"follow"}}function d(_){const st=new Headers;for(const tt in _){const nt=_[tt];nt!==void 0&&st.append(tt,nt)}return st}function g(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,o.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class h{constructor(st){this.source=st,this.isHttp=/^https?:/i.test(st.url),this.httpHeaders=this.isHttp&&st.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new j(this),this._fullRequestReader}getRangeReader(st,tt){if(tt<=this._progressiveDataLength)return null;const nt=new b(this,st,tt);return this._rangeRequestReaders.push(nt),nt}cancelAllRequests(st){var tt;(tt=this._fullRequestReader)==null||tt.cancel(st);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(st)}}s.PDFFetchStream=h;class j{constructor(st){this._stream=st,this._reader=null,this._loaded=0,this._filename=null;const tt=st.source;this._withCredentials=tt.withCredentials||!1,this._contentLength=tt.length,this._headersCapability=new o.PromiseCapability,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._headers=d(this._stream.httpHeaders);const nt=tt.url;fetch(nt,c(this._headers,this._withCredentials,this._abortController)).then(xt=>{if(!(0,a.validateResponseStatus)(xt.status))throw(0,a.createResponseStatusError)(xt.status,nt);this._reader=xt.body.getReader(),this._headersCapability.resolve();const ut=at=>xt.headers.get(at),{allowRangeRequests:_e,suggestedLength:$}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:ut,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_e,this._contentLength=$||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(ut),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;await this._headersCapability.promise;const{value:st,done:tt}=await this._reader.read();return tt?{value:st,done:tt}:(this._loaded+=st.byteLength,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:g(st),done:!1})}cancel(st){var tt;(tt=this._reader)==null||tt.cancel(st),this._abortController.abort()}}class b{constructor(st,tt,nt){this._stream=st,this._reader=null,this._loaded=0;const xt=st.source;this._withCredentials=xt.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!xt.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${tt}-${nt-1}`);const ut=xt.url;fetch(ut,c(this._headers,this._withCredentials,this._abortController)).then(_e=>{if(!(0,a.validateResponseStatus)(_e.status))throw(0,a.createResponseStatusError)(_e.status,ut);this._readCapability.resolve(),this._reader=_e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var nt;await this._readCapability.promise;const{value:st,done:tt}=await this._reader.read();return tt?{value:st,done:tt}:(this._loaded+=st.byteLength,(nt=this.onProgress)==null||nt.call(this,{loaded:this._loaded}),{value:g(st),done:!1})}cancel(st){var tt;(tt=this._reader)==null||tt.cancel(st),this._abortController.abort()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=h,s.extractFilenameFromHeader=g,s.validateRangeRequestCapabilities=d,s.validateResponseStatus=j;var o=i(1),a=i(21),c=i(6);function d({getResponseHeader:b,isHttp:_,rangeChunkSize:st,disableRange:tt}){const nt={allowRangeRequests:!1,suggestedLength:void 0},xt=parseInt(b("Content-Length"),10);return!Number.isInteger(xt)||(nt.suggestedLength=xt,xt<=2*st)||tt||!_||b("Accept-Ranges")!=="bytes"||(b("Content-Encoding")||"identity")!=="identity"||(nt.allowRangeRequests=!0),nt}function g(b){const _=b("Content-Disposition");if(_){let st=(0,a.getFilenameFromContentDispositionHeader)(_);if(st.includes("%"))try{st=decodeURIComponent(st)}catch{}if((0,c.isPdfFile)(st))return st}return null}function h(b,_){return b===404||b===0&&_.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+_+'".'):new o.UnexpectedResponseException(`Unexpected server response (${b}) while retrieving PDF "${_}".`,b)}function j(b){return b===200||b===206}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=a;var o=i(1);function a(c){let d=!0,g=h("filename\\*","i").exec(c);if(g){g=g[1];let xt=st(g);return xt=unescape(xt),xt=tt(xt),xt=nt(xt),b(xt)}if(g=_(c),g){const xt=nt(g);return b(xt)}if(g=h("filename","i").exec(c),g){g=g[1];let xt=st(g);return xt=nt(xt),b(xt)}function h(xt,ut){return new RegExp("(?:^|;)\\s*"+xt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',ut)}function j(xt,ut){if(xt){if(!/^[\x00-\xFF]+$/.test(ut))return ut;try{const _e=new TextDecoder(xt,{fatal:!0}),$=(0,o.stringToBytes)(ut);ut=_e.decode($),d=!1}catch{}}return ut}function b(xt){return d&&/[\x80-\xff]/.test(xt)&&(xt=j("utf-8",xt),d&&(xt=j("iso-8859-1",xt))),xt}function _(xt){const ut=[];let _e;const $=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_e=$.exec(xt))!==null;){let[,it,et,ot]=_e;if(it=parseInt(it,10),it in ut){if(it===0)break;continue}ut[it]=[et,ot]}const at=[];for(let it=0;it<ut.length&&it in ut;++it){let[et,ot]=ut[it];ot=st(ot),et&&(ot=unescape(ot),it===0&&(ot=tt(ot))),at.push(ot)}return at.join("")}function st(xt){if(xt.startsWith('"')){const ut=xt.slice(1).split('\\"');for(let _e=0;_e<ut.length;++_e){const $=ut[_e].indexOf('"');$!==-1&&(ut[_e]=ut[_e].slice(0,$),ut.length=_e+1),ut[_e]=ut[_e].replaceAll(/\\(.)/g,"$1")}xt=ut.join('"')}return xt}function tt(xt){const ut=xt.indexOf("'");if(ut===-1)return xt;const _e=xt.slice(0,ut),at=xt.slice(ut+1).replace(/^[^']*'/,"");return j(_e,at)}function nt(xt){return!xt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(xt)?xt:xt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(ut,_e,$,at){if($==="q"||$==="Q")return at=at.replaceAll("_"," "),at=at.replaceAll(/=([0-9a-fA-F]{2})/g,function(it,et){return String.fromCharCode(parseInt(et,16))}),j(_e,at);try{at=atob(at)}catch{}return j(_e,at)})}return""}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var o=i(1),a=i(20);const c=200,d=206;function g(st){const tt=st.response;return typeof tt!="string"?tt:(0,o.stringToBytes)(tt).buffer}class h{constructor(tt,nt={}){this.url=tt,this.isHttp=/^https?:/i.test(tt),this.httpHeaders=this.isHttp&&nt.httpHeaders||Object.create(null),this.withCredentials=nt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(tt,nt,xt){const ut={begin:tt,end:nt};for(const _e in xt)ut[_e]=xt[_e];return this.request(ut)}requestFull(tt){return this.request(tt)}request(tt){const nt=new XMLHttpRequest,xt=this.currXhrId++,ut=this.pendingRequests[xt]={xhr:nt};nt.open("GET",this.url),nt.withCredentials=this.withCredentials;for(const _e in this.httpHeaders){const $=this.httpHeaders[_e];$!==void 0&&nt.setRequestHeader(_e,$)}return this.isHttp&&"begin"in tt&&"end"in tt?(nt.setRequestHeader("Range",`bytes=${tt.begin}-${tt.end-1}`),ut.expectedStatus=d):ut.expectedStatus=c,nt.responseType="arraybuffer",tt.onError&&(nt.onerror=function(_e){tt.onError(nt.status)}),nt.onreadystatechange=this.onStateChange.bind(this,xt),nt.onprogress=this.onProgress.bind(this,xt),ut.onHeadersReceived=tt.onHeadersReceived,ut.onDone=tt.onDone,ut.onError=tt.onError,ut.onProgress=tt.onProgress,nt.send(null),xt}onProgress(tt,nt){var ut;const xt=this.pendingRequests[tt];xt&&((ut=xt.onProgress)==null||ut.call(xt,nt))}onStateChange(tt,nt){var it,et,ot;const xt=this.pendingRequests[tt];if(!xt)return;const ut=xt.xhr;if(ut.readyState>=2&&xt.onHeadersReceived&&(xt.onHeadersReceived(),delete xt.onHeadersReceived),ut.readyState!==4||!(tt in this.pendingRequests))return;if(delete this.pendingRequests[tt],ut.status===0&&this.isHttp){(it=xt.onError)==null||it.call(xt,ut.status);return}const _e=ut.status||c;if(!(_e===c&&xt.expectedStatus===d)&&_e!==xt.expectedStatus){(et=xt.onError)==null||et.call(xt,ut.status);return}const at=g(ut);if(_e===d){const rt=ut.getResponseHeader("Content-Range"),lt=/bytes (\d+)-(\d+)\/(\d+)/.exec(rt);xt.onDone({begin:parseInt(lt[1],10),chunk:at})}else at?xt.onDone({begin:0,chunk:at}):(ot=xt.onError)==null||ot.call(xt,ut.status)}getRequestXhr(tt){return this.pendingRequests[tt].xhr}isPendingRequest(tt){return tt in this.pendingRequests}abortRequest(tt){const nt=this.pendingRequests[tt].xhr;delete this.pendingRequests[tt],nt.abort()}}class j{constructor(tt){this._source=tt,this._manager=new h(tt.url,{httpHeaders:tt.httpHeaders,withCredentials:tt.withCredentials}),this._rangeChunkSize=tt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(tt){const nt=this._rangeRequestReaders.indexOf(tt);nt>=0&&this._rangeRequestReaders.splice(nt,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b(this._manager,this._source),this._fullRequestReader}getRangeReader(tt,nt){const xt=new _(this._manager,tt,nt);return xt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(xt),xt}cancelAllRequests(tt){var nt;(nt=this._fullRequestReader)==null||nt.cancel(tt);for(const xt of this._rangeRequestReaders.slice(0))xt.cancel(tt)}}s.PDFNetworkStream=j;class b{constructor(tt,nt){this._manager=tt;const xt={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=nt.url,this._fullRequestId=tt.requestFull(xt),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=nt.disableRange||!1,this._contentLength=nt.length,this._rangeChunkSize=nt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const tt=this._fullRequestId,nt=this._manager.getRequestXhr(tt),xt=$=>nt.getResponseHeader($),{allowRangeRequests:ut,suggestedLength:_e}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:xt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ut&&(this._isRangeSupported=!0),this._contentLength=_e||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(xt),this._isRangeSupported&&this._manager.abortRequest(tt),this._headersReceivedCapability.resolve()}_onDone(tt){if(tt&&(this._requests.length>0?this._requests.shift().resolve({value:tt.chunk,done:!1}):this._cachedChunks.push(tt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const nt of this._requests)nt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(tt){this._storedError=(0,a.createResponseStatusError)(tt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const nt of this._requests)nt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(tt){var nt;(nt=this.onProgress)==null||nt.call(this,{loaded:tt.loaded,total:tt.lengthComputable?tt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const tt=new o.PromiseCapability;return this._requests.push(tt),tt.promise}cancel(tt){this._done=!0,this._headersReceivedCapability.reject(tt);for(const nt of this._requests)nt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(tt,nt,xt){this._manager=tt;const ut={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=tt.url,this._requestId=tt.requestRange(nt,xt,ut),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var tt;(tt=this.onClosed)==null||tt.call(this,this)}_onDone(tt){const nt=tt.chunk;this._requests.length>0?this._requests.shift().resolve({value:nt,done:!1}):this._queuedChunk=nt,this._done=!0;for(const xt of this._requests)xt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(tt){this._storedError=(0,a.createResponseStatusError)(tt,this._url);for(const nt of this._requests)nt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(tt){var nt;this.isStreamingSupported||(nt=this.onProgress)==null||nt.call(this,{loaded:tt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const nt=this._queuedChunk;return this._queuedChunk=null,{value:nt,done:!1}}if(this._done)return{value:void 0,done:!0};const tt=new o.PromiseCapability;return this._requests.push(tt),tt.promise}cancel(tt){this._done=!0;for(const nt of this._requests)nt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var o=i(1),a=i(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(xt){const ut=require$$5,_e=ut.parse(xt);return _e.protocol==="file:"||_e.host?_e:/^[a-z]:[/\\]/i.test(xt)?ut.parse(`file:///${xt}`):(_e.host||(_e.protocol="file:"),_e)}class g{constructor(ut){this.source=ut,this.url=d(ut.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&ut.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ut;return((ut=this._fullRequestReader)==null?void 0:ut._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tt(this):new _(this),this._fullRequestReader}getRangeReader(ut,_e){if(_e<=this._progressiveDataLength)return null;const $=this.isFsUrl?new nt(this,ut,_e):new st(this,ut,_e);return this._rangeRequestReaders.push($),$}cancelAllRequests(ut){var _e;(_e=this._fullRequestReader)==null||_e.cancel(ut);for(const $ of this._rangeRequestReaders.slice(0))$.cancel(ut)}}s.PDFNodeStream=g;class h{constructor(ut){this._url=ut.url,this._done=!1,this._storedError=null,this.onProgress=null;const _e=ut.source;this._contentLength=_e.length,this._loaded=0,this._filename=null,this._disableRange=_e.disableRange||!1,this._rangeChunkSize=_e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_e.disableStream,this._isRangeSupported=!_e.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ut=this._readableStream.read();return ut===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=ut.length,($=this.onProgress)==null||$.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(ut).buffer,done:!1})}cancel(ut){if(!this._readableStream){this._error(ut);return}this._readableStream.destroy(ut)}_error(ut){this._storedError=ut,this._readCapability.resolve()}_setReadableStream(ut){this._readableStream=ut,ut.on("readable",()=>{this._readCapability.resolve()}),ut.on("end",()=>{ut.destroy(),this._done=!0,this._readCapability.resolve()}),ut.on("error",_e=>{this._error(_e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class j{constructor(ut){this._url=ut.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const _e=ut.source;this._isStreamingSupported=!_e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const ut=this._readableStream.read();return ut===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=ut.length,($=this.onProgress)==null||$.call(this,{loaded:this._loaded}),{value:new Uint8Array(ut).buffer,done:!1})}cancel(ut){if(!this._readableStream){this._error(ut);return}this._readableStream.destroy(ut)}_error(ut){this._storedError=ut,this._readCapability.resolve()}_setReadableStream(ut){this._readableStream=ut,ut.on("readable",()=>{this._readCapability.resolve()}),ut.on("end",()=>{ut.destroy(),this._done=!0,this._readCapability.resolve()}),ut.on("error",_e=>{this._error(_e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(xt,ut){return{protocol:xt.protocol,auth:xt.auth,host:xt.hostname,port:xt.port,path:xt.path,method:"GET",headers:ut}}class _ extends h{constructor(ut){super(ut);const _e=$=>{if($.statusCode===404){const ot=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot,this._headersCapability.reject(ot);return}this._headersCapability.resolve(),this._setReadableStream($);const at=ot=>this._readableStream.headers[ot.toLowerCase()],{allowRangeRequests:it,suggestedLength:et}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:ut.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=it,this._contentLength=et||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(at)};if(this._request=null,this._url.protocol==="http:"){const $=require$$5;this._request=$.request(b(this._url,ut.httpHeaders),_e)}else{const $=require$$5;this._request=$.request(b(this._url,ut.httpHeaders),_e)}this._request.on("error",$=>{this._storedError=$,this._headersCapability.reject($)}),this._request.end()}}class st extends j{constructor(ut,_e,$){super(ut),this._httpHeaders={};for(const it in ut.httpHeaders){const et=ut.httpHeaders[it];et!==void 0&&(this._httpHeaders[it]=et)}this._httpHeaders.Range=`bytes=${_e}-${$-1}`;const at=it=>{if(it.statusCode===404){const et=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=et;return}this._setReadableStream(it)};if(this._request=null,this._url.protocol==="http:"){const it=require$$5;this._request=it.request(b(this._url,this._httpHeaders),at)}else{const it=require$$5;this._request=it.request(b(this._url,this._httpHeaders),at)}this._request.on("error",it=>{this._storedError=it}),this._request.end()}}class tt extends h{constructor(ut){super(ut);let _e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(_e=_e.replace(/^\//,""));const $=require$$5;$.lstat(_e,(at,it)=>{if(at){at.code==="ENOENT"&&(at=new o.MissingPDFException(`Missing PDF "${_e}".`)),this._storedError=at,this._headersCapability.reject(at);return}this._contentLength=it.size,this._setReadableStream($.createReadStream(_e)),this._headersCapability.resolve()})}}class nt extends j{constructor(ut,_e,$){super(ut);let at=decodeURIComponent(this._url.path);c.test(this._url.href)&&(at=at.replace(/^\//,""));const it=require$$5;this._setReadableStream(it.createReadStream(at,{start:_e,end:$-1}))}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var o=i(6),a=i(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",h=["butt","round","square"],j=["miter","round","bevel"],b=function(it,et="",ot=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ot)return URL.createObjectURL(new Blob([it],{type:et}));const rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let lt=`data:${et};base64,`;for(let ft=0,dt=it.length;ft<dt;ft+=3){const ct=it[ft]&255,Et=it[ft+1]&255,gt=it[ft+2]&255,Lt=ct>>2,Dt=(ct&3)<<4|Et>>4,Ft=ft+1<dt?(Et&15)<<2|gt>>6:64,bt=ft+2<dt?gt&63:64;lt+=rt[Lt]+rt[Dt]+rt[Ft]+rt[bt]}return lt},_=function(){const it=new Uint8Array([137,80,78,71,13,10,26,10]),et=12,ot=new Int32Array(256);for(let gt=0;gt<256;gt++){let Lt=gt;for(let Dt=0;Dt<8;Dt++)Lt=Lt&1?3988292384^Lt>>1&2147483647:Lt>>1&2147483647;ot[gt]=Lt}function rt(gt,Lt,Dt){let Ft=-1;for(let bt=Lt;bt<Dt;bt++){const _t=(Ft^gt[bt])&255,yt=ot[_t];Ft=Ft>>>8^yt}return Ft^-1}function lt(gt,Lt,Dt,Ft){let bt=Ft;const _t=Lt.length;Dt[bt]=_t>>24&255,Dt[bt+1]=_t>>16&255,Dt[bt+2]=_t>>8&255,Dt[bt+3]=_t&255,bt+=4,Dt[bt]=gt.charCodeAt(0)&255,Dt[bt+1]=gt.charCodeAt(1)&255,Dt[bt+2]=gt.charCodeAt(2)&255,Dt[bt+3]=gt.charCodeAt(3)&255,bt+=4,Dt.set(Lt,bt),bt+=Lt.length;const yt=rt(Dt,Ft+4,bt);Dt[bt]=yt>>24&255,Dt[bt+1]=yt>>16&255,Dt[bt+2]=yt>>8&255,Dt[bt+3]=yt&255}function ft(gt,Lt,Dt){let Ft=1,bt=0;for(let _t=Lt;_t<Dt;++_t)Ft=(Ft+(gt[_t]&255))%65521,bt=(bt+Ft)%65521;return bt<<16|Ft}function dt(gt){if(!a.isNodeJS)return ct(gt);try{const Lt=parseInt(process.versions.node)>=8?gt:Buffer.from(gt),Dt=require$$5.deflateSync(Lt,{level:9});return Dt instanceof Uint8Array?Dt:new Uint8Array(Dt)}catch(Lt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Lt)}return ct(gt)}function ct(gt){let Lt=gt.length;const Dt=65535,Ft=Math.ceil(Lt/Dt),bt=new Uint8Array(2+Lt+Ft*5+4);let _t=0;bt[_t++]=120,bt[_t++]=156;let yt=0;for(;Lt>Dt;)bt[_t++]=0,bt[_t++]=255,bt[_t++]=255,bt[_t++]=0,bt[_t++]=0,bt.set(gt.subarray(yt,yt+Dt),_t),_t+=Dt,yt+=Dt,Lt-=Dt;bt[_t++]=1,bt[_t++]=Lt&255,bt[_t++]=Lt>>8&255,bt[_t++]=~Lt&65535&255,bt[_t++]=(~Lt&65535)>>8&255,bt.set(gt.subarray(yt),_t),_t+=gt.length-yt;const jt=ft(gt,0,gt.length);return bt[_t++]=jt>>24&255,bt[_t++]=jt>>16&255,bt[_t++]=jt>>8&255,bt[_t++]=jt&255,bt}function Et(gt,Lt,Dt,Ft){const bt=gt.width,_t=gt.height;let yt,jt,St;const At=gt.data;switch(Lt){case a.ImageKind.GRAYSCALE_1BPP:jt=0,yt=1,St=bt+7>>3;break;case a.ImageKind.RGB_24BPP:jt=2,yt=8,St=bt*3;break;case a.ImageKind.RGBA_32BPP:jt=6,yt=8,St=bt*4;break;default:throw new Error("invalid format")}const mt=new Uint8Array((1+St)*_t);let ht=0,vt=0;for(let It=0;It<_t;++It)mt[ht++]=0,mt.set(At.subarray(vt,vt+St),ht),vt+=St,ht+=St;if(Lt===a.ImageKind.GRAYSCALE_1BPP&&Ft){ht=0;for(let It=0;It<_t;It++){ht++;for(let Ht=0;Ht<St;Ht++)mt[ht++]^=255}}const Rt=new Uint8Array([bt>>24&255,bt>>16&255,bt>>8&255,bt&255,_t>>24&255,_t>>16&255,_t>>8&255,_t&255,yt,jt,0,0,0]),Pt=dt(mt),Bt=it.length+et*3+Rt.length+Pt.length,Ut=new Uint8Array(Bt);let Nt=0;return Ut.set(it,Nt),Nt+=it.length,lt("IHDR",Rt,Ut,Nt),Nt+=et+Rt.length,lt("IDATA",Pt,Ut,Nt),Nt+=et+Pt.length,lt("IEND",new Uint8Array(0),Ut,Nt),b(Ut,"image/png",Dt)}return function(Lt,Dt,Ft){const bt=Lt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Lt.kind;return Et(Lt,bt,Dt,Ft)}}();class st{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(et,ot){this.x=et,this.y=ot}}function tt(it){let et=[];const ot=[];for(const rt of it){if(rt.fn==="save"){et.push({fnId:92,fn:"group",items:[]}),ot.push(et),et=et.at(-1).items;continue}rt.fn==="restore"?et=ot.pop():et.push(rt)}return et}function nt(it){if(Number.isInteger(it))return it.toString();const et=it.toFixed(10);let ot=et.length-1;if(et[ot]!=="0")return et;do ot--;while(et[ot]==="0");return et.substring(0,et[ot]==="."?ot:ot+1)}function xt(it){if(it[4]===0&&it[5]===0){if(it[1]===0&&it[2]===0)return it[0]===1&&it[3]===1?"":`scale(${nt(it[0])} ${nt(it[3])})`;if(it[0]===it[3]&&it[1]===-it[2]){const et=Math.acos(it[0])*180/Math.PI;return`rotate(${nt(et)})`}}else if(it[0]===1&&it[1]===0&&it[2]===0&&it[3]===1)return`translate(${nt(it[4])} ${nt(it[5])})`;return`matrix(${nt(it[0])} ${nt(it[1])} ${nt(it[2])} ${nt(it[3])} ${nt(it[4])} ${nt(it[5])})`}let ut=0,_e=0,$=0;class at{constructor(et,ot,rt=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new st,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=et,this.objs=ot,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!rt,this._operatorIdMapping=[];for(const lt in a.OPS)this._operatorIdMapping[a.OPS[lt]]=lt}getObject(et,ot=null){return typeof et=="string"?et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et):ot}save(){this.transformStack.push(this.transformMatrix);const et=this.current;this.extraStack.push(et),this.current=et.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(et){this.save(),this.executeOpTree(et),this.restore()}loadDependencies(et){const ot=et.fnArray,rt=et.argsArray;for(let lt=0,ft=ot.length;lt<ft;lt++)if(ot[lt]===a.OPS.dependency)for(const dt of rt[lt]){const ct=dt.startsWith("g_")?this.commonObjs:this.objs,Et=new Promise(gt=>{ct.get(dt,gt)});this.current.dependencies.push(Et)}return Promise.all(this.current.dependencies)}transform(et,ot,rt,lt,ft,dt){const ct=[et,ot,rt,lt,ft,dt];this.transformMatrix=a.Util.transform(this.transformMatrix,ct),this.tgrp=null}getSVG(et,ot){this.viewport=ot;const rt=this._initialize(ot);return this.loadDependencies(et).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(et)),rt))}convertOpList(et){const ot=this._operatorIdMapping,rt=et.argsArray,lt=et.fnArray,ft=[];for(let dt=0,ct=lt.length;dt<ct;dt++){const Et=lt[dt];ft.push({fnId:Et,fn:ot[Et],args:rt[dt]})}return tt(ft)}executeOpTree(et){for(const ot of et){const rt=ot.fn,lt=ot.fnId,ft=ot.args;switch(lt|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(ft);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(ft[0],ft[1]);break;case a.OPS.setFont:this.setFont(ft);break;case a.OPS.showText:this.showText(ft[0]);break;case a.OPS.showSpacedText:this.showText(ft[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(ft[0],ft[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(ft[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(ft[0]);break;case a.OPS.setHScale:this.setHScale(ft[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case a.OPS.setTextRise:this.setTextRise(ft[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(ft[0]);break;case a.OPS.setLineWidth:this.setLineWidth(ft[0]);break;case a.OPS.setLineJoin:this.setLineJoin(ft[0]);break;case a.OPS.setLineCap:this.setLineCap(ft[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(ft[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(ft[0],ft[1],ft[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ft[0],ft[1],ft[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(ft);break;case a.OPS.setFillColorN:this.setFillColorN(ft);break;case a.OPS.shadingFill:this.shadingFill(ft[0]);break;case a.OPS.setDash:this.setDash(ft[0],ft[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(ft[0]);break;case a.OPS.setFlatness:this.setFlatness(ft[0]);break;case a.OPS.setGState:this.setGState(ft[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(ft[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ft[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ft[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ft[0],ft[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);break;case a.OPS.constructPath:this.constructPath(ft[0],ft[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(ot.items);break;default:(0,a.warn)(`Unimplemented operator ${rt}`);break}}}setWordSpacing(et){this.current.wordSpacing=et}setCharSpacing(et){this.current.charSpacing=et}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(et,ot,rt,lt,ft,dt){const ct=this.current;ct.textMatrix=ct.lineMatrix=[et,ot,rt,lt,ft,dt],ct.textMatrixScale=Math.hypot(et,ot),ct.x=ct.lineX=0,ct.y=ct.lineY=0,ct.xcoords=[],ct.ycoords=[],ct.tspan=this.svgFactory.createElement("svg:tspan"),ct.tspan.setAttributeNS(null,"font-family",ct.fontFamily),ct.tspan.setAttributeNS(null,"font-size",`${nt(ct.fontSize)}px`),ct.tspan.setAttributeNS(null,"y",nt(-ct.y)),ct.txtElement=this.svgFactory.createElement("svg:text"),ct.txtElement.append(ct.tspan)}beginText(){const et=this.current;et.x=et.lineX=0,et.y=et.lineY=0,et.textMatrix=a.IDENTITY_MATRIX,et.lineMatrix=a.IDENTITY_MATRIX,et.textMatrixScale=1,et.tspan=this.svgFactory.createElement("svg:tspan"),et.txtElement=this.svgFactory.createElement("svg:text"),et.txtgrp=this.svgFactory.createElement("svg:g"),et.xcoords=[],et.ycoords=[]}moveText(et,ot){const rt=this.current;rt.x=rt.lineX+=et,rt.y=rt.lineY+=ot,rt.xcoords=[],rt.ycoords=[],rt.tspan=this.svgFactory.createElement("svg:tspan"),rt.tspan.setAttributeNS(null,"font-family",rt.fontFamily),rt.tspan.setAttributeNS(null,"font-size",`${nt(rt.fontSize)}px`),rt.tspan.setAttributeNS(null,"y",nt(-rt.y))}showText(et){const ot=this.current,rt=ot.font,lt=ot.fontSize;if(lt===0)return;const ft=ot.fontSizeScale,dt=ot.charSpacing,ct=ot.wordSpacing,Et=ot.fontDirection,gt=ot.textHScale*Et,Lt=rt.vertical,Dt=Lt?1:-1,Ft=rt.defaultVMetrics,bt=lt*ot.fontMatrix[0];let _t=0;for(const St of et){if(St===null){_t+=Et*ct;continue}else if(typeof St=="number"){_t+=Dt*St*lt/1e3;continue}const At=(St.isSpace?ct:0)+dt,mt=St.fontChar;let ht,vt,Rt=St.width;if(Lt){let Bt;const Ut=St.vmetric||Ft;Bt=St.vmetric?Ut[1]:Rt*.5,Bt=-Bt*bt;const Nt=Ut[2]*bt;Rt=Ut?-Ut[0]:Rt,ht=Bt/ft,vt=(_t+Nt)/ft}else ht=_t/ft,vt=0;(St.isInFont||rt.missingFile)&&(ot.xcoords.push(ot.x+ht),Lt&&ot.ycoords.push(-ot.y+vt),ot.tspan.textContent+=mt);const Pt=Lt?Rt*bt-At*Et:Rt*bt+At*Et;_t+=Pt}ot.tspan.setAttributeNS(null,"x",ot.xcoords.map(nt).join(" ")),Lt?ot.tspan.setAttributeNS(null,"y",ot.ycoords.map(nt).join(" ")):ot.tspan.setAttributeNS(null,"y",nt(-ot.y)),Lt?ot.y-=_t:ot.x+=_t*gt,ot.tspan.setAttributeNS(null,"font-family",ot.fontFamily),ot.tspan.setAttributeNS(null,"font-size",`${nt(ot.fontSize)}px`),ot.fontStyle!==c.fontStyle&&ot.tspan.setAttributeNS(null,"font-style",ot.fontStyle),ot.fontWeight!==c.fontWeight&&ot.tspan.setAttributeNS(null,"font-weight",ot.fontWeight);const yt=ot.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(yt===a.TextRenderingMode.FILL||yt===a.TextRenderingMode.FILL_STROKE?(ot.fillColor!==c.fillColor&&ot.tspan.setAttributeNS(null,"fill",ot.fillColor),ot.fillAlpha<1&&ot.tspan.setAttributeNS(null,"fill-opacity",ot.fillAlpha)):ot.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?ot.tspan.setAttributeNS(null,"fill","transparent"):ot.tspan.setAttributeNS(null,"fill","none"),yt===a.TextRenderingMode.STROKE||yt===a.TextRenderingMode.FILL_STROKE){const St=1/(ot.textMatrixScale||1);this._setStrokeAttributes(ot.tspan,St)}let jt=ot.textMatrix;ot.textRise!==0&&(jt=jt.slice(),jt[5]+=ot.textRise),ot.txtElement.setAttributeNS(null,"transform",`${xt(jt)} scale(${nt(gt)}, -1)`),ot.txtElement.setAttributeNS(d,"xml:space","preserve"),ot.txtElement.append(ot.tspan),ot.txtgrp.append(ot.txtElement),this._ensureTransformGroup().append(ot.txtElement)}setLeadingMoveText(et,ot){this.setLeading(-ot),this.moveText(et,ot)}addFontStyle(et){if(!et.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ot=b(et.data,et.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${et.loadedName}"; src: url(${ot}); }
`}setFont(et){const ot=this.current,rt=this.commonObjs.get(et[0]);let lt=et[1];ot.font=rt,this.embedFonts&&!rt.missingFile&&!this.embeddedFonts[rt.loadedName]&&(this.addFontStyle(rt),this.embeddedFonts[rt.loadedName]=rt),ot.fontMatrix=rt.fontMatrix||a.FONT_IDENTITY_MATRIX;let ft="normal";rt.black?ft="900":rt.bold&&(ft="bold");const dt=rt.italic?"italic":"normal";lt<0?(lt=-lt,ot.fontDirection=-1):ot.fontDirection=1,ot.fontSize=lt,ot.fontFamily=rt.loadedName,ot.fontWeight=ft,ot.fontStyle=dt,ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.tspan.setAttributeNS(null,"y",nt(-ot.y)),ot.xcoords=[],ot.ycoords=[]}endText(){var ot;const et=this.current;et.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((ot=et.txtElement)!=null&&ot.hasChildNodes())&&(et.element=et.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(et){et>0&&(this.current.lineWidth=et)}setLineCap(et){this.current.lineCap=h[et]}setLineJoin(et){this.current.lineJoin=j[et]}setMiterLimit(et){this.current.miterLimit=et}setStrokeAlpha(et){this.current.strokeAlpha=et}setStrokeRGBColor(et,ot,rt){this.current.strokeColor=a.Util.makeHexColor(et,ot,rt)}setFillAlpha(et){this.current.fillAlpha=et}setFillRGBColor(et,ot,rt){this.current.fillColor=a.Util.makeHexColor(et,ot,rt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(et){this.current.strokeColor=this._makeColorN_Pattern(et)}setFillColorN(et){this.current.fillColor=this._makeColorN_Pattern(et)}shadingFill(et){const{width:ot,height:rt}=this.viewport,lt=a.Util.inverseTransform(this.transformMatrix),[ft,dt,ct,Et]=a.Util.getAxialAlignedBoundingBox([0,0,ot,rt],lt),gt=this.svgFactory.createElement("svg:rect");gt.setAttributeNS(null,"x",ft),gt.setAttributeNS(null,"y",dt),gt.setAttributeNS(null,"width",ct-ft),gt.setAttributeNS(null,"height",Et-dt),gt.setAttributeNS(null,"fill",this._makeShadingPattern(et)),this.current.fillAlpha<1&&gt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(gt)}_makeColorN_Pattern(et){return et[0]==="TilingPattern"?this._makeTilingPattern(et):this._makeShadingPattern(et)}_makeTilingPattern(et){const ot=et[1],rt=et[2],lt=et[3]||a.IDENTITY_MATRIX,[ft,dt,ct,Et]=et[4],gt=et[5],Lt=et[6],Dt=et[7],Ft=`shading${$++}`,[bt,_t,yt,jt]=a.Util.normalizeRect([...a.Util.applyTransform([ft,dt],lt),...a.Util.applyTransform([ct,Et],lt)]),[St,At]=a.Util.singularValueDecompose2dScale(lt),mt=gt*St,ht=Lt*At,vt=this.svgFactory.createElement("svg:pattern");vt.setAttributeNS(null,"id",Ft),vt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),vt.setAttributeNS(null,"width",mt),vt.setAttributeNS(null,"height",ht),vt.setAttributeNS(null,"x",`${bt}`),vt.setAttributeNS(null,"y",`${_t}`);const Rt=this.svg,Pt=this.transformMatrix,Bt=this.current.fillColor,Ut=this.current.strokeColor,Nt=this.svgFactory.create(yt-bt,jt-_t);if(this.svg=Nt,this.transformMatrix=lt,Dt===2){const It=a.Util.makeHexColor(...ot);this.current.fillColor=It,this.current.strokeColor=It}return this.executeOpTree(this.convertOpList(rt)),this.svg=Rt,this.transformMatrix=Pt,this.current.fillColor=Bt,this.current.strokeColor=Ut,vt.append(Nt.childNodes[0]),this.defs.append(vt),`url(#${Ft})`}_makeShadingPattern(et){switch(typeof et=="string"&&(et=this.objs.get(et)),et[0]){case"RadialAxial":const ot=`shading${$++}`,rt=et[3];let lt;switch(et[1]){case"axial":const ft=et[4],dt=et[5];lt=this.svgFactory.createElement("svg:linearGradient"),lt.setAttributeNS(null,"id",ot),lt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),lt.setAttributeNS(null,"x1",ft[0]),lt.setAttributeNS(null,"y1",ft[1]),lt.setAttributeNS(null,"x2",dt[0]),lt.setAttributeNS(null,"y2",dt[1]);break;case"radial":const ct=et[4],Et=et[5],gt=et[6],Lt=et[7];lt=this.svgFactory.createElement("svg:radialGradient"),lt.setAttributeNS(null,"id",ot),lt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),lt.setAttributeNS(null,"cx",Et[0]),lt.setAttributeNS(null,"cy",Et[1]),lt.setAttributeNS(null,"r",Lt),lt.setAttributeNS(null,"fx",ct[0]),lt.setAttributeNS(null,"fy",ct[1]),lt.setAttributeNS(null,"fr",gt);break;default:throw new Error(`Unknown RadialAxial type: ${et[1]}`)}for(const ft of rt){const dt=this.svgFactory.createElement("svg:stop");dt.setAttributeNS(null,"offset",ft[0]),dt.setAttributeNS(null,"stop-color",ft[1]),lt.append(dt)}return this.defs.append(lt),`url(#${ot})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${et[0]}`)}}setDash(et,ot){this.current.dashArray=et,this.current.dashPhase=ot}constructPath(et,ot){const rt=this.current;let lt=rt.x,ft=rt.y,dt=[],ct=0;for(const Et of et)switch(Et|0){case a.OPS.rectangle:lt=ot[ct++],ft=ot[ct++];const gt=ot[ct++],Lt=ot[ct++],Dt=lt+gt,Ft=ft+Lt;dt.push("M",nt(lt),nt(ft),"L",nt(Dt),nt(ft),"L",nt(Dt),nt(Ft),"L",nt(lt),nt(Ft),"Z");break;case a.OPS.moveTo:lt=ot[ct++],ft=ot[ct++],dt.push("M",nt(lt),nt(ft));break;case a.OPS.lineTo:lt=ot[ct++],ft=ot[ct++],dt.push("L",nt(lt),nt(ft));break;case a.OPS.curveTo:lt=ot[ct+4],ft=ot[ct+5],dt.push("C",nt(ot[ct]),nt(ot[ct+1]),nt(ot[ct+2]),nt(ot[ct+3]),nt(lt),nt(ft)),ct+=6;break;case a.OPS.curveTo2:dt.push("C",nt(lt),nt(ft),nt(ot[ct]),nt(ot[ct+1]),nt(ot[ct+2]),nt(ot[ct+3])),lt=ot[ct+2],ft=ot[ct+3],ct+=4;break;case a.OPS.curveTo3:lt=ot[ct+2],ft=ot[ct+3],dt.push("C",nt(ot[ct]),nt(ot[ct+1]),nt(lt),nt(ft),nt(lt),nt(ft)),ct+=4;break;case a.OPS.closePath:dt.push("Z");break}dt=dt.join(" "),rt.path&&et.length>0&&et[0]!==a.OPS.rectangle&&et[0]!==a.OPS.moveTo?dt=rt.path.getAttributeNS(null,"d")+dt:(rt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(rt.path)),rt.path.setAttributeNS(null,"d",dt),rt.path.setAttributeNS(null,"fill","none"),rt.element=rt.path,rt.setCurrentPoint(lt,ft)}endPath(){const et=this.current;if(et.path=null,!this.pendingClip)return;if(!et.element){this.pendingClip=null;return}const ot=`clippath${ut++}`,rt=this.svgFactory.createElement("svg:clipPath");rt.setAttributeNS(null,"id",ot),rt.setAttributeNS(null,"transform",xt(this.transformMatrix));const lt=et.element.cloneNode(!0);if(this.pendingClip==="evenodd"?lt.setAttributeNS(null,"clip-rule","evenodd"):lt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,rt.append(lt),this.defs.append(rt),et.activeClipUrl){et.clipGroup=null;for(const ft of this.extraStack)ft.clipGroup=null;rt.setAttributeNS(null,"clip-path",et.activeClipUrl)}et.activeClipUrl=`url(#${ot})`,this.tgrp=null}clip(et){this.pendingClip=et}closePath(){const et=this.current;if(et.path){const ot=`${et.path.getAttributeNS(null,"d")}Z`;et.path.setAttributeNS(null,"d",ot)}}setLeading(et){this.current.leading=-et}setTextRise(et){this.current.textRise=et}setTextRenderingMode(et){this.current.textRenderingMode=et}setHScale(et){this.current.textHScale=et/100}setRenderingIntent(et){}setFlatness(et){}setGState(et){for(const[ot,rt]of et)switch(ot){case"LW":this.setLineWidth(rt);break;case"LC":this.setLineCap(rt);break;case"LJ":this.setLineJoin(rt);break;case"ML":this.setMiterLimit(rt);break;case"D":this.setDash(rt[0],rt[1]);break;case"RI":this.setRenderingIntent(rt);break;case"FL":this.setFlatness(rt);break;case"Font":this.setFont(rt);break;case"CA":this.setStrokeAlpha(rt);break;case"ca":this.setFillAlpha(rt);break;default:(0,a.warn)(`Unimplemented graphic state operator ${ot}`);break}}fill(){const et=this.current;et.element&&(et.element.setAttributeNS(null,"fill",et.fillColor),et.element.setAttributeNS(null,"fill-opacity",et.fillAlpha),this.endPath())}stroke(){const et=this.current;et.element&&(this._setStrokeAttributes(et.element),et.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(et,ot=1){const rt=this.current;let lt=rt.dashArray;ot!==1&&lt.length>0&&(lt=lt.map(function(ft){return ot*ft})),et.setAttributeNS(null,"stroke",rt.strokeColor),et.setAttributeNS(null,"stroke-opacity",rt.strokeAlpha),et.setAttributeNS(null,"stroke-miterlimit",nt(rt.miterLimit)),et.setAttributeNS(null,"stroke-linecap",rt.lineCap),et.setAttributeNS(null,"stroke-linejoin",rt.lineJoin),et.setAttributeNS(null,"stroke-width",nt(ot*rt.lineWidth)+"px"),et.setAttributeNS(null,"stroke-dasharray",lt.map(nt).join(" ")),et.setAttributeNS(null,"stroke-dashoffset",nt(ot*rt.dashPhase)+"px")}eoFill(){var et;(et=this.current.element)==null||et.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var et;(et=this.current.element)==null||et.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const et=this.svgFactory.createElement("svg:rect");et.setAttributeNS(null,"x","0"),et.setAttributeNS(null,"y","0"),et.setAttributeNS(null,"width","1px"),et.setAttributeNS(null,"height","1px"),et.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(et)}paintImageXObject(et){const ot=this.getObject(et);if(!ot){(0,a.warn)(`Dependent image with object ID ${et} is not ready yet`);return}this.paintInlineImageXObject(ot)}paintInlineImageXObject(et,ot){const rt=et.width,lt=et.height,ft=_(et,this.forceDataSchema,!!ot),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x","0"),dt.setAttributeNS(null,"y","0"),dt.setAttributeNS(null,"width",nt(rt)),dt.setAttributeNS(null,"height",nt(lt)),this.current.element=dt,this.clip("nonzero");const ct=this.svgFactory.createElement("svg:image");ct.setAttributeNS(g,"xlink:href",ft),ct.setAttributeNS(null,"x","0"),ct.setAttributeNS(null,"y",nt(-lt)),ct.setAttributeNS(null,"width",nt(rt)+"px"),ct.setAttributeNS(null,"height",nt(lt)+"px"),ct.setAttributeNS(null,"transform",`scale(${nt(1/rt)} ${nt(-1/lt)})`),ot?ot.append(ct):this._ensureTransformGroup().append(ct)}paintImageMaskXObject(et){const ot=this.getObject(et.data,et);if(ot.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const rt=this.current,lt=ot.width,ft=ot.height,dt=rt.fillColor;rt.maskId=`mask${_e++}`;const ct=this.svgFactory.createElement("svg:mask");ct.setAttributeNS(null,"id",rt.maskId);const Et=this.svgFactory.createElement("svg:rect");Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y","0"),Et.setAttributeNS(null,"width",nt(lt)),Et.setAttributeNS(null,"height",nt(ft)),Et.setAttributeNS(null,"fill",dt),Et.setAttributeNS(null,"mask",`url(#${rt.maskId})`),this.defs.append(ct),this._ensureTransformGroup().append(Et),this.paintInlineImageXObject(ot,ct)}paintFormXObjectBegin(et,ot){if(Array.isArray(et)&&et.length===6&&this.transform(et[0],et[1],et[2],et[3],et[4],et[5]),ot){const rt=ot[2]-ot[0],lt=ot[3]-ot[1],ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x",ot[0]),ft.setAttributeNS(null,"y",ot[1]),ft.setAttributeNS(null,"width",nt(rt)),ft.setAttributeNS(null,"height",nt(lt)),this.current.element=ft,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(et){const ot=this.svgFactory.create(et.width,et.height),rt=this.svgFactory.createElement("svg:defs");ot.append(rt),this.defs=rt;const lt=this.svgFactory.createElement("svg:g");return lt.setAttributeNS(null,"transform",xt(et.transform)),ot.append(lt),this.svg=lt,ot}_ensureClipGroup(){if(!this.current.clipGroup){const et=this.svgFactory.createElement("svg:g");et.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(et),this.current.clipGroup=et}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",xt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=at},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class i{static textContent(a){const c=[],d={items:c,styles:Object.create(null)};function g(h){var _;if(!h)return;let j=null;const b=h.name;if(b==="#text")j=h.value;else if(i.shouldBuildText(b))(_=h==null?void 0:h.attributes)!=null&&_.textContent?j=h.attributes.textContent:h.value&&(j=h.value);else return;if(j!==null&&c.push({str:j}),!!h.children)for(const st of h.children)g(st)}return g(a),d}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}s.XfaText=i},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=xt,s.updateTextLayer=ut;var o=i(1),a=i(6);const c=1e5,d=30,g=.8,h=new Map;function j(_e,$){let at;if($&&o.FeatureTest.isOffscreenCanvasSupported)at=new OffscreenCanvas(_e,_e).getContext("2d",{alpha:!1});else{const it=document.createElement("canvas");it.width=it.height=_e,at=it.getContext("2d",{alpha:!1})}return at}function b(_e,$){const at=h.get(_e);if(at)return at;const it=j(d,$);it.font=`${d}px ${_e}`;const et=it.measureText("");let ot=et.fontBoundingBoxAscent,rt=Math.abs(et.fontBoundingBoxDescent);if(ot){const ft=ot/(ot+rt);return h.set(_e,ft),it.canvas.width=it.canvas.height=0,ft}it.strokeStyle="red",it.clearRect(0,0,d,d),it.strokeText("g",0,0);let lt=it.getImageData(0,0,d,d).data;rt=0;for(let ft=lt.length-1-3;ft>=0;ft-=4)if(lt[ft]>0){rt=Math.ceil(ft/4/d);break}it.clearRect(0,0,d,d),it.strokeText("A",0,d),lt=it.getImageData(0,0,d,d).data,ot=0;for(let ft=0,dt=lt.length;ft<dt;ft+=4)if(lt[ft]>0){ot=d-Math.floor(ft/4/d);break}if(it.canvas.width=it.canvas.height=0,ot){const ft=ot/(ot+rt);return h.set(_e,ft),ft}return h.set(_e,g),g}function _(_e,$,at){const it=document.createElement("span"),et={angle:0,canvasWidth:0,hasText:$.str!=="",hasEOL:$.hasEOL,fontSize:0};_e._textDivs.push(it);const ot=o.Util.transform(_e._transform,$.transform);let rt=Math.atan2(ot[1],ot[0]);const lt=at[$.fontName];lt.vertical&&(rt+=Math.PI/2);const ft=Math.hypot(ot[2],ot[3]),dt=ft*b(lt.fontFamily,_e._isOffscreenCanvasSupported);let ct,Et;rt===0?(ct=ot[4],Et=ot[5]-dt):(ct=ot[4]+dt*Math.sin(rt),Et=ot[5]-dt*Math.cos(rt));const gt="calc(var(--scale-factor)*",Lt=it.style;_e._container===_e._rootContainer?(Lt.left=`${(100*ct/_e._pageWidth).toFixed(2)}%`,Lt.top=`${(100*Et/_e._pageHeight).toFixed(2)}%`):(Lt.left=`${gt}${ct.toFixed(2)}px)`,Lt.top=`${gt}${Et.toFixed(2)}px)`),Lt.fontSize=`${gt}${ft.toFixed(2)}px)`,Lt.fontFamily=lt.fontFamily,et.fontSize=ft,it.setAttribute("role","presentation"),it.textContent=$.str,it.dir=$.dir,_e._fontInspectorEnabled&&(it.dataset.fontName=$.fontName),rt!==0&&(et.angle=rt*(180/Math.PI));let Dt=!1;if($.str.length>1)Dt=!0;else if($.str!==" "&&$.transform[0]!==$.transform[3]){const Ft=Math.abs($.transform[0]),bt=Math.abs($.transform[3]);Ft!==bt&&Math.max(Ft,bt)/Math.min(Ft,bt)>1.5&&(Dt=!0)}Dt&&(et.canvasWidth=lt.vertical?$.height:$.width),_e._textDivProperties.set(it,et),_e._isReadableStream&&_e._layoutText(it)}function st(_e){const{div:$,scale:at,properties:it,ctx:et,prevFontSize:ot,prevFontFamily:rt}=_e,{style:lt}=$;let ft="";if(it.canvasWidth!==0&&it.hasText){const{fontFamily:dt}=lt,{canvasWidth:ct,fontSize:Et}=it;(ot!==Et||rt!==dt)&&(et.font=`${Et*at}px ${dt}`,_e.prevFontSize=Et,_e.prevFontFamily=dt);const{width:gt}=et.measureText($.textContent);gt>0&&(ft=`scaleX(${ct*at/gt})`)}it.angle!==0&&(ft=`rotate(${it.angle}deg) ${ft}`),ft.length>0&&(lt.transform=ft)}function tt(_e){if(_e._canceled)return;const $=_e._textDivs,at=_e._capability;if($.length>c){at.resolve();return}if(!_e._isReadableStream)for(const et of $)_e._layoutText(et);at.resolve()}class nt{constructor({textContentSource:$,container:at,viewport:it,textDivs:et,textDivProperties:ot,textContentItemsStr:rt,isOffscreenCanvasSupported:lt}){var gt;this._textContentSource=$,this._isReadableStream=$ instanceof ReadableStream,this._container=this._rootContainer=at,this._textDivs=et||[],this._textContentItemsStr=rt||[],this._isOffscreenCanvasSupported=lt,this._fontInspectorEnabled=!!((gt=globalThis.FontInspector)!=null&&gt.enabled),this._reader=null,this._textDivProperties=ot||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:it.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:j(0,lt)};const{pageWidth:ft,pageHeight:dt,pageX:ct,pageY:Et}=it.rawDims;this._transform=[1,0,0,-1,-ct,Et+dt],this._pageWidth=ft,this._pageHeight=dt,(0,a.setLayerDimensions)(at,it),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems($,at){for(const it of $){if(it.str===void 0){if(it.type==="beginMarkedContentProps"||it.type==="beginMarkedContent"){const et=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),it.id!==null&&this._container.setAttribute("id",`${it.id}`),et.append(this._container)}else it.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(it.str),_(this,it,at)}}_layoutText($){const at=this._layoutTextParams.properties=this._textDivProperties.get($);if(this._layoutTextParams.div=$,st(this._layoutTextParams),at.hasText&&this._container.append($),at.hasEOL){const it=document.createElement("br");it.setAttribute("role","presentation"),this._container.append(it)}}_render(){const $=new o.PromiseCapability;let at=Object.create(null);if(this._isReadableStream){const it=()=>{this._reader.read().then(({value:et,done:ot})=>{if(ot){$.resolve();return}Object.assign(at,et.styles),this._processItems(et.items,at),it()},$.reject)};this._reader=this._textContentSource.getReader(),it()}else if(this._textContentSource){const{items:it,styles:et}=this._textContentSource;this._processItems(it,et),$.resolve()}else throw new Error('No "textContentSource" parameter specified.');$.promise.then(()=>{at=null,tt(this)},this._capability.reject)}}s.TextLayerRenderTask=nt;function xt(_e){!_e.textContentSource&&(_e.textContent||_e.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_e.textContentSource=_e.textContent||_e.textContentStream);const{container:$,viewport:at}=_e,it=getComputedStyle($),et=it.getPropertyValue("visibility"),ot=parseFloat(it.getPropertyValue("--scale-factor"));et==="visible"&&(!ot||Math.abs(ot-at.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const rt=new nt(_e);return rt._render(),rt}function ut({container:_e,viewport:$,textDivs:at,textDivProperties:it,isOffscreenCanvasSupported:et,mustRotate:ot=!0,mustRescale:rt=!0}){if(ot&&(0,a.setLayerDimensions)(_e,{rotation:$.rotation}),rt){const lt=j(0,et),dt={prevFontSize:null,prevFontFamily:null,div:null,scale:$.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:lt};for(const ct of at)dt.properties=it.get(ct),dt.div=ct,st(dt)}}},(e,s,i)=>{var b,_,st,tt,nt,xt,ut,_e,$,at,it,Ns,es,Ts,Ms;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var o=i(1),a=i(4),c=i(28),d=i(33),g=i(6),h=i(34);const ft=class ft{constructor({uiManager:ct,pageIndex:Et,div:gt,accessibilityManager:Lt,annotationLayer:Dt,viewport:Ft,l10n:bt}){on(this,it);on(this,b);on(this,_,!1);on(this,st,null);on(this,tt,this.pointerup.bind(this));on(this,nt,this.pointerdown.bind(this));on(this,xt,new Map);on(this,ut,!1);on(this,_e,!1);on(this,$,!1);on(this,at);const _t=[c.FreeTextEditor,d.InkEditor,h.StampEditor];if(!ft._initialized){ft._initialized=!0;for(const yt of _t)yt.initialize(bt)}ct.registerEditorTypes(_t),ln(this,at,ct),this.pageIndex=Et,this.div=gt,ln(this,b,Lt),ln(this,st,Dt),this.viewport=Ft,pt(this,at).addLayer(this)}get isEmpty(){return pt(this,xt).size===0}updateToolbar(ct){pt(this,at).updateToolbar(ct)}updateMode(ct=pt(this,at).getMode()){Zt(this,it,Ms).call(this),ct===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ct!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ct===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ct===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ct===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ct){if(!ct&&pt(this,at).getMode()!==o.AnnotationEditorType.INK)return;if(!ct){for(const gt of pt(this,xt).values())if(gt.isEmpty()){gt.setInBackground();return}}Zt(this,it,es).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ct){pt(this,at).setEditingState(ct)}addCommands(ct){pt(this,at).addCommands(ct)}enable(){this.div.style.pointerEvents="auto";const ct=new Set;for(const gt of pt(this,xt).values())gt.enableEditing(),gt.annotationElementId&&ct.add(gt.annotationElementId);if(!pt(this,st))return;const Et=pt(this,st).getEditableAnnotations();for(const gt of Et){if(gt.hide(),pt(this,at).isDeletedAnnotationElement(gt.data.id)||ct.has(gt.data.id))continue;const Lt=this.deserialize(gt);Lt&&(this.addOrRebuild(Lt),Lt.enableEditing())}}disable(){var Et;ln(this,$,!0),this.div.style.pointerEvents="none";const ct=new Set;for(const gt of pt(this,xt).values()){if(gt.disableEditing(),!gt.annotationElementId||gt.serialize()!==null){ct.add(gt.annotationElementId);continue}(Et=this.getEditableAnnotation(gt.annotationElementId))==null||Et.show(),gt.remove()}if(pt(this,st)){const gt=pt(this,st).getEditableAnnotations();for(const Lt of gt){const{id:Dt}=Lt.data;ct.has(Dt)||pt(this,at).isDeletedAnnotationElement(Dt)||Lt.show()}}Zt(this,it,Ms).call(this),this.isEmpty&&(this.div.hidden=!0),ln(this,$,!1)}getEditableAnnotation(ct){var Et;return((Et=pt(this,st))==null?void 0:Et.getEditableAnnotation(ct))||null}setActiveEditor(ct){pt(this,at).getActive()!==ct&&pt(this,at).setActiveEditor(ct)}enableClick(){this.div.addEventListener("pointerdown",pt(this,nt)),this.div.addEventListener("pointerup",pt(this,tt))}disableClick(){this.div.removeEventListener("pointerdown",pt(this,nt)),this.div.removeEventListener("pointerup",pt(this,tt))}attach(ct){pt(this,xt).set(ct.id,ct);const{annotationElementId:Et}=ct;Et&&pt(this,at).isDeletedAnnotationElement(Et)&&pt(this,at).removeDeletedAnnotationElement(ct)}detach(ct){var Et;pt(this,xt).delete(ct.id),(Et=pt(this,b))==null||Et.removePointerInTextLayer(ct.contentDiv),!pt(this,$)&&ct.annotationElementId&&pt(this,at).addDeletedAnnotationElement(ct)}remove(ct){this.detach(ct),pt(this,at).removeEditor(ct),ct.div.contains(document.activeElement)&&setTimeout(()=>{pt(this,at).focusMainContainer()},0),ct.div.remove(),ct.isAttachedToDOM=!1,pt(this,_e)||this.addInkEditorIfNeeded(!1)}changeParent(ct){var Et;ct.parent!==this&&(ct.annotationElementId&&(pt(this,at).addDeletedAnnotationElement(ct.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(ct),ct.annotationElementId=null),this.attach(ct),(Et=ct.parent)==null||Et.detach(ct),ct.setParent(this),ct.div&&ct.isAttachedToDOM&&(ct.div.remove(),this.div.append(ct.div)))}add(ct){if(this.changeParent(ct),pt(this,at).addEditor(ct),this.attach(ct),!ct.isAttachedToDOM){const Et=ct.render();this.div.append(Et),ct.isAttachedToDOM=!0}ct.fixAndSetPosition(),ct.onceAdded(),pt(this,at).addToAnnotationStorage(ct)}moveEditorInDOM(ct){var gt;if(!ct.isAttachedToDOM)return;const{activeElement:Et}=document;ct.div.contains(Et)&&(ct._focusEventsAllowed=!1,setTimeout(()=>{ct.div.contains(document.activeElement)?ct._focusEventsAllowed=!0:(ct.div.addEventListener("focusin",()=>{ct._focusEventsAllowed=!0},{once:!0}),Et.focus())},0)),ct._structTreeParentId=(gt=pt(this,b))==null?void 0:gt.moveElementInDOM(this.div,ct.div,ct.contentDiv,!0)}addOrRebuild(ct){ct.needsToBeRebuilt()?ct.rebuild():this.add(ct)}addUndoableEditor(ct){const Et=()=>ct._uiManager.rebuild(ct),gt=()=>{ct.remove()};this.addCommands({cmd:Et,undo:gt,mustExec:!1})}getNextId(){return pt(this,at).getId()}pasteEditor(ct,Et){pt(this,at).updateToolbar(ct),pt(this,at).updateMode(ct);const{offsetX:gt,offsetY:Lt}=Zt(this,it,Ts).call(this),Dt=this.getNextId(),Ft=Zt(this,it,Ns).call(this,{parent:this,id:Dt,x:gt,y:Lt,uiManager:pt(this,at),isCentered:!0,...Et});Ft&&this.add(Ft)}deserialize(ct){switch(ct.annotationType??ct.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(ct,this,pt(this,at));case o.AnnotationEditorType.INK:return d.InkEditor.deserialize(ct,this,pt(this,at));case o.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(ct,this,pt(this,at))}return null}addNewEditor(){Zt(this,it,es).call(this,Zt(this,it,Ts).call(this),!0)}setSelected(ct){pt(this,at).setSelected(ct)}toggleSelected(ct){pt(this,at).toggleSelected(ct)}isSelected(ct){return pt(this,at).isSelected(ct)}unselect(ct){pt(this,at).unselect(ct)}pointerup(ct){const{isMac:Et}=o.FeatureTest.platform;if(!(ct.button!==0||ct.ctrlKey&&Et)&&ct.target===this.div&&pt(this,ut)){if(ln(this,ut,!1),!pt(this,_)){ln(this,_,!0);return}if(pt(this,at).getMode()===o.AnnotationEditorType.STAMP){pt(this,at).unselectAll();return}Zt(this,it,es).call(this,ct,!1)}}pointerdown(ct){if(pt(this,ut)){ln(this,ut,!1);return}const{isMac:Et}=o.FeatureTest.platform;if(ct.button!==0||ct.ctrlKey&&Et||ct.target!==this.div)return;ln(this,ut,!0);const gt=pt(this,at).getActive();ln(this,_,!gt||gt.isEmpty())}findNewParent(ct,Et,gt){const Lt=pt(this,at).findParent(Et,gt);return Lt===null||Lt===this?!1:(Lt.changeParent(ct),!0)}destroy(){var ct,Et;((ct=pt(this,at).getActive())==null?void 0:ct.parent)===this&&(pt(this,at).commitOrRemove(),pt(this,at).setActiveEditor(null));for(const gt of pt(this,xt).values())(Et=pt(this,b))==null||Et.removePointerInTextLayer(gt.contentDiv),gt.setParent(null),gt.isAttachedToDOM=!1,gt.div.remove();this.div=null,pt(this,xt).clear(),pt(this,at).removeLayer(this)}render({viewport:ct}){this.viewport=ct,(0,g.setLayerDimensions)(this.div,ct);for(const Et of pt(this,at).getEditors(this.pageIndex))this.add(Et);this.updateMode()}update({viewport:ct}){pt(this,at).commitOrRemove(),this.viewport=ct,(0,g.setLayerDimensions)(this.div,{rotation:ct.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ct,pageHeight:Et}=this.viewport.rawDims;return[ct,Et]}};b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakMap,$=new WeakMap,at=new WeakMap,it=new WeakSet,Ns=function(ct){switch(pt(this,at).getMode()){case o.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(ct);case o.AnnotationEditorType.INK:return new d.InkEditor(ct);case o.AnnotationEditorType.STAMP:return new h.StampEditor(ct)}return null},es=function(ct,Et){const gt=this.getNextId(),Lt=Zt(this,it,Ns).call(this,{parent:this,id:gt,x:ct.offsetX,y:ct.offsetY,uiManager:pt(this,at),isCentered:Et});return Lt&&this.add(Lt),Lt},Ts=function(){const{x:ct,y:Et,width:gt,height:Lt}=this.div.getBoundingClientRect(),Dt=Math.max(0,ct),Ft=Math.max(0,Et),bt=Math.min(window.innerWidth,ct+gt),_t=Math.min(window.innerHeight,Et+Lt),yt=(Dt+bt)/2-ct,jt=(Ft+_t)/2-Et,[St,At]=this.viewport.rotation%180===0?[yt,jt]:[jt,yt];return{offsetX:St,offsetY:At}},Ms=function(){ln(this,_e,!0);for(const ct of pt(this,xt).values())ct.isEmpty()&&ct.remove();ln(this,_e,!1)},tr(ft,"_initialized",!1);let j=ft;s.AnnotationEditorLayer=j},(e,s,i)=>{var h,j,b,_,st,tt,nt,xt,ut,_e,So,ko,jo,Ir,Ls,_o,Is;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var o=i(1),a=i(5),c=i(4),d=i(29);const ft=class ft extends c.AnnotationEditor{constructor(Et){super({...Et,name:"freeTextEditor"});on(this,_e);on(this,h,this.editorDivBlur.bind(this));on(this,j,this.editorDivFocus.bind(this));on(this,b,this.editorDivInput.bind(this));on(this,_,this.editorDivKeydown.bind(this));on(this,st);on(this,tt,"");on(this,nt,`${this.id}-editor`);on(this,xt);on(this,ut,null);ln(this,st,Et.color||ft._defaultColor||c.AnnotationEditor._defaultLineColor),ln(this,xt,Et.fontSize||ft._defaultFontSize)}static get _keyboardManager(){const Et=ft.prototype,gt=Ft=>Ft.isEmpty(),Lt=a.AnnotationEditorUIManager.TRANSLATE_SMALL,Dt=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Et._translateEmpty,{args:[-Lt,0],checker:gt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Et._translateEmpty,{args:[-Dt,0],checker:gt}],[["ArrowRight","mac+ArrowRight"],Et._translateEmpty,{args:[Lt,0],checker:gt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Et._translateEmpty,{args:[Dt,0],checker:gt}],[["ArrowUp","mac+ArrowUp"],Et._translateEmpty,{args:[0,-Lt],checker:gt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Et._translateEmpty,{args:[0,-Dt],checker:gt}],[["ArrowDown","mac+ArrowDown"],Et._translateEmpty,{args:[0,Lt],checker:gt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Et._translateEmpty,{args:[0,Dt],checker:gt}]]))}static initialize(Et){c.AnnotationEditor.initialize(Et,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const gt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(gt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Et,gt){switch(Et){case o.AnnotationEditorParamsType.FREETEXT_SIZE:ft._defaultFontSize=gt;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:ft._defaultColor=gt;break}}updateParams(Et,gt){switch(Et){case o.AnnotationEditorParamsType.FREETEXT_SIZE:Zt(this,_e,So).call(this,gt);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:Zt(this,_e,ko).call(this,gt);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,ft._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,ft._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,pt(this,xt)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,pt(this,st)]]}_translateEmpty(Et,gt){this._uiManager.translateSelectedEditors(Et,gt,!0)}getInitialTranslation(){const Et=this.parentScale;return[-ft._internalPadding*Et,-(ft._internalPadding+pt(this,xt))*Et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",pt(this,_)),this.editorDiv.addEventListener("focus",pt(this,j)),this.editorDiv.addEventListener("blur",pt(this,h)),this.editorDiv.addEventListener("input",pt(this,b)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",pt(this,nt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",pt(this,_)),this.editorDiv.removeEventListener("focus",pt(this,j)),this.editorDiv.removeEventListener("blur",pt(this,h)),this.editorDiv.removeEventListener("input",pt(this,b)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Et){this._focusEventsAllowed&&(super.focusin(Et),Et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Et;if(this.width){Zt(this,_e,Is).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Et=this._initialOptions)!=null&&Et.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Et=pt(this,tt),gt=ln(this,tt,Zt(this,_e,jo).call(this).trimEnd());if(Et===gt)return;const Lt=Dt=>{if(ln(this,tt,Dt),!Dt){this.remove();return}Zt(this,_e,Ls).call(this),this._uiManager.rebuild(this),Zt(this,_e,Ir).call(this)};this.addCommands({cmd:()=>{Lt(gt)},undo:()=>{Lt(Et)},mustExec:!1}),Zt(this,_e,Ir).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Et){this.enterInEditMode()}keydown(Et){Et.target===this.div&&Et.key==="Enter"&&(this.enterInEditMode(),Et.preventDefault())}editorDivKeydown(Et){ft._keyboardManager.exec(this,Et)}editorDivFocus(Et){this.isEditing=!0}editorDivBlur(Et){this.isEditing=!1}editorDivInput(Et){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Et,gt;this.width&&(Et=this.x,gt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",pt(this,nt)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Dt=>{var Ft;return(Ft=this.editorDiv)==null?void 0:Ft.setAttribute("aria-label",Dt)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Dt=>{var Ft;return(Ft=this.editorDiv)==null?void 0:Ft.setAttribute("default-content",Dt)}),this.editorDiv.contentEditable=!0;const{style:Lt}=this.editorDiv;if(Lt.fontSize=`calc(${pt(this,xt)}px * var(--scale-factor))`,Lt.color=pt(this,st),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Dt,Ft]=this.parentDimensions;if(this.annotationElementId){const{position:bt}=pt(this,ut);let[_t,yt]=this.getInitialTranslation();[_t,yt]=this.pageTranslationToScreen(_t,yt);const[jt,St]=this.pageDimensions,[At,mt]=this.pageTranslation;let ht,vt;switch(this.rotation){case 0:ht=Et+(bt[0]-At)/jt,vt=gt+this.height-(bt[1]-mt)/St;break;case 90:ht=Et+(bt[0]-At)/jt,vt=gt-(bt[1]-mt)/St,[_t,yt]=[yt,-_t];break;case 180:ht=Et-this.width+(bt[0]-At)/jt,vt=gt-(bt[1]-mt)/St,[_t,yt]=[-_t,-yt];break;case 270:ht=Et+(bt[0]-At-this.height*St)/jt,vt=gt+(bt[1]-mt-this.width*jt)/St,[_t,yt]=[-yt,_t];break}this.setAt(ht*Dt,vt*Ft,_t,yt)}else this.setAt(Et*Dt,gt*Ft,this.width*Dt,this.height*Ft);Zt(this,_e,Ls).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Et,gt,Lt){let Dt=null;if(Et instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:bt,fontColor:_t},rect:yt,rotation:jt,id:St},textContent:At,textPosition:mt,parent:{page:{pageNumber:ht}}}=Et;if(!At||At.length===0)return null;Dt=Et={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(_t),fontSize:bt,value:At.join(`
`),position:mt,pageIndex:ht-1,rect:yt,rotation:jt,id:St,deleted:!1}}const Ft=super.deserialize(Et,gt,Lt);return ln(Ft,xt,Et.fontSize),ln(Ft,st,o.Util.makeHexColor(...Et.color)),ln(Ft,tt,Et.value),Ft.annotationElementId=Et.id||null,ln(Ft,ut,Dt),Ft}serialize(Et=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const gt=ft._internalPadding*this.parentScale,Lt=this.getRect(gt,gt),Dt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:pt(this,st)),Ft={annotationType:o.AnnotationEditorType.FREETEXT,color:Dt,fontSize:pt(this,xt),value:pt(this,tt),pageIndex:this.pageIndex,rect:Lt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Et?Ft:this.annotationElementId&&!Zt(this,_e,_o).call(this,Ft)?null:(Ft.id=this.annotationElementId,Ft)}};h=new WeakMap,j=new WeakMap,b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakSet,So=function(Et){const gt=Dt=>{this.editorDiv.style.fontSize=`calc(${Dt}px * var(--scale-factor))`,this.translate(0,-(Dt-pt(this,xt))*this.parentScale),ln(this,xt,Dt),Zt(this,_e,Ir).call(this)},Lt=pt(this,xt);this.addCommands({cmd:()=>{gt(Et)},undo:()=>{gt(Lt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ko=function(Et){const gt=pt(this,st);this.addCommands({cmd:()=>{ln(this,st,this.editorDiv.style.color=Et)},undo:()=>{ln(this,st,this.editorDiv.style.color=gt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jo=function(){const Et=this.editorDiv.getElementsByTagName("div");if(Et.length===0)return this.editorDiv.innerText;const gt=[];for(const Lt of Et)gt.push(Lt.innerText.replace(/\r\n?|\n/,""));return gt.join(`
`)},Ir=function(){const[Et,gt]=this.parentDimensions;let Lt;if(this.isAttachedToDOM)Lt=this.div.getBoundingClientRect();else{const{currentLayer:Dt,div:Ft}=this,bt=Ft.style.display;Ft.style.display="hidden",Dt.div.append(this.div),Lt=Ft.getBoundingClientRect(),Ft.remove(),Ft.style.display=bt}this.rotation%180===this.parentRotation%180?(this.width=Lt.width/Et,this.height=Lt.height/gt):(this.width=Lt.height/Et,this.height=Lt.width/gt),this.fixAndSetPosition()},Ls=function(){if(this.editorDiv.replaceChildren(),!!pt(this,tt))for(const Et of pt(this,tt).split(`
`)){const gt=document.createElement("div");gt.append(Et?document.createTextNode(Et):document.createElement("br")),this.editorDiv.append(gt)}},_o=function(Et){const{value:gt,fontSize:Lt,color:Dt,rect:Ft,pageIndex:bt}=pt(this,ut);return Et.value!==gt||Et.fontSize!==Lt||Et.rect.some((_t,yt)=>Math.abs(_t-Ft[yt])>=1)||Et.color.some((_t,yt)=>_t!==Dt[yt])||Et.pageIndex!==bt},Is=function(Et=!1){if(!this.annotationElementId)return;if(Zt(this,_e,Ir).call(this),!Et&&(this.width===0||this.height===0)){setTimeout(()=>Zt(this,_e,Is).call(this,!0),0);return}const gt=ft._internalPadding*this.parentScale;pt(this,ut).rect=this.getRect(gt,gt)},tr(ft,"_freeTextDefaultContent",""),tr(ft,"_internalPadding",0),tr(ft,"_defaultColor",null),tr(ft,"_defaultFontSize",10),tr(ft,"_type","freetext");let g=ft;s.FreeTextEditor=g},(e,s,i)=>{var vt,Pt,yr,Ro,Nt,It,Ht,Qt,tn,an,Wt,Xt,wt,kt,Tt,zt,en,un,pn,qt,Cn,fn,Po,ts,Os,Us,Ln,$n,Yn,gn,rn,sn,Sn,zs,Vn,Gt,hn,vn,No,Gs;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var o=i(1),a=i(6),c=i(3),d=i(30),g=i(31),h=i(32);const j=1e3,b=9,_=new WeakSet;function st(kn){return{width:kn[2]-kn[0],height:kn[3]-kn[1]}}class tt{static create(Ot){switch(Ot.data.annotationType){case o.AnnotationType.LINK:return new xt(Ot);case o.AnnotationType.TEXT:return new ut(Ot);case o.AnnotationType.WIDGET:switch(Ot.data.fieldType){case"Tx":return new $(Ot);case"Btn":return Ot.data.radioButton?new et(Ot):Ot.data.checkBox?new it(Ot):new ot(Ot);case"Ch":return new rt(Ot);case"Sig":return new at(Ot)}return new _e(Ot);case o.AnnotationType.POPUP:return new lt(Ot);case o.AnnotationType.FREETEXT:return new dt(Ot);case o.AnnotationType.LINE:return new ct(Ot);case o.AnnotationType.SQUARE:return new Et(Ot);case o.AnnotationType.CIRCLE:return new gt(Ot);case o.AnnotationType.POLYLINE:return new Lt(Ot);case o.AnnotationType.CARET:return new Ft(Ot);case o.AnnotationType.INK:return new bt(Ot);case o.AnnotationType.POLYGON:return new Dt(Ot);case o.AnnotationType.HIGHLIGHT:return new _t(Ot);case o.AnnotationType.UNDERLINE:return new yt(Ot);case o.AnnotationType.SQUIGGLY:return new jt(Ot);case o.AnnotationType.STRIKEOUT:return new St(Ot);case o.AnnotationType.STAMP:return new At(Ot);case o.AnnotationType.FILEATTACHMENT:return new mt(Ot);default:return new nt(Ot)}}}const Rt=class Rt{constructor(Ot,{isRenderable:Mt=!1,ignoreBorder:Yt=!1,createQuadrilaterals:xn=!1}={}){on(this,vt,!1);this.isRenderable=Mt,this.data=Ot.data,this.layer=Ot.layer,this.linkService=Ot.linkService,this.downloadManager=Ot.downloadManager,this.imageResourcesPath=Ot.imageResourcesPath,this.renderForms=Ot.renderForms,this.svgFactory=Ot.svgFactory,this.annotationStorage=Ot.annotationStorage,this.enableScripting=Ot.enableScripting,this.hasJSActions=Ot.hasJSActions,this._fieldObjects=Ot.fieldObjects,this.parent=Ot.parent,Mt&&(this.container=this._createContainer(Yt)),xn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Ot,contentsObj:Mt,richText:Yt}){return!!(Ot!=null&&Ot.str||Mt!=null&&Mt.str||Yt!=null&&Yt.str)}get hasPopupData(){return Rt._hasPopupData(this.data)}_createContainer(Ot){const{data:Mt,parent:{page:Yt,viewport:xn}}=this,dn=document.createElement("section");dn.setAttribute("data-annotation-id",Mt.id),this instanceof _e||(dn.tabIndex=j),dn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&dn.setAttribute("aria-haspopup","dialog"),Mt.noRotate&&dn.classList.add("norotate");const{pageWidth:En,pageHeight:yn,pageX:Mn,pageY:_n}=xn.rawDims;if(!Mt.rect||this instanceof lt){const{rotation:Dn}=Mt;return!Mt.hasOwnCanvas&&Dn!==0&&this.setRotation(Dn,dn),dn}const{width:Bn,height:Vt}=st(Mt.rect),Kt=o.Util.normalizeRect([Mt.rect[0],Yt.view[3]-Mt.rect[1]+Yt.view[1],Mt.rect[2],Yt.view[3]-Mt.rect[3]+Yt.view[1]]);if(!Ot&&Mt.borderStyle.width>0){dn.style.borderWidth=`${Mt.borderStyle.width}px`;const Dn=Mt.borderStyle.horizontalCornerRadius,Nn=Mt.borderStyle.verticalCornerRadius;if(Dn>0||Nn>0){const Hn=`calc(${Dn}px * var(--scale-factor)) / calc(${Nn}px * var(--scale-factor))`;dn.style.borderRadius=Hn}else if(this instanceof et){const Hn=`calc(${Bn}px * var(--scale-factor)) / calc(${Vt}px * var(--scale-factor))`;dn.style.borderRadius=Hn}switch(Mt.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:dn.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:dn.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:dn.style.borderBottomStyle="solid";break}const zn=Mt.borderColor||null;zn?(ln(this,vt,!0),dn.style.borderColor=o.Util.makeHexColor(zn[0]|0,zn[1]|0,zn[2]|0)):dn.style.borderWidth=0}dn.style.left=`${100*(Kt[0]-Mn)/En}%`,dn.style.top=`${100*(Kt[1]-_n)/yn}%`;const{rotation:cn}=Mt;return Mt.hasOwnCanvas||cn===0?(dn.style.width=`${100*Bn/En}%`,dn.style.height=`${100*Vt/yn}%`):this.setRotation(cn,dn),dn}setRotation(Ot,Mt=this.container){if(!this.data.rect)return;const{pageWidth:Yt,pageHeight:xn}=this.parent.viewport.rawDims,{width:dn,height:En}=st(this.data.rect);let yn,Mn;Ot%180===0?(yn=100*dn/Yt,Mn=100*En/xn):(yn=100*En/Yt,Mn=100*dn/xn),Mt.style.width=`${yn}%`,Mt.style.height=`${Mn}%`,Mt.setAttribute("data-main-rotation",(360-Ot)%360)}get _commonActions(){const Ot=(Mt,Yt,xn)=>{const dn=xn.detail[Mt],En=dn[0],yn=dn.slice(1);xn.target.style[Yt]=d.ColorConverters[`${En}_HTML`](yn),this.annotationStorage.setValue(this.data.id,{[Yt]:d.ColorConverters[`${En}_rgb`](yn)})};return(0,o.shadow)(this,"_commonActions",{display:Mt=>{const{display:Yt}=Mt.detail,xn=Yt%2===1;this.container.style.visibility=xn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:xn,noPrint:Yt===1||Yt===2})},print:Mt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Mt.detail.print})},hidden:Mt=>{const{hidden:Yt}=Mt.detail;this.container.style.visibility=Yt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Yt,noView:Yt})},focus:Mt=>{setTimeout(()=>Mt.target.focus({preventScroll:!1}),0)},userName:Mt=>{Mt.target.title=Mt.detail.userName},readonly:Mt=>{Mt.target.disabled=Mt.detail.readonly},required:Mt=>{this._setRequired(Mt.target,Mt.detail.required)},bgColor:Mt=>{Ot("bgColor","backgroundColor",Mt)},fillColor:Mt=>{Ot("fillColor","backgroundColor",Mt)},fgColor:Mt=>{Ot("fgColor","color",Mt)},textColor:Mt=>{Ot("textColor","color",Mt)},borderColor:Mt=>{Ot("borderColor","borderColor",Mt)},strokeColor:Mt=>{Ot("strokeColor","borderColor",Mt)},rotation:Mt=>{const Yt=Mt.detail.rotation;this.setRotation(Yt),this.annotationStorage.setValue(this.data.id,{rotation:Yt})}})}_dispatchEventFromSandbox(Ot,Mt){const Yt=this._commonActions;for(const xn of Object.keys(Mt.detail)){const dn=Ot[xn]||Yt[xn];dn==null||dn(Mt)}}_setDefaultPropertiesFromJS(Ot){if(!this.enableScripting)return;const Mt=this.annotationStorage.getRawValue(this.data.id);if(!Mt)return;const Yt=this._commonActions;for(const[xn,dn]of Object.entries(Mt)){const En=Yt[xn];if(En){const yn={detail:{[xn]:dn},target:Ot};En(yn),delete Mt[xn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Ot}=this.data;if(!Ot)return;const[Mt,Yt,xn,dn]=this.data.rect;if(Ot.length===1){const[,{x:Nn,y:zn},{x:Hn,y:Xn}]=Ot[0];if(xn===Nn&&dn===zn&&Mt===Hn&&Yt===Xn)return}const{style:En}=this.container;let yn;if(pt(this,vt)){const{borderColor:Nn,borderWidth:zn}=En;En.borderWidth=0,yn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Nn}" stroke-width="${zn}">`],this.container.classList.add("hasBorder")}const Mn=xn-Mt,_n=dn-Yt,{svgFactory:Bn}=this,Vt=Bn.createElement("svg");Vt.classList.add("quadrilateralsContainer"),Vt.setAttribute("width",0),Vt.setAttribute("height",0);const Kt=Bn.createElement("defs");Vt.append(Kt);const cn=Bn.createElement("clipPath"),Dn=`clippath_${this.data.id}`;cn.setAttribute("id",Dn),cn.setAttribute("clipPathUnits","objectBoundingBox"),Kt.append(cn);for(const[,{x:Nn,y:zn},{x:Hn,y:Xn}]of Ot){const qn=Bn.createElement("rect"),Zn=(Hn-Mt)/Mn,sr=(dn-zn)/_n,cr=(Nn-Hn)/Mn,xr=(zn-Xn)/_n;qn.setAttribute("x",Zn),qn.setAttribute("y",sr),qn.setAttribute("width",cr),qn.setAttribute("height",xr),cn.append(qn),yn==null||yn.push(`<rect vector-effect="non-scaling-stroke" x="${Zn}" y="${sr}" width="${cr}" height="${xr}"/>`)}pt(this,vt)&&(yn.push("</g></svg>')"),En.backgroundImage=yn.join("")),this.container.append(Vt),this.container.style.clipPath=`url(#${Dn})`}_createPopup(){const{container:Ot,data:Mt}=this;Ot.setAttribute("aria-haspopup","dialog");const Yt=new lt({data:{color:Mt.color,titleObj:Mt.titleObj,modificationDate:Mt.modificationDate,contentsObj:Mt.contentsObj,richText:Mt.richText,parentRect:Mt.rect,borderStyle:0,id:`popup_${Mt.id}`,rotation:Mt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Yt.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ot,Mt=null){const Yt=[];if(this._fieldObjects){const xn=this._fieldObjects[Ot];if(xn)for(const{page:dn,id:En,exportValues:yn}of xn){if(dn===-1||En===Mt)continue;const Mn=typeof yn=="string"?yn:null,_n=document.querySelector(`[data-element-id="${En}"]`);if(_n&&!_.has(_n)){(0,o.warn)(`_getElementsByName - element not allowed: ${En}`);continue}Yt.push({id:En,exportValue:Mn,domElement:_n})}return Yt}for(const xn of document.getElementsByName(Ot)){const{exportValue:dn}=xn,En=xn.getAttribute("data-element-id");En!==Mt&&_.has(xn)&&Yt.push({id:En,exportValue:dn,domElement:xn})}return Yt}show(){var Ot;this.container&&(this.container.hidden=!1),(Ot=this.popup)==null||Ot.maybeShow()}hide(){var Ot;this.container&&(this.container.hidden=!0),(Ot=this.popup)==null||Ot.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Ot=this.getElementsToTriggerPopup();if(Array.isArray(Ot))for(const Mt of Ot)Mt.classList.add("highlightArea");else Ot.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Ot,data:{id:Mt}}=this;this.container.addEventListener("dblclick",()=>{var Yt;(Yt=this.linkService.eventBus)==null||Yt.dispatch("switchannotationeditormode",{source:this,mode:Ot,editId:Mt})})}};vt=new WeakMap;let nt=Rt;class xt extends nt{constructor(Mt,Yt=null){super(Mt,{isRenderable:!0,ignoreBorder:!!(Yt!=null&&Yt.ignoreBorder),createQuadrilaterals:!0});on(this,Pt);this.isTooltipOnly=Mt.data.isTooltipOnly}render(){const{data:Mt,linkService:Yt}=this,xn=document.createElement("a");xn.setAttribute("data-element-id",Mt.id);let dn=!1;return Mt.url?(Yt.addLinkAttributes(xn,Mt.url,Mt.newWindow),dn=!0):Mt.action?(this._bindNamedAction(xn,Mt.action),dn=!0):Mt.attachment?(this._bindAttachment(xn,Mt.attachment),dn=!0):Mt.setOCGState?(Zt(this,Pt,Ro).call(this,xn,Mt.setOCGState),dn=!0):Mt.dest?(this._bindLink(xn,Mt.dest),dn=!0):(Mt.actions&&(Mt.actions.Action||Mt.actions["Mouse Up"]||Mt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(xn,Mt),dn=!0),Mt.resetForm?(this._bindResetFormAction(xn,Mt.resetForm),dn=!0):this.isTooltipOnly&&!dn&&(this._bindLink(xn,""),dn=!0)),this.container.classList.add("linkAnnotation"),dn&&this.container.append(xn),this.container}_bindLink(Mt,Yt){Mt.href=this.linkService.getDestinationHash(Yt),Mt.onclick=()=>(Yt&&this.linkService.goToDestination(Yt),!1),(Yt||Yt==="")&&Zt(this,Pt,yr).call(this)}_bindNamedAction(Mt,Yt){Mt.href=this.linkService.getAnchorUrl(""),Mt.onclick=()=>(this.linkService.executeNamedAction(Yt),!1),Zt(this,Pt,yr).call(this)}_bindAttachment(Mt,Yt){Mt.href=this.linkService.getAnchorUrl(""),Mt.onclick=()=>{var xn;return(xn=this.downloadManager)==null||xn.openOrDownloadData(this.container,Yt.content,Yt.filename),!1},Zt(this,Pt,yr).call(this)}_bindJSAction(Mt,Yt){Mt.href=this.linkService.getAnchorUrl("");const xn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const dn of Object.keys(Yt.actions)){const En=xn.get(dn);En&&(Mt[En]=()=>{var yn;return(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Yt.id,name:dn}}),!1})}Mt.onclick||(Mt.onclick=()=>!1),Zt(this,Pt,yr).call(this)}_bindResetFormAction(Mt,Yt){const xn=Mt.onclick;if(xn||(Mt.href=this.linkService.getAnchorUrl("")),Zt(this,Pt,yr).call(this),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),xn||(Mt.onclick=()=>!1);return}Mt.onclick=()=>{var Vt;xn==null||xn();const{fields:dn,refs:En,include:yn}=Yt,Mn=[];if(dn.length!==0||En.length!==0){const Kt=new Set(En);for(const cn of dn){const Dn=this._fieldObjects[cn]||[];for(const{id:Nn}of Dn)Kt.add(Nn)}for(const cn of Object.values(this._fieldObjects))for(const Dn of cn)Kt.has(Dn.id)===yn&&Mn.push(Dn)}else for(const Kt of Object.values(this._fieldObjects))Mn.push(...Kt);const _n=this.annotationStorage,Bn=[];for(const Kt of Mn){const{id:cn}=Kt;switch(Bn.push(cn),Kt.type){case"text":{const Nn=Kt.defaultValue||"";_n.setValue(cn,{value:Nn});break}case"checkbox":case"radiobutton":{const Nn=Kt.defaultValue===Kt.exportValues;_n.setValue(cn,{value:Nn});break}case"combobox":case"listbox":{const Nn=Kt.defaultValue||"";_n.setValue(cn,{value:Nn});break}default:continue}const Dn=document.querySelector(`[data-element-id="${cn}"]`);if(Dn){if(!_.has(Dn)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${cn}`);continue}}else continue;Dn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Bn,name:"ResetForm"}})),!1}}}Pt=new WeakSet,yr=function(){this.container.setAttribute("data-internal-link","")},Ro=function(Mt,Yt){Mt.href=this.linkService.getAnchorUrl(""),Mt.onclick=()=>(this.linkService.executeSetOCGState(Yt),!1),Zt(this,Pt,yr).call(this)};class ut extends nt{constructor(Ot){super(Ot,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Ot=document.createElement("img");return Ot.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ot.alt="[{{type}} Annotation]",Ot.dataset.l10nId="text_annotation_type",Ot.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Ot),this.container}}class _e extends nt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Ot){var Mt;this.data.hasOwnCanvas&&(((Mt=Ot.previousSibling)==null?void 0:Mt.nodeName)==="CANVAS"&&(Ot.previousSibling.hidden=!0),Ot.hidden=!1)}_getKeyModifier(Ot){const{isWin:Mt,isMac:Yt}=o.FeatureTest.platform;return Mt&&Ot.ctrlKey||Yt&&Ot.metaKey}_setEventListener(Ot,Mt,Yt,xn,dn){Yt.includes("mouse")?Ot.addEventListener(Yt,En=>{var yn;(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xn,value:dn(En),shift:En.shiftKey,modifier:this._getKeyModifier(En)}})}):Ot.addEventListener(Yt,En=>{var yn;if(Yt==="blur"){if(!Mt.focused||!En.relatedTarget)return;Mt.focused=!1}else if(Yt==="focus"){if(Mt.focused)return;Mt.focused=!0}dn&&((yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xn,value:dn(En)}}))})}_setEventListeners(Ot,Mt,Yt,xn){var dn,En,yn;for(const[Mn,_n]of Yt)(_n==="Action"||(dn=this.data.actions)!=null&&dn[_n])&&((_n==="Focus"||_n==="Blur")&&(Mt||(Mt={focused:!1})),this._setEventListener(Ot,Mt,Mn,_n,xn),_n==="Focus"&&!((En=this.data.actions)!=null&&En.Blur)?this._setEventListener(Ot,Mt,"blur","Blur",null):_n==="Blur"&&!((yn=this.data.actions)!=null&&yn.Focus)&&this._setEventListener(Ot,Mt,"focus","Focus",null))}_setBackgroundColor(Ot){const Mt=this.data.backgroundColor||null;Ot.style.backgroundColor=Mt===null?"transparent":o.Util.makeHexColor(Mt[0],Mt[1],Mt[2])}_setTextStyle(Ot){const Mt=["left","center","right"],{fontColor:Yt}=this.data.defaultAppearanceData,xn=this.data.defaultAppearanceData.fontSize||b,dn=Ot.style;let En;const yn=2,Mn=_n=>Math.round(10*_n)/10;if(this.data.multiLine){const _n=Math.abs(this.data.rect[3]-this.data.rect[1]-yn),Bn=Math.round(_n/(o.LINE_FACTOR*xn))||1,Vt=_n/Bn;En=Math.min(xn,Mn(Vt/o.LINE_FACTOR))}else{const _n=Math.abs(this.data.rect[3]-this.data.rect[1]-yn);En=Math.min(xn,Mn(_n/o.LINE_FACTOR))}dn.fontSize=`calc(${En}px * var(--scale-factor))`,dn.color=o.Util.makeHexColor(Yt[0],Yt[1],Yt[2]),this.data.textAlignment!==null&&(dn.textAlign=Mt[this.data.textAlignment])}_setRequired(Ot,Mt){Mt?Ot.setAttribute("required",!0):Ot.removeAttribute("required"),Ot.setAttribute("aria-required",Mt)}}class $ extends _e{constructor(Ot){const Mt=Ot.renderForms||!Ot.data.hasAppearance&&!!Ot.data.fieldValue;super(Ot,{isRenderable:Mt})}setPropertyOnSiblings(Ot,Mt,Yt,xn){const dn=this.annotationStorage;for(const En of this._getElementsByName(Ot.name,Ot.id))En.domElement&&(En.domElement[Mt]=Yt),dn.setValue(En.id,{[xn]:Yt})}render(){var xn,dn;const Ot=this.annotationStorage,Mt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Yt=null;if(this.renderForms){const En=Ot.getValue(Mt,{value:this.data.fieldValue});let yn=En.value||"";const Mn=Ot.getValue(Mt,{charLimit:this.data.maxLen}).charLimit;Mn&&yn.length>Mn&&(yn=yn.slice(0,Mn));let _n=En.formattedValue||((xn=this.data.textContent)==null?void 0:xn.join(`
`))||null;_n&&this.data.comb&&(_n=_n.replaceAll(/\s+/g,""));const Bn={userValue:yn,formattedValue:_n,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Yt=document.createElement("textarea"),Yt.textContent=_n??yn,this.data.doNotScroll&&(Yt.style.overflowY="hidden")):(Yt=document.createElement("input"),Yt.type="text",Yt.setAttribute("value",_n??yn),this.data.doNotScroll&&(Yt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Yt.hidden=!0),_.add(Yt),Yt.setAttribute("data-element-id",Mt),Yt.disabled=this.data.readOnly,Yt.name=this.data.fieldName,Yt.tabIndex=j,this._setRequired(Yt,this.data.required),Mn&&(Yt.maxLength=Mn),Yt.addEventListener("input",Kt=>{Ot.setValue(Mt,{value:Kt.target.value}),this.setPropertyOnSiblings(Yt,"value",Kt.target.value,"value"),Bn.formattedValue=null}),Yt.addEventListener("resetform",Kt=>{const cn=this.data.defaultFieldValue??"";Yt.value=Bn.userValue=cn,Bn.formattedValue=null});let Vt=Kt=>{const{formattedValue:cn}=Bn;cn!=null&&(Kt.target.value=cn),Kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Yt.addEventListener("focus",cn=>{if(Bn.focused)return;const{target:Dn}=cn;Bn.userValue&&(Dn.value=Bn.userValue),Bn.lastCommittedValue=Dn.value,Bn.commitKey=1,Bn.focused=!0}),Yt.addEventListener("updatefromsandbox",cn=>{this.showElementAndHideCanvas(cn.target);const Dn={value(Nn){Bn.userValue=Nn.detail.value??"",Ot.setValue(Mt,{value:Bn.userValue.toString()}),Nn.target.value=Bn.userValue},formattedValue(Nn){const{formattedValue:zn}=Nn.detail;Bn.formattedValue=zn,zn!=null&&Nn.target!==document.activeElement&&(Nn.target.value=zn),Ot.setValue(Mt,{formattedValue:zn})},selRange(Nn){Nn.target.setSelectionRange(...Nn.detail.selRange)},charLimit:Nn=>{var qn;const{charLimit:zn}=Nn.detail,{target:Hn}=Nn;if(zn===0){Hn.removeAttribute("maxLength");return}Hn.setAttribute("maxLength",zn);let Xn=Bn.userValue;!Xn||Xn.length<=zn||(Xn=Xn.slice(0,zn),Hn.value=Bn.userValue=Xn,Ot.setValue(Mt,{value:Xn}),(qn=this.linkService.eventBus)==null||qn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mt,name:"Keystroke",value:Xn,willCommit:!0,commitKey:1,selStart:Hn.selectionStart,selEnd:Hn.selectionEnd}}))}};this._dispatchEventFromSandbox(Dn,cn)}),Yt.addEventListener("keydown",cn=>{var zn;Bn.commitKey=1;let Dn=-1;if(cn.key==="Escape"?Dn=0:cn.key==="Enter"&&!this.data.multiLine?Dn=2:cn.key==="Tab"&&(Bn.commitKey=3),Dn===-1)return;const{value:Nn}=cn.target;Bn.lastCommittedValue!==Nn&&(Bn.lastCommittedValue=Nn,Bn.userValue=Nn,(zn=this.linkService.eventBus)==null||zn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mt,name:"Keystroke",value:Nn,willCommit:!0,commitKey:Dn,selStart:cn.target.selectionStart,selEnd:cn.target.selectionEnd}}))});const Kt=Vt;Vt=null,Yt.addEventListener("blur",cn=>{var Nn;if(!Bn.focused||!cn.relatedTarget)return;Bn.focused=!1;const{value:Dn}=cn.target;Bn.userValue=Dn,Bn.lastCommittedValue!==Dn&&((Nn=this.linkService.eventBus)==null||Nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mt,name:"Keystroke",value:Dn,willCommit:!0,commitKey:Bn.commitKey,selStart:cn.target.selectionStart,selEnd:cn.target.selectionEnd}})),Kt(cn)}),(dn=this.data.actions)!=null&&dn.Keystroke&&Yt.addEventListener("beforeinput",cn=>{var sr;Bn.lastCommittedValue=null;const{data:Dn,target:Nn}=cn,{value:zn,selectionStart:Hn,selectionEnd:Xn}=Nn;let qn=Hn,Zn=Xn;switch(cn.inputType){case"deleteWordBackward":{const cr=zn.substring(0,Hn).match(/\w*[^\w]*$/);cr&&(qn-=cr[0].length);break}case"deleteWordForward":{const cr=zn.substring(Hn).match(/^[^\w]*\w*/);cr&&(Zn+=cr[0].length);break}case"deleteContentBackward":Hn===Xn&&(qn-=1);break;case"deleteContentForward":Hn===Xn&&(Zn+=1);break}cn.preventDefault(),(sr=this.linkService.eventBus)==null||sr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mt,name:"Keystroke",value:zn,change:Dn||"",willCommit:!1,selStart:qn,selEnd:Zn}})}),this._setEventListeners(Yt,Bn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],cn=>cn.target.value)}if(Vt&&Yt.addEventListener("blur",Vt),this.data.comb){const cn=(this.data.rect[2]-this.data.rect[0])/Mn;Yt.classList.add("comb"),Yt.style.letterSpacing=`calc(${cn}px * var(--scale-factor) - 1ch)`}}else Yt=document.createElement("div"),Yt.textContent=this.data.fieldValue,Yt.style.verticalAlign="middle",Yt.style.display="table-cell";return this._setTextStyle(Yt),this._setBackgroundColor(Yt),this._setDefaultPropertiesFromJS(Yt),this.container.append(Yt),this.container}}class at extends _e{constructor(Ot){super(Ot,{isRenderable:!!Ot.data.hasOwnCanvas})}}class it extends _e{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){const Ot=this.annotationStorage,Mt=this.data,Yt=Mt.id;let xn=Ot.getValue(Yt,{value:Mt.exportValue===Mt.fieldValue}).value;typeof xn=="string"&&(xn=xn!=="Off",Ot.setValue(Yt,{value:xn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const dn=document.createElement("input");return _.add(dn),dn.setAttribute("data-element-id",Yt),dn.disabled=Mt.readOnly,this._setRequired(dn,this.data.required),dn.type="checkbox",dn.name=Mt.fieldName,xn&&dn.setAttribute("checked",!0),dn.setAttribute("exportValue",Mt.exportValue),dn.tabIndex=j,dn.addEventListener("change",En=>{const{name:yn,checked:Mn}=En.target;for(const _n of this._getElementsByName(yn,Yt)){const Bn=Mn&&_n.exportValue===Mt.exportValue;_n.domElement&&(_n.domElement.checked=Bn),Ot.setValue(_n.id,{value:Bn})}Ot.setValue(Yt,{value:Mn})}),dn.addEventListener("resetform",En=>{const yn=Mt.defaultFieldValue||"Off";En.target.checked=yn===Mt.exportValue}),this.enableScripting&&this.hasJSActions&&(dn.addEventListener("updatefromsandbox",En=>{const yn={value(Mn){Mn.target.checked=Mn.detail.value!=="Off",Ot.setValue(Yt,{value:Mn.target.checked})}};this._dispatchEventFromSandbox(yn,En)}),this._setEventListeners(dn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],En=>En.target.checked)),this._setBackgroundColor(dn),this._setDefaultPropertiesFromJS(dn),this.container.append(dn),this.container}}class et extends _e{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Ot=this.annotationStorage,Mt=this.data,Yt=Mt.id;let xn=Ot.getValue(Yt,{value:Mt.fieldValue===Mt.buttonValue}).value;typeof xn=="string"&&(xn=xn!==Mt.buttonValue,Ot.setValue(Yt,{value:xn}));const dn=document.createElement("input");if(_.add(dn),dn.setAttribute("data-element-id",Yt),dn.disabled=Mt.readOnly,this._setRequired(dn,this.data.required),dn.type="radio",dn.name=Mt.fieldName,xn&&dn.setAttribute("checked",!0),dn.tabIndex=j,dn.addEventListener("change",En=>{const{name:yn,checked:Mn}=En.target;for(const _n of this._getElementsByName(yn,Yt))Ot.setValue(_n.id,{value:!1});Ot.setValue(Yt,{value:Mn})}),dn.addEventListener("resetform",En=>{const yn=Mt.defaultFieldValue;En.target.checked=yn!=null&&yn===Mt.buttonValue}),this.enableScripting&&this.hasJSActions){const En=Mt.buttonValue;dn.addEventListener("updatefromsandbox",yn=>{const Mn={value:_n=>{const Bn=En===_n.detail.value;for(const Vt of this._getElementsByName(_n.target.name)){const Kt=Bn&&Vt.id===Yt;Vt.domElement&&(Vt.domElement.checked=Kt),Ot.setValue(Vt.id,{value:Kt})}}};this._dispatchEventFromSandbox(Mn,yn)}),this._setEventListeners(dn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yn=>yn.target.checked)}return this._setBackgroundColor(dn),this._setDefaultPropertiesFromJS(dn),this.container.append(dn),this.container}}class ot extends xt{constructor(Ot){super(Ot,{ignoreBorder:Ot.data.hasAppearance})}render(){const Ot=super.render();Ot.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Ot.title=this.data.alternativeText);const Mt=Ot.lastChild;return this.enableScripting&&this.hasJSActions&&Mt&&(this._setDefaultPropertiesFromJS(Mt),Mt.addEventListener("updatefromsandbox",Yt=>{this._dispatchEventFromSandbox({},Yt)})),Ot}}class rt extends _e{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Ot=this.annotationStorage,Mt=this.data.id,Yt=Ot.getValue(Mt,{value:this.data.fieldValue}),xn=document.createElement("select");_.add(xn),xn.setAttribute("data-element-id",Mt),xn.disabled=this.data.readOnly,this._setRequired(xn,this.data.required),xn.name=this.data.fieldName,xn.tabIndex=j;let dn=this.data.combo&&this.data.options.length>0;this.data.combo||(xn.size=this.data.options.length,this.data.multiSelect&&(xn.multiple=!0)),xn.addEventListener("resetform",Bn=>{const Vt=this.data.defaultFieldValue;for(const Kt of xn.options)Kt.selected=Kt.value===Vt});for(const Bn of this.data.options){const Vt=document.createElement("option");Vt.textContent=Bn.displayValue,Vt.value=Bn.exportValue,Yt.value.includes(Bn.exportValue)&&(Vt.setAttribute("selected",!0),dn=!1),xn.append(Vt)}let En=null;if(dn){const Bn=document.createElement("option");Bn.value=" ",Bn.setAttribute("hidden",!0),Bn.setAttribute("selected",!0),xn.prepend(Bn),En=()=>{Bn.remove(),xn.removeEventListener("input",En),En=null},xn.addEventListener("input",En)}const yn=Bn=>{const Vt=Bn?"value":"textContent",{options:Kt,multiple:cn}=xn;return cn?Array.prototype.filter.call(Kt,Dn=>Dn.selected).map(Dn=>Dn[Vt]):Kt.selectedIndex===-1?null:Kt[Kt.selectedIndex][Vt]};let Mn=yn(!1);const _n=Bn=>{const Vt=Bn.target.options;return Array.prototype.map.call(Vt,Kt=>({displayValue:Kt.textContent,exportValue:Kt.value}))};return this.enableScripting&&this.hasJSActions?(xn.addEventListener("updatefromsandbox",Bn=>{const Vt={value(Kt){En==null||En();const cn=Kt.detail.value,Dn=new Set(Array.isArray(cn)?cn:[cn]);for(const Nn of xn.options)Nn.selected=Dn.has(Nn.value);Ot.setValue(Mt,{value:yn(!0)}),Mn=yn(!1)},multipleSelection(Kt){xn.multiple=!0},remove(Kt){const cn=xn.options,Dn=Kt.detail.remove;cn[Dn].selected=!1,xn.remove(Dn),cn.length>0&&Array.prototype.findIndex.call(cn,zn=>zn.selected)===-1&&(cn[0].selected=!0),Ot.setValue(Mt,{value:yn(!0),items:_n(Kt)}),Mn=yn(!1)},clear(Kt){for(;xn.length!==0;)xn.remove(0);Ot.setValue(Mt,{value:null,items:[]}),Mn=yn(!1)},insert(Kt){const{index:cn,displayValue:Dn,exportValue:Nn}=Kt.detail.insert,zn=xn.children[cn],Hn=document.createElement("option");Hn.textContent=Dn,Hn.value=Nn,zn?zn.before(Hn):xn.append(Hn),Ot.setValue(Mt,{value:yn(!0),items:_n(Kt)}),Mn=yn(!1)},items(Kt){const{items:cn}=Kt.detail;for(;xn.length!==0;)xn.remove(0);for(const Dn of cn){const{displayValue:Nn,exportValue:zn}=Dn,Hn=document.createElement("option");Hn.textContent=Nn,Hn.value=zn,xn.append(Hn)}xn.options.length>0&&(xn.options[0].selected=!0),Ot.setValue(Mt,{value:yn(!0),items:_n(Kt)}),Mn=yn(!1)},indices(Kt){const cn=new Set(Kt.detail.indices);for(const Dn of Kt.target.options)Dn.selected=cn.has(Dn.index);Ot.setValue(Mt,{value:yn(!0)}),Mn=yn(!1)},editable(Kt){Kt.target.disabled=!Kt.detail.editable}};this._dispatchEventFromSandbox(Vt,Bn)}),xn.addEventListener("input",Bn=>{var Kt;const Vt=yn(!0);Ot.setValue(Mt,{value:Vt}),Bn.preventDefault(),(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mt,name:"Keystroke",value:Mn,changeEx:Vt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(xn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Bn=>Bn.target.value)):xn.addEventListener("input",function(Bn){Ot.setValue(Mt,{value:yn(!0)})}),this.data.combo&&this._setTextStyle(xn),this._setBackgroundColor(xn),this._setDefaultPropertiesFromJS(xn),this.container.append(xn),this.container}}class lt extends nt{constructor(Ot){const{data:Mt,elements:Yt}=Ot;super(Ot,{isRenderable:nt._hasPopupData(Mt)}),this.elements=Yt}render(){this.container.classList.add("popupAnnotation");const Ot=new ft({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Mt=[];for(const Yt of this.elements)Yt.popup=Ot,Mt.push(Yt.data.id),Yt.addHighlightArea();return this.container.setAttribute("aria-controls",Mt.map(Yt=>`${o.AnnotationPrefix}${Yt}`).join(",")),this.container}}class ft{constructor({container:Ot,color:Mt,elements:Yt,titleObj:xn,modificationDate:dn,contentsObj:En,richText:yn,parent:Mn,rect:_n,parentRect:Bn,open:Vt}){on(this,fn);on(this,Nt,null);on(this,It,Zt(this,fn,Po).bind(this));on(this,Ht,Zt(this,fn,Us).bind(this));on(this,Qt,Zt(this,fn,Os).bind(this));on(this,tn,Zt(this,fn,ts).bind(this));on(this,an,null);on(this,Wt,null);on(this,Xt,null);on(this,wt,null);on(this,kt,null);on(this,Tt,null);on(this,zt,!1);on(this,en,null);on(this,un,null);on(this,pn,null);on(this,qt,null);on(this,Cn,!1);var cn;ln(this,Wt,Ot),ln(this,qt,xn),ln(this,Xt,En),ln(this,pn,yn),ln(this,kt,Mn),ln(this,an,Mt),ln(this,un,_n),ln(this,Tt,Bn),ln(this,wt,Yt);const Kt=a.PDFDateString.toDateObject(dn);Kt&&ln(this,Nt,Mn.l10n.get("annotation_date_string",{date:Kt.toLocaleDateString(),time:Kt.toLocaleTimeString()})),this.trigger=Yt.flatMap(Dn=>Dn.getElementsToTriggerPopup());for(const Dn of this.trigger)Dn.addEventListener("click",pt(this,tn)),Dn.addEventListener("mouseenter",pt(this,Qt)),Dn.addEventListener("mouseleave",pt(this,Ht)),Dn.classList.add("popupTriggerArea");for(const Dn of Yt)(cn=Dn.container)==null||cn.addEventListener("keydown",pt(this,It));pt(this,Wt).hidden=!0,Vt&&Zt(this,fn,ts).call(this)}render(){if(pt(this,en))return;const{page:{view:Ot},viewport:{rawDims:{pageWidth:Mt,pageHeight:Yt,pageX:xn,pageY:dn}}}=pt(this,kt),En=ln(this,en,document.createElement("div"));if(En.className="popup",pt(this,an)){const qn=En.style.outlineColor=o.Util.makeHexColor(...pt(this,an));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?En.style.backgroundColor=`color-mix(in srgb, ${qn} 30%, white)`:En.style.backgroundColor=o.Util.makeHexColor(...pt(this,an).map(sr=>Math.floor(.7*(255-sr)+sr)))}const yn=document.createElement("span");yn.className="header";const Mn=document.createElement("h1");if(yn.append(Mn),{dir:Mn.dir,str:Mn.textContent}=pt(this,qt),En.append(yn),pt(this,Nt)){const qn=document.createElement("span");qn.classList.add("popupDate"),pt(this,Nt).then(Zn=>{qn.textContent=Zn}),yn.append(qn)}const _n=pt(this,Xt),Bn=pt(this,pn);if(Bn!=null&&Bn.str&&(!(_n!=null&&_n.str)||_n.str===Bn.str))h.XfaLayer.render({xfaHtml:Bn.html,intent:"richText",div:En}),En.lastChild.classList.add("richText","popupContent");else{const qn=this._formatContents(_n);En.append(qn)}let Vt=!!pt(this,Tt),Kt=Vt?pt(this,Tt):pt(this,un);for(const qn of pt(this,wt))if(!Kt||o.Util.intersect(qn.data.rect,Kt)!==null){Kt=qn.data.rect,Vt=!0;break}const cn=o.Util.normalizeRect([Kt[0],Ot[3]-Kt[1]+Ot[1],Kt[2],Ot[3]-Kt[3]+Ot[1]]),Nn=Vt?Kt[2]-Kt[0]+5:0,zn=cn[0]+Nn,Hn=cn[1],{style:Xn}=pt(this,Wt);Xn.left=`${100*(zn-xn)/Mt}%`,Xn.top=`${100*(Hn-dn)/Yt}%`,pt(this,Wt).append(En)}_formatContents({str:Ot,dir:Mt}){const Yt=document.createElement("p");Yt.classList.add("popupContent"),Yt.dir=Mt;const xn=Ot.split(/(?:\r\n?|\n)/);for(let dn=0,En=xn.length;dn<En;++dn){const yn=xn[dn];Yt.append(document.createTextNode(yn)),dn<En-1&&Yt.append(document.createElement("br"))}return Yt}forceHide(){ln(this,Cn,this.isVisible),pt(this,Cn)&&(pt(this,Wt).hidden=!0)}maybeShow(){pt(this,Cn)&&(ln(this,Cn,!1),pt(this,Wt).hidden=!1)}get isVisible(){return pt(this,Wt).hidden===!1}}Nt=new WeakMap,It=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,tn=new WeakMap,an=new WeakMap,Wt=new WeakMap,Xt=new WeakMap,wt=new WeakMap,kt=new WeakMap,Tt=new WeakMap,zt=new WeakMap,en=new WeakMap,un=new WeakMap,pn=new WeakMap,qt=new WeakMap,Cn=new WeakMap,fn=new WeakSet,Po=function(Ot){Ot.altKey||Ot.shiftKey||Ot.ctrlKey||Ot.metaKey||(Ot.key==="Enter"||Ot.key==="Escape"&&pt(this,zt))&&Zt(this,fn,ts).call(this)},ts=function(){ln(this,zt,!pt(this,zt)),pt(this,zt)?(Zt(this,fn,Os).call(this),pt(this,Wt).addEventListener("click",pt(this,tn)),pt(this,Wt).addEventListener("keydown",pt(this,It))):(Zt(this,fn,Us).call(this),pt(this,Wt).removeEventListener("click",pt(this,tn)),pt(this,Wt).removeEventListener("keydown",pt(this,It)))},Os=function(){pt(this,en)||this.render(),this.isVisible?pt(this,zt)&&pt(this,Wt).classList.add("focused"):(pt(this,Wt).hidden=!1,pt(this,Wt).style.zIndex=parseInt(pt(this,Wt).style.zIndex)+1e3)},Us=function(){pt(this,Wt).classList.remove("focused"),!(pt(this,zt)||!this.isVisible)&&(pt(this,Wt).hidden=!0,pt(this,Wt).style.zIndex=parseInt(pt(this,Wt).style.zIndex)-1e3)};class dt extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Ot.data.textContent,this.textPosition=Ot.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Ot=document.createElement("div");Ot.classList.add("annotationTextContent"),Ot.setAttribute("role","comment");for(const Mt of this.textContent){const Yt=document.createElement("span");Yt.textContent=Mt,Ot.append(Yt)}this.container.append(Ot)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=dt;class ct extends nt{constructor(Mt){super(Mt,{isRenderable:!0,ignoreBorder:!0});on(this,Ln,null)}render(){this.container.classList.add("lineAnnotation");const Mt=this.data,{width:Yt,height:xn}=st(Mt.rect),dn=this.svgFactory.create(Yt,xn,!0),En=ln(this,Ln,this.svgFactory.createElement("svg:line"));return En.setAttribute("x1",Mt.rect[2]-Mt.lineCoordinates[0]),En.setAttribute("y1",Mt.rect[3]-Mt.lineCoordinates[1]),En.setAttribute("x2",Mt.rect[2]-Mt.lineCoordinates[2]),En.setAttribute("y2",Mt.rect[3]-Mt.lineCoordinates[3]),En.setAttribute("stroke-width",Mt.borderStyle.width||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),dn.append(En),this.container.append(dn),!Mt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return pt(this,Ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ln=new WeakMap;class Et extends nt{constructor(Mt){super(Mt,{isRenderable:!0,ignoreBorder:!0});on(this,$n,null)}render(){this.container.classList.add("squareAnnotation");const Mt=this.data,{width:Yt,height:xn}=st(Mt.rect),dn=this.svgFactory.create(Yt,xn,!0),En=Mt.borderStyle.width,yn=ln(this,$n,this.svgFactory.createElement("svg:rect"));return yn.setAttribute("x",En/2),yn.setAttribute("y",En/2),yn.setAttribute("width",Yt-En),yn.setAttribute("height",xn-En),yn.setAttribute("stroke-width",En||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),dn.append(yn),this.container.append(dn),!Mt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return pt(this,$n)}addHighlightArea(){this.container.classList.add("highlightArea")}}$n=new WeakMap;class gt extends nt{constructor(Mt){super(Mt,{isRenderable:!0,ignoreBorder:!0});on(this,Yn,null)}render(){this.container.classList.add("circleAnnotation");const Mt=this.data,{width:Yt,height:xn}=st(Mt.rect),dn=this.svgFactory.create(Yt,xn,!0),En=Mt.borderStyle.width,yn=ln(this,Yn,this.svgFactory.createElement("svg:ellipse"));return yn.setAttribute("cx",Yt/2),yn.setAttribute("cy",xn/2),yn.setAttribute("rx",Yt/2-En/2),yn.setAttribute("ry",xn/2-En/2),yn.setAttribute("stroke-width",En||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),dn.append(yn),this.container.append(dn),!Mt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return pt(this,Yn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yn=new WeakMap;class Lt extends nt{constructor(Mt){super(Mt,{isRenderable:!0,ignoreBorder:!0});on(this,gn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Mt=this.data,{width:Yt,height:xn}=st(Mt.rect),dn=this.svgFactory.create(Yt,xn,!0);let En=[];for(const Mn of Mt.vertices){const _n=Mn.x-Mt.rect[0],Bn=Mt.rect[3]-Mn.y;En.push(_n+","+Bn)}En=En.join(" ");const yn=ln(this,gn,this.svgFactory.createElement(this.svgElementName));return yn.setAttribute("points",En),yn.setAttribute("stroke-width",Mt.borderStyle.width||1),yn.setAttribute("stroke","transparent"),yn.setAttribute("fill","transparent"),dn.append(yn),this.container.append(dn),!Mt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return pt(this,gn)}addHighlightArea(){this.container.classList.add("highlightArea")}}gn=new WeakMap;class Dt extends Lt{constructor(Ot){super(Ot),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ft extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class bt extends nt{constructor(Mt){super(Mt,{isRenderable:!0,ignoreBorder:!0});on(this,rn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Mt=this.data,{width:Yt,height:xn}=st(Mt.rect),dn=this.svgFactory.create(Yt,xn,!0);for(const En of Mt.inkLists){let yn=[];for(const _n of En){const Bn=_n.x-Mt.rect[0],Vt=Mt.rect[3]-_n.y;yn.push(`${Bn},${Vt}`)}yn=yn.join(" ");const Mn=this.svgFactory.createElement(this.svgElementName);pt(this,rn).push(Mn),Mn.setAttribute("points",yn),Mn.setAttribute("stroke-width",Mt.borderStyle.width||1),Mn.setAttribute("stroke","transparent"),Mn.setAttribute("fill","transparent"),!Mt.popupRef&&this.hasPopupData&&this._createPopup(),dn.append(Mn)}return this.container.append(dn),this.container}getElementsToTriggerPopup(){return pt(this,rn)}addHighlightArea(){this.container.classList.add("highlightArea")}}rn=new WeakMap,s.InkAnnotationElement=bt;class _t extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class yt extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class jt extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class St extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class At extends nt{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=At;class mt extends nt{constructor(Mt){var dn;super(Mt,{isRenderable:!0});on(this,Sn);on(this,sn,null);const{filename:Yt,content:xn}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(Yt,!0),this.content=xn,(dn=this.linkService.eventBus)==null||dn.dispatch("fileattachmentannotation",{source:this,filename:Yt,content:xn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Mt,data:Yt}=this;let xn;Yt.hasAppearance||Yt.fillAlpha===0?xn=document.createElement("div"):(xn=document.createElement("img"),xn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Yt.name)?"paperclip":"pushpin"}.svg`,Yt.fillAlpha&&Yt.fillAlpha<1&&(xn.style=`filter: opacity(${Math.round(Yt.fillAlpha*100)}%);`)),xn.addEventListener("dblclick",Zt(this,Sn,zs).bind(this)),ln(this,sn,xn);const{isMac:dn}=o.FeatureTest.platform;return Mt.addEventListener("keydown",En=>{En.key==="Enter"&&(dn?En.metaKey:En.ctrlKey)&&Zt(this,Sn,zs).call(this)}),!Yt.popupRef&&this.hasPopupData?this._createPopup():xn.classList.add("popupTriggerArea"),Mt.append(xn),Mt}getElementsToTriggerPopup(){return pt(this,sn)}addHighlightArea(){this.container.classList.add("highlightArea")}}sn=new WeakMap,Sn=new WeakSet,zs=function(){var Mt;(Mt=this.downloadManager)==null||Mt.openOrDownloadData(this.container,this.content,this.filename)};class ht{constructor({div:Ot,accessibilityManager:Mt,annotationCanvasMap:Yt,l10n:xn,page:dn,viewport:En}){on(this,vn);on(this,Vn,null);on(this,Gt,null);on(this,hn,new Map);this.div=Ot,ln(this,Vn,Mt),ln(this,Gt,Yt),this.l10n=xn,this.page=dn,this.viewport=En,this.zIndex=0,this.l10n||(this.l10n=g.NullL10n)}async render(Ot){const{annotations:Mt}=Ot,Yt=this.div;(0,a.setLayerDimensions)(Yt,this.viewport);const xn=new Map,dn={data:null,layer:Yt,linkService:Ot.linkService,downloadManager:Ot.downloadManager,imageResourcesPath:Ot.imageResourcesPath||"",renderForms:Ot.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:Ot.annotationStorage||new c.AnnotationStorage,enableScripting:Ot.enableScripting===!0,hasJSActions:Ot.hasJSActions,fieldObjects:Ot.fieldObjects,parent:this,elements:null};for(const En of Mt){if(En.noHTML)continue;const yn=En.annotationType===o.AnnotationType.POPUP;if(yn){const Bn=xn.get(En.id);if(!Bn)continue;dn.elements=Bn}else{const{width:Bn,height:Vt}=st(En.rect);if(Bn<=0||Vt<=0)continue}dn.data=En;const Mn=tt.create(dn);if(!Mn.isRenderable)continue;if(!yn&&En.popupRef){const Bn=xn.get(En.popupRef);Bn?Bn.push(Mn):xn.set(En.popupRef,[Mn])}Mn.annotationEditorType>0&&pt(this,hn).set(Mn.data.id,Mn);const _n=Mn.render();En.hidden&&(_n.style.visibility="hidden"),Zt(this,vn,No).call(this,_n,En.id)}Zt(this,vn,Gs).call(this),await this.l10n.translate(Yt)}update({viewport:Ot}){const Mt=this.div;this.viewport=Ot,(0,a.setLayerDimensions)(Mt,{rotation:Ot.rotation}),Zt(this,vn,Gs).call(this),Mt.hidden=!1}getEditableAnnotations(){return Array.from(pt(this,hn).values())}getEditableAnnotation(Ot){return pt(this,hn).get(Ot)}}Vn=new WeakMap,Gt=new WeakMap,hn=new WeakMap,vn=new WeakSet,No=function(Ot,Mt){var xn;const Yt=Ot.firstChild||Ot;Yt.id=`${o.AnnotationPrefix}${Mt}`,this.div.append(Ot),(xn=pt(this,Vn))==null||xn.moveElementInDOM(this.div,Ot,Yt,!1)},Gs=function(){if(!pt(this,Gt))return;const Ot=this.div;for(const[Mt,Yt]of pt(this,Gt)){const xn=Ot.querySelector(`[data-annotation-id="${Mt}"]`);if(!xn)continue;const{firstChild:dn}=xn;dn?dn.nodeName==="CANVAS"?dn.replaceWith(Yt):dn.before(Yt):xn.append(Yt)}pt(this,Gt).clear()},s.AnnotationLayer=ht},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function i(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function o(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([d,g,h,j]){return["G",1-Math.min(1,.3*d+.59*h+.11*g+j)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=o(d),[d,d,d]}static G_HTML([d]){const g=i(d);return`#${g}${g}${g}`}static RGB_G([d,g,h]){return["G",.3*d+.59*g+.11*h]}static RGB_rgb(d){return d.map(o)}static RGB_HTML(d){return`#${d.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,g,h,j]){return["RGB",1-Math.min(1,d+j),1-Math.min(1,h+j),1-Math.min(1,g+j)]}static CMYK_rgb([d,g,h,j]){return[o(1-Math.min(1,d+j)),o(1-Math.min(1,h+j)),o(1-Math.min(1,g+j))]}static CMYK_HTML(d){const g=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(g)}static RGB_CMYK([d,g,h]){const j=1-d,b=1-g,_=1-h,st=Math.min(j,b,_);return["CMYK",j,b,_,st]}}s.ColorConverters=a},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=o;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function o(d,g){switch(d){case"find_match_count":d=`find_match_count[${g.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${g.limit===1?"one":"other"}]`;break}return i[d]||""}function a(d,g){return g?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,j)=>j in g?g[j]:"{{"+j+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,g=null,h=o(d,g)){return a(h,g)},async translate(d){}};s.NullL10n=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var o=i(25);class a{static setupStorage(d,g,h,j,b){const _=j.getValue(g,{value:null});switch(h.name){case"textarea":if(_.value!==null&&(d.textContent=_.value),b==="print")break;d.addEventListener("input",st=>{j.setValue(g,{value:st.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(_.value===h.attributes.xfaOn?d.setAttribute("checked",!0):_.value===h.attributes.xfaOff&&d.removeAttribute("checked"),b==="print")break;d.addEventListener("change",st=>{j.setValue(g,{value:st.target.checked?st.target.getAttribute("xfaOn"):st.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&d.setAttribute("value",_.value),b==="print")break;d.addEventListener("input",st=>{j.setValue(g,{value:st.target.value})})}break;case"select":if(_.value!==null){d.setAttribute("value",_.value);for(const st of h.children)st.attributes.value===_.value?st.attributes.selected=!0:st.attributes.hasOwnProperty("selected")&&delete st.attributes.selected}d.addEventListener("input",st=>{const tt=st.target.options,nt=tt.selectedIndex===-1?"":tt[tt.selectedIndex].value;j.setValue(g,{value:nt})});break}}static setAttributes({html:d,element:g,storage:h=null,intent:j,linkService:b}){const{attributes:_}=g,st=d instanceof HTMLAnchorElement;_.type==="radio"&&(_.name=`${_.name}-${j}`);for(const[tt,nt]of Object.entries(_))if(nt!=null)switch(tt){case"class":nt.length&&d.setAttribute(tt,nt.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",nt);break;case"style":Object.assign(d.style,nt);break;case"textContent":d.textContent=nt;break;default:(!st||tt!=="href"&&tt!=="newWindow")&&d.setAttribute(tt,nt)}st&&b.addLinkAttributes(d,_.href,_.newWindow),h&&_.dataId&&this.setupStorage(d,_.dataId,g,h)}static render(d){var xt;const g=d.annotationStorage,h=d.linkService,j=d.xfaHtml,b=d.intent||"display",_=document.createElement(j.name);j.attributes&&this.setAttributes({html:_,element:j,intent:b,linkService:h});const st=[[j,-1,_]],tt=d.div;if(tt.append(_),d.viewport){const ut=`matrix(${d.viewport.transform.join(",")})`;tt.style.transform=ut}b!=="richText"&&tt.setAttribute("class","xfaLayer xfaFont");const nt=[];for(;st.length>0;){const[ut,_e,$]=st.at(-1);if(_e+1===ut.children.length){st.pop();continue}const at=ut.children[++st.at(-1)[1]];if(at===null)continue;const{name:it}=at;if(it==="#text"){const ot=document.createTextNode(at.value);nt.push(ot),$.append(ot);continue}const et=(xt=at==null?void 0:at.attributes)!=null&&xt.xmlns?document.createElementNS(at.attributes.xmlns,it):document.createElement(it);if($.append(et),at.attributes&&this.setAttributes({html:et,element:at,storage:g,intent:b,linkService:h}),at.children&&at.children.length>0)st.push([at,-1,et]);else if(at.value){const ot=document.createTextNode(at.value);o.XfaText.shouldBuildText(it)&&nt.push(ot),et.append(ot)}}for(const ut of tt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))ut.setAttribute("readOnly",!0);return{textDivs:nt}}static update(d){const g=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=g,d.div.hidden=!1}}s.XfaLayer=a},(e,s,i)=>{var j,b,_,st,tt,nt,xt,ut,_e,$,at,it,et,ot,rt,To,Mo,Lo,Io,Hs,Oo,$s,Uo,zo,Go,Ho,$o,fr,Vs,ns,rs,kr,Ws,ss,Pt,Vo,Ys,Wo,Yo,Xs,is,jr;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var o=i(1),a=i(4),c=i(29),d=i(6),g=i(5);const an=class an extends a.AnnotationEditor{constructor(wt){super({...wt,name:"inkEditor"});on(this,rt);on(this,j,0);on(this,b,0);on(this,_,this.canvasPointermove.bind(this));on(this,st,this.canvasPointerleave.bind(this));on(this,tt,this.canvasPointerup.bind(this));on(this,nt,this.canvasPointerdown.bind(this));on(this,xt,new Path2D);on(this,ut,!1);on(this,_e,!1);on(this,$,!1);on(this,at,null);on(this,it,0);on(this,et,0);on(this,ot,null);this.color=wt.color||null,this.thickness=wt.thickness||null,this.opacity=wt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(wt){a.AnnotationEditor.initialize(wt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(wt,kt){switch(wt){case o.AnnotationEditorParamsType.INK_THICKNESS:an._defaultThickness=kt;break;case o.AnnotationEditorParamsType.INK_COLOR:an._defaultColor=kt;break;case o.AnnotationEditorParamsType.INK_OPACITY:an._defaultOpacity=kt/100;break}}updateParams(wt,kt){switch(wt){case o.AnnotationEditorParamsType.INK_THICKNESS:Zt(this,rt,To).call(this,kt);break;case o.AnnotationEditorParamsType.INK_COLOR:Zt(this,rt,Mo).call(this,kt);break;case o.AnnotationEditorParamsType.INK_OPACITY:Zt(this,rt,Lo).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,an._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,an._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(an._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||an._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||an._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??an._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Zt(this,rt,ns).call(this),Zt(this,rt,rs).call(this)),this.isAttachedToDOM||(this.parent.add(this),Zt(this,rt,kr).call(this)),Zt(this,rt,jr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,pt(this,at).disconnect(),ln(this,at,null),super.remove())}setParent(wt){!this.parent&&wt?this._uiManager.removeShouldRescale(this):this.parent&&wt===null&&this._uiManager.addShouldRescale(this),super.setParent(wt)}onScaleChanging(){const[wt,kt]=this.parentDimensions,Tt=this.width*wt,zt=this.height*kt;this.setDimensions(Tt,zt)}enableEditMode(){pt(this,ut)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",pt(this,nt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",pt(this,nt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){pt(this,ut)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ln(this,ut,!0),this.div.classList.add("disabled"),Zt(this,rt,jr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(wt){this._focusEventsAllowed&&(super.focusin(wt),this.enableEditMode())}canvasPointerdown(wt){wt.button!==0||!this.isInEditMode()||pt(this,ut)||(this.setInForeground(),wt.preventDefault(),wt.type!=="mouse"&&this.div.focus(),Zt(this,rt,Oo).call(this,wt.offsetX,wt.offsetY))}canvasPointermove(wt){wt.preventDefault(),Zt(this,rt,$s).call(this,wt.offsetX,wt.offsetY)}canvasPointerup(wt){wt.preventDefault(),Zt(this,rt,Vs).call(this,wt)}canvasPointerleave(wt){Zt(this,rt,Vs).call(this,wt)}get isResizable(){return!this.isEmpty()&&pt(this,ut)}render(){if(this.div)return this.div;let wt,kt;this.width&&(wt=this.x,kt=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(pn=>{var qt;return(qt=this.div)==null?void 0:qt.setAttribute("aria-label",pn)});const[Tt,zt,en,un]=Zt(this,rt,Io).call(this);if(this.setAt(Tt,zt,0,0),this.setDims(en,un),Zt(this,rt,ns).call(this),this.width){const[pn,qt]=this.parentDimensions;this.setAspectRatio(this.width*pn,this.height*qt),this.setAt(wt*pn,kt*qt,this.width*pn,this.height*qt),ln(this,$,!0),Zt(this,rt,kr).call(this),this.setDims(this.width*pn,this.height*qt),Zt(this,rt,fr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Zt(this,rt,rs).call(this),this.div}setDimensions(wt,kt){const Tt=Math.round(wt),zt=Math.round(kt);if(pt(this,it)===Tt&&pt(this,et)===zt)return;ln(this,it,Tt),ln(this,et,zt),this.canvas.style.visibility="hidden";const[en,un]=this.parentDimensions;this.width=wt/en,this.height=kt/un,this.fixAndSetPosition(),pt(this,ut)&&Zt(this,rt,Ws).call(this,wt,kt),Zt(this,rt,kr).call(this),Zt(this,rt,fr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(wt,kt,Tt){var Ln,$n,Yn;if(wt instanceof c.InkAnnotationElement)return null;const zt=super.deserialize(wt,kt,Tt);zt.thickness=wt.thickness,zt.color=o.Util.makeHexColor(...wt.color),zt.opacity=wt.opacity;const[en,un]=zt.pageDimensions,pn=zt.width*en,qt=zt.height*un,Cn=zt.parentScale,fn=wt.thickness/2;ln(zt,ut,!0),ln(zt,it,Math.round(pn)),ln(zt,et,Math.round(qt));const{paths:On,rect:An,rotation:Rn}=wt;for(let{bezier:gn}of On){gn=Zt(Ln=an,Pt,Wo).call(Ln,gn,An,Rn);const rn=[];zt.paths.push(rn);let sn=Cn*(gn[0]-fn),Sn=Cn*(gn[1]-fn);for(let Vn=2,Gt=gn.length;Vn<Gt;Vn+=6){const hn=Cn*(gn[Vn]-fn),vn=Cn*(gn[Vn+1]-fn),Tn=Cn*(gn[Vn+2]-fn),In=Cn*(gn[Vn+3]-fn),kn=Cn*(gn[Vn+4]-fn),Ot=Cn*(gn[Vn+5]-fn);rn.push([[sn,Sn],[hn,vn],[Tn,In],[kn,Ot]]),sn=kn,Sn=Ot}const Wn=Zt(this,Pt,Vo).call(this,rn);zt.bezierPath2D.push(Wn)}const wn=Zt($n=zt,rt,Xs).call($n);return ln(zt,b,Math.max(a.AnnotationEditor.MIN_SIZE,wn[2]-wn[0])),ln(zt,j,Math.max(a.AnnotationEditor.MIN_SIZE,wn[3]-wn[1])),Zt(Yn=zt,rt,Ws).call(Yn,pn,qt),zt}serialize(){if(this.isEmpty())return null;const wt=this.getRect(0,0),kt=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:kt,thickness:this.thickness,opacity:this.opacity,paths:Zt(this,rt,Yo).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,wt),pageIndex:this.pageIndex,rect:wt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};j=new WeakMap,b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakMap,$=new WeakMap,at=new WeakMap,it=new WeakMap,et=new WeakMap,ot=new WeakMap,rt=new WeakSet,To=function(wt){const kt=this.thickness;this.addCommands({cmd:()=>{this.thickness=wt,Zt(this,rt,jr).call(this)},undo:()=>{this.thickness=kt,Zt(this,rt,jr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Mo=function(wt){const kt=this.color;this.addCommands({cmd:()=>{this.color=wt,Zt(this,rt,fr).call(this)},undo:()=>{this.color=kt,Zt(this,rt,fr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Lo=function(wt){wt/=100;const kt=this.opacity;this.addCommands({cmd:()=>{this.opacity=wt,Zt(this,rt,fr).call(this)},undo:()=>{this.opacity=kt,Zt(this,rt,fr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Io=function(){const{parentRotation:wt,parentDimensions:[kt,Tt]}=this;switch(wt){case 90:return[0,Tt,Tt,kt];case 180:return[kt,Tt,kt,Tt];case 270:return[kt,0,Tt,kt];default:return[0,0,kt,Tt]}},Hs=function(){const{ctx:wt,color:kt,opacity:Tt,thickness:zt,parentScale:en,scaleFactor:un}=this;wt.lineWidth=zt*en/un,wt.lineCap="round",wt.lineJoin="round",wt.miterLimit=10,wt.strokeStyle=`${kt}${(0,g.opacityToHex)(Tt)}`},Oo=function(wt,kt){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",pt(this,st)),this.canvas.addEventListener("pointermove",pt(this,_)),this.canvas.addEventListener("pointerup",pt(this,tt)),this.canvas.removeEventListener("pointerdown",pt(this,nt)),this.isEditing=!0,pt(this,$)||(ln(this,$,!0),Zt(this,rt,kr).call(this),this.thickness||(this.thickness=an._defaultThickness),this.color||(this.color=an._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=an._defaultOpacity)),this.currentPath.push([wt,kt]),ln(this,_e,!1),Zt(this,rt,Hs).call(this),ln(this,ot,()=>{Zt(this,rt,Go).call(this),pt(this,ot)&&window.requestAnimationFrame(pt(this,ot))}),window.requestAnimationFrame(pt(this,ot))},$s=function(wt,kt){const[Tt,zt]=this.currentPath.at(-1);if(this.currentPath.length>1&&wt===Tt&&kt===zt)return;const en=this.currentPath;let un=pt(this,xt);if(en.push([wt,kt]),ln(this,_e,!0),en.length<=2){un.moveTo(...en[0]),un.lineTo(wt,kt);return}en.length===3&&(ln(this,xt,un=new Path2D),un.moveTo(...en[0])),Zt(this,rt,Ho).call(this,un,...en.at(-3),...en.at(-2),wt,kt)},Uo=function(){if(this.currentPath.length===0)return;const wt=this.currentPath.at(-1);pt(this,xt).lineTo(...wt)},zo=function(wt,kt){ln(this,ot,null),wt=Math.min(Math.max(wt,0),this.canvas.width),kt=Math.min(Math.max(kt,0),this.canvas.height),Zt(this,rt,$s).call(this,wt,kt),Zt(this,rt,Uo).call(this);let Tt;if(this.currentPath.length!==1)Tt=Zt(this,rt,$o).call(this);else{const qt=[wt,kt];Tt=[[qt,qt.slice(),qt.slice(),qt]]}const zt=pt(this,xt),en=this.currentPath;this.currentPath=[],ln(this,xt,new Path2D);const un=()=>{this.allRawPaths.push(en),this.paths.push(Tt),this.bezierPath2D.push(zt),this.rebuild()},pn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Zt(this,rt,ns).call(this),Zt(this,rt,rs).call(this)),Zt(this,rt,jr).call(this))};this.addCommands({cmd:un,undo:pn,mustExec:!0})},Go=function(){if(!pt(this,_e))return;ln(this,_e,!1);const wt=Math.ceil(this.thickness*this.parentScale),kt=this.currentPath.slice(-3),Tt=kt.map(un=>un[0]),zt=kt.map(un=>un[1]);Math.min(...Tt)-wt,Math.max(...Tt)+wt,Math.min(...zt)-wt,Math.max(...zt)+wt;const{ctx:en}=this;en.save(),en.clearRect(0,0,this.canvas.width,this.canvas.height);for(const un of this.bezierPath2D)en.stroke(un);en.stroke(pt(this,xt)),en.restore()},Ho=function(wt,kt,Tt,zt,en,un,pn){const qt=(kt+zt)/2,Cn=(Tt+en)/2,fn=(zt+un)/2,On=(en+pn)/2;wt.bezierCurveTo(qt+2*(zt-qt)/3,Cn+2*(en-Cn)/3,fn+2*(zt-fn)/3,On+2*(en-On)/3,fn,On)},$o=function(){const wt=this.currentPath;if(wt.length<=2)return[[wt[0],wt[0],wt.at(-1),wt.at(-1)]];const kt=[];let Tt,[zt,en]=wt[0];for(Tt=1;Tt<wt.length-2;Tt++){const[An,Rn]=wt[Tt],[wn,Ln]=wt[Tt+1],$n=(An+wn)/2,Yn=(Rn+Ln)/2,gn=[zt+2*(An-zt)/3,en+2*(Rn-en)/3],rn=[$n+2*(An-$n)/3,Yn+2*(Rn-Yn)/3];kt.push([[zt,en],gn,rn,[$n,Yn]]),[zt,en]=[$n,Yn]}const[un,pn]=wt[Tt],[qt,Cn]=wt[Tt+1],fn=[zt+2*(un-zt)/3,en+2*(pn-en)/3],On=[qt+2*(un-qt)/3,Cn+2*(pn-Cn)/3];return kt.push([[zt,en],fn,On,[qt,Cn]]),kt},fr=function(){if(this.isEmpty()){Zt(this,rt,ss).call(this);return}Zt(this,rt,Hs).call(this);const{canvas:wt,ctx:kt}=this;kt.setTransform(1,0,0,1,0,0),kt.clearRect(0,0,wt.width,wt.height),Zt(this,rt,ss).call(this);for(const Tt of this.bezierPath2D)kt.stroke(Tt)},Vs=function(wt){this.canvas.removeEventListener("pointerleave",pt(this,st)),this.canvas.removeEventListener("pointermove",pt(this,_)),this.canvas.removeEventListener("pointerup",pt(this,tt)),this.canvas.addEventListener("pointerdown",pt(this,nt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),Zt(this,rt,zo).call(this,wt.offsetX,wt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ns=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(wt=>{var kt;return(kt=this.canvas)==null?void 0:kt.setAttribute("aria-label",wt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},rs=function(){ln(this,at,new ResizeObserver(wt=>{const kt=wt[0].contentRect;kt.width&&kt.height&&this.setDimensions(kt.width,kt.height)})),pt(this,at).observe(this.div)},kr=function(){if(!pt(this,$))return;const[wt,kt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*wt),this.canvas.height=Math.ceil(this.height*kt),Zt(this,rt,ss).call(this)},Ws=function(wt,kt){const Tt=Zt(this,rt,is).call(this),zt=(wt-Tt)/pt(this,b),en=(kt-Tt)/pt(this,j);this.scaleFactor=Math.min(zt,en)},ss=function(){const wt=Zt(this,rt,is).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+wt,this.translationY*this.scaleFactor+wt)},Pt=new WeakSet,Vo=function(wt){const kt=new Path2D;for(let Tt=0,zt=wt.length;Tt<zt;Tt++){const[en,un,pn,qt]=wt[Tt];Tt===0&&kt.moveTo(...en),kt.bezierCurveTo(un[0],un[1],pn[0],pn[1],qt[0],qt[1])}return kt},Ys=function(wt,kt,Tt){const[zt,en,un,pn]=kt;switch(Tt){case 0:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2)wt[qt]+=zt,wt[qt+1]=pn-wt[qt+1];break;case 90:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2){const fn=wt[qt];wt[qt]=wt[qt+1]+zt,wt[qt+1]=fn+en}break;case 180:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2)wt[qt]=un-wt[qt],wt[qt+1]+=en;break;case 270:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2){const fn=wt[qt];wt[qt]=un-wt[qt+1],wt[qt+1]=pn-fn}break;default:throw new Error("Invalid rotation")}return wt},Wo=function(wt,kt,Tt){const[zt,en,un,pn]=kt;switch(Tt){case 0:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2)wt[qt]-=zt,wt[qt+1]=pn-wt[qt+1];break;case 90:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2){const fn=wt[qt];wt[qt]=wt[qt+1]-en,wt[qt+1]=fn-zt}break;case 180:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2)wt[qt]=un-wt[qt],wt[qt+1]-=en;break;case 270:for(let qt=0,Cn=wt.length;qt<Cn;qt+=2){const fn=wt[qt];wt[qt]=pn-wt[qt+1],wt[qt+1]=un-fn}break;default:throw new Error("Invalid rotation")}return wt},Yo=function(wt,kt,Tt,zt){var Cn,fn;const en=[],un=this.thickness/2,pn=wt*kt+un,qt=wt*Tt+un;for(const On of this.paths){const An=[],Rn=[];for(let wn=0,Ln=On.length;wn<Ln;wn++){const[$n,Yn,gn,rn]=On[wn],sn=wt*$n[0]+pn,Sn=wt*$n[1]+qt,Wn=wt*Yn[0]+pn,Vn=wt*Yn[1]+qt,Gt=wt*gn[0]+pn,hn=wt*gn[1]+qt,vn=wt*rn[0]+pn,Tn=wt*rn[1]+qt;wn===0&&(An.push(sn,Sn),Rn.push(sn,Sn)),An.push(Wn,Vn,Gt,hn,vn,Tn),Rn.push(Wn,Vn),wn===Ln-1&&Rn.push(vn,Tn)}en.push({bezier:Zt(Cn=an,Pt,Ys).call(Cn,An,zt,this.rotation),points:Zt(fn=an,Pt,Ys).call(fn,Rn,zt,this.rotation)})}return en},Xs=function(){let wt=1/0,kt=-1/0,Tt=1/0,zt=-1/0;for(const en of this.paths)for(const[un,pn,qt,Cn]of en){const fn=o.Util.bezierBoundingBox(...un,...pn,...qt,...Cn);wt=Math.min(wt,fn[0]),Tt=Math.min(Tt,fn[1]),kt=Math.max(kt,fn[2]),zt=Math.max(zt,fn[3])}return[wt,Tt,kt,zt]},is=function(){return pt(this,ut)?Math.ceil(this.thickness*this.parentScale):0},jr=function(wt=!1){if(this.isEmpty())return;if(!pt(this,ut)){Zt(this,rt,fr).call(this);return}const kt=Zt(this,rt,Xs).call(this),Tt=Zt(this,rt,is).call(this);ln(this,b,Math.max(a.AnnotationEditor.MIN_SIZE,kt[2]-kt[0])),ln(this,j,Math.max(a.AnnotationEditor.MIN_SIZE,kt[3]-kt[1]));const zt=Math.ceil(Tt+pt(this,b)*this.scaleFactor),en=Math.ceil(Tt+pt(this,j)*this.scaleFactor),[un,pn]=this.parentDimensions;this.width=zt/un,this.height=en/pn,this.setAspectRatio(zt,en);const qt=this.translationX,Cn=this.translationY;this.translationX=-kt[0],this.translationY=-kt[1],Zt(this,rt,kr).call(this),Zt(this,rt,fr).call(this),ln(this,it,zt),ln(this,et,en),this.setDims(zt,en);const fn=wt?Tt/this.scaleFactor/2:0;this.translate(qt-this.translationX-fn,Cn-this.translationY-fn)},on(an,Pt),tr(an,"_defaultColor",null),tr(an,"_defaultOpacity",1),tr(an,"_defaultThickness",1),tr(an,"_type","ink");let h=an;s.InkEditor=h},(e,s,i)=>{var h,j,b,_,st,tt,nt,xt,ut,_e,$,Or,Ur,os,qs,Xo,qo,Ks,as,Ko;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var o=i(1),a=i(4),c=i(6),d=i(29);const Et=class Et extends a.AnnotationEditor{constructor(Dt){super({...Dt,name:"stampEditor"});on(this,$);on(this,h,null);on(this,j,null);on(this,b,null);on(this,_,null);on(this,st,null);on(this,tt,null);on(this,nt,null);on(this,xt,null);on(this,ut,!1);on(this,_e,!1);ln(this,_,Dt.bitmapUrl),ln(this,st,Dt.bitmapFile)}static initialize(Dt){a.AnnotationEditor.initialize(Dt)}static get supportedTypes(){const Dt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",Dt.map(Ft=>`image/${Ft}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Dt){return this.supportedTypes.includes(Dt)}static paste(Dt,Ft){Ft.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:Dt.getAsFile()})}remove(){var Dt,Ft;pt(this,j)&&(ln(this,h,null),this._uiManager.imageManager.deleteId(pt(this,j)),(Dt=pt(this,tt))==null||Dt.remove(),ln(this,tt,null),(Ft=pt(this,nt))==null||Ft.disconnect(),ln(this,nt,null)),super.remove()}rebuild(){if(!this.parent){pt(this,j)&&Zt(this,$,os).call(this);return}super.rebuild(),this.div!==null&&(pt(this,j)&&Zt(this,$,os).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(pt(this,b)||pt(this,h)||pt(this,_)||pt(this,st))}get isResizable(){return!0}render(){if(this.div)return this.div;let Dt,Ft;if(this.width&&(Dt=this.x,Ft=this.y),super.render(),this.div.hidden=!0,pt(this,h)?Zt(this,$,qs).call(this):Zt(this,$,os).call(this),this.width){const[bt,_t]=this.parentDimensions;this.setAt(Dt*bt,Ft*_t,this.width*bt,this.height*_t)}return this.div}static deserialize(Dt,Ft,bt){if(Dt instanceof d.StampAnnotationElement)return null;const _t=super.deserialize(Dt,Ft,bt),{rect:yt,bitmapUrl:jt,bitmapId:St,isSvg:At,accessibilityData:mt}=Dt;St&&bt.imageManager.isValidId(St)?ln(_t,j,St):ln(_t,_,jt),ln(_t,ut,At);const[ht,vt]=_t.pageDimensions;return _t.width=(yt[2]-yt[0])/ht,_t.height=(yt[3]-yt[1])/vt,mt&&(_t.altTextData=mt),_t}serialize(Dt=!1,Ft=null){if(this.isEmpty())return null;const bt={annotationType:o.AnnotationEditorType.STAMP,bitmapId:pt(this,j),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:pt(this,ut),structTreeParentId:this._structTreeParentId};if(Dt)return bt.bitmapUrl=Zt(this,$,as).call(this,!0),bt.accessibilityData=this.altTextData,bt;const{decorative:_t,altText:yt}=this.altTextData;if(!_t&&yt&&(bt.accessibilityData={type:"Figure",alt:yt}),Ft===null)return bt;Ft.stamps||(Ft.stamps=new Map);const jt=pt(this,ut)?(bt.rect[2]-bt.rect[0])*(bt.rect[3]-bt.rect[1]):null;if(!Ft.stamps.has(pt(this,j)))Ft.stamps.set(pt(this,j),{area:jt,serialized:bt}),bt.bitmap=Zt(this,$,as).call(this,!1);else if(pt(this,ut)){const St=Ft.stamps.get(pt(this,j));jt>St.area&&(St.area=jt,St.serialized.bitmap.close(),St.serialized.bitmap=Zt(this,$,as).call(this,!1))}return bt}};h=new WeakMap,j=new WeakMap,b=new WeakMap,_=new WeakMap,st=new WeakMap,tt=new WeakMap,nt=new WeakMap,xt=new WeakMap,ut=new WeakMap,_e=new WeakMap,$=new WeakSet,Or=function(Dt,Ft=!1){if(!Dt){this.remove();return}ln(this,h,Dt.bitmap),Ft||(ln(this,j,Dt.id),ln(this,ut,Dt.isSvg)),Zt(this,$,qs).call(this)},Ur=function(){ln(this,b,null),this._uiManager.enableWaiting(!1),pt(this,tt)&&this.div.focus()},os=function(){if(pt(this,j)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(pt(this,j)).then(Ft=>Zt(this,$,Or).call(this,Ft,!0)).finally(()=>Zt(this,$,Ur).call(this));return}if(pt(this,_)){const Ft=pt(this,_);ln(this,_,null),this._uiManager.enableWaiting(!0),ln(this,b,this._uiManager.imageManager.getFromUrl(Ft).then(bt=>Zt(this,$,Or).call(this,bt)).finally(()=>Zt(this,$,Ur).call(this)));return}if(pt(this,st)){const Ft=pt(this,st);ln(this,st,null),this._uiManager.enableWaiting(!0),ln(this,b,this._uiManager.imageManager.getFromFile(Ft).then(bt=>Zt(this,$,Or).call(this,bt)).finally(()=>Zt(this,$,Ur).call(this)));return}const Dt=document.createElement("input");Dt.type="file",Dt.accept=Et.supportedTypesStr,ln(this,b,new Promise(Ft=>{Dt.addEventListener("change",async()=>{if(!Dt.files||Dt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const bt=await this._uiManager.imageManager.getFromFile(Dt.files[0]);Zt(this,$,Or).call(this,bt)}Ft()}),Dt.addEventListener("cancel",()=>{this.remove(),Ft()})}).finally(()=>Zt(this,$,Ur).call(this))),Dt.click()},qs=function(){const{div:Dt}=this;let{width:Ft,height:bt}=pt(this,h);const[_t,yt]=this.pageDimensions,jt=.75;if(this.width)Ft=this.width*_t,bt=this.height*yt;else if(Ft>jt*_t||bt>jt*yt){const ht=Math.min(jt*_t/Ft,jt*yt/bt);Ft*=ht,bt*=ht}const[St,At]=this.parentDimensions;this.setDims(Ft*St/_t,bt*At/yt),this._uiManager.enableWaiting(!1);const mt=ln(this,tt,document.createElement("canvas"));Dt.append(mt),Dt.hidden=!1,Zt(this,$,Ks).call(this,Ft,bt),Zt(this,$,Ko).call(this),pt(this,_e)||(this.parent.addUndoableEditor(this),ln(this,_e,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Xo=function(Dt,Ft){var jt;const[bt,_t]=this.parentDimensions;this.width=Dt/bt,this.height=Ft/_t,this.setDims(Dt,Ft),(jt=this._initialOptions)!=null&&jt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,pt(this,xt)!==null&&clearTimeout(pt(this,xt)),ln(this,xt,setTimeout(()=>{ln(this,xt,null),Zt(this,$,Ks).call(this,Dt,Ft)},200))},qo=function(Dt,Ft){const{width:bt,height:_t}=pt(this,h);let yt=bt,jt=_t,St=pt(this,h);for(;yt>2*Dt||jt>2*Ft;){const At=yt,mt=jt;yt>2*Dt&&(yt=yt>=16384?Math.floor(yt/2)-1:Math.ceil(yt/2)),jt>2*Ft&&(jt=jt>=16384?Math.floor(jt/2)-1:Math.ceil(jt/2));const ht=new OffscreenCanvas(yt,jt);ht.getContext("2d").drawImage(St,0,0,At,mt,0,0,yt,jt),St=ht.transferToImageBitmap()}return St},Ks=function(Dt,Ft){Dt=Math.ceil(Dt),Ft=Math.ceil(Ft);const bt=pt(this,tt);if(!bt||bt.width===Dt&&bt.height===Ft)return;bt.width=Dt,bt.height=Ft;const _t=pt(this,ut)?pt(this,h):Zt(this,$,qo).call(this,Dt,Ft),yt=bt.getContext("2d");yt.filter=this._uiManager.hcmFilter,yt.drawImage(_t,0,0,_t.width,_t.height,0,0,Dt,Ft)},as=function(Dt){if(Dt){if(pt(this,ut)){const _t=this._uiManager.imageManager.getSvgUrl(pt(this,j));if(_t)return _t}const Ft=document.createElement("canvas");return{width:Ft.width,height:Ft.height}=pt(this,h),Ft.getContext("2d").drawImage(pt(this,h),0,0),Ft.toDataURL()}if(pt(this,ut)){const[Ft,bt]=this.pageDimensions,_t=Math.round(this.width*Ft*c.PixelsPerInch.PDF_TO_CSS_UNITS),yt=Math.round(this.height*bt*c.PixelsPerInch.PDF_TO_CSS_UNITS),jt=new OffscreenCanvas(_t,yt);return jt.getContext("2d").drawImage(pt(this,h),0,0,pt(this,h).width,pt(this,h).height,0,0,_t,yt),jt.transferToImageBitmap()}return structuredClone(pt(this,h))},Ko=function(){ln(this,nt,new ResizeObserver(Dt=>{const Ft=Dt[0].contentRect;Ft.width&&Ft.height&&Zt(this,$,Xo).call(this,Ft.width,Ft.height)})),pt(this,nt).observe(this.div)},tr(Et,"_type","stamp");let g=Et;s.StampEditor=g}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var s=__webpack_module_cache__[e];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return j.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var s=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),g=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),j=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const EPSILON=1e-6,emptyDistribution=()=>({0:0,1:0,2:0}),cloneDistribution=e=>({0:e[0]??0,1:e[1]??0,2:e[2]??0}),DEFAULT_DISTRIBUTION=Object.freeze({0:1,1:0,2:0}),normalizeKey=e=>e.trim().toLowerCase().replace(/\s+/g," "),normalizeGeneLabel=e=>{let s=e.trim();return s?(s=s.replace(/\(([^)]*)\)/g," $1 "),s=s.replace(/\b(?:possible|pos|probable|het|ph|carrier)\b/gi,""),s=s.replace(/\d+(?:\.\d+)?\s*%/g,""),s=s.replace(/\s+/g," ").trim(),s||(s=e.trim()),s.split(" ").filter(Boolean).map(a=>a.length<=2?a.toUpperCase():/^[A-Z]+$/.test(a)?a:a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ")||e.trim()):""},distributionLevel=e=>Math.abs(e[2]-1)<EPSILON?3:Math.abs(e[1]-1)<EPSILON?2:e[1]>EPSILON?1:0,combineProbabilistic=(e,s)=>{const i=e[1]??0,o=s[1]??0,a=1-(1-i)*(1-o),c=emptyDistribution();return c[1]=a,c[0]=1-a,c},updateEntry=(e,s,i,o)=>{const a=distributionLevel(o);return e?(a>e.level?(e.distribution=cloneDistribution(o),e.level=a):a===e.level&&a===1&&(e.distribution=combineProbabilistic(e.distribution,o),e.level=distributionLevel(e.distribution)),(i==="recessive"||!e.type||e.type!==i&&i==="co-dom"&&e.type==="dominant")&&(e.type=i),e):{gene:s,type:i,distribution:cloneDistribution(o),level:a}},parseCodomMorph=e=>{const s=e.trim();return/^super\s+/i.test(s)?{gene:s.replace(/^super\s+/i,"").trim(),alleleCount:2}:{gene:s,alleleCount:1}},parsePossibleProbability=e=>{const s=e.match(/(\d+(?:\.\d+)?)\s*%/);if(s){const i=Number(s[1]);if(!Number.isNaN(i))return Math.max(0,Math.min(1,i/100))}},gatherAnimalGenes=e=>{const s=new Map,i=(o,a,c)=>{const d=normalizeGeneLabel(o),g=normalizeKey(d),h=s.get(g);s.set(g,updateEntry(h,d,a,c))};return(e.morphs||[]).forEach(o=>{if(!(o!=null&&o.name))return;const a=o.name.trim();if(a)if(o.type==="recessive"){const c=emptyDistribution();c[2]=1,i(a,"recessive",c)}else if(o.type==="co-dom"){const c=parseCodomMorph(a),d=emptyDistribution();d[c.alleleCount]=1,i(c.gene,"co-dom",d)}else if(o.type==="dominant"||o.type==="polygenic"||o.type==="co-dom"){const c=emptyDistribution();c[1]=1,i(a,"dominant",c)}else{const c=emptyDistribution();c[1]=1,i(a,"dominant",c)}}),(e.hets||[]).forEach(o=>{if(!o)return;const a=emptyDistribution();a[1]=1,i(o,"recessive",a)}),(e.possibleHets||[]).forEach(o=>{if(!o)return;const a=parsePossibleProbability(o)??.5,c=emptyDistribution();c[1]=a,c[0]=1-a,i(o,"recessive",c)}),s},gameteMutProb=e=>e<=0?0:e>=2?1:.5,computeChildAlleleDistribution=(e,s)=>{const i=emptyDistribution(),o=[[0,e[0]??0],[1,e[1]??0],[2,e[2]??0]],a=[[0,s[0]??0],[1,s[1]??0],[2,s[2]??0]];o.forEach(([d,g])=>{g<=EPSILON||a.forEach(([h,j])=>{if(j<=EPSILON)return;const b=g*j,_=gameteMutProb(d),st=gameteMutProb(h),tt=_*st,nt=_*(1-st),xt=(1-_)*st,ut=nt+xt,_e=(1-_)*(1-st);i[2]+=b*tt,i[1]+=b*ut,i[0]+=b*_e})});const c=i[0]+i[1]+i[2];return c>EPSILON&&(i[0]/=c,i[1]/=c,i[2]/=c),i},translateDistributionToPhenotypes=(e,s,i)=>{const o=[],a=(c,d)=>{c>EPSILON&&o.push({labels:d,prob:c})};if(s==="recessive")a(i[2]??0,[e]),a(i[1]??0,[`het ${e}`]),a(i[0]??0,[]);else if(s==="co-dom")a(i[2]??0,[`Super ${e}`]),a(i[1]??0,[e]),a(i[0]??0,[]);else{const c=(i[1]??0)+(i[2]??0);a(c,[e]),a(i[0]??0,[])}return o.length?o:[{labels:[],prob:1}]},buildGeneBundles=(e,s)=>{const i=gatherAnimalGenes(e),o=gatherAnimalGenes(s),a=new Set([...i.keys(),...o.keys()]);return Array.from(a).map(c=>{const d=i.get(c),g=o.get(c),h=(d==null?void 0:d.gene)??(g==null?void 0:g.gene)??c,j=(d==null?void 0:d.type)??(g==null?void 0:g.type)??"recessive",b=d?d.distribution:cloneDistribution(DEFAULT_DISTRIBUTION),_=g?g.distribution:cloneDistribution(DEFAULT_DISTRIBUTION);return{gene:h,type:j,parentA:b,parentB:_}})},combineGeneOutcomes=e=>{let s=[{labels:[],prob:1}];e.forEach(c=>{const d=computeChildAlleleDistribution(c.parentA,c.parentB),g=translateDistributionToPhenotypes(c.gene,c.type,d),h=[];g.forEach(j=>{s.forEach(b=>{const _=b.prob*j.prob;_<=EPSILON||h.push({labels:[...b.labels,...j.labels],prob:_})})}),s=h.length?h:s});const i=new Map;s.forEach(c=>{const d=c.labels.slice().sort((j,b)=>j.localeCompare(b)),g=d.join("|"),h=i.get(g);h?h.prob+=c.prob:i.set(g,{labels:d,prob:c.prob})});let o=0;i.forEach(c=>{o+=c.prob}),o>EPSILON&&Math.abs(o-1)>1e-6&&i.forEach(c=>{c.prob=c.prob/o});const a=Array.from(i.values()).filter(c=>c.prob>EPSILON).map(c=>({genotype:c.labels,prob:c.prob,flags:[]})).sort((c,d)=>d.prob-c.prob);return a.length?a:[{genotype:[],prob:1,flags:[]}]},punnettCross=(e,s)=>{const i=buildGeneBundles(e,s);return i.length?combineGeneOutcomes(i):[{genotype:[],prob:1,flags:[]}]},cross=(e,s)=>punnettCross(e,s);var define_process_env_default$3={};const ONE_HOUR_MS=60*60*1e3,clampTtl=e=>!e||!Number.isFinite(e)||e<=0?0:e,isBrowser$1=typeof window<"u"&&typeof window.document<"u",createMemoryCache=()=>{const e=new Map,s=new Map,i=(o,a)=>{const c=clampTtl(a);if(!c)return!1;const d=Date.now()-c*ONE_HOUR_MS;return o.ts<d};return{getSearchCache(o,a){if(!o)return null;const c=e.get(o);return c?i(c,a)?(e.delete(o),null):c.value:null},setSearchCache(o,a,c){if(o&&(e.set(o,{value:a,ts:Date.now()}),clampTtl(c))){const d=clampTtl(c),g=Date.now()-d*ONE_HOUR_MS;Array.from(e.entries()).forEach(([h,j])=>{j.ts<g&&e.delete(h)})}},getPageCache(o,a){if(!o)return null;const c=s.get(o);return c?i(c,a)?(s.delete(o),null):c.value:null},setPageCache(o,a,c){if(o&&(s.set(o,{value:a,ts:Date.now()}),clampTtl(c))){const d=clampTtl(c),g=Date.now()-d*ONE_HOUR_MS;Array.from(s.entries()).forEach(([h,j])=>{j.ts<g&&s.delete(h)})}}}},createSqliteCache=()=>{const e=require("fs"),s=require("path"),i=(()=>{try{return require("better-sqlite3")}catch{return null}})(),o=define_process_env_default$3.CACHE_DB_PATH?s.resolve(process.cwd(),define_process_env_default$3.CACHE_DB_PATH):s.resolve(process.cwd(),"data","cache.sqlite");let a=null;const c=()=>{if(a)return a;if(!i)throw new Error("better-sqlite3 is required for caching. Install it by running 'npm install better-sqlite3'.");const g=o;e.mkdirSync(s.dirname(g),{recursive:!0});const h=new i(g);return h.pragma("journal_mode = WAL"),h.exec("CREATE TABLE IF NOT EXISTS search_hits (query TEXT PRIMARY KEY, json TEXT NOT NULL, ts INTEGER NOT NULL)"),h.exec("CREATE TABLE IF NOT EXISTS pages (url TEXT PRIMARY KEY, html TEXT NOT NULL, ts INTEGER NOT NULL)"),a=h,a},d=(g,h)=>{const j=clampTtl(h);if(j)try{const b=Date.now()-j*ONE_HOUR_MS;c().prepare(`DELETE FROM ${g} WHERE ts < ?`).run(b)}catch{}};return{getSearchCache(g,h){if(!g)return null;try{const b=c().prepare("SELECT json, ts FROM search_hits WHERE query = ?").get(g);if(!b)return null;if(clampTtl(h)){const _=Date.now()-clampTtl(h)*ONE_HOUR_MS;if(b.ts<_)return null}return JSON.parse(b.json)}catch{return null}},setSearchCache(g,h,j){if(g)try{const b=Date.now();c().prepare("INSERT INTO search_hits (query, json, ts) VALUES (?, ?, ?) ON CONFLICT(query) DO UPDATE SET json = excluded.json, ts = excluded.ts").run(g,JSON.stringify(h),b),d("search_hits",j)}catch{}},getPageCache(g,h){if(!g)return null;try{const b=c().prepare("SELECT html, ts FROM pages WHERE url = ?").get(g);if(!b)return null;if(clampTtl(h)){const _=Date.now()-clampTtl(h)*ONE_HOUR_MS;if(b.ts<_)return null}return b.html}catch{return null}},setPageCache(g,h,j){if(g)try{const b=Date.now();c().prepare("INSERT INTO pages (url, html, ts) VALUES (?, ?, ?) ON CONFLICT(url) DO UPDATE SET html = excluded.html, ts = excluded.ts").run(g,h,b),d("pages",j)}catch{}}}},cache=isBrowser$1?createMemoryCache():createSqliteCache(),getSearchCache=(e,s)=>cache.getSearchCache(e,s),setSearchCache=(e,s,i)=>cache.setSearchCache(e,s,i),getPageCache=(e,s)=>cache.getPageCache(e,s),setPageCache=(e,s,i)=>cache.setPageCache(e,s,i);var define_process_env_default$2={NVM_INC:"/Users/albertbitton/.nvm/versions/node/v20.19.5/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin/node",INIT_CWD:"/Users/albertbitton/Documents/GitHub/Breeding-planner",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/y8/fpxl89d56jzg88wp2wxlmq980000gn/T/",npm_config_global_prefix:"/Users/albertbitton/.nvm/versions/node/v20.19.5",VSCODE_PYTHON_AUTOACTIVATE_GUARD:"1",TERM_PROGRAM_VERSION:"1.106.0",ZDOTDIR:"/Users/albertbitton",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/albertbitton/Documents/GitHub/Breeding-planner",NVM_DIR:"/Users/albertbitton/.nvm",USER:"albertbitton",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/albertbitton/.nvm/versions/node/v20.19.5/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.gyh6QCvRwm/Listeners",VSCODE_PROFILE_INITIALIZED:"1",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/albertbitton/Documents/GitHub/Breeding-planner/node_modules/.bin:/Users/albertbitton/Documents/GitHub/node_modules/.bin:/Users/albertbitton/Documents/node_modules/.bin:/Users/albertbitton/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/albertbitton/.nvm/versions/node/v20.19.5/bin:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/copilotCli:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/copilotCli:/Users/albertbitton/.nvm/versions/node/v20.19.5/bin",npm_package_json:"/Users/albertbitton/Documents/GitHub/Breeding-planner/package.json",_:"/Users/albertbitton/Documents/GitHub/Breeding-planner/node_modules/.bin/vite",npm_config_userconfig:"/Users/albertbitton/.npmrc",npm_config_init_module:"/Users/albertbitton/.npm-init.js",USER_ZDOTDIR:"/Users/albertbitton",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/albertbitton/Documents/GitHub/Breeding-planner",npm_lifecycle_event:"deploy",EDITOR:"vi",npm_package_name:"breeding-planner",LANG:"en_US.UTF-8",npm_config_npm_version:"10.8.2",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/albertbitton",VSCODE_GIT_ASKPASS_MAIN:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/albertbitton/.npm",LOGNAME:"albertbitton",npm_lifecycle_script:"vite build && gh-pages -d dist",VSCODE_GIT_IPC_HANDLE:"/var/folders/y8/fpxl89d56jzg88wp2wxlmq980000gn/T/vscode-git-c6232d8e0d.sock",NVM_BIN:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin",npm_config_user_agent:"npm/10.8.2 node/v20.19.5 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",GIT_PAGER:"cat",npm_node_execpath:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin/node",npm_config_prefix:"/Users/albertbitton/.nvm/versions/node/v20.19.5",COLORTERM:"truecolor",NODE_ENV:"production",PUBLIC_URL:""};const DEFAULT_TIMEOUT=8e3,parseTtl=(e,s)=>{const i=Number(e);return Number.isFinite(i)&&i>0?i:s},env$1=typeof process<"u"&&process&&define_process_env_default$2?define_process_env_default$2:{},PAGE_CACHE_TTL_HOURS=parseTtl(env$1.PAGE_CACHE_TTL_HOURS,24),PRICE_REGEX=/\$?\b\d{2,5}\b/g,DATE_REGEXES=[/\b\d{4}-\d{1,2}-\d{1,2}\b/g,/\b\d{1,2}\/\d{1,2}\/\d{2,4}\b/g,/\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[a-z]*\.?\s+\d{1,2},?\s+\d{4}\b/gi],clamp01$1=e=>!Number.isFinite(e)||e<0?0:e>1?1:e,sanitizeUrl=e=>{try{return new URL(e)}catch{return null}},fetchWithTimeout$1=async(e,s)=>{const i=new AbortController,o=setTimeout(()=>i.abort(),s);try{return await fetch(e,{signal:i.signal,headers:{"User-Agent":"BreedingPlanner/1.0 (Demand Extractor)",Accept:"text/html,application/xhtml+xml"}})}finally{clearTimeout(o)}};let parserBundle=null;const dynamicImport=new Function("specifier","return import(specifier);"),loadParsers=async()=>{if(parserBundle)return parserBundle;parserBundle={};try{const e=await dynamicImport("jsdom").catch(()=>null);if(parserBundle.JSDOM=e==null?void 0:e.JSDOM,parserBundle.JSDOM)try{const s=await dynamicImport("@mozilla/readability").catch(()=>null);parserBundle.Readability=s==null?void 0:s.Readability}catch{parserBundle.Readability=void 0}}catch{parserBundle.JSDOM=void 0,parserBundle.Readability=void 0}return parserBundle},parsePrice=e=>{const s=e.replace(/[^\d]/g,"");if(!s)return null;const i=Number(s);return!Number.isFinite(i)||i<25||i>5e4?null:i},parseDateToken=e=>{const s=e.replace(/\s+/g," ").replace(/[,]/g,"").trim();if(!s)return null;if(s.match(/^\d{4}-\d{1,2}-\d{1,2}$/)){const[c,d,g]=s.split("-").map(h=>Number(h));return new Date(c,d-1,g)}const o=s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})$/);if(o){let c=Number(o[3]);const d=Number(o[1]),g=Number(o[2]);return c<100&&(c=c>=70?1900+c:2e3+c),new Date(c,d-1,g)}const a=Date.parse(s);return Number.isNaN(a)?null:new Date(a)},computeFreshnessScore=(e,s)=>{if(!e.length)return .2;const i=24*60*60*1e3,o=e.reduce((c,d)=>{const h=Math.max(0,s.getTime()-d.getTime())/i;return Math.min(c,h)},Number.POSITIVE_INFINITY);if(!Number.isFinite(o))return .2;const a=Math.exp(-o/45);return clamp01$1(a)},extractSignalsFromText=(e,s)=>{if(!e)return[];const i=e.split(new RegExp("(?<=[.!?])\\s+")).map(a=>a.trim()).filter(Boolean);if(!i.length)return[];const o=[];return s&&new Set(Array.from(s)).forEach(c=>{const d=i.find(g=>g.includes(c));d&&o.push(d.substring(0,240))}),o.length||o.push(i[0].substring(0,240)),o.slice(0,3)},extractPage=async(e,s,i)=>{var st,tt;const{JSDOM:o,Readability:a}=await loadParsers();let c=e,d="";if(o&&a)try{const nt=new o(s,{url:e});c=nt.window.document.title||c;const ut=new a(nt.window.document).parse();ut!=null&&ut.textContent?(d=ut.textContent,c=ut.title||c):d=((st=nt.window.document.body)==null?void 0:st.textContent)||""}catch{d=""}if(!d){const nt=s.replace(/<script[^>]*>[\s\S]*?<\/script>/gi," ").replace(/<style[^>]*>[\s\S]*?<\/style>/gi," ").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),xt=s.match(/<title[^>]*>([^<]*)<\/title>/i);c=((tt=xt==null?void 0:xt[1])==null?void 0:tt.trim())||c,d=nt}const g=d.match(PRICE_REGEX),h=[];g&&g.forEach(nt=>{const xt=parsePrice(nt);xt&&h.push(xt)});const j=[];DATE_REGEXES.forEach(nt=>{const xt=d.match(nt);xt&&xt.forEach(ut=>{const _e=parseDateToken(ut);_e&&j.push(_e)})});const b=computeFreshnessScore(j,i),_=extractSignalsFromText(d,g);return{url:e,title:c,text:d,prices:h,freshnessScore:b,signals:_}},dedupeHosts=e=>{const s=new Set,i=[];return e.forEach(o=>{const a=sanitizeUrl(o);if(!a)return;const c=a.host.toLowerCase();s.has(c)||(s.add(c),i.push(a.toString()))}),i},readCachedPage=e=>{try{const s=getPageCache(e,PAGE_CACHE_TTL_HOURS);return typeof s=="string"?s:null}catch{return null}},writeCachedPage=(e,s)=>{try{setPageCache(e,s,PAGE_CACHE_TTL_HOURS)}catch{}},average=e=>e.length?e.reduce((s,i)=>s+i,0)/e.length:0,extractDemand=async(e,s={})=>{const i=dedupeHosts(e);if(!i.length)return{index:0,priceBand:null,signals:[],sources:[]};const o=s.timeoutMs??DEFAULT_TIMEOUT,a=s.now??new Date,c=[],d=[],g=[],h=[],j=_e=>{c.push({title:_e.title||_e.url,url:_e.url}),d.push(..._e.signals),g.push(..._e.prices),h.push(_e.freshnessScore)};await Promise.all(i.map(async _e=>{try{let $=readCachedPage(_e);if($)try{const et=await extractPage(_e,$,a);j(et);return}catch(et){d.push(`Cached content parse failed for ${_e}: ${(et==null?void 0:et.message)||"unknown error"}`),$=null}const at=await fetchWithTimeout$1(_e,o);if(!at.ok){d.push(`Skipped ${_e} (status ${at.status})`);return}$=await at.text();const it=await extractPage(_e,$,a);j(it),writeCachedPage(_e,$)}catch($){d.push(`Fetch failed for ${_e}: ${($==null?void 0:$.message)||"unknown error"}`)}}));const b=Array.from(new Set(d.map(_e=>_e.trim()).filter(Boolean))).slice(0,12);let _=null;if(g.length){const _e=Math.min(...g),$=Math.max(...g);Number.isFinite(_e)&&Number.isFinite($)&&(_=[_e,$])}const st=clamp01$1(b.length/6),tt=_?clamp01$1(average(g)/5e3):0,nt=h.length?clamp01$1(average(h)):.2,xt=clamp01$1(.4*tt+.35*st+.25*nt);return{index:Math.round(xt*100),priceBand:_,signals:b,sources:c}};var define_process_env_default$1={NVM_INC:"/Users/albertbitton/.nvm/versions/node/v20.19.5/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin/node",INIT_CWD:"/Users/albertbitton/Documents/GitHub/Breeding-planner",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/y8/fpxl89d56jzg88wp2wxlmq980000gn/T/",npm_config_global_prefix:"/Users/albertbitton/.nvm/versions/node/v20.19.5",VSCODE_PYTHON_AUTOACTIVATE_GUARD:"1",TERM_PROGRAM_VERSION:"1.106.0",ZDOTDIR:"/Users/albertbitton",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/albertbitton/Documents/GitHub/Breeding-planner",NVM_DIR:"/Users/albertbitton/.nvm",USER:"albertbitton",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/albertbitton/.nvm/versions/node/v20.19.5/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.gyh6QCvRwm/Listeners",VSCODE_PROFILE_INITIALIZED:"1",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/albertbitton/Documents/GitHub/Breeding-planner/node_modules/.bin:/Users/albertbitton/Documents/GitHub/node_modules/.bin:/Users/albertbitton/Documents/node_modules/.bin:/Users/albertbitton/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/albertbitton/.nvm/versions/node/v20.19.5/bin:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/copilotCli:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand:/Users/albertbitton/Library/Application Support/Code/User/globalStorage/github.copilot-chat/copilotCli:/Users/albertbitton/.nvm/versions/node/v20.19.5/bin",npm_package_json:"/Users/albertbitton/Documents/GitHub/Breeding-planner/package.json",_:"/Users/albertbitton/Documents/GitHub/Breeding-planner/node_modules/.bin/vite",npm_config_userconfig:"/Users/albertbitton/.npmrc",npm_config_init_module:"/Users/albertbitton/.npm-init.js",USER_ZDOTDIR:"/Users/albertbitton",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/albertbitton/Documents/GitHub/Breeding-planner",npm_lifecycle_event:"deploy",EDITOR:"vi",npm_package_name:"breeding-planner",LANG:"en_US.UTF-8",npm_config_npm_version:"10.8.2",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/albertbitton/.nvm/versions/node/v20.19.5/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/albertbitton",VSCODE_GIT_ASKPASS_MAIN:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/albertbitton/.npm",LOGNAME:"albertbitton",npm_lifecycle_script:"vite build && gh-pages -d dist",VSCODE_GIT_IPC_HANDLE:"/var/folders/y8/fpxl89d56jzg88wp2wxlmq980000gn/T/vscode-git-c6232d8e0d.sock",NVM_BIN:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin",npm_config_user_agent:"npm/10.8.2 node/v20.19.5 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/Users/albertbitton/Desktop/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",GIT_PAGER:"cat",npm_node_execpath:"/Users/albertbitton/.nvm/versions/node/v20.19.5/bin/node",npm_config_prefix:"/Users/albertbitton/.nvm/versions/node/v20.19.5",COLORTERM:"truecolor",NODE_ENV:"production",PUBLIC_URL:""};class SearchError extends Error{constructor(s,i=!0){super(s),this.name="SearchError",this.retryable=i}}const MAX_RESULTS=8,parsePositiveNumber=(e,s)=>{if(e==null)return s;const i=Number(e);return Number.isFinite(i)&&i>0?i:s},parseBoolean=(e,s=!1)=>{if(e==null)return s;const i=e.trim().toLowerCase();return["1","true","yes","y","on"].includes(i)?!0:["0","false","no","n","off"].includes(i)?!1:s},env=typeof process<"u"&&process&&define_process_env_default$1?define_process_env_default$1:{},isBrowser=typeof window<"u"&&typeof window.document<"u",SEARCH_CACHE_TTL_HOURS=parsePositiveNumber(env.SEARCH_CACHE_TTL_HOURS,12),CACHE_ONLY_MODE=parseBoolean(env.CACHE_ONLY,!1),SEARCH_TIMEOUT_MS=parsePositiveNumber(env.SEARCH_TIMEOUT_MS,8e3),SEARCH_RETRY_ATTEMPTS=Math.max(1,Math.floor(parsePositiveNumber(env.SEARCH_RETRY_ATTEMPTS,2))),SEARCH_RETRY_DELAY_MS=parsePositiveNumber(env.SEARCH_RETRY_DELAY_MS,300),wait=e=>new Promise(s=>{setTimeout(s,e)}),fetchWithTimeout=async(e,s)=>{const i=new AbortController,o=setTimeout(()=>i.abort(),SEARCH_TIMEOUT_MS);try{return await fetch(e,{...s,signal:i.signal})}catch(a){throw(a==null?void 0:a.name)==="AbortError"?new SearchError(`Search request timed out after ${SEARCH_TIMEOUT_MS}ms`,!0):a}finally{clearTimeout(o)}},fetchJson=async(e,s)=>{try{const i=await fetchWithTimeout(e,s);if(!i.ok){const o=await i.text().catch(()=>""),a=i.status>=500||i.status===429;throw new SearchError(`Search request failed (${i.status}): ${o||i.statusText}`,a)}return await i.json()}catch(i){if(i instanceof SearchError)throw i;const o=(i==null?void 0:i.message)||"Unknown search error";throw new SearchError(o,!0)}},executeWithRetry=async e=>{let s=0,i;for(;s<SEARCH_RETRY_ATTEMPTS;){s+=1;try{return await e()}catch(a){if(a instanceof SearchError){if(!a.retryable||s>=SEARCH_RETRY_ATTEMPTS)throw a;i=a}else{if(s>=SEARCH_RETRY_ATTEMPTS)throw a;i=a}}const o=Math.min(SEARCH_TIMEOUT_MS,SEARCH_RETRY_DELAY_MS*s);await wait(o)}throw i instanceof Error?i:new SearchError("Search request failed",!0)},filterUniqueDomains=e=>{const s=new Set,i=[];return e.forEach(o=>{try{const a=new URL(o.url).hostname.replace(/^www\./i,"").toLowerCase();if(s.has(a))return;s.add(a),i.push(o)}catch{}}),i.slice(0,MAX_RESULTS)},sanitizeLimit=e=>!Number.isFinite(e)||e<=0?MAX_RESULTS:Math.min(Math.floor(e),MAX_RESULTS),memoryCache=new Map,readPersistentCache=e=>{try{const s=getSearchCache(e,SEARCH_CACHE_TTL_HOURS);if(Array.isArray(s))return s}catch{}return null},writePersistentCache=(e,s)=>{try{setSearchCache(e,s,SEARCH_CACHE_TTL_HOURS)}catch{}},readCachedResults=e=>{const s=memoryCache.get(e);if(s)return s;const i=readPersistentCache(e);return i?(memoryCache.set(e,i),i):null},writeCachedResults=(e,s)=>{memoryCache.set(e,s),writePersistentCache(e,s)},buildCacheKey=(e,s)=>`${e}:${s.trim().toLowerCase()}`,createNoopProvider=e=>({async search(){return typeof console<"u"&&console.warn&&console.warn(`[search] ${e}`),[]}}),createBingProvider=()=>{const e=env.BING_SEARCH_KEY||env.AZURE_BING_KEY;if(!e){if(isBrowser)return createNoopProvider("Bing search unavailable: missing API key");throw new Error("Bing search provider selected but no BING_SEARCH_KEY (or AZURE_BING_KEY) is configured.")}return{async search(s,i){var b;const o=sanitizeLimit(i),a=buildCacheKey("bing",s),c=readCachedResults(a);if(c)return c.slice(0,o);if(CACHE_ONLY_MODE)return[];const h=(((b=(await executeWithRetry(()=>fetchJson(`https://api.bing.microsoft.com/v7.0/search?q=${encodeURIComponent(s)}&count=${o*2}`,{headers:{"Ocp-Apim-Subscription-Key":e}}))).webPages)==null?void 0:b.value)||[]).map(_=>({title:_.name||"",url:_.url||""})).filter(_=>_.title&&_.url),j=filterUniqueDomains(h);return writeCachedResults(a,j),j.slice(0,o)}}},createSerpApiProvider=()=>{const e=env.SERPAPI_API_KEY||env.SERPAPI_KEY;if(!e){if(isBrowser)return createNoopProvider("SerpAPI search unavailable: missing API key");throw new Error("SerpAPI search provider selected but no SERPAPI_API_KEY (or SERPAPI_KEY) is configured.")}return{async search(s,i){const o=sanitizeLimit(i),a=buildCacheKey("serpapi",s),c=readCachedResults(a);if(c)return c.slice(0,o);if(CACHE_ONLY_MODE)return[];const d=new URLSearchParams({engine:"google",q:s,num:String(Math.max(10,o*2)),api_key:e}),j=((await executeWithRetry(()=>fetchJson(`https://serpapi.com/search.json?${d.toString()}`,{}))).organic_results||[]).map(_=>({title:_.title||"",url:_.link||""})).filter(_=>_.title&&_.url),b=filterUniqueDomains(j);return writeCachedResults(a,b),b.slice(0,o)}}},getSearchProvider=()=>{const e=(env.SEARCH_PROVIDER||"bing").trim().toLowerCase();switch(e){case"serpapi":return createSerpApiProvider();case"bing":return createBingProvider();default:if(isBrowser)return createNoopProvider(`Unknown search provider '${e}', falling back to no-op.`);throw new Error(`Unknown SEARCH_PROVIDER '${e}'. Supported providers: bing, serpapi.`)}},risk_rules=[{pattern:"Spider x Spider",flag:"Suspect super",penalty:.8},{pattern:"Champagne x Champagne",flag:"Suspect super",penalty:.8},{pattern:"Woma x Woma",flag:"Suspect super",penalty:.8},{pattern:"Cinnamon x Cinnamon",flag:"Deformity risk in supers",penalty:.3},{pattern:"BlackPastel x BlackPastel",flag:"Deformity risk in supers",penalty:.3}],rulesConfig={risk_rules},normalize$1=e=>e.trim().toLowerCase(),riskRules=Array.isArray(rulesConfig==null?void 0:rulesConfig.risk_rules)?rulesConfig.risk_rules.map(e=>({pattern:e.pattern,flag:e.flag,penalty:e.penalty??0})):[],unique=e=>{const s=new Set;return e.forEach(i=>s.add(i)),Array.from(s)},matchRule=(e,s)=>{if(!e)return!1;const i=normalize$1(s.pattern);return normalize$1(e).includes(i)},applyRiskFlags=(e,s)=>{let i=0;const o=[];riskRules.forEach(c=>{matchRule(e,c)&&(o.push(c.flag),i+=c.penalty)});const a=Math.min(1,Math.max(0,i));return{risks:unique(o),penalty:a}},normalize=e=>e.trim().toLowerCase(),traitMatches=(e,s)=>{const i=normalize(e),o=normalize(s);return o?i===o?!0:i.includes(o):!1},expandAliases=(e,s)=>{const i=e.trim();if(!i)return[];const o=new Set;o.add(i);const a=i.toLowerCase(),c=a.startsWith("het ")||a.includes("het "),d=a.includes("possible het");if(!c&&!d){o.add(`Super ${i}`);const g=s.recessiveState;(g==="het"||g==="possibleHet")&&(o.add(`het ${i}`),o.add(`possible het ${i}`))}return Array.from(o)},phenotypeMatches=(e,s,i)=>expandAliases(s,i).some(a=>e.some(c=>traitMatches(c,a))),carriesRecessivePotential=(e,s)=>{var o,a,c;const i=d=>d?traitMatches(d,s)||traitMatches(d,`het ${s}`):!1;return!!((o=e.morphs)!=null&&o.some(d=>traitMatches(d.name,s))||(a=e.hets)!=null&&a.some(d=>traitMatches(d,s))||(c=e.possibleHets)!=null&&c.some(d=>i(d)))},hasVisualTrait=(e,s)=>{var i;return((i=e.morphs)==null?void 0:i.some(o=>traitMatches(o.name,s)))??!1},normalizeRecessiveLabel=e=>{let s=e.trim();return s=s.replace(/^(?:het|possible het|pos het)\s+/i,""),s.trim()},matchesGoal=(e,s)=>{var o,a,c;const i=e||[];return!((o=s.avoid)!=null&&o.some(d=>i.some(g=>traitMatches(g,d)))||(a=s.requireAll)!=null&&a.length&&!s.requireAll.every(g=>phenotypeMatches(i,g,s))||(c=s.requireAny)!=null&&c.length&&!s.requireAny.some(g=>phenotypeMatches(i,g,s)))},probGoalForPair=(e,s)=>e.reduce((i,o)=>matchesGoal(o.genotype,s)?i+o.prob:i,0),goalScoreForPair=(e,s)=>s.reduce((i,o)=>{const a=probGoalForPair(e,o);if(o.minProb&&a<o.minProb)return i;const c=o.weight??1;return i+a*c},0),prefilterByGoal=(e,s,i)=>{var o,a;return(o=i.avoid)!=null&&o.length&&i.avoid.some(d=>hasVisualTrait(e,d)||hasVisualTrait(s,d))?!1:i.recessiveState==="visual"&&((a=i.requireAll)!=null&&a.length)?i.requireAll.every(c=>{const d=normalizeRecessiveLabel(c);return d?carriesRecessivePotential(e,d)&&carriesRecessivePotential(s,d):!0}):!0},clamp01=e=>Number.isNaN(e)||e<0?0:e>1?1:e,demandScore=e=>{const s=typeof(e==null?void 0:e.index)=="number"?e.index:0;return clamp01(s/10)},priceScore=e=>{const s=e==null?void 0:e.priceBand;if(!s||s.length!==2)return 0;const[i,o]=s,a=[i,o].filter(g=>typeof g=="number");if(!a.length)return 0;const c=a.reduce((g,h)=>g+(h??0),0)/a.length,d=c/(c+5e3);return clamp01(d)},noveltyScore=e=>{if(!(e!=null&&e.length))return 0;const i=(new Set(e.map(o=>o.genotype.slice().sort().join("|"))).size-1)/3;return clamp01(i)},baseScore=({outcomes:e,demand:s,risks:i,w:o})=>{const a=o.wDemand*demandScore(s),c=o.wPrice*priceScore(s),d=o.wNovelty*noveltyScore(e),g=o.wRisk*((i==null?void 0:i.penalty)??0),h=a+c+d-g;return Math.max(0,h)},finalScore=({outcomes:e,demand:s,risks:i,goals:o,w:a})=>{const c=baseScore({outcomes:e,demand:s,risks:i,w:a}),d=o!=null&&o.length?goalScoreForPair(e,o):0,g=c+(a.wGoalFit??1)*d;return{score:Math.max(0,g),goalFit:d}},RATIONALE_SCHEMA={type:"object",properties:{why_good:{type:"string"},watchouts:{type:"array",items:{type:"string"}},sources:{type:"array",items:{type:"string"}}},required:["why_good","watchouts","sources"]},isPlainObject=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),validateArrayOfStrings=e=>{if(!Array.isArray(e))throw new Error("Expected an array of strings");return e.forEach(s=>{if(typeof s!="string")throw new Error("Expected all array items to be strings")}),e},validateJson=(e,s)=>{let i;try{i=JSON.parse(e)}catch{throw new Error("Response was not valid JSON")}if(!isPlainObject(s))throw new Error("Schema must be an object");if(!isPlainObject(i))throw new Error("Parsed JSON is not an object");Array.isArray(s.required)&&s.required.forEach(a=>{if(!(a in i))throw new Error(`Missing required property: ${a}`)});const o=isPlainObject(s.properties)?s.properties:{};return Object.entries(o).forEach(([a,c])=>{const d=i[a];if(!isPlainObject(c))return;const g=c.type;if(g==="string"&&typeof d!="string")throw new Error(`Expected property '${a}' to be a string`);g==="array"&&validateArrayOfStrings(d)}),i},callLLM=async e=>{throw new Error("No LLM provider configured for justification")},justify=async e=>{const s=await callLLM();return validateJson(s,RATIONALE_SCHEMA)},GENE_GROUPS={Recessive:["210 Hypo","Albino","Atomic","Axanthic","Axanthic (GCR)","Axanthic (Jolliff)","Axanthic (MJ)","Axanthic (TSK)","Axanthic (VPI)","Bengal","Black Axanthic","Black Lace","Candy","Caramel Albino","Clown","Cryptic","Desert Ghost","Enhancer","Genetic Stripe","Ghost (Vesper)","Hypo","Lavender Albino","Maple","Metal Flake","Migraine","Monarch","Monsoon","Moray","Orange Crush","Orange Ghost","Paint","Patternless","Piebald","Puzzle","Rainbow","Sahara","Sandstorm","Sunset","Tornado","Tri-stripe","Ultramel","Whitewash","Zebra"],"Incomplete Dominant":["Acid","Ajax","Alloy","Ambush","Arcane","Arroyo","Asphalt","Astro","Bald","Bambino","Bamboo","Banana","Bang","Black Head","Black Pastel","Blade","Bongo","Butter","Cafe","Calico","Carbon","Carnivore","Champagne","Chino","Chocolate","Cinder","Cinnamon","Circle","Citron","Coffee","Copper","Creed","Cypress","Dark Viking","Diesel","Disco","Dot","EMG","Enchi","Epic","Exo-lbb","Fire","Flame","FNR Vanilla","Furrow","Fusion","Gaia","Gallium","GeneX","GHI","Glossy","Gobi","Granite","Gravel","Grim","Het Red Axanthic","Hidden Gene Woma","Hieroglyphic","High Intensity OD","Honey","Huffman","Hydra","Jaguar","Java","Jedi","Jolliff Tiger","Jolt","Joppa","Jungle Woma","KRG","Lace","LC Black Magic","Lemonback","Lesser","Mahogany","Mario","Marvel","Mckenzie","Melt","Microscale","Mocha","Mojave","Mosaic","Motley","Mystic","Nanny","Nico","Nr Mandarin","Nyala","Odium","OFY","Orange Dream","Orbit","Panther","Pastel","Peach","Phantom","Phenomenon","Pixel","Quake","Rain","RAR","Raven","Razor","Reaper","Red Gene","Red Stripe","Rhino","Russo","Saar","Sable","Sandblast","Sapphire","Satin","Scaleless Head","Scrambler","Shadow","Sherg","Shrapnel","Shredder","Smuggler","Spark","Special","Specter","Spider","Splatter","Spotnose","Stranger","Striker","Sulfur","Surge","Taronja","The Darkling","Trick","Trident","Trojan","Twister","Vanilla","Vudoo","Web","Woma","Wookie","Wrecking Ball","X-treme Gene","X-tremist","Yellow Belly","Zuwadi"],Dominant:["Adder","AHI","Ashen","Black Belly","Confusion","Congo","Desert","Eramosa","Frost","Gold Blush","Harlequin","Het Daddy","Josie","Leopard","Mordor","Nova","Oriole","Pinstripe","Redhead","Shatter","Splash","Static","Sunrise","Vesper","Zip Belly"],Polygenic:["Brown Back","Fader","Genetic Black Back","Genetic Reduced"],Other:["Dinker","Hybrid","Normal","Paradox","RECO","Ringer","Ringer Mark"],Locality:["Volta"]},PRIMARY_GENE_GROUPS=["Recessive","Incomplete Dominant","Dominant","Other"],GENE_ALIASES={ultramelanistic:"Ultramel"},RAW_GENE_GROUP_LOOKUP=(()=>{const e=new Map;return Object.entries(GENE_GROUPS).forEach(([s,i])=>{i.forEach(o=>{o&&e.set(String(o).trim().toLowerCase(),s)})}),e})();function normalizeGeneCandidate(e){return e?String(e).trim().toLowerCase():""}function getGeneGroupFromDatabase(e){if(!e)return null;const s=new Set,i=_=>{if(!_)return;const st=String(_).trim();if(!st)return;const tt=st.toLowerCase();s.has(tt)||s.add(tt)},o=String(e).trim();if(!o)return null;i(o);const a=o.replace(/\(.*?\)/g,"").trim();a&&a!==o&&i(a);const c=a.replace(/^super[\s-]+/i,"").trim();c&&c!==a&&i(c);const d=a.match(/^super([A-Z].*)$/);d&&d[1]&&i(d[1]);const g=GENE_ALIASES[a.toLowerCase()];g&&i(g);const h=o.match(/^\s*axanthic\s*\(([^)]+)\)/i);if(h&&h[1]){const _=h[1].replace(/\s+/g," ").trim();if(_){const st=_.toLowerCase(),tt=[{match:/tsk/,canonical:"TSK"},{match:/gcr/,canonical:"GCR"},{match:/jol(l|liff)/,canonical:"Jolliff"},{match:/mj/,canonical:"MJ"},{match:/vpi/,canonical:"VPI"}];let nt=null;for(const{match:xt,canonical:ut}of tt)if(xt.test(st)){nt=ut;break}nt||(nt=_.replace(/\s*line$/i,"").trim()),nt&&i(`Axanthic (${nt})`),i("Axanthic")}}const j=c.replace(/^(?:\d{1,3}%\s+)?(?:pos(?:s?i?a?ble)?\s+)?het\s+/i,"").trim();j&&j!==c&&i(j);const b=j.replace(/^(?:\d{1,3}%\s*)/i,"").trim();b&&b!==j&&i(b);for(const _ of s){const st=GENE_ALIASES[_];st&&i(st)}for(const _ of s){const st=normalizeGeneCandidate(_);if(RAW_GENE_GROUP_LOOKUP.has(st))return RAW_GENE_GROUP_LOOKUP.get(st)||null}return null}function normalizePrimaryGeneGroup(e){return!e||e==="Polygenic"||e==="Locality"||!PRIMARY_GENE_GROUPS.includes(e)?"Other":e}function getGeneDisplayGroup(e){const s=getGeneGroupFromDatabase(e);return normalizePrimaryGeneGroup(s)}function inferMorphType(e){const s=getGeneDisplayGroup(e);return s==="Recessive"?"recessive":s==="Incomplete Dominant"?"co-dom":s==="Dominant"?"dominant":"polygenic"}var define_process_env_default={};const DEFAULT_SEARCH_LIMIT=6,DEFAULT_CONCURRENCY=(()=>{if(typeof process<"u"&&process&&define_process_env_default&&define_process_env_default.SUGGESTION_CONCURRENCY){const e=Number(define_process_env_default.SUGGESTION_CONCURRENCY);if(Number.isFinite(e)&&e>0)return e}return 3})(),uniqueStrings=e=>{const s=new Set;return e.filter(i=>!!(i&&i.trim())).forEach(i=>{const o=i.trim();s.has(o)||s.add(o)}),Array.from(s)},collectKeywords=(e,s,i)=>{const o=[],a=c=>{var d,g,h;(d=c.morphs)==null||d.forEach(j=>o.push(j.name)),(g=c.hets)==null||g.forEach(j=>o.push(`${j}`)),(h=c.possibleHets)==null||h.forEach(j=>o.push(j))};return a(e),a(s),i.slice(0,4).forEach(c=>{var d;(d=c.genotype)!=null&&d.length&&o.push(c.genotype.join(" "))}),uniqueStrings(o).slice(0,6)},buildQuery=e=>e.length?`ball python ${e.join(" ")}`.trim():"ball python morph",formatAnimalLabel=e=>{var i;const s=((i=e.morphs)==null?void 0:i.map(o=>o.name).join(" "))||"Normal";return`${e.sex==="M"?"Male":"Female"} ${s}`},defaultDemand=()=>({index:0,priceBand:null,signals:[],sources:[]}),summarizeRationale=(e,s,i)=>`Projected score ${e.toFixed(2)} with demand index ${s}. ${i}`.trim(),collectGoalProbabilities=(e,s)=>s.map(i=>probGoalForPair(e,i)),bestGoalSummary=(e,s)=>{if(!e.length||!s.length)return"No specific goal targets.";let i=0,o=s[0];s.forEach((c,d)=>{c>o&&(o=c,i=d)});const a=e[i];return`${(o*100).toFixed(1)}% chance to hit goal '${a.name}'.`},safeJustify=async(e,s)=>{var i,o;try{const a=await justify(e),c=(i=a.watchouts)!=null&&i.length?` Watchouts: ${a.watchouts.join("; ")}.`:"",d=(o=a.sources)!=null&&o.length?` Sources: ${a.sources.join(", ")}.`:"";return`${a.why_good}${c}${d}`.trim()}catch{return s}},normalizeToken=e=>e.toLowerCase().replace(/\s+/g," ").trim(),stripPrefixes=e=>e.replace(/^(?:het|possible het|pos het)\s+/i,"").replace(/^visual\s+/i,"").replace(/^super\s+/i,"").trim(),cleanGoalTrait=e=>stripPrefixes(e),gatherTargetTraits=e=>{const s=new Set;return e.forEach(i=>{(i.requireAll||[]).forEach(o=>{const a=cleanGoalTrait(o);a&&s.add(a)})}),Array.from(s)},tokenizeOutcome=e=>{var s;return((s=e.genotype)==null?void 0:s.map(i=>i.trim()).filter(Boolean))??[]},parseOutcomeGenetics=e=>{const s=[],i=[],o=[],a=[];return e.forEach(c=>{const d=c.trim();if(!d)return;const g=normalizeToken(d);if(g.startsWith("possible het")){const h=stripPrefixes(d);h&&(o.push(h),a.push(`possible het ${h}`));return}if(g.startsWith("het ")){const h=stripPrefixes(d);h&&(i.push(h),a.push(`het ${h}`));return}s.push({name:d,type:inferMorphType(d)}),a.push(d)}),{morphs:s,hets:i,possibleHets:o,displayTokens:a}},evaluateOutcomeForTraits=(e,s)=>{const i=e.map(normalizeToken);let o=0,a=0;return s.forEach(d=>{const g=normalizeToken(d);if(i.some(b=>b.startsWith("het ")||b.startsWith("possible het ")?!1:b.includes(g))){o+=1;return}i.some(b=>b.startsWith("het ")?b.replace(/^het\s+/,"").includes(g):b.startsWith("possible het ")?b.replace(/^possible het\s+/,"").includes(g):!1)&&(a+=1)}),{score:o*2+a,visualMatches:o,hetMatches:a}},buildHoldbackAnimals=(e,s)=>{const i=parseOutcomeGenetics(e),o={morphs:i.morphs,hets:i.hets,possibleHets:i.possibleHets},a={id:`${s}-holdback-f`,sex:"F",morphs:o.morphs,hets:o.hets,possibleHets:o.possibleHets},c={id:`${s}-holdback-m`,sex:"M",morphs:o.morphs,hets:o.hets,possibleHets:o.possibleHets};return{female:a,male:c,traits:i.displayTokens}},buildMultiGenerationPlan=(e,s,i,o,a)=>{var it,et;if(!o.length)return;const c=gatherTargetTraits(o);if(!c.length)return;const d=e.goalProb??0,g=[{generation:1,title:`Generation 1: ${s.id}  ${i.id}`,summary:d>0?`Direct chance to reach the goal is ${(d*100).toFixed(1)}%.`:`No direct visual expected; produce holdbacks carrying ${c.join(", ")}.`,maleId:s.id,femaleId:i.id,focusTraits:c,successProb:d}];if(!a||d>=.25)return{strategy:"direct",steps:g,cumulativeProb:Math.max(d,0)};const h=e.outcomes.slice(0,8).filter(ot=>ot.prob>.01);let j=null;if(h.forEach(ot=>{const rt=tokenizeOutcome(ot),lt=evaluateOutcomeForTraits(rt,c);if(lt.score<=0)return;const ft={outcome:ot,...lt};if(!j){j=ft;return}if(ft.score>j.score){j=ft;return}ft.score===j.score&&ot.prob>j.outcome.prob&&(j=ft)}),!j)return{strategy:"direct",steps:g,cumulativeProb:Math.max(d,0)};const b=j,_=`${s.id}-${i.id}`,st=buildHoldbackAnimals(tokenizeOutcome(b.outcome),_),tt=st.traits.filter(ot=>{const rt=cleanGoalTrait(ot);return rt?c.some(lt=>normalizeToken(rt).includes(normalizeToken(lt))):!1});let nt=null;if((it=a.allMales)==null||it.forEach(ot=>{if(ot.id===s.id)return;const rt=cross(ot,st.female),lt=collectGoalProbabilities(rt,o),ft=lt.length?Math.max(...lt):0;ft<=0||(!nt||ft>nt.prob)&&(nt={prob:ft,partnerId:ot.id,partnerSex:"M",holdbackSex:"F",outcomes:rt})}),(et=a.allFemales)==null||et.forEach(ot=>{if(ot.id===i.id)return;const rt=cross(st.male,ot),lt=collectGoalProbabilities(rt,o),ft=lt.length?Math.max(...lt):0;ft<=0||(!nt||ft>nt.prob)&&(nt={prob:ft,partnerId:ot.id,partnerSex:"F",holdbackSex:"M",outcomes:rt})}),!nt)return{strategy:"direct",steps:g,cumulativeProb:Math.max(d,0),holdbackTraits:tt,holdbackProb:b.outcome.prob};const xt=nt,ut=tt.length?tt.join(", "):c.join(", "),_e=st.male.id,$=st.female.id;g[0]={...g[0],summary:`Direct goal chance ${(d*100).toFixed(1)}%. Prioritise producing holdbacks carrying ${ut}.`},g.push({generation:2,title:`Generation 2: Holdback  ${xt.partnerId}`,summary:`Retain the ${xt.holdbackSex==="F"?"female":"male"} holdback (${ut}). Pair with ${xt.partnerId} for ${(xt.prob*100).toFixed(1)}% chance at the goal.`,maleId:xt.holdbackSex==="F"?xt.partnerId:_e,femaleId:xt.holdbackSex==="F"?$:xt.partnerId,focusTraits:c,successProb:xt.prob,prerequisiteProb:b.outcome.prob});const at=b.outcome.prob*xt.prob;return{strategy:"multi",steps:g,cumulativeProb:at,holdbackTraits:tt,holdbackProb:b.outcome.prob}},suggestForPair=async(e,s,i,o,a)=>{const c=cross(e,s),d=collectKeywords(e,s,c),g=buildQuery(d);let h=defaultDemand(),j=[];try{j=await getSearchProvider().search(g,DEFAULT_SEARCH_LIMIT)}catch{}const b=j.map(et=>et.url);try{b.length&&(h=await extractDemand(b))}catch{h=defaultDemand()}const _=`${formatAnimalLabel(e)} x ${formatAnimalLabel(s)}`,st=applyRiskFlags(_),tt=collectGoalProbabilities(c,i),nt=tt.length?Math.max(...tt):0,xt=finalScore({outcomes:c,demand:h,risks:st,goals:i,w:o}),ut=bestGoalSummary(i,tt);let _e=summarizeRationale(xt.score,h.index,ut);_e=await safeJustify({a:e,b:s,outcomes:c,demand:h,risks:st.risks,goals:i},_e);const $=h.sources.length?h.sources:j.map(et=>({title:et.title,url:et.url})),at={maleId:e.id,femaleId:s.id,outcomes:c,score:xt.score,demand:h,risks:st.risks,sources:$,rationale:_e,goalProb:nt,goalFit:xt.goalFit},it=buildMultiGenerationPlan(at,e,s,i,a);return it&&(at.plan=it),at},chunkedPairs=(e,s)=>{const i=[];for(let o=0;o<e.length;o+=s)i.push(e.slice(o,o+s));return i},shouldConsiderPair=(e,s,i)=>i.length?i.every(o=>prefilterByGoal(e,s,o)):!0,suggestForCollections=async(e,s,i,o)=>{const a=[];if(e.forEach(h=>{s.forEach(j=>{shouldConsiderPair(h,j,i)&&a.push({male:h,female:j})})}),!a.length)return[];const c=Math.max(1,DEFAULT_CONCURRENCY),d=chunkedPairs(a,c),g=[];for(const h of d)(await Promise.all(h.map(async({male:b,female:_})=>{try{return await suggestForPair(b,_,i,o,{allMales:e,allFemales:s})}catch{return null}}))).forEach(b=>{b&&g.push(b)});return g.sort((h,j)=>j.score-h.score)},normalizeString=e=>e==null?"":String(e).replace(/\s+/g," ").trim(),normalizeSexValue$1=e=>{const s=normalizeString(e).toLowerCase();return s?s==="m"||s==="male"||/^1[\s.:/]*0$/.test(s)||s.startsWith("m")?"M":s==="f"||s==="female"||/^0[\s.:/]*1$/.test(s)||s.startsWith("f")?"F":null:null},normalizeGeneticToken=e=>{if(e&&typeof e=="object"){if(Object.prototype.hasOwnProperty.call(e,"name")&&e.name!=null)return normalizeString(e.name);if(Object.prototype.hasOwnProperty.call(e,"label")&&e.label!=null)return normalizeString(e.label)}return normalizeString(e)},splitLooseTokens=e=>e.split(/[\n\r,;|/+]+/).map(s=>normalizeString(s)).filter(Boolean),normalizeGeneticArray=e=>{if(Array.isArray(e))return e.map(i=>normalizeGeneticToken(i)).filter(Boolean);const s=normalizeGeneticToken(e);return s?splitLooseTokens(s):[]},formatMorphName=e=>{const s=normalizeString(e);return s?s.split(" ").map(i=>i&&(i.length<=2?i.toUpperCase():/^[A-Z0-9-]+$/.test(i)?i:i.charAt(0).toUpperCase()+i.slice(1).toLowerCase())).join(" "):""},buildMorphObjects=e=>{const s=normalizeGeneticArray(e),i=new Set,o=[];return s.forEach(a=>{const c=formatMorphName(a),d=normalizeGeneCandidate(c);!c||!d||i.has(d)||(i.add(d),o.push({name:c,type:inferMorphType(c)}))}),o},normalizeHetInputToken$1=e=>{if(!e)return null;let s=normalizeString(e);if(!s)return null;let i="";const o=s.match(/^(\d{1,3}%)(?:\s*)(.*)$/i);o&&(i=o[1].toUpperCase(),s=o[2].trim());let a="";const c=s.match(/^(pos(?:s?i?a?ble)?|probable|maybe|ph)(?:\s*)(.*)$/i);c&&(a=c[1].toLowerCase(),s=c[2].trim()),s=s.replace(/\bhet\b/gi," ").replace(/^het(?=[A-Za-z])/i,"").trim();const g={pos:"Possible",ph:"Possible",possible:"Possible",possiable:"Possible",posible:"Possible",probable:"Probable",maybe:"Maybe"}[a]||"",h=formatMorphName(s);if(!h)return null;const j=[];return i&&j.push(i),g&&j.push(g),j.push("Het"),j.push(h),j.join(" ").replace(/\s+/g," ").trim()||null},partitionHetTokens=(e,s)=>{const i=[],o=[],a=new Set,c=new Set,d=(g,h=!1)=>{const j=normalizeHetInputToken$1(g);if(!j)return;const b=j.toLowerCase();h||/^\d{1,3}%/.test(j)||/^(?:possible|probable|maybe)\b/i.test(j)?c.has(b)||(c.add(b),o.push(j)):a.has(b)||(a.add(b),i.push(j))};return normalizeGeneticArray(e).forEach(g=>d(g,!1)),normalizeGeneticArray(s).forEach(g=>d(g,!0)),{certain:i,possible:o}},buildAdvisorAnimal=e=>{if(!e||!e.id)return null;const s=normalizeSexValue$1(e.sex);if(!s)return null;const i=buildMorphObjects(e.morphs),{certain:o,possible:a}=partitionHetTokens(e.hets,e.possibleHets);return{id:String(e.id),sex:s,morphs:i,hets:o,possibleHets:a.length?a:void 0}},REQUIRED_GROUP="breeders",HIGH_CONFIDENCE_THRESHOLD=.6,DEFAULT_WEIGHTS={wDemand:1,wPrice:.8,wNovelty:.4,wRisk:.6,wGoalFit:1.2},formatPercent=(e,s=0)=>`${(e*100).toFixed(s)}%`,formatPriceBand=e=>{if(!e||e.length!==2)return null;const[s,i]=e;return s==null||i==null?null:`$${Number(s).toLocaleString()}  $${Number(i).toLocaleString()}`},HET_GENE_COLOR_CLASSES$1="bg-violet-200 border border-violet-300 text-violet-800",GENE_GROUP_COLOR_CLASSES$1={Het:HET_GENE_COLOR_CLASSES$1,Recessive:"bg-violet-300 border border-violet-400","Incomplete Dominant":"bg-rose-300 border border-rose-400",Dominant:"bg-sky-300 border border-sky-400",Other:"bg-emerald-300 border border-emerald-400"},isHetDescriptorToken$1=e=>{if(!e)return!1;const s=String(e).toLowerCase();return!!(s.includes("het")||/(^|\s)(pos(?:s?i?a?ble)?|probable|maybe|ph)(\s|$)/i.test(s)||/\d{1,3}%/.test(s))},isHetGeneToken$1=e=>{if(!e)return!1;const s=String(e).replace(/\s+/g," ").trim();if(!s)return!1;const i=s.toLowerCase();return/^(?:\d{1,3}%\s*)?(?:(?:pos(?:s?i?a?ble)?|probable|maybe|ph)\s+)?het\b/.test(i)?!0:isHetDescriptorToken$1(e)},getGeneChipClasses$1=e=>{if(isHetGeneToken$1(e))return GENE_GROUP_COLOR_CLASSES$1.Het;const s=getGeneDisplayGroup(e);return GENE_GROUP_COLOR_CLASSES$1[s]||GENE_GROUP_COLOR_CLASSES$1.Other},uniqueGeneTokens$1=(e=[])=>{const s=new Set,i=[];return e.forEach(o=>{if(o==null)return;const a=String(o).trim();if(!a)return;const c=a.toLowerCase();s.has(c)||(s.add(c),i.push(a))}),i},stripGeneModifiers=e=>String(e||"").replace(/^(?:\d{1,3}%\s*)?(?:(?:pos(?:s?i?a?ble)?|probable|maybe|ph)\s+)?het\s+/i,"").replace(/^visual\s+/i,"").replace(/^super\s+/i,"").trim(),extractBaseGeneKey=e=>{const s=stripGeneModifiers(normalizeString(e));return s?normalizeGeneCandidate(s):""},splitGeneTokens=(e=[],s)=>{const i=[],o=[];return e.forEach(a=>{const c=normalizeString(a);if(!c)return;const d=extractBaseGeneKey(c);s&&s.size>0&&(!d||!s.has(d))||(isHetGeneToken$1(c)?o.push(c):i.push(c))}),{visuals:uniqueGeneTokens$1(i),hets:uniqueGeneTokens$1(o)}},collectOutcomeTokenGroups=(e=[],s=3,i)=>{const o=[];return(e||[]).slice(0,s).forEach(a=>{((a==null?void 0:a.genotype)||[]).forEach(c=>{const d=normalizeString(c);d&&o.push(d)})}),splitGeneTokens(o,i)},collectGoalTokens=(e=[])=>{const s=[];return e.forEach(i=>{var o,a;(o=i==null?void 0:i.requireAll)!=null&&o.length&&s.push(...i.requireAll),(a=i==null?void 0:i.requireAny)!=null&&a.length&&s.push(...i.requireAny)}),s},buildGoalGeneInfo=(e=[])=>{const s=collectGoalTokens(e),i=new Set;return s.forEach(o=>{const a=extractBaseGeneKey(o);a&&i.add(a)}),{tokens:s,baseGeneKeys:i,groups:splitGeneTokens(s)}},matchesGoalGeneTargets=(e,s)=>{var d,g;if(!s||s.size===0)return!0;const i=collectOutcomeTokenGroups((e==null?void 0:e.outcomes)||[],6,s);if(i.visuals.length||i.hets.length)return!0;const o=splitGeneTokens(((d=e==null?void 0:e.plan)==null?void 0:d.holdbackTraits)??[],s);if(o.visuals.length||o.hets.length)return!0;const a=(((g=e==null?void 0:e.plan)==null?void 0:g.steps)||[]).flatMap(h=>(h==null?void 0:h.focusTraits)||[]),c=splitGeneTokens(a,s);return!!(c.visuals.length||c.hets.length)},STATUS_LABELS={visual:"Visual",het:"Het",possibleHet:"Possible het",none:"Normal"},isHoldbackId=e=>typeof e=="string"&&e.includes("-holdback-"),deriveStatusFromAnimal=(e,s)=>!e||!s?"none":(e.morphs||[]).some(c=>extractBaseGeneKey(c==null?void 0:c.name)===s)?"visual":(e.hets||[]).some(c=>extractBaseGeneKey(c)===s)?"het":(e.possibleHets||[]).some(c=>extractBaseGeneKey(c)===s)?"possibleHet":"none",deriveStatusFromHoldback=(e=[],s)=>{if(!e||!e.length||!s)return"none";let i="none";return e.forEach(o=>{const a=normalizeString(o);if(!(!a||extractBaseGeneKey(a)!==s)){if(/possible\s+het/i.test(a)||/probable\s+het/i.test(a)){i="possibleHet";return}if(isHetGeneToken$1(a)){i="het";return}i="visual"}}),i},deriveGeneStatusForParticipant=(e,s,i)=>{var o,a;return s?e&&((o=i==null?void 0:i.advisorAnimals)!=null&&o.has(e))?deriveStatusFromAnimal(i.advisorAnimals.get(e),s):isHoldbackId(e)?deriveStatusFromHoldback(((a=i==null?void 0:i.plan)==null?void 0:a.holdbackTraits)??[],s):"none":"none"},describeHetExpectation=(e,s)=>{const i=[e,s].sort().join("-");return i==="none-visual"?"100% het":i==="het-het"?"66% het":i==="het-none"?"50% het":null},firstDisplayLabelForGene=(e=[],s)=>{const i=(e||[]).find(o=>extractBaseGeneKey(o)===s);return formatMorphName(i?stripGeneModifiers(i):s)},buildHetNotesForStep=(e,s,i)=>{var c;if(!((c=e==null?void 0:e.focusTraits)!=null&&c.length)||!(s!=null&&s.size))return[];const o=new Set;(e.focusTraits||[]).forEach(d=>{const g=extractBaseGeneKey(d);g&&s.has(g)&&o.add(g)});const a=[];return o.forEach(d=>{const g=deriveGeneStatusForParticipant(e.maleId,d,i),h=deriveGeneStatusForParticipant(e.femaleId,d,i),j=describeHetExpectation(g,h);if(!j)return;const b=firstDisplayLabelForGene(e.focusTraits,d),_=STATUS_LABELS[g]||STATUS_LABELS.none,st=STATUS_LABELS[h]||STATUS_LABELS.none;a.push(`${b}: ${_}  ${st}  ${j}`)}),a},GeneTagRow=({label:e,tokens:s})=>{const i=uniqueGeneTokens$1(s).slice(0,12);return i.length?jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1 text-xs text-neutral-600",children:[jsxRuntimeExports.jsxs("span",{className:"uppercase tracking-wide text-[10px] text-neutral-500 mr-1",children:[e,":"]}),i.map(o=>jsxRuntimeExports.jsx("span",{className:`inline-flex items-center rounded-md font-medium ${getGeneChipClasses$1(o)} text-xs px-2 py-0.5`,children:o},`${e}-${o}`))]}):null},defaultGoals=()=>[],buildAnimalMap=e=>{const s=new Map;return(e||[]).forEach(i=>{i!=null&&i.id&&s.set(i.id,i)}),s},extractGroups=e=>Array.isArray(e)?e.map(s=>typeof s=="string"?s:String(s??"")).map(s=>s.trim()).filter(Boolean):typeof e=="string"?[e.trim()].filter(Boolean):[],filterBreeders=(e=[])=>e.filter(s=>extractGroups(s==null?void 0:s.groups).some(i=>i.toLowerCase()===REQUIRED_GROUP)),keyForSuggestion=e=>`${e.maleId}::${e.femaleId}`,SuggestionsTab=({males:e=[],females:s=[],initialGoals:i=[],initialWeights:o=DEFAULT_WEIGHTS})=>{const a=i[0],c=(a==null?void 0:a.name)??"",d=((a==null?void 0:a.requireAll)??[]).join(", "),g=[c,d].filter(Boolean).join(c&&d?": ":""),h=reactExports.useMemo(()=>filterBreeders(e),[e]),j=reactExports.useMemo(()=>filterBreeders(s),[s]),b=reactExports.useMemo(()=>h.map(buildAdvisorAnimal).filter(Boolean),[h]),_=reactExports.useMemo(()=>j.map(buildAdvisorAnimal).filter(Boolean),[j]),[st,tt]=reactExports.useState(i.length?i:defaultGoals()),[nt,xt]=reactExports.useState(g),[ut]=reactExports.useState(o),[_e,$]=reactExports.useState([]),[at,it]=reactExports.useState(!1),[et,ot]=reactExports.useState(""),[rt,lt]=reactExports.useState(i.length?i:[]),ft=reactExports.useMemo(()=>buildAnimalMap(h),[h]),dt=reactExports.useMemo(()=>buildAnimalMap(j),[j]),ct=reactExports.useMemo(()=>{const Nt=new Map;return b.forEach(It=>{It!=null&&It.id&&Nt.set(It.id,It)}),_.forEach(It=>{It!=null&&It.id&&Nt.set(It.id,It)}),Nt},[b,_]),Et=reactExports.useCallback(Nt=>{if(!Nt)return"Unknown";const It=ft.get(Nt)||dt.get(Nt);if(It!=null&&It.name)return It.name;if(It!=null&&It.displayName)return It.displayName;if(It!=null&&It.display_name)return It.display_name;if(isHoldbackId(Nt)){const[,Ht]=Nt.split("-holdback-");return Ht==="m"?"Holdback Male":Ht==="f"?"Holdback Female":"Holdback"}return Nt},[ft,dt]),gt=reactExports.useMemo(()=>_e.slice().sort((Nt,It)=>(It.score??0)-(Nt.score??0)),[_e]),Lt=reactExports.useMemo(()=>gt.filter(Nt=>(Nt.goalProb??0)>=HIGH_CONFIDENCE_THRESHOLD),[gt]),Dt=reactExports.useMemo(()=>gt.filter(Nt=>(Nt.goalProb??0)<HIGH_CONFIDENCE_THRESHOLD),[gt]),Ft=reactExports.useMemo(()=>buildGoalGeneInfo(rt),[rt]),bt=Ft.groups,_t=Ft.baseGeneKeys,yt=reactExports.useCallback(Nt=>{tt(It=>{if(!It.length){const tn=defaultGoals()[0]??{id:`goal-${Date.now().toString(36)}`,name:"Custom goal",requireAll:[],weight:1};return[Nt(tn)]}const[Ht,...Qt]=It;return[Nt(Ht),...Qt]})},[]),jt=reactExports.useCallback(Nt=>Nt.split(/[,\n]/).map(It=>It.trim()).filter(Boolean),[]),St=reactExports.useCallback(Nt=>{const It=(Nt??"").trim();if(!It)return{name:"",traits:[]};if(It.includes(":")){const[Ht,Qt=""]=It.split(/:/,2);return{name:Ht.trim(),traits:jt(Qt)}}if(It.includes(" - ")){const[Ht,Qt=""]=It.split(" - ",2);return{name:Ht.trim(),traits:jt(Qt)}}return It.includes(",")?{name:"",traits:jt(It)}:{name:It,traits:[]}},[jt]),At=reactExports.useCallback(Nt=>{const{name:It,traits:Ht}=St(Nt);yt(Qt=>({...Qt,name:It||(Qt==null?void 0:Qt.name)||"Custom goal",requireAll:Ht}))},[St,yt]),mt=Nt=>{const It=Nt.target.value;xt(It),et&&ot(""),At(It)},ht=()=>{xt(""),tt(defaultGoals()),lt([]),$([]),ot(""),it(!1)},vt=async()=>{if(!b.length||!_.length){ot("Add animals to the Breeders group to see advisor recommendations.");return}const Nt=st.filter(It=>{var Ht,Qt;return(((Ht=It.requireAll)==null?void 0:Ht.length)??0)>0||(((Qt=It.requireAny)==null?void 0:Qt.length)??0)>0});if(!Nt.length){ot("Add goal traits before running the advisor.");return}lt(Nt),it(!0),ot("");try{const It=buildGoalGeneInfo(Nt),Qt=(await suggestForCollections(b,_,Nt,ut)).filter(tn=>matchesGoalGeneTargets(tn,It.baseGeneKeys)).filter(tn=>(tn.goalProb??0)>0);$(Qt)}catch(It){ot((It==null?void 0:It.message)||"Failed to generate suggestions")}finally{it(!1)}},Rt=Nt=>jsxRuntimeExports.jsxs("div",{className:"font-semibold text-neutral-900",children:[Et(Nt.maleId),"  ",Et(Nt.femaleId)]}),Pt=()=>at?"Crunching punnett squares":et||(_e.length?!Lt.length&&Dt.length?`No pairs meet the high-confidence bar yet, but here are ${Dt.length} options to review.`:Lt.length?`${Lt.length} pairing${Lt.length===1?"":"s"} meet the  ${formatPercent(HIGH_CONFIDENCE_THRESHOLD)} goal confidence target.`:"No pairings crossed the confidence bar. Try adjusting your collections or goals.":"Run the advisor to discover promising pairings."),Bt=Nt=>{var Qt,tn;const It=(Qt=Nt.outcomes)==null?void 0:Qt[0];return It?`${((tn=It.genotype)==null?void 0:tn.join(" "))||"Unknown morph"} (${formatPercent(It.prob,0)} appearance chance)`:"No projection available."},Ut=(Nt,It)=>{var pn,qt,Cn,fn,On;const Ht=keyForSuggestion(Nt),Qt=It==="high",tn=Nt.goalProb??0,an=Nt.plan,Wt=(an==null?void 0:an.steps)??[],Xt=collectOutcomeTokenGroups(Nt.outcomes||[],6,_t),wt=splitGeneTokens((an==null?void 0:an.holdbackTraits)??[],_t),kt=Wt.slice(1).reduce((An,Rn)=>{var wn;return(wn=Rn==null?void 0:Rn.focusTraits)!=null&&wn.length&&An.push(...Rn.focusTraits),An},[]),Tt=splitGeneTokens(kt,_t),zt=[];bt.visuals.length&&zt.push({label:"Goal Visuals",tokens:bt.visuals}),bt.hets.length&&zt.push({label:"Goal Hets",tokens:bt.hets}),Xt.visuals.length&&zt.push({label:"Projected Visuals",tokens:Xt.visuals}),Xt.hets.length&&zt.push({label:"Projected Hets",tokens:Xt.hets}),wt.visuals.length&&zt.push({label:"Holdback Visuals",tokens:wt.visuals}),wt.hets.length&&zt.push({label:"Holdback Hets",tokens:wt.hets}),Tt.visuals.length&&zt.push({label:"Next-Gen Visuals",tokens:Tt.visuals}),Tt.hets.length&&zt.push({label:"Next-Gen Hets",tokens:Tt.hets});const en=((qt=(pn=Nt.demand)==null?void 0:pn.signals)==null?void 0:qt.slice(0,2))??[],un=formatPriceBand((Cn=Nt.demand)==null?void 0:Cn.priceBand);return jsxRuntimeExports.jsx("div",{className:`rounded-xl border ${Qt?"border-emerald-200 bg-emerald-50":"border-neutral-200 bg-white"} p-4 shadow-sm`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[Rt(Nt),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600",children:Bt(Nt)}),zt.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:zt.map(({label:An,tokens:Rn},wn)=>jsxRuntimeExports.jsx(GeneTagRow,{label:An,tokens:Rn},`${Ht}-${An}-${wn}`))}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-600",children:["Goal success chance: "," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Qt?"text-emerald-600":"text-amber-600"}`,children:formatPercent(tn,0)}),!Qt&&jsxRuntimeExports.jsx("span",{className:"ml-1 text-xs text-neutral-500",children:"(below confidence target)"})]}),!!en.length&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-600",children:["Demand signals: ",en.join("  ")]}),un&&jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600",children:un}),Nt.rationale&&jsxRuntimeExports.jsx("div",{className:"rounded-lg bg-neutral-50 p-3 text-sm text-neutral-700",children:Nt.rationale}),!!((fn=Nt.sources)!=null&&fn.length)&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Sources: ",Nt.sources.slice(0,3).map(An=>An.title||An.url).join(", ")]}),an&&jsxRuntimeExports.jsxs("div",{className:"rounded-lg border border-sky-200 bg-sky-50/70 p-3 text-sm text-sky-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs font-semibold uppercase tracking-wide text-sky-700",children:["Multi-generation plan (",an.strategy==="multi"?"2-step":"direct",")"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs font-semibold text-emerald-700",children:["Combined  ",formatPercent(an.cumulativeProb??0,1)]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 space-y-3",children:Wt.map(An=>{const Rn=Et(An.maleId),wn=Et(An.femaleId),$n=buildHetNotesForStep(An,_t,{advisorAnimals:ct,plan:an}),Yn=splitGeneTokens((An==null?void 0:An.focusTraits)||[],_t),gn=[];return Yn.visuals.length&&gn.push({label:"Focus Visuals",tokens:Yn.visuals}),Yn.hets.length&&gn.push({label:"Focus Hets",tokens:Yn.hets}),jsxRuntimeExports.jsxs("div",{className:"rounded-lg border border-sky-200 bg-white p-3 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs font-semibold uppercase tracking-wide text-sky-600",children:["Generation ",An.generation]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-[11px] font-medium text-sky-700",children:[An.prerequisiteProb!=null&&jsxRuntimeExports.jsxs("span",{children:["Prereq  ",formatPercent(An.prerequisiteProb,1)]}),An.successProb!=null&&jsxRuntimeExports.jsxs("span",{children:["Goal  ",formatPercent(An.successProb,1)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-sm font-semibold text-sky-900",children:[Rn,"  ",wn]}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-xs text-sky-800",children:An.summary}),gn.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-col gap-1",children:gn.map(({label:rn,tokens:sn},Sn)=>jsxRuntimeExports.jsx(GeneTagRow,{label:rn,tokens:sn},`${Ht}-step-${An.generation}-${rn}-${Sn}`))}),$n.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-col gap-1",children:$n.map((rn,sn)=>jsxRuntimeExports.jsx("div",{className:"inline-flex items-center rounded-md bg-violet-100 px-2 py-1 text-[11px] font-medium text-violet-900",children:rn},`${Ht}-het-${An.generation}-${sn}`))})]},`${Ht}-plan-${An.generation}`)})}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 text-xs text-sky-700",children:[an.holdbackProb!=null&&jsxRuntimeExports.jsxs("span",{children:["Holdback  ",formatPercent(an.holdbackProb,1)]}),(On=an.holdbackTraits)!=null&&On.length?jsxRuntimeExports.jsxs("span",{children:["Holdback genes: ",[...wt.visuals,...wt.hets].join(", ")||an.holdbackTraits.join(", ")]}):null]})]})]})},Ht)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-neutral-200 bg-white p-5 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Breeding Advisor"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-neutral-600",children:["We only look at animals tagged in the ",jsxRuntimeExports.jsx("strong",{children:"Breeders"})," group and surface pairings that have a very high chance of producing your selected morph goal."]})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:jsxRuntimeExports.jsxs("label",{className:"sm:col-span-2 flex flex-col gap-1 text-sm text-neutral-700",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500",children:"Goal (Name and Traits)"}),jsxRuntimeExports.jsx("input",{value:nt,onChange:mt,placeholder:"Visual Clown: Clown, het Desert Ghost",className:"rounded-lg border border-neutral-300 bg-white px-3 py-2 text-sm focus:border-sky-400 focus:outline-none"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500",children:'Format tip: "Goal Name: trait one, trait two". If you only list traits, well build a generic goal.'})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-sky-50 p-3 text-sm text-sky-900",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Status"}),jsxRuntimeExports.jsx("div",{children:Pt()})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-neutral-500",children:[jsxRuntimeExports.jsx("span",{children:`${h.length} breeder male${h.length===1?"":"s"}`}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:`${j.length} breeder female${j.length===1?"":"s"}`}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsxs("span",{children:["Confidence bar  ",formatPercent(HIGH_CONFIDENCE_THRESHOLD)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:vt,disabled:at,className:"inline-flex items-center justify-center rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500 disabled:cursor-not-allowed disabled:bg-emerald-800",children:at?"Generating...":"Run Advisor"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ht,disabled:at,className:"inline-flex items-center justify-center rounded-lg border border-neutral-300 px-4 py-2 text-sm font-semibold text-neutral-700 hover:bg-neutral-100 disabled:cursor-not-allowed disabled:opacity-70",children:"Reset Advisor"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Lt.map(Nt=>Ut(Nt,"high")),Dt.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-neutral-700",children:"Additional pairings worth reviewing"}),Dt.map(Nt=>Ut(Nt,"supporting"))]}),!_e.length&&!at&&!et&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-dashed border-neutral-300 p-6 text-center text-sm text-neutral-500",children:["Ready when you areclick ",jsxRuntimeExports.jsx("strong",{children:"Run Advisor"})," to discover your strongest breeder pairings."]})]})]})};pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;const cap=e=>e?String(e).charAt(0).toUpperCase()+String(e).slice(1):"";function pairingLifecycleDefaults(){return{ovulation:{observed:!1,date:"",notes:""},preLayShed:{observed:!1,date:"",notes:"",intervalFromOvulation:null},clutch:{recorded:!1,date:"",eggsTotal:"",fertileEggs:"",slugs:"",notes:""},hatch:{scheduledDate:"",recorded:!1,date:"",hatchedCount:0,notes:""}}}const cx=(...e)=>e.flat().filter(Boolean).join(" "),uid=(e="id")=>`${e}-${Date.now().toString(36)}-${Math.floor(Math.random()*1e6).toString(36)}`,localYMD=(e=new Date)=>{const s=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${s}-${i}-${o}`},nowIsoString=()=>new Date().toISOString();function formatDateTimeForDisplay(e){if(!e)return"";const s=e instanceof Date?e:new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function extractYearFromDateString(e){if(!e)return null;const s=String(e).trim();if(!s)return null;const i=s.match(/^(\d{4})/);if(!i)return null;const o=Number(i[1]);return Number.isFinite(o)?o:null}function appendNoteLine(e="",s=""){const i=String(s||"").trim();if(!i)return e||"";const o=String(e||"");return o?o.split(`
`).map(c=>c.trim()).includes(i)?o:`${o}${o.endsWith(`
`)?"":`
`}${i}`:i}function buildLockLogLine(e){const s=formatDateTimeForDisplay(e);return s?`Lock observed ${s}`:"Lock observed"}const PENDING_ANIMAL_VIEW_KEY="breedingPlannerPendingAnimalView",STORAGE_KEYS={snakes:"breedingPlannerSnakes",pairings:"breedingPlannerPairings",groups:"breedingPlannerGroups",breeder:"breedingPlannerBreederInfo",lastFeedDefaults:"breedingPlannerLastFeedDefaults",backupSettings:"breedingPlannerBackupSettings",backupSnapshot:"breedingPlannerBackupSnapshot",backupVault:"breedingPlannerBackupVault"},DEFAULT_FAVICON_HREF="/app-icons/icon_512x512.png",BACKUP_FREQUENCIES=["off","nightly","weekly","monthly"],DEFAULT_BACKUP_LIMIT=20,VAULT_LIMIT_OPTIONS=[5,10,20,50,100,200,"unlimited"],BACKUP_FILE_EXTENSION="bpbackup",BACKUP_FILE_DOT_EXTENSION=`.${BACKUP_FILE_EXTENSION}`,BACKUP_FILE_MIME="application/x-breeding-planner-backup+json",buildBackupFilename=(e,s)=>`${e}-${s}${BACKUP_FILE_DOT_EXTENSION}`,ANIMAL_EXPORT_FIELD_DEFS=[{key:"id",label:"Animal ID",section:"Identity",getter:e=>(e==null?void 0:e.id)||""},{key:"name",label:"Name",section:"Identity",getter:e=>(e==null?void 0:e.name)||""},{key:"sex",label:"Sex",section:"Identity",getter:e=>{const s=normalizeSexValue(e==null?void 0:e.sex);return s==="UNKNOWN"?"":s}},{key:"status",label:"Status",section:"Identity",getter:e=>(e==null?void 0:e.status)||""},{key:"year",label:"Hatch year",section:"Timeline",getter:e=>e?Number.isFinite(Number(e.year))?Number(e.year):extractYearFromDateString(e.birthDate)||"":""},{key:"birthDate",label:"Birth date",section:"Timeline",getter:e=>e!=null&&e.birthDate?formatDateForDisplay(e.birthDate):""},{key:"weight",label:"Current weight (g)",section:"Husbandry",getter:e=>{const s=e==null?void 0:e.weight;return Number.isFinite(Number(s))?Number(s):s||""}},{key:"genetics",label:"Genetics summary",section:"Genetics",getter:e=>joinTokens(combineMorphsAndHetsForDisplay(e==null?void 0:e.morphs,e==null?void 0:e.hets,e==null?void 0:e.possibleHets))},{key:"morphs",label:"Morphs",section:"Genetics",getter:e=>joinTokens(e==null?void 0:e.morphs)},{key:"hets",label:"Hets",section:"Genetics",getter:e=>joinTokens(e==null?void 0:e.hets)},{key:"tags",label:"Tags",section:"Attributes",getter:e=>joinTokens(e==null?void 0:e.tags)},{key:"groups",label:"Groups",section:"Attributes",getter:e=>joinTokens(e==null?void 0:e.groups)},{key:"sireId",label:"Sire ID",section:"Lineage",getter:e=>(e==null?void 0:e.sireId)||""},{key:"damId",label:"Dam ID",section:"Lineage",getter:e=>(e==null?void 0:e.damId)||""},{key:"projects",label:"Projects (pairings)",section:"Breeding",getter:(e,s={})=>{var o;if(!(e!=null&&e.id))return"";const i=((o=s.pairingsBySnakeId)==null?void 0:o.get(e.id))||[];return i.length?joinTokens(i.map(a=>a.label)):""}},{key:"lastFeedDate",label:"Last feed date",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"feeds");return s!=null&&s.date?formatDateForDisplay(s.date):""}},{key:"lastFeedDetails",label:"Last feed details",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"feeds");if(!s)return"";const i=[s.feed,s.size,s.method].map(o=>typeof o=="string"?o.trim():"").filter(Boolean);return typeof s.weightGrams=="number"&&s.weightGrams>0?i.push(`${s.weightGrams} g`):typeof s.grams=="number"&&s.grams>0&&i.push(`${s.grams} g`),joinTokens(i)}},{key:"lastWeightDate",label:"Last weigh date",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"weights");return s!=null&&s.date?formatDateForDisplay(s.date):""}},{key:"lastWeightGrams",label:"Last recorded weight (g)",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"weights");return s&&Number.isFinite(Number(s.grams))?Number(s.grams):""}},{key:"lastShedDate",label:"Last shed date",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"sheds");return s!=null&&s.date?formatDateForDisplay(s.date):""}},{key:"lastCleaningDate",label:"Last cleaning date",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"cleanings");return s!=null&&s.date?formatDateForDisplay(s.date):""}},{key:"lastMedDate",label:"Last medication date",section:"Husbandry",getter:e=>{const s=getLatestLogEntry(e==null?void 0:e.logs,"meds");return s!=null&&s.date?formatDateForDisplay(s.date):""}}],DEFAULT_ANIMAL_EXPORT_FIELDS=["id","name","sex","status","genetics","groups","weight","projects","lastFeedDate"],PAIRING_EXPORT_FIELD_DEFS=[{key:"pairingId",label:"Pairing ID",section:"Identifiers",getter:e=>(e==null?void 0:e.id)||""},{key:"label",label:"Project label",section:"Identifiers",getter:(e,s={})=>s.displayLabel||(e==null?void 0:e.label)||""},{key:"cycleYear",label:"Season year",section:"Timeline",getter:(e,s={})=>s.cycleYear||""},{key:"femaleId",label:"Female ID",section:"Participants",getter:e=>(e==null?void 0:e.femaleId)||""},{key:"femaleName",label:"Female name",section:"Participants",getter:(e,s={})=>s.femaleName||(e==null?void 0:e.femaleId)||""},{key:"femaleGenetics",label:"Female genetics",section:"Participants",getter:(e,s={})=>s.femaleGenetics||""},{key:"maleId",label:"Male ID",section:"Participants",getter:e=>(e==null?void 0:e.maleId)||""},{key:"maleName",label:"Male name",section:"Participants",getter:(e,s={})=>s.maleName||(e==null?void 0:e.maleId)||""},{key:"maleGenetics",label:"Male genetics",section:"Participants",getter:(e,s={})=>s.maleGenetics||""},{key:"startDate",label:"Start date",section:"Timeline",getter:e=>e!=null&&e.startDate?formatDateForDisplay(e.startDate):""},{key:"ovulationDate",label:"Ovulation date",section:"Timeline",getter:(e,s={})=>{var i;return(i=s.derived)!=null&&i.ovulationDate?formatDateForDisplay(s.derived.ovulationDate):""}},{key:"preLayDate",label:"Pre-lay shed",section:"Timeline",getter:(e,s={})=>{var i;return(i=s.derived)!=null&&i.preLayDate?formatDateForDisplay(s.derived.preLayDate):""}},{key:"clutchDate",label:"Clutch date",section:"Timeline",getter:(e,s={})=>{var i;return(i=s.derived)!=null&&i.clutchDate?formatDateForDisplay(s.derived.clutchDate):""}},{key:"eggsTotal",label:"Eggs laid",section:"Outcomes",getter:e=>{var i;const s=(i=e==null?void 0:e.clutch)==null?void 0:i.eggsTotal;return Number.isFinite(Number(s))?Number(s):s||""}},{key:"fertileEggs",label:"Fertile eggs",section:"Outcomes",getter:e=>{var i;const s=(i=e==null?void 0:e.clutch)==null?void 0:i.fertileEggs;return Number.isFinite(Number(s))?Number(s):s||""}},{key:"slugs",label:"Slugs",section:"Outcomes",getter:e=>{var i;const s=(i=e==null?void 0:e.clutch)==null?void 0:i.slugs;return Number.isFinite(Number(s))?Number(s):s||""}},{key:"hatchDate",label:"Hatch date",section:"Timeline",getter:(e,s={})=>{var i;return(i=s.derived)!=null&&i.hatchDate?formatDateForDisplay(s.derived.hatchDate):""}},{key:"hatchScheduledDate",label:"Scheduled hatch",section:"Timeline",getter:(e,s={})=>{var i;return(i=s.derived)!=null&&i.hatchScheduledDate?formatDateForDisplay(s.derived.hatchScheduledDate):""}},{key:"hatchedCount",label:"Hatched count",section:"Outcomes",getter:e=>{var i;const s=(i=e==null?void 0:e.hatch)==null?void 0:i.hatchedCount;return Number.isFinite(Number(s))?Number(s):s||""}},{key:"status",label:"Project status",section:"Summary",getter:(e,s={})=>summarizePairingStatus(s.derived)},{key:"goals",label:"Goals",section:"Summary",getter:e=>joinTokens(e==null?void 0:e.goals)},{key:"hatchlingsCount",label:"Hatchlings produced",section:"Summary",getter:(e,s={})=>Array.isArray(s.hatchlings)?s.hatchlings.length:""}],DEFAULT_PAIRING_EXPORT_FIELDS=["label","cycleYear","femaleName","maleName","clutchDate","eggsTotal","hatchDate","hatchedCount","status"];function normalizeExportFieldSelection(e,s,i){const o=new Set(i.map(c=>c.key)),a=Array.isArray(e)?e.filter(c=>o.has(c)):[];return a.length?a:[...s]}function buildAnimalExportDataset(e=[],s=[],i=DEFAULT_ANIMAL_EXPORT_FIELDS){const o=normalizeExportFieldSelection(i,DEFAULT_ANIMAL_EXPORT_FIELDS,ANIMAL_EXPORT_FIELD_DEFS),a=new Map(ANIMAL_EXPORT_FIELD_DEFS.map(b=>[b.key,b])),c=o.map(b=>a.get(b)).filter(Boolean),d=makeSnakeMap(e),g=groupPairingsBySnake(s,d),h={snakes:e,pairings:s,snakeMap:d,pairingsBySnakeId:g},j=[];return(Array.isArray(e)?e:[]).forEach(b=>{if(!b)return;const _={};c.forEach(st=>{const tt=typeof st.getter=="function"?st.getter(b,h):b[st.key];_[st.key]=formatExportValue(tt)}),j.push(_)}),{columns:c.map(b=>({key:b.key,label:b.label})),rows:j}}function buildPairingExportDataset(e=[],s=[],i=DEFAULT_PAIRING_EXPORT_FIELDS){const o=normalizeExportFieldSelection(i,DEFAULT_PAIRING_EXPORT_FIELDS,PAIRING_EXPORT_FIELD_DEFS),a=new Map(PAIRING_EXPORT_FIELD_DEFS.map(j=>[j.key,j])),c=o.map(j=>a.get(j)).filter(Boolean),d=makeSnakeMap(s),g=groupHatchlingsByPairing(s),h=[];return(Array.isArray(e)?e:[]).forEach(j=>{if(!j)return;const b=withPairingLifecycleDefaults({...j}),_=getBreedingCycleDerived(b),st=b!=null&&b.femaleId?d.get(b.femaleId):null,tt=b!=null&&b.maleId?d.get(b.maleId):null,nt=resolvePairingLabel(b,st,tt),xt=computeBreedingCycleYear({clutchDate:_.clutchDate,preLayDate:_.preLayDate,ovulationDate:_.ovulationDate,hatchDate:_.hatchDate,startDate:b.startDate||""}),ut=g.get(b.id)||[],_e={snakes:s,pairings:e,snakeMap:d,derived:_,displayLabel:nt,femaleSnake:st,femaleName:(st==null?void 0:st.name)||b.femaleId||"",femaleGenetics:joinTokens(combineMorphsAndHetsForDisplay(st==null?void 0:st.morphs,st==null?void 0:st.hets,st==null?void 0:st.possibleHets)),maleSnake:tt,maleName:(tt==null?void 0:tt.name)||b.maleId||"",maleGenetics:joinTokens(combineMorphsAndHetsForDisplay(tt==null?void 0:tt.morphs,tt==null?void 0:tt.hets,tt==null?void 0:tt.possibleHets)),cycleYear:xt,hatchlings:ut},$={};c.forEach(at=>{const it=typeof at.getter=="function"?at.getter(b,_e):b[at.key];$[at.key]=formatExportValue(it)}),h.push($)}),{columns:c.map(j=>({key:j.key,label:j.label})),rows:h}}function formatExportValue(e){if(e===null||typeof e>"u")return"";if(Array.isArray(e))return e.map(i=>{const o=formatExportValue(i);return o===null||typeof o>"u"?"":typeof o=="number"?String(o):o}).filter(Boolean).join(", ");if(e instanceof Date)return formatDateForDisplay(e)||e.toISOString();if(typeof e=="object")try{return JSON.stringify(e)}catch{return String(e)}return e}function joinTokens(e){return Array.isArray(e)?e.map(s=>s===null||typeof s>"u"?"":String(s).trim()).filter(Boolean).join(", "):e===null||typeof e>"u"?"":String(e)}function getLatestLogEntry(e,s){if(!e||typeof e!="object")return null;const i=Array.isArray(e[s])?e[s]:[];return i.length?i[i.length-1]:null}function makeSnakeMap(e=[]){const s=new Map;return(Array.isArray(e)?e:[]).forEach(i=>{i&&i.id&&s.set(i.id,i)}),s}function groupPairingsBySnake(e=[],s=new Map){const i=new Map;return(Array.isArray(e)?e:[]).forEach(o=>{if(!o)return;const a=withPairingLifecycleDefaults({...o}),c=a.femaleId?s.get(a.femaleId):null,d=a.maleId?s.get(a.maleId):null,g=resolvePairingLabel(a,c,d);a.femaleId&&(i.has(a.femaleId)||i.set(a.femaleId,[]),i.get(a.femaleId).push({id:a.id,label:g})),a.maleId&&(i.has(a.maleId)||i.set(a.maleId,[]),i.get(a.maleId).push({id:a.id,label:g}))}),i}function groupHatchlingsByPairing(e=[]){const s=new Map;return(Array.isArray(e)?e:[]).forEach(i=>{var a;if(!i)return;const o=i.pairingId||((a=i==null?void 0:i.metadata)==null?void 0:a.pairingId)||null;o&&(s.has(o)||s.set(o,[]),s.get(o).push(i))}),s}function resolvePairingLabel(e,s,i){if(e!=null&&e.label&&e.label.trim())return e.label.trim();const o=(s==null?void 0:s.name)||(e==null?void 0:e.femaleId)||"Female",a=(i==null?void 0:i.name)||(e==null?void 0:e.maleId)||"Male";return`${o}  ${a}`}function summarizePairingStatus(e){return e?e.hatchedRecorded?"Hatched":e.clutchRecorded?"Eggs laid":e.preLayObserved?"Pre-lay shed":e.ovulationObserved?"Ovulation observed":"Planned":"Planned"}async function exportDatasetToPdf(e,s={}){const i=Array.isArray(e==null?void 0:e.columns)?e.columns:[],o=Array.isArray(e==null?void 0:e.rows)?e.rows:[],{title:a="",subtitle:c="",fileName:d="export.pdf",orientation:g="landscape"}=s,{jsPDF:h}=await __vitePreload(async()=>{const{jsPDF:rt}=await import("./jspdf.es.min-DGvFeT9U.js").then(lt=>lt.j);return{jsPDF:rt}},[]),j=new h({orientation:g,unit:"mm",format:"a4"}),b=12,_=j.internal.pageSize.getWidth(),st=j.internal.pageSize.getHeight(),tt=8,nt=2,xt=4.5;let ut=b;if(j.setFontSize(14),a&&(j.text(a,b,ut),ut+=7),c&&(j.setFontSize(10),j.text(c,b,ut),ut+=6),j.setFontSize(9),!i.length){j.text("No columns selected.",b,ut+5),j.save(d);return}const _e=_-b*2,$=22;let at=_e/i.length,it=i.map(()=>at);if(at>$){it=i.map(()=>Math.max($,at));const rt=it.reduce((lt,ft)=>lt+ft,0);if(rt>_e){const lt=_e/rt;it=it.map(ft=>ft*lt)}}else it=i.map(()=>at);const et=()=>{let rt=b;j.setFontSize(9),j.setFont(void 0,"bold"),i.forEach((lt,ft)=>{j.setFillColor(237,242,247),j.setDrawColor(210),j.rect(rt,ut,it[ft],tt,"FD"),j.setTextColor(51,65,85);const dt=lt.label||lt.key||`Column ${ft+1}`;j.text(dt,rt+2,ut+tt-2),rt+=it[ft]}),j.setFont(void 0,"normal"),j.setTextColor(17,24,39),ut+=tt};et(),o.forEach(rt=>{const lt=i.map((Et,gt)=>{const Lt=rt[Et.key],Dt=Lt===null||typeof Lt>"u"?"":Lt,Ft=String(typeof Dt=="number"?Dt:Dt||""),bt=Math.max(10,it[gt]-4);return j.splitTextToSize(Ft,bt)}),ft=lt.reduce((Et,gt)=>Math.max(Et,gt.length||1),1),dt=Math.max(tt,ft*xt+nt*2);ut+dt>st-b&&(j.addPage(void 0,g),ut=b,et());let ct=b;i.forEach((Et,gt)=>{const Lt=lt[gt];j.setDrawColor(230),j.rect(ct,ut,it[gt],dt),j.text(Lt,ct+2,ut+nt+3),ct+=it[gt]}),ut+=dt});const ot=new Date().toISOString();j.setFontSize(8),j.setTextColor(100),j.text(`Generated ${formatDateTimeForDisplay(ot)||ot}`,b,st-b+4),j.save(d)}async function exportDatasetToXlsx(e,s={}){const i=Array.isArray(e==null?void 0:e.columns)?e.columns:[],o=Array.isArray(e==null?void 0:e.rows)?e.rows:[],{fileName:a="export.xlsx"}=s;if(typeof window>"u"||typeof document>"u")throw new Error("Spreadsheet export is only supported in a browser environment.");let c;try{c=await __vitePreload(()=>import("./xlsx-D_0l8YDs.js"),[])}catch{throw new Error("XLSX library is unavailable.")}if(!c||!c.utils)throw new Error("XLSX library is unavailable.");const d=i.map(nt=>nt.label||nt.key),g=o.map(nt=>{const xt={};return i.forEach(ut=>{const _e=ut.label||ut.key,$=nt[ut.key];xt[_e]=$===null||typeof $>"u"?"":$}),xt}),h=c.utils.json_to_sheet(g,{header:d}),j=c.utils.book_new();c.utils.book_append_sheet(j,h,s.sheetName||"Export");const b=c.write(j,{bookType:"xlsx",type:"array"}),_=new Blob([b],{type:"application/octet-stream"}),st=URL.createObjectURL(_),tt=document.createElement("a");tt.href=st,tt.download=a,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),window.setTimeout(()=>URL.revokeObjectURL(st),500)}function groupFieldDefsBySection(e=[]){const s=new Map;return e.forEach(i=>{const o=i.section||"Other";s.has(o)||s.set(o,[]),s.get(o).push(i)}),Array.from(s.entries()).map(([i,o])=>({section:i,fields:o}))}function normalizeBackupSettings(e){const s={frequency:"off",lastRun:null,maxVaultEntries:DEFAULT_BACKUP_LIMIT};if(!e||typeof e!="object")return s;const i=BACKUP_FREQUENCIES.includes(e.frequency)?e.frequency:s.frequency,o=typeof e.lastRun=="string"&&e.lastRun?e.lastRun:null;let a=s.maxVaultEntries;if(e.maxVaultEntries==="unlimited"||e.maxVaultEntries===null)a=null;else{const c=parseInt(e.maxVaultEntries,10);Number.isFinite(c)&&c>0&&(a=Math.min(c,200))}return{frequency:i,lastRun:o,maxVaultEntries:a}}function backupFrequencyToMs(e){switch(e){case"nightly":return 24*60*60*1e3;case"weekly":return 7*24*60*60*1e3;case"monthly":return 30*24*60*60*1e3;default:return null}}function normalizeBackupSnapshot(e){if(!e||typeof e!="object")return null;const s=typeof e.savedAt=="string"&&e.savedAt?e.savedAt:null,i=e.payload&&typeof e.payload=="object"?e.payload:null;return!s||!i?null:{savedAt:s,payload:i}}const LEGACY_DEFAULT_ID_TEMPLATE="[YR][PREFIX]-[SEQ]",DEFAULT_ID_GENERATOR_CONFIG=Object.freeze({template:"[YROB][GEN3][-][SEX]-[SEQ]",sequencePadding:1,uppercase:!1,customText:""});function getDefaultIdGeneratorConfig(){return{...DEFAULT_ID_GENERATOR_CONFIG}}function normalizeIdGeneratorConfig(e){const s=getDefaultIdGeneratorConfig();if(!e||typeof e!="object")return s;const i={...s,...e};i.template=String(i.template||s.template);const o=parseInt(i.sequencePadding,10);return i.sequencePadding=Number.isFinite(o)&&o>0?Math.min(o,6):s.sequencePadding,i.uppercase=i.uppercase!==!1,i.customText=String(typeof i.customText=="string"?i.customText:i.customText??s.customText??""),i}function normalizeBreederInfo(e){const s={name:"",businessName:"",email:"",phone:"",logoUrl:"",idGenerator:getDefaultIdGeneratorConfig()};if(!e||typeof e!="object")return s;const i={...s,...e},o=e==null?void 0:e.idGenerator;let a=normalizeIdGeneratorConfig(i.idGenerator);return(!o||typeof o=="object"&&(!Object.prototype.hasOwnProperty.call(o,"template")||String(o.template||"").trim()===LEGACY_DEFAULT_ID_TEMPLATE)&&!Object.prototype.hasOwnProperty.call(o,"customText")&&!Object.prototype.hasOwnProperty.call(o,"uppercase")&&!Object.prototype.hasOwnProperty.call(o,"sequencePadding"))&&(a={...a,template:DEFAULT_ID_GENERATOR_CONFIG.template}),i.idGenerator=normalizeIdGeneratorConfig(a),i}const ID_TEMPLATE_TOKENS=[{token:"[YR]",description:"Last two digits of the year (e.g., 25)."},{token:"[YEAR]",description:"Full four-digit year (e.g., 2025)."},{token:"[YROB]",description:"Last two digits of the birth year."},{token:"[YEAROB]",description:"Full four-digit birth year."},{token:"[PREFIX]",description:"Legacy prefix derived from the name (or sire  dam pattern)."},{token:"[PREFIXU]",description:"Prefix in uppercase."},{token:"[PREFIXL]",description:"Prefix in lowercase."},{token:"[NAME]",description:"Letters from the name in Title Case."},{token:"[NAMEU]",description:"Letters from the name in uppercase."},{token:"[NAMEL]",description:"Letters from the name in lowercase."},{token:"[INITIALS]",description:"Initials from each word of the name."},{token:"[SLUG]",description:"Letters and numbers condensed to lowercase."},{token:"[SLUGU]",description:"Letters and numbers condensed to uppercase."},{token:"[PAREN]",description:"Code from a leading parentheses block (e.g., (DH))."},{token:"[HETS]",description:"Compact het markers (e.g., 50%Hclo)."},{token:"[SEX]",description:"Animal sex (F or M)."},{token:"[TEXT]",description:"Free text snippet from the wizard."},{token:"[GEN3]",description:"First three letters of each gene (e.g., Enchi Fire Clown  EncFirClo)."},{token:"[SEQ]",description:"Running sequence number with optional padding."},{token:"[-]",description:"Literal dash separator."}];function loadStoredJson(e,s){if(typeof window>"u")return s;try{const i=window.localStorage.getItem(e);return i?JSON.parse(i)??s:s}catch(i){return console.warn(`Failed to read ${e} from storage`,i),s}}function saveStoredJson(e,s){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(s))}catch(i){console.warn(`Failed to persist ${e} to storage`,i)}}function cloneLogs(e={}){return{feeds:[...e.feeds||[]],weights:[...e.weights||[]],sheds:[...e.sheds||[]],cleanings:[...e.cleanings||[]],meds:[...e.meds||[]]}}const MAX_PHOTOS_PER_SNAKE=60;function normalizePhotoEntry(e){if(!e||typeof e!="object")return null;const s=typeof e.url=="string"&&e.url.trim()?e.url.trim():typeof e.dataUrl=="string"&&e.dataUrl.trim()?e.dataUrl.trim():null;if(!s)return null;const i=typeof e.id=="string"&&e.id.trim()?e.id.trim():uid("photo"),o=typeof e.name=="string"?e.name.trim():"",a=typeof e.addedAt=="string"&&e.addedAt?e.addedAt:new Date().toISOString(),c=e.source==="camera"?"camera":"upload",d=typeof e.type=="string"?e.type:"",g=Number(e.size),h=Number.isFinite(g)&&g>=0?g:null,j=typeof e.note=="string"?e.note:"";return{id:i,url:s,name:o,addedAt:a,source:c,type:d,size:h,note:j}}function normalizeSnakePhotos(e){return Array.isArray(e)?e.map(normalizePhotoEntry).filter(Boolean):[]}function trimSnakePhotoList(e,s=MAX_PHOTOS_PER_SNAKE){return Array.isArray(e)?typeof s!="number"||s<=0||e.length<=s?e:e.slice(e.length-s):[]}function sanitizeSnakeRecord(e){if(!e||typeof e!="object")return null;const s={...e};return s.morphs=Array.isArray(e.morphs)?e.morphs.map(i=>String(i||"").trim()).filter(Boolean):[],s.hets=Array.isArray(e.hets)?e.hets.map(i=>String(i||"").trim()).filter(Boolean):[],s.possibleHets=Array.isArray(e.possibleHets)?e.possibleHets.map(i=>String(i||"").trim()).filter(Boolean):typeof e.possibleHets=="string"?String(e.possibleHets).split(/[,\n]/).map(i=>String(i||"").trim()).filter(Boolean):[],s.tags=Array.isArray(e.tags)?e.tags.map(i=>String(i||"").trim()).filter(Boolean):[],s.groups=Array.isArray(e.groups)?e.groups.map(i=>String(i||"").trim()).filter(Boolean):normalizeSingleGroupValue(e.groups),s.logs=cloneLogs(e.logs),s.photos=normalizeSnakePhotos(e.photos),s.metadata&&typeof s.metadata=="object"&&(s.metadata={...s.metadata}),s}function sanitizePairingRecord(e){return!e||typeof e!="object"?null:withPairingLifecycleDefaults({...e})}function normalizeBackupFileEntry(e){if(!e||typeof e!="object")return null;const s=e.payload&&typeof e.payload=="object"?e.payload:null;if(!s)return null;const i=e.source==="auto"?"auto":"manual",o=typeof e.createdAt=="string"&&e.createdAt?e.createdAt:new Date().toISOString(),a=typeof e.updatedAt=="string"&&e.updatedAt?e.updatedAt:o,c=typeof e.name=="string"&&e.name.trim()?e.name.trim():`${i==="auto"?"Auto":"Manual"} backup ${formatDateTimeForDisplay(o)}`;return{id:typeof e.id=="string"&&e.id.trim()?e.id.trim():uid("backup"),name:c,createdAt:o,updatedAt:a,source:i,payload:s}}function normalizeBackupVault(e){if(!Array.isArray(e))return[];const s=e.map(normalizeBackupFileEntry).filter(Boolean);return s.sort((i,o)=>{const a=new Date(i.createdAt||0).getTime();return new Date(o.createdAt||0).getTime()-a}),s}const seedSnakes=[{id:"25Ath-1",name:"Athena - DEMO",sex:"F",morphs:["Clown","Pastel"],hets:["Hypo"],possibleHets:[],weight:850,year:2025,birthDate:"2024-06-15",tags:["proven","female"],groups:["Breeders"],status:"Active",imageUrl:void 0,isDemo:!0,logs:{feeds:[],weights:[],sheds:[],cleanings:[],meds:[]}},{id:"25Bor-1",name:"Boris - DEMO",sex:"M",morphs:["Pinstripe","Albino"],hets:[],possibleHets:[],weight:1020,year:2023,birthDate:"2023-08-02",tags:["male"],groups:["Breeders"],status:"Active",imageUrl:void 0,isDemo:!0,logs:{feeds:[],weights:[],sheds:[],cleanings:[],meds:[]}},{id:"25Jun-1",name:"Juniper - DEMO",sex:"F",morphs:["GHI"],hets:[],possibleHets:[],weight:460,year:2024,birthDate:"2024-04-11",tags:["holdback"],groups:["Holdbacks"],status:"Active",imageUrl:void 0,isDemo:!0,logs:{feeds:[],weights:[],sheds:[],cleanings:[],meds:[]}},{id:"25Neo-1",name:"Neo - DEMO",sex:"M",morphs:["Normal"],hets:[],possibleHets:[],weight:180,year:2025,birthDate:"2025-05-01",tags:["hatchling"],groups:["Hatchlings 2025"],status:"Active",imageUrl:void 0,isDemo:!0,logs:{feeds:[],weights:[],sheds:[],cleanings:[],meds:[]}}],BORIS_DEMO_SEED=seedSnakes.find(e=>(e==null?void 0:e.name)==="Boris - DEMO"),BORIS_PREVIEW_DEFAULTS={name:(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.name)||"Boris - DEMO",year:(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.year)||extractYearFromDateString(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.birthDate)||new Date().getFullYear(),birthYear:extractYearFromDateString(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.birthDate)||(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.year)||new Date().getFullYear(),sex:ensureSex(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.sex,"M"),genes:(()=>{const e=Array.isArray(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.morphs)?BORIS_DEMO_SEED.morphs:[],s=Array.isArray(BORIS_DEMO_SEED==null?void 0:BORIS_DEMO_SEED.hets)?BORIS_DEMO_SEED.hets:[],i=[...e,...s].map(o=>String(o||"").trim()).filter(Boolean);return i.length?i.join(", "):""})()},seedPairings=[],DEFAULT_GROUPS=["Breeders","Holdbacks","Hatchlings 2024","Hatchlings 2025"],DEFAULT_STATUS_TAGS=["Active","Holdback","Grow-out","Breeder","Quarantine","Sold","On loan","MorphMarket","On hold","Retired","Deceased"],SCAN_MODE_STORAGE_KEY="breedingPlannerScanMode";function createFreshSnakes(){return seedSnakes.map(e=>{const s=Number(e==null?void 0:e.idSequence),i=Number.isFinite(s)&&s>0?s:extractSequenceFromId(e==null?void 0:e.id)||null;return{...e,idSequence:i,morphs:[...e.morphs||[]],hets:[...e.hets||[]],possibleHets:Array.isArray(e.possibleHets)?[...e.possibleHets]:[],tags:[...e.tags||[]],groups:normalizeSingleGroupValue(e.groups),logs:cloneLogs(e.logs),photos:normalizeSnakePhotos(e.photos)}})}function createFreshPairings(){return seedPairings.map(e=>withPairingLifecycleDefaults({...e,goals:[...e.goals||[]],notes:e.notes||"",appointments:(e.appointments||[]).map(s=>({...s}))}))}function formatDateForDisplay(e){if(!e)return"";if(typeof e=="string"){const s=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(s)return`${s[3]}/${s[2]}/${s[1]}`;const i=new Date(e);if(!isNaN(i)){const o=String(i.getDate()).padStart(2,"0"),a=String(i.getMonth()+1).padStart(2,"0"),c=i.getFullYear();return`${o}/${a}/${c}`}return e}if(e instanceof Date){const s=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${s}/${i}/${o}`}try{const s=new Date(e);if(!isNaN(s)){const i=String(s.getDate()).padStart(2,"0"),o=String(s.getMonth()+1).padStart(2,"0"),a=s.getFullYear();return`${i}/${o}/${a}`}}catch{}return String(e)}function withPairingLifecycleDefaults(e={}){const s=pairingLifecycleDefaults(),i={...s.ovulation,...e.ovulation||{}},o={...s.preLayShed,...e.preLayShed||{}},a={...s.clutch,...e.clutch||{}},c={...s.hatch,...e.hatch||{}},d=st=>{if(st===""||st===null||typeof st>"u")return null;const tt=Number(st);return!Number.isFinite(tt)||tt<0?null:tt},g=!!a.recorded;let h=d(a.fertileEggs),j=d(a.slugs),b=d(a.eggsTotal);g?(h===null&&b!==null&&(h=Math.max(0,b-(j??0))),j===null&&(j=0),h===null&&(h=0),h=Math.max(0,h),j=Math.max(0,j),b=h+j,a.fertileEggs=h,a.slugs=j,a.eggsTotal=b):(a.fertileEggs="",a.slugs="",a.eggsTotal=""),c.hatchedCount=Number(c.hatchedCount||0),(!Number.isFinite(c.hatchedCount)||c.hatchedCount<0)&&(c.hatchedCount=0);const _=typeof a.fertileEggs=="number"&&Number.isFinite(a.fertileEggs)?Math.max(0,a.fertileEggs):typeof a.eggsTotal=="number"&&Number.isFinite(a.eggsTotal)?Math.max(0,a.eggsTotal):null;return typeof _=="number"&&Number.isFinite(_)?c.hatchedCount=Math.min(Math.max(0,c.hatchedCount),_):c.hatchedCount=Math.max(0,c.hatchedCount),{...e,ovulation:i,preLayShed:o,clutch:a,hatch:c}}function initSnakeDraft(e){if(!e)return{name:"",sex:"F",status:"Active",morphs:[],hets:[],tags:[],groups:[],logs:cloneLogs(),idSequence:null};const s=Number(e==null?void 0:e.idSequence),i=Number.isFinite(s)&&s>0?s:extractSequenceFromId(e==null?void 0:e.id)||null;return{...e,status:typeof(e==null?void 0:e.status)=="string"&&e.status.trim()?e.status.trim():"Active",idSequence:i,sex:ensureSex(e.sex,"F"),morphs:e.morphs||[],hets:e.hets||[],tags:e.tags||[],groups:normalizeSingleGroupValue(e.groups),logs:cloneLogs(e.logs),photos:normalizeSnakePhotos(e.photos)}}function createEmptyNewAnimalDraft(){return{id:"",autoId:!0,idSequence:null,name:"",sex:"F",status:"Active",morphHetInput:"",morphs:[],hets:[],weight:"",year:"",birthDate:"",imageUrl:"",photos:[],groups:[],logs:cloneLogs()}}function snakeById(e,s){return Array.isArray(e)&&e.find(i=>i&&i.id===s)||null}function normalizeSexValue(e){const s=String(e??"").trim().toLowerCase();return s?s==="m"||s==="male"?"M":s==="f"||s==="female"?"F":/^male\b/.test(s)?"M":/^female\b/.test(s)?"F":/^supermale\b/.test(s)?"M":/^superfemale\b/.test(s)?"F":/^1[\s.:/]*0$/.test(s)?"M":/^0[\s.:/]*1$/.test(s)?"F":/^m/.test(s)?"M":/^f/.test(s)?"F":"UNKNOWN":"UNKNOWN"}function ensureSex(e,s="F"){const i=normalizeSexValue(e);return i==="UNKNOWN"?s:i}function isFemaleSnake(e){return normalizeSexValue(e==null?void 0:e.sex)==="F"}function isMaleSnake(e){return normalizeSexValue(e==null?void 0:e.sex)==="M"}function formatHetForDisplay(e){if(e==null)return null;let s=String(e).replace(/\s+/g," ").trim();if(!s)return null;let i=s;const o=[],a=i.match(/^(\d{1,3}%)(?:\s+)(.*)$/i);a&&(o.push(a[1].trim()),i=a[2].trim());const c=i.match(/^(pos(?:s?i?a?ble)?|probable|maybe|ph)\b\s*(.*)$/i);if(c){const h=c[1].toLowerCase(),j={pos:"Possible",possiable:"Possible",posible:"Possible",possible:"Possible",probable:"Probable",maybe:"Maybe",ph:"Possible"};o.push(j[h]||cap(h)),i=c[2].trim()}let d=i;/\bhet\b/i.test(d)&&(d=d.replace(/\bhet\b/gi,"").trim()),d&&(d=d.split(/\s+/).map(h=>{if(!h)return"";const j=h.toUpperCase();return h===j?h:h.charAt(0).toUpperCase()+h.slice(1)}).join(" ").trim());const g=[...o,"Het"];return d&&g.push(d),g.join(" ").replace(/\s+/g," ").trim()}function uniqueGeneTokens(e=[]){const s=new Set,i=[];return e.forEach(o=>{const a=String(o).replace(/\s+/g," ").trim().toLowerCase();!a||s.has(a)||(s.add(a),i.push(o))}),i}function combineMorphsAndHetsForDisplay(e=[],s=[],i=[]){const o=Array.isArray(e)?e:e?[e]:[],a=Array.isArray(s)?s:s?[s]:[],c=Array.isArray(i)?i:i?[i]:[],d=o.map(st=>String(st).trim()).filter(Boolean),g=a.map(formatHetForDisplay).filter(Boolean),h=c.map(formatHetForDisplay).filter(Boolean),j=uniqueGeneTokens([...d,...g,...h]),b={Dominant:0,"Incomplete Dominant":1,Recessive:2,Other:3},_=j.map((st,tt)=>{const nt=getGeneDisplayGroup(st)||"Other",xt=typeof b[nt]=="number"?b[nt]:b.Other;return{token:st,index:tt,weight:xt}});return _.sort((st,tt)=>st.weight!==tt.weight?st.weight-tt.weight:st.index-tt.index),_.map(st=>st.token)}function isHetDescriptorToken(e){if(!e)return!1;const s=String(e).toLowerCase();return!!(s.includes("het")||/(^|\s)(pos(?:s?i?a?ble)?|probable|maybe|ph)(\s|$)/i.test(s)||/\d{1,3}%/.test(s))}function isHetGeneToken(e){if(!e)return!1;const s=String(e).replace(/\s+/g," ").trim();if(!s)return!1;const i=s.toLowerCase();return/^(?:\d{1,3}%\s*)?(?:(?:pos(?:s?i?a?ble)?|probable|maybe|ph)\s+)?het\b/.test(i)?!0:isHetDescriptorToken(e)}function normalizeHetInputToken(e){if(!e)return null;let s=String(e).replace(/\s+/g," ").trim();if(!s)return null;let i="";const o=s.match(/^(\d{1,3}%)(?:\s*)(.*)$/i);o&&(i=o[1].toUpperCase(),s=o[2].trim());let a="";const c=s.match(/^(pos(?:s?i?a?ble)?|probable|maybe|ph)(?:\s*)(.*)$/i);c&&(a=c[1].toLowerCase(),s=c[2].trim()),s=s.replace(/\bhet\b/gi," ").replace(/^het(?=[A-Za-z])/i,"").trim();const g={pos:"Possible",ph:"Possible",possible:"Possible",possiable:"Possible",posible:"Possible",probable:"Probable",maybe:"Maybe"}[a]||"",h=[];g&&h.push(g),s&&h.push(s);let j=h.join(" ").trim();return i&&(j=`${i} ${j}`.trim()),j||null}const geneLookupCache={map:null,compactMap:null,maxWords:1,maxCompactLength:0};function normalizeGeneLookupKey(e){return String(e||"").replace(/[()[\]]/g," ").replace(/[-_/]+/g," ").replace(/\s+/g," ").trim().toLowerCase()}function ensureGeneLookupCache(){if(geneLookupCache.map||typeof GENE_GROUPS>"u")return geneLookupCache;const e=new Map,s=(d,g)=>{const h=normalizeGeneLookupKey(d);h&&(e.has(h)||e.set(h,g))};Object.values(GENE_GROUPS).forEach(d=>{(d||[]).forEach(g=>{if(!g)return;s(g,g);const h=g.replace(/\(.*?\)/g,"").trim();h&&h!==g&&s(h,g)})}),typeof GENE_ALIASES=="object"&&GENE_ALIASES&&Object.entries(GENE_ALIASES).forEach(([d,g])=>{d&&(g&&s(g,g),s(d,g||d))});const i=new Map;let o=1,a=0;const c=(d,g)=>{const h=d.replace(/\s+/g,"");h&&(i.has(h)||(i.set(h,{display:g,sourceKey:h}),h.length>a&&(a=Math.max(a,h.length))))};return e.forEach((d,g)=>{const h=g.split(" ").filter(Boolean);if(h.length>o&&(o=h.length),c(g,d),!String(d||"").toLowerCase().startsWith("super ")){const b=`super${g.replace(/\s+/g,"")}`,_=`Super ${d}`;c(b,_)}}),geneLookupCache.map=e,geneLookupCache.compactMap=i,geneLookupCache.maxWords=o,geneLookupCache.maxCompactLength=a,geneLookupCache}function lookupCanonicalGene(e){if(!e)return null;const i=ensureGeneLookupCache().map;if(!i)return null;const o=normalizeGeneLookupKey(e);return o&&i.get(o)||null}function splitWordsByGeneList(e){const s=[];if(!Array.isArray(e)||!e.length)return s;const o=ensureGeneLookupCache().maxWords||1;let a=0;for(;a<e.length;){const c=e[a];if(!c){a+=1;continue}if(c.toLowerCase()==="super"&&a+1<e.length){let j=null,b=0;for(let _=Math.min(o,e.length-(a+1));_>=1;_--){const tt=e.slice(a+1,a+1+_).join(" "),nt=lookupCanonicalGene(tt);if(nt){j={display:`Super ${nt}`,source:`Super ${tt}`},b=_+1;break}}if(j){s.push(j),a+=b;continue}}let g=null,h=0;for(let j=Math.min(o,e.length-a);j>=1;j--){const _=e.slice(a,a+j).join(" "),st=lookupCanonicalGene(_);if(st){g={display:st,source:_},h=j;break}}if(g){s.push(g),a+=h;continue}s.push({display:c,source:c}),a+=1}return s}function splitCompactGeneString(e){if(!e)return[];const s=ensureGeneLookupCache(),i=s.compactMap;if(!i||!i.size)return[];const a=normalizeGeneLookupKey(e).replace(/\s+/g,"");if(!a)return[];const c=s.maxCompactLength||a.length,d=new Map,g=_=>{if(_===a.length)return[[]];if(d.has(_))return d.get(_);const st=[],tt=Math.min(c,a.length-_);for(let nt=tt;nt>=1;nt--){const xt=a.slice(_,_+nt),ut=i.get(xt);if(!ut)continue;g(_+nt).forEach($=>{st.push([ut,...$])})}return d.set(_,st),st},h=g(0).filter(_=>_.length);if(!h.length)return[];h.sort((_,st)=>_.length-st.length);const j=h[0].length;return(h.find(_=>_.length===j)||h[0]).map(_=>({display:_.display,source:_.sourceKey}))}function splitSegmentIntoTokens(e){if(!e)return[];const s=String(e).replace(/[+]+/g," ");let i=s;const o=[],a=[];let c=0;const d=(it,et)=>a.some(ot=>Math.max(ot.start,it)<Math.min(ot.end,et)),g=(it,et)=>{const ot=String(it||"").replace(/\s+/g," ").trim();if(!ot)return;const rt=Number.isFinite(et)?et:Number.POSITIVE_INFINITY;o.push({token:ot,start:rt,order:c++})},h=(it,et)=>{!Number.isFinite(it)||!Number.isFinite(et)||a.push({start:it,end:et})},j=/(?:\d{1,3}%\s*)?(?:pos(?:s?i?a?ble)?|probable|maybe|ph)?\s*het\s*[A-Za-z][A-Za-z\s-]*/gi;let b;for(;(b=j.exec(i))!==null;){const it=b.index,et=it+b[0].length;d(it,et)||(g(b[0],it),h(it,et))}const _=/\d{1,3}%\s*[A-Za-z][A-Za-z\s-]*/gi;for(;(b=_.exec(i))!==null;){const it=b.index,et=it+b[0].length;d(it,et)||(g(b[0],it),h(it,et))}if(a.length){let it="",et=0;[...a].sort((rt,lt)=>rt.start-lt.start).forEach(rt=>{it+=i.slice(et,rt.start),it+=" ",et=rt.end}),it+=i.slice(et),i=it}const st=s.toLowerCase();let tt=0;const nt=it=>{if(!it)return Number.POSITIVE_INFINITY;const et=String(it).toLowerCase();let ot=st.indexOf(et,tt);for(;ot!==-1;){const rt=ot,lt=rt+et.length;if(!d(rt,lt))return h(rt,lt),tt=lt,rt;ot=st.indexOf(et,lt)}for(ot=st.indexOf(et);ot!==-1;){const rt=ot,lt=rt+et.length;if(!d(rt,lt))return h(rt,lt),tt=lt,rt;ot=st.indexOf(et,lt)}return Number.POSITIVE_INFINITY},xt=i.split(/\s+/).filter(Boolean),ut=splitWordsByGeneList(xt);ut.length&&ut.forEach(it=>{if(it.display===it.source){const rt=splitCompactGeneString(it.source)||[];if((rt.length>1||rt.length===1&&rt[0].display!==it.display)&&rt.length){rt.forEach(ft=>{if(!ft||!ft.display)return;const dt=[ft.source,ft.display].filter(Boolean);let ct=Number.POSITIVE_INFINITY;for(const Et of dt)if(ct=nt(Et),Number.isFinite(ct))break;g(ft.display,ct)});return}}const ot=nt(it.source);g(it.display,ot)});const _e=[...a].sort((it,et)=>it.start-et.start);let $=0;const at=[];if(_e.forEach(it=>{if(it.start>$){const et=s.slice($,it.start);et&&/[A-Za-z]/.test(et)&&at.push(et)}$=Math.max($,it.end)}),$<s.length){const it=s.slice($);it&&/[A-Za-z]/.test(it)&&at.push(it)}return at.length&&at.forEach(it=>{(splitCompactGeneString(it)||[]).forEach(ot=>{if(!ot||!ot.display)return;const rt=[ot.source,ot.display].filter(Boolean);let lt=Number.POSITIVE_INFINITY;for(const ft of rt)if(lt=nt(ft),Number.isFinite(lt))break;g(ot.display,lt)})}),o.sort((it,et)=>it.start===et.start?it.order-et.order:it.start-et.start),o.map(it=>it.token)}function splitMorphHetInput(e){const s=String(e||"").trim();if(!s)return{morphs:[],hets:[]};const o=s.split(/[\n\r,;|/+]+/).map(d=>d.trim()).filter(Boolean).flatMap(splitSegmentIntoTokens),a=[],c=[];return o.forEach(d=>{if(isHetDescriptorToken(d)){const g=normalizeHetInputToken(d);g&&c.push(g)}else a.push(d)}),{morphs:a,hets:c}}function formatMorphHetForInput(e=[],s=[]){const i=(Array.isArray(e)?e:[]).map(a=>String(a).trim()).filter(Boolean),o=(Array.isArray(s)?s:[]).map(formatHetForDisplay).filter(Boolean);return[...i,...o].join(", ")}function genMonthlyAppointments(e,s=3){const i=[],o=new Date(e||new Date);for(let a=0;a<s;a++){const c=new Date(o.getFullYear(),o.getMonth()+a,o.getDate());i.push({id:uid("ap"),date:localYMD(c),notes:"",lockObserved:!1,lockLoggedAt:null})}return i}function readFileAsDataURL(e){return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>s(o.result),o.onerror=i,o.readAsDataURL(e)})}function scaleDimensions(e,s,i=1024){if(!e||!s)return{width:0,height:0};const o=Math.max(e,s);if(!i||o<=i)return{width:e,height:s};const a=i/o;return{width:Math.round(e*a),height:Math.round(s*a)}}function loadImageFromUrl(e){return new Promise((s,i)=>{const o=new Image;o.onload=()=>s(o),o.onerror=i,o.src=e})}async function decodeQrFromImageFile(e,{maxDimension:s=1024}={}){if(!e)return null;const i=URL.createObjectURL(e);try{const o=await loadImageFromUrl(i),a=o.naturalWidth||o.width,c=o.naturalHeight||o.height;if(!a||!c)throw new Error("Invalid image dimensions");const{width:d,height:g}=scaleDimensions(a,c,s),h=document.createElement("canvas");h.width=d,h.height=g;const j=h.getContext("2d",{willReadFrequently:!0});if(!j)throw new Error("Canvas context not available");j.drawImage(o,0,0,d,g);const b=j.getImageData(0,0,d,g),_=jsQR(b.data,b.width,b.height,{inversionAttempts:"attemptBoth"});return _&&typeof _.data=="string"?_.data:null}finally{URL.revokeObjectURL(i)}}function extractDecodedText(e){if(!e)return null;if(typeof e=="string")return e;if(typeof e=="object"){if(typeof e.text=="string")return e.text;if(typeof e.decodedText=="string")return e.decodedText;if(typeof e.data=="string")return e.data;if(Array.isArray(e)&&e.length>0)return extractDecodedText(e[0])}return null}function extractSnakeIdFromPayload(e){if(e==null)return null;const s=String(e).trim();if(!s)return null;const i=s.match(/#?snake=?(.*)/),o=i?i[1]:s;try{return decodeURIComponent(o)||null}catch{return o||null}}function updateLog(e,s,i,o){if(typeof e=="function"){const g=e,h=i,j=o||{};g(b=>{const _={...b.logs||{}},st=Array.isArray(_[s])?[..._[s]]:[];if(typeof h=="number"){const tt=st[h]||{};st[h]={...tt,...j}}else i&&typeof i=="object"&&st.push(i);return{...b,logs:{..._,[s]:st}}});return}const a=e;if(!a)return a;const c=i,d={...a.logs||{}};return d[s]=[...d[s]||[],c],{...a,logs:d}}function parseReptileBuddyText(e){if(!e)return[];const s=e.split(/\n\s*\n/).map(o=>o.trim()).filter(Boolean),i=[];for(const o of s){let a=o.split(/\n/).map(g=>g.trim()).filter(Boolean);a=a.filter(g=>!/^ball python\s*\(python regius\)$/i.test(g));const c={name:"",sex:"F",morphs:[],hets:[],tags:[],groups:[],imageUrl:void 0},d=g=>(g||"").split(/[,/]/).map(h=>h.trim()).filter(Boolean);if(a.length>=4){const g=a[0].match(/^(.*?)\s*\(([^)]+)\)\s*$/),h=a[2].toLowerCase();if(g&&/female|male|f|m/i.test(h)){c.name=g[1].trim(),c.id=g[2].trim(),c.sex=/female/i.test(h)?"F":/male/i.test(h)?"M":"F";const j=a[3],b=/([^,]+(?:\([^)]*\))?)/g,_=[];let st;for(;(st=b.exec(j))!==null;){const tt=st[1].trim();tt&&_.push(tt)}for(let tt of _){const nt=tt.match(/^(.+?)\s*\(([^)]+)\)\s*$/);let xt=tt,ut=null;nt&&(xt=nt[1].trim(),ut=nt[2].trim().toLowerCase()),ut?/regular/i.test(ut)?c.morphs.push(xt):/heterozygous66|heterozygous 66|66%|\b66\b/i.test(ut)?c.hets.push(`66% ${xt}`):/heterozygous50|heterozygous 50|50%|\b50\b/i.test(ut)?c.hets.push(`50% ${xt}`):/heterozygous|het/i.test(ut)?c.hets.push(`${xt}`):/\bpos(?:s?i?a?ble)?\b/i.test(ut)?c.hets.push(`${xt} (possible)`):c.hets.push(`${xt} (${ut})`):c.morphs.push(xt)}c.name&&i.push(c);continue}}for(const g of a){const h=g.toLowerCase();if(h.startsWith("name:")&&(c.name=g.split(":").slice(1).join(":").trim()),h.startsWith("sex:")&&(/female/i.test(g)?c.sex="F":/male/i.test(g)&&(c.sex="M")),h.startsWith("morphs:")||h.startsWith("morph:")||h.includes("morph")){const j=g.split(":"),b=j.length>1?j.slice(1).join(":"):g.replace(/morphs?:/i,"").trim();c.morphs=d(b)}if(h.startsWith("hets:")||h.startsWith("het:")||h.includes("het")){const j=g.split(":"),b=j.length>1?j.slice(1).join(":"):g.replace(/hets?:/i,"").trim();c.hets=d(b)}}if(!c.name&&a.length){const g=a[0],h=g.match(/^(.+?)\s*\((male|female|m|f)\)/i);if(h)c.name=h[1].trim(),c.sex=/male/i.test(h[2])?"M":"F";else{const j=g.split(/[-|\t]/).map(b=>b.trim()).filter(Boolean);j.length>=2&&/^(male|female|m|f)$/i.test(j[1])?(c.name=j[0],c.sex=/male/i.test(j[1])?"M":"F",j.length>2&&(c.morphs=d(j.slice(2).join(", ")))):c.name=g}}if((!c.sex||c.sex==="")&&a.some(g=>/male|female|\bM\b|\bF\b/i.test(g)))for(const g of a){if(/female/i.test(g)){c.sex="F";break}if(/male/i.test(g)){c.sex="M";break}}if((!c.morphs||!c.morphs.length)&&a.length>1){for(const g of a.slice(1))if(/morphs?:|visuals?:/i.test(g)||/,/.test(g)||/\//.test(g)){const h=g.split(/:||-|/).map(_=>_.trim()).filter(Boolean),j=h.length>1?h.slice(1).join(":"):h[0],b=d(j);if(b.length){c.morphs=b;break}}}if((!c.hets||!c.hets.length)&&a.length>1){for(const g of a.slice(1))if(/hets?:/i.test(g)||/het\b/i.test(g)){const h=g.split(/:||-|/).map(_=>_.trim()).filter(Boolean),j=h.length>1?h.slice(1).join(":"):h[0],b=d(j);if(b.length){c.hets=b;break}}}c.name=(c.name||"").trim(),c.morphs=Array.isArray(c.morphs)?c.morphs.map(g=>g.trim()).filter(Boolean):c.morphs?[String(c.morphs).trim()]:[],c.hets=Array.isArray(c.hets)?c.hets.map(g=>g.trim()).filter(Boolean):c.hets?[String(c.hets).trim()]:[],c.name&&i.push(c)}return i}function parseFourLineBlocks(e){if(!e)return[];const s=e.split(/\n\s*\n/).map(o=>o.trim()).filter(Boolean),i=[];for(const o of s){let a=o.split(/\n/).map(nt=>nt.trim()).filter(Boolean);if(a=a.filter(nt=>!/^ball python\s*\(python regius\)$/i.test(nt)),a.length<3)continue;const c=a[0].match(/^(.*?)\s*\(([^)]+)\)\s*$/);if(!c)continue;const d=c[1].trim(),g=c[2].trim(),h=a[1]?a[1].toLowerCase():"",j=/female/i.test(h)?"F":/male/i.test(h)?"M":"F",_=(a[2]||"").split(",").map(nt=>nt.trim()).filter(Boolean),st=[],tt=[];for(const nt of _){const xt=nt.match(/^(.+?)\s*\(([^)]+)\)\s*$/);let ut=nt,_e=null;xt&&(ut=xt[1].trim(),_e=xt[2].trim().toLowerCase()),_e?/regular/i.test(_e)?st.push(ut):/heterozygous66|heterozygous 66|66%|\b66\b/i.test(_e)?tt.push(`66% ${ut}`):/heterozygous50|heterozygous 50|50%|\b50\b/i.test(_e)?tt.push(`50% ${ut}`):/heterozygous|het/i.test(_e)?tt.push(`${ut}`):/\bpos(?:s?i?a?ble)?\b/i.test(_e)?tt.push(`${ut} (possible)`):tt.push(`${ut} (${_e})`):st.push(ut)}i.push({name:d,id:g,sex:j,morphs:st,hets:tt})}return i}function convertParsedToSnake(e,s=null){const i=ensureSex(e.sex,"F"),o=[...Array.isArray(e.morphs)?e.morphs:e.morphs?[String(e.morphs)]:[],...Array.isArray(e.hets)?e.hets:e.hets?[String(e.hets)]:[],...Array.isArray(e.genetics)?e.genetics:e.genetics?[String(e.genetics)]:[]],a=normalizeMorphHetLists(o),c=normalizeDateInput(e.birthDate||e.hatchDate||e.birthdate||null),d=c?extractYearFromDateString(c):null,g=(e.id||"").toString().trim(),h=Array.isArray(e.__existingRecords)?e.__existingRecords:null,j=Array.isArray(e.__existingIds)?e.__existingIds:[],b=h&&h.length?h.map(Ft=>{if(!Ft)return null;if(typeof Ft=="string"){const jt=Ft;return{id:jt,idSequence:extractSequenceFromId(jt,s)}}const bt=Ft.id!=null?String(Ft.id):"";if(!bt)return null;const _t=Number(Ft.idSequence),yt=Number.isFinite(_t)&&_t>0?Math.floor(_t):extractSequenceFromId(bt,s);return{id:bt,idSequence:yt}}).filter(Boolean):j.map(Ft=>String(Ft)).filter(Boolean).map(Ft=>({id:Ft,idSequence:extractSequenceFromId(Ft,s)})),_=new Set(b.map(Ft=>Ft.id));let st=Number(e.year);(!Number.isFinite(st)||st<=0)&&(st=new Date().getFullYear());let tt=e.name||"",nt=!1;if(e.name){const Ft=String(e.name).trim().match(/^(20\d{2})\b[-\s:/]*(.*)$/);Ft&&(nt=!0,st=Number(Ft[1])||st,tt=(Ft[2]||"").trim()||tt)}Number.isFinite(d)&&(st=d);let xt="";if(g){let Ft=g;if(_.has(Ft)){let bt=2;for(;_.has(`${g}-${bt}`);)bt+=1;Ft=`${g}-${bt}`}xt=Ft}const ut=g||e.name||"",_e=String(ut).match(/-(\d+)$/),$=_e?Number(_e[1]):null,at=xt||generateSnakeId(tt||(i==="F"?"NewFemale":"NewMale"),st,b,$,{hadYear:nt,originalRawName:String(e.name||""),morphs:a.morphs,hets:a.hets,idConfig:s,sex:i,birthYear:d}),it=extractSequenceFromId(at,s),et=Number(e.weight),ot=Number.isFinite(et)?et:0,lt=(Array.isArray(e.groups)?e.groups:splitMultiValueCell(e.groups)).map(Ft=>String(Ft).trim()).filter(Boolean),dt=(Array.isArray(e.tags)?e.tags:splitMultiValueCell(e.tags)).map(Ft=>String(Ft).trim()).filter(Boolean),ct=String(e.status||"Active").trim()||"Active",Et=typeof e.notes=="string"?e.notes.trim():"",gt=e.imageUrl?String(e.imageUrl):void 0,Lt=normalizeSnakePhotos(e.photos),Dt=gt||(Lt.length?Lt[Lt.length-1].url:void 0);return{id:at,name:tt&&tt.length?tt:e.name||(i==="F"?"New Female":"New Male"),sex:i,morphs:a.morphs,hets:a.hets,weight:ot,year:st,birthDate:c,tags:dt,groups:lt,status:ct,notes:Et,imageUrl:Dt,photos:Lt,idSequence:it,logs:{feeds:[],weights:[],sheds:[],cleanings:[],meds:[]}}}const SEQ_PLACEHOLDER="__SEQ_PLACEHOLDER__";function escapeRegexSpecial(e){return String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function padSequenceNumber(e,s=1){const i=Number(e);if(!Number.isFinite(i)||i<=0){const a=Number.isFinite(i)?Math.max(1,Math.floor(i)||1):1;return String(a)}const o=String(Math.floor(i));return!s||s<=1?o:o.padStart(s,"0")}function ensureTemplateHasSequence(e){const s=String(e||"").trim();return/\[SEQ\]/i.test(s)?s:s?/(?:-|_|\.|#|\/|\s)$/.test(s)?`${s}[SEQ]`:`${s}-[SEQ]`:DEFAULT_ID_GENERATOR_CONFIG.template}function computeHetSegment(e=[]){const s=Array.isArray(e)?e:[],i=[];for(const o of s){const a=String(o||"").trim();if(!a)continue;const c=a.match(/(\d+)%\s*(.*)$/i);if(c){const h=c[1],j=(c[2]||"").replace(/[^A-Za-z]/g,"").slice(0,3).toLowerCase();j&&i.push(`${h}%H${j}`);continue}const d=a.match(/^(.+?)\s*\(pos(?:s?i?a?ble)?\)$/i);let g=a;d&&(g=d[1]),g=g.replace(/[^A-Za-z]/g,"").slice(0,3).toLowerCase(),g&&i.push(`H${g}`)}return i.join("")}function sanitizeGeneForAbbreviation(e){return String(e||"").replace(/\bhet\b/gi,"").replace(/\bpos(?:s?i?a?ble)?\b|\bprobable\b|\bmaybe\b|\bph\b/gi,"").replace(/\d{1,3}%/g,"").replace(/[()]/g," ").replace(/[^A-Za-z\s]/g," ").replace(/\s+/g," ").trim()}function abbreviateGeneToken(e){const s=sanitizeGeneForAbbreviation(e);if(!s)return"";const i={monarch:"MONA",monsoon:"MONS"},o=s.replace(/[^A-Za-z]/g,"").toLowerCase();if(i[o])return i[o];const a=s.split(/\s+/).map(d=>d.replace(/[^A-Za-z]/g,"")).filter(Boolean);if(!a.length)return"";if(a.length>=2)return a.map(d=>d.charAt(0).toUpperCase()).join("");const c=a[0].toUpperCase();return c.length<=3?c:c.slice(0,3)}function computeGeneInitialSegment(e=[],s=[]){const i=Array.isArray(e)?e:e?[e]:[],o=Array.isArray(s)?s:s?[s]:[],a=i.map(g=>abbreviateGeneToken(g)).filter(Boolean),c=o.map(g=>{const h=String(g||"").trim();if(!h)return"";const j=h.match(/(\d{1,3}%)/),b=j?j[1]:"",_=/\bpos(?:s?i?a?ble)?\b/i.test(h)||/\bph\b/i.test(h)||/\bmaybe\b/i.test(h)||/\bprobable\b/i.test(h),st=abbreviateGeneToken(h);if(!st)return"";const tt=[];return b&&tt.push(b),_&&!tt.includes("pos")&&tt.push("pos"),`${tt.join("")}h${st}`}).filter(Boolean),d=[...a,...c];return d.length?d.join(""):""}function titleCaseWords(e){return e.split(/\s+/).filter(Boolean).map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ")}function computeIdNameSegments(e=""){const s=String(e??""),i=s.trim(),o=i.replace(/[^A-Za-z]/g,""),a=i.replace(/[^A-Za-z0-9]/g,""),c=a||o||"X",d=c.toUpperCase(),g=c.toLowerCase(),h=i?titleCaseWords(i):d,j=i?i.toUpperCase():d,b=i?i.toLowerCase():g,_=i.split(/\s+/).filter(Boolean),st=_.length?_.map(xt=>xt.charAt(0).toUpperCase()).join(""):d.charAt(0)||"X",tt=i.match(/^\s*\(([^)]+)\)/);let nt="";if(tt){const xt=tt[1].replace(/[^A-Za-z0-9]/g,"");xt&&(nt=`(${xt.toUpperCase().slice(0,3)})`)}return{rawName:s,lettersOnly:o,sanitizedAlnum:a,prefixCore:c,prefixUpper:d,prefixLower:g,nameTitle:h,nameUpper:j,nameLower:b,initials:st||d.charAt(0)||"X",slugLower:a?a.toLowerCase():g,slugUpper:a?a.toUpperCase():d,parenChunk:nt}}function buildIdTemplateContext({name:e,rawName:s,morphs:i,hets:o,year:a,sex:c,birthYear:d}){const g=Number(a)||new Date().getFullYear(),h=Number(d),j=Number.isFinite(h)&&h>0?h:g,b=String(j).slice(-2).padStart(2,"0"),_=computeIdNameSegments(e||s),st=computeGeneInitialSegment(i,o);return{..._,hetSegment:computeHetSegment(o),yearFull:g,yearShort:String(g).slice(-2).padStart(2,"0"),birthYearFull:j,birthYearShort:b,sexCode:String(c||"U").trim().charAt(0).toUpperCase()||"U",geneInitials:st}}function buildIdFromTemplateNormalized(e,s,i=SEQ_PLACEHOLDER){const o=ensureTemplateHasSequence(e.template),a={"[YEAR]":String(s.yearFull),"[YR]":s.yearShort,"[YEAROB]":String(s.birthYearFull??s.yearFull),"[YROB]":s.birthYearShort??s.yearShort,"[PREFIX]":s.prefixCore,"[PREFIXU]":s.prefixUpper,"[PREFIXL]":s.prefixLower,"[NAME]":s.nameTitle,"[NAMEU]":s.nameUpper,"[NAMEL]":s.nameLower,"[INITIALS]":s.initials,"[SLUG]":s.slugLower,"[SLUGU]":s.slugUpper,"[PAREN]":s.parenChunk,"[HETS]":s.hetSegment,"[SEX]":s.sexCode,"[TEXT]":e.customText||"","[GEN3]":s.geneInitials||"","[-]":"-"};let c=o;for(const[g,h]of Object.entries(a))c=c.replace(new RegExp(escapeRegexSpecial(g),"g"),h);let d;return i===SEQ_PLACEHOLDER?d=SEQ_PLACEHOLDER:Number.isFinite(Number(i))?d=padSequenceNumber(i,e.sequencePadding):d=String(i||""),c=c.replace(/\[SEQ\]/gi,d),e.uppercase&&(c=c.toUpperCase()),c.trim()}function buildSequenceRegexFromTemplate(e){const s=ensureTemplateHasSequence(e),i=/\[([A-Z0-9-]+)\]/gi;let o=0;const a=[];let c,d=!1;for(;(c=i.exec(s))!==null;){const h=s.slice(o,c.index);h&&a.push(escapeRegexSpecial(h));const j=(c[1]||"").toUpperCase();j==="SEQ"?d?a.push("(?:\\d+)"):(a.push("(\\d+)"),d=!0):j==="-"?a.push("(?:-)"):a.push("(?:.*?)"),o=c.index+c[0].length}const g=s.slice(o);return g&&a.push(escapeRegexSpecial(g)),new RegExp(`^${a.join("")}$`,"i")}function extractSequenceFromId(e,s=null){if(!e)return null;const i=normalizeIdGeneratorConfig(s);if(!(i!=null&&i.template))return null;const o=buildSequenceRegexFromTemplate(i.template),a=String(e).match(o);if(!a||a.length<2)return null;const c=Number(a[1]);return!Number.isFinite(c)||c<=0?null:c}function generateSnakeId(e,s,i=[],o=null,a={}){const{hadYear:c=!1,originalRawName:d="",morphs:g=[],hets:h=[],idConfig:j=null,sex:b="U",birthYear:_=null,forceSequence:st=null}=a||{},tt=normalizeIdGeneratorConfig(j),nt=Array.isArray(i)?i.map(Et=>{if(!Et)return null;if(typeof Et=="string"){const Lt=Et;return{id:Lt,idSequence:extractSequenceFromId(Lt,tt)}}if(typeof Et=="object"){if(Et.id||Et.id===""){const Dt=Et.id,Ft=typeof Dt=="string"?Dt:Dt!=null?String(Dt):"";if(!Ft)return null;const bt=Number(Et.idSequence),_t=Number.isFinite(bt)&&bt>0?Math.floor(bt):extractSequenceFromId(Ft,tt);return{id:Ft,idSequence:_t}}const Lt=String(Et);return Lt?{id:Lt,idSequence:extractSequenceFromId(Lt,tt)}:null}const gt=String(Et);return gt?{id:gt,idSequence:extractSequenceFromId(gt,tt)}:null}).filter(Et=>Et&&Et.id):[],xt=nt.map(Et=>Et.id).filter(Boolean),ut=xt.map(Et=>Et.toLowerCase()),_e=new Set(ut),$=_e.size,at=new Set;nt.forEach(Et=>{const gt=Number(Et.idSequence);Number.isFinite(gt)&&gt>0&&at.add(Math.floor(gt))});const it=Number(s)||new Date().getFullYear(),et=e&&String(e).trim()||d&&String(d).trim()||(b==="M"?"New Male":"New Female"),ot=buildIdTemplateContext({name:et,rawName:c?d:e,morphs:g,hets:h,year:it,sex:b,birthYear:_??it}),rt=Et=>buildIdFromTemplateNormalized(tt,ot,Et),lt=buildSequenceRegexFromTemplate(tt.template);for(const Et of xt){if(!Et||typeof Et!="string")continue;const gt=Et.match(lt);if(!gt)continue;const Lt=Number(gt[1]);Number.isFinite(Lt)&&Lt>0&&at.add(Math.floor(Lt))}const ft=Number(st);if(Number.isFinite(ft)&&ft>0){const Et=Math.floor(ft),gt=rt(Et);if(!_e.has(gt.toLowerCase()))return gt}let dt=Math.max(1,$+1);for(;at.has(dt);)dt+=1;let ct=rt(dt);for(;_e.has(ct.toLowerCase());){for(dt+=1;at.has(dt);)dt+=1;ct=rt(dt)}return ct}function normalizeMorphHetLists(e){const s=Array.isArray(e)?e.slice():e?String(e).split(GENE_TOKEN_SPLIT_REGEX).map(d=>d.trim()).filter(Boolean):[],i=[],o=[];for(let d of s){if(!d)continue;const g=String(d).trim(),h=g.toLowerCase();if(/\([^)]*\bregular\b[^)]*\)/i.test(g)){const b=g.replace(/\([^)]*\bregular\b[^)]*\)/i,"").replace(/[()]/g,"").trim();i.push(cap(b));continue}const j=g.match(/(\d+)%/);if(j){const b=j[1];let _=g.replace(/(\d+)%/,"").replace(/\bheterozygous\b/ig,"").replace(/\bhet\b/ig,"").replace(/[()]/g,"").trim();_=cap(_)||_,o.push(`${b}% ${_}`);continue}if(/\bpos(?:s?i?a?ble)?\b/i.test(h)){const b=g.replace(/\bpos(?:s?i?a?ble)?\b/ig,"").replace(/[()]/g,"").trim();o.push(`${cap(b)} (possible)`);continue}if(/\bheterozygous\b|\bhet\b/i.test(h)){const b=g.replace(/\bheterozygous\b/ig,"").replace(/\bhet\b/ig,"").replace(/[()]/g,"").trim();o.push(cap(b));continue}i.push(cap(g))}const a=uniqueGeneTokens(i.map(d=>String(d).trim()).filter(Boolean)),c=uniqueGeneTokens(o.map(d=>formatHetForDisplay(d)).filter(Boolean));return{morphs:a,hets:c}}function formatParsedPreview(e){const s=e.name||"",i=e.id||"",o=e.sex==="M"?"Male":e.sex==="F"?"Female":"Unknown",a=combineMorphsAndHetsForDisplay(e.morphs,e.hets,e.possibleHets),c=a.length?a.join(", "):"-";return`Name - ${s}
ID - ${i}
Gender - ${o}
Genetics - ${c}`}function parseOneLineSnake(e){if(!e||typeof e!="string")return null;const s=e.trim(),i=s.match(/^\s*(.*?)\s*\(([^)]+)\)\s*/);if(!i)return null;const o=i[1].trim(),a=i[2].trim();let c=s.slice(i[0].length).trim();c=c.replace(/Ball Python\s*\(Python regius\)/i,"").trim();const d=c.match(/^(Female|Male|Unknown)\b/i),g=d?d[1][0].toUpperCase()+d[1].slice(1).toLowerCase():"Unknown";let h=d?c.slice(d[0].length).trim():c;if(h=h.replace(/^[-\s:]+/,"").trim(),!h)return{name:o,id:a,gender:g,genetics:[]};const b=h.split(",").map(_=>_.trim()).filter(Boolean).map(_=>{const st=_.match(/^(.+?)\s*\(([^)]+)\)\s*$/),tt=st?st[1].trim():_,nt=st?st[2].trim().toLowerCase():null;return!nt||/^regular$/i.test(nt)?tt:/heterozygous66|heterozygous 66|66%|^66$/i.test(nt)?`66% ${tt}`:/heterozygous50|heterozygous 50|50%|^50$/i.test(nt)?`50% ${tt}`:/heterozygous|^het$/i.test(nt)?`${tt}`:/\bpos(?:s?i?a?ble)?\b/i.test(nt)?`Possible het ${tt}`:`het ${tt}`});return{name:o,id:a,gender:g,genetics:b}}function normalizeTraitToken(e){const s=(e||"").trim(),i=s.match(/^(.+?)\s*\(([^)]+)\)\s*$/),o=i?i[1].trim():s,a=i?i[2].trim().toLowerCase():null;return!a||/^regular$/i.test(a)?o:/heterozygous66|66%|^66$/i.test(a)?`66% het ${o}`:/heterozygous50|50%|^50$/i.test(a)?`50% het ${o}`:/heterozygous|^het$/i.test(a)?`het ${o}`:/\bpos(?:s?i?a?ble)?\b/i.test(a)?`Possible het ${o}`:`het ${o}`}function parsePipeSeparatedLines(e){if(!e)return[];const s=e.split(/\r?\n/).map(o=>o.trim()).filter(Boolean),i=[];for(const o of s){if(!/\|/.test(o))continue;const a=o.split("|").map(b=>b.trim()).filter(Boolean);if(a.length<2)continue;const c=a[0],d=a[1].match(/female/i)?"F":a[1].match(/male/i)?"M":"Unknown",g=a.slice(2).join(", "),j=(g?g.split(",").map(b=>b.trim()).filter(Boolean):[]).map(normalizeTraitToken);i.push({name:c,sex:d,morphs:j.filter(b=>!/^het\b|^66%|^50%|^possible/i.test(b)),hets:j.filter(b=>/^het\b|^66%|^50%|^Possible/i.test(b))})}return i}function parseCsvToRows(e){const s=[];let i=0;const o=e.length;let a="",c=[],d=!1;for(;i<o;){const g=e[i];if(d){if(g==='"'){if(i+1<o&&e[i+1]==='"'){a+='"',i+=2;continue}d=!1,i++;continue}a+=g,i++;continue}if(g==='"'){d=!0,i++;continue}if(g===","){c.push(a),a="",i++;continue}if(g==="\r"){i++;continue}if(g===`
`){c.push(a),s.push(c),c=[],a="",i++;continue}a+=g,i++}return(a!==""||c.length)&&(c.push(a),s.push(c)),s}function normalizeHeaderLabel(e){return String(e||"").toLowerCase().replace(/[^a-z0-9]+/g," ").trim()}function detectHeaderKey(e){const s=normalizeHeaderLabel(e);return s?/^name$|^animal name$|^snake name$/.test(s)?"name":/^id$|^animal id$|^snake id$|^identifier$/.test(s)?"id":/(^|\s)(sex|gender)(\s|$)/.test(s)?"sex":/(^|\s)(morph|visual|combo)(s)?(\s|$)/.test(s)?"morphs":/(^|\s)(het|hetero)(s)?(\s|$)/.test(s)?"hets":/(^|\s)(genetic|gene|traits?)(s)?(\s|$)/.test(s)?"genetics":/(^|\s)(group|collection|category|rack)(s)?(\s|$)/.test(s)?"groups":/(^|\s)(tag|keyword)(s)?(\s|$)/.test(s)?"tags":/(^|\s)(birth|hatch|dob)(\s|$)/.test(s)?"birthDate":/^year$|^birth year$|^hatch year$/.test(s)?"year":/(^|\s)weight(\s|$)|(^|\s)grams?(\s|$)/.test(s)?"weight":/(^|\s)status(\s|$)/.test(s)?"status":/(^|\s)notes?(\s|$)|(^|\s)comments?(\s|$)/.test(s)?"notes":null:null}function splitMultiValueCell(e){return e==null?[]:String(e).split(/[;|,/\n]/).map(s=>s.trim()).filter(Boolean)}function normalizeSingleGroupValue(e){if(!e&&e!==0)return[];const s=Array.isArray(e)?e:[e];for(const i of s){if(i===null||typeof i>"u")continue;const o=String(i).trim();if(o)return[o]}return[]}function normalizeDateInput(e){if(!e)return null;const s=String(e).trim();if(!s)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(s))return s;const i=new Date(s);return isNaN(i.getTime())?null:localYMD(i)}function buildHeaderIndex(e=[]){const s={};return e.forEach((i,o)=>{const a=detectHeaderKey(i);a&&(s[a]||(s[a]=[]),s[a].push(o))}),{index:s,hasHeader:Object.keys(s).length>0}}function getHeaderValues(e=[],s={},i){const o=s[i];return!o||!o.length?[]:o.map(a=>(e[a]||"").toString()).filter(Boolean)}function AddAnimalWizard({newAnimal:e,setNewAnimal:s,groups:i,setGroups:o,statusOptions:a=[],customStatusTags:c=[],onCreateStatusTag:d,onDeleteStatusTag:g,onCancel:h,onAdd:j,theme:b="blue"}){const _=!!(e.name&&e.name.trim().length),st=(Array.isArray(e.groups)&&e.groups.length?e.groups[0]:"")||"",[tt,nt]=reactExports.useState(""),xt=reactExports.useMemo(()=>new Set(c.map(dt=>dt.toLowerCase())),[c]),[ut,_e]=reactExports.useState(!1),$=reactExports.useRef(null);reactExports.useEffect(()=>{if(!ut)return;const dt=ct=>{$.current&&($.current.contains(ct.target)||_e(!1))};return document.addEventListener("mousedown",dt),()=>document.removeEventListener("mousedown",dt)},[ut]),reactExports.useEffect(()=>{_e(!1)},[a]),reactExports.useEffect(()=>{if(!ut)return;const dt=ct=>{$.current&&($.current.contains(ct.target)||_e(!1))};return document.addEventListener("mousedown",dt),()=>document.removeEventListener("mousedown",dt)},[ut]);const at=reactExports.useCallback(()=>{const dt=(tt||"").trim();if(!dt)return;const ct=typeof d=="function"?d(dt):dt;ct&&(s(Et=>({...Et,status:ct})),nt(""))},[tt,d,s]),it=reactExports.useCallback(dt=>{s(ct=>({...ct,status:dt})),_e(!1)},[s]),et=reactExports.useCallback(()=>{s(dt=>({...dt,status:""})),_e(!1)},[s]),ot=reactExports.useCallback(dt=>{typeof g=="function"&&g(dt),_e(!1),s(ct=>ct&&((ct.status||"").trim().toLowerCase()===dt.toLowerCase()?{...ct,status:""}:ct))},[g,s]),rt=reactExports.useCallback(dt=>{const ct=dt.target.value;s(Et=>({...Et||{},name:ct}))},[s]),lt=reactExports.useCallback(dt=>{const ct=dt.target.value;s(Et=>({...Et||{},id:ct,autoId:!1}))},[s]),ft=reactExports.useCallback(dt=>{const ct=dt.target.value;s(Et=>({...Et||{},sex:ct}))},[s]);return jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm max-h-[68vh] overflow-auto",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Name"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm",value:e&&e.name||"",onChange:rt,placeholder:"e.g., Athena"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"ID"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm font-mono",value:e&&e.id||"",onChange:lt,placeholder:"Optional: custom ID (e.g., 25Ath-2)"}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"If you leave this blank an ID will be generated. If the ID you enter already exists a suffix will be appended to make it unique."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sex"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-2 py-1 bg-white text-sm",value:e&&e.sex||"F",onChange:ft,children:[jsxRuntimeExports.jsx("option",{value:"F",children:"Female"}),jsxRuntimeExports.jsx("option",{value:"M",children:"Male"})]})]}),jsxRuntimeExports.jsxs("div",{ref:$,className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Tag"}),jsxRuntimeExports.jsxs("button",{type:"button",className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm bg-white text-left flex items-center justify-between",onClick:()=>_e(dt=>!dt),children:[jsxRuntimeExports.jsx("span",{children:(e.status||"").trim()||"No tag"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-neutral-500",children:"v"})]}),ut&&jsxRuntimeExports.jsxs("div",{className:"absolute z-40 mt-1 w-full rounded-xl border border-neutral-200 bg-white shadow-lg",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm hover:bg-neutral-100",onClick:et,children:"No tag"}),jsxRuntimeExports.jsx("div",{className:"border-t border-neutral-100"}),a.length?a.map(dt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-sm hover:bg-neutral-50",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"flex-1 text-left",onClick:()=>it(dt),children:dt}),jsxRuntimeExports.jsx("button",{type:"button",className:"ml-3 text-sm font-semibold text-rose-500 hover:text-rose-600",onClick:()=>ot(dt),title:"Delete tag",children:"-"})]},dt)):jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-sm text-neutral-400",children:"No tags available yet."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 grid w-full grid-cols-[minmax(0,1fr)_auto] gap-2",children:[jsxRuntimeExports.jsx("input",{className:"w-full border rounded-lg px-2 py-1 text-sm",value:tt,onChange:dt=>nt(dt.target.value),onKeyDown:dt=>{dt.key==="Enter"&&(dt.preventDefault(),at())},placeholder:"Create new tag"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-2.5 py-1 rounded-lg text-sm border transition-colors whitespace-nowrap",tt.trim()?primaryBtnClass(b,!0):"bg-neutral-100 text-neutral-400 border-neutral-200 cursor-not-allowed"),onClick:at,disabled:!tt.trim(),children:"Add tag"})]}),Array.isArray(a)&&a.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:a.map(dt=>{const ct=xt.has(dt.toLowerCase());return jsxRuntimeExports.jsxs("span",{className:cx("inline-flex items-center gap-1 rounded-full px-2 py-1 text-[11px]",ct?"border border-neutral-200 bg-neutral-50 text-neutral-600":"border border-neutral-100 bg-white text-neutral-500"),children:[jsxRuntimeExports.jsx("span",{children:dt}),typeof g=="function"&&jsxRuntimeExports.jsx("button",{type:"button",className:"h-4 w-4 rounded-full border border-neutral-300 text-[10px] leading-[10px] text-neutral-500 hover:border-rose-400 hover:text-rose-500",title:"Delete tag",onClick:()=>g(dt),children:""})]},dt)})}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Tags let you group animals for availability. Removing a tag clears it from any animals using it."})]}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Genetics (morphs & hets)"}),jsxRuntimeExports.jsx("textarea",{rows:3,className:"mt-1 w-full border rounded-xl px-2 py-2 text-sm",value:e.morphHetInput||"",onChange:dt=>{const ct=dt.target.value,{morphs:Et,hets:gt}=splitMorphHetInput(ct);s(Lt=>({...Lt,morphHetInput:ct,morphs:Et,hets:gt}))},placeholder:`Clown
Pastel
Het Hypo`}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"List each trait on its own line (commas, slashes, or percentages are still supported when pasting)."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Weight (g)"}),jsxRuntimeExports.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm",value:e.weight,onChange:dt=>s(ct=>({...ct,weight:dt.target.value})),placeholder:"0"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Year"}),jsxRuntimeExports.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm",value:e.year,onChange:dt=>s(ct=>({...ct,year:dt.target.value})),placeholder:"2025"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Birth date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm",value:e.birthDate||"",onChange:dt=>{const ct=dt.target.value;s(Et=>{const gt=ct?normalizeDateInput(ct)||ct:"",Lt=extractYearFromDateString(gt||ct),Dt={...Et,birthDate:gt};return Lt?Dt.year=String(Lt):gt||(Dt.birthDate=""),Dt})}})]}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Group"}),i.length?jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-2 py-2 text-sm bg-white",value:st,onChange:dt=>{const ct=dt.target.value.trim();s(Et=>({...Et,groups:ct?[ct]:[]}))},children:[jsxRuntimeExports.jsx("option",{value:"",children:"No group"}),i.map(dt=>jsxRuntimeExports.jsx("option",{value:dt,children:dt},dt))]}):jsxRuntimeExports.jsx("div",{className:"mt-1 text-xs text-neutral-500",children:"No groups yet. Add one below."}),jsxRuntimeExports.jsx("div",{className:"mt-3 border border-dashed border-neutral-200 rounded-xl p-3 bg-white",children:jsxRuntimeExports.jsx(AddGroupInline,{onAdd:dt=>{dt&&(o(ct=>ct.includes(dt)?ct:[...ct,dt]),s(ct=>({...ct,groups:[dt]})))}})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Data is local only in this demo."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:h,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm text-white",_?primaryBtnClass(b,!0):primaryBtnClass(b,!1)),disabled:!_,onClick:j,children:"Add animal"})]})]})]})}function BreedingPlannerApp(){var po,fo;const[e,s]=reactExports.useState(createFreshSnakes),[i,o]=reactExports.useState(createFreshPairings),[a,c]=reactExports.useState("animals"),[d,g]=reactExports.useState("active"),[h,j]=reactExports.useState("All"),[b,_]=reactExports.useState("all"),[st,tt]=reactExports.useState(""),nt="all",[xt,ut]=reactExports.useState("all"),[_e,$]=reactExports.useState([]),[at,it]=reactExports.useState([]),[et,ot]=reactExports.useState([]),[rt,lt]=reactExports.useState([]),[ft,dt]=reactExports.useState([]),[ct,Et]=reactExports.useState(()=>[...DEFAULT_GROUPS]),[gt,Lt]=reactExports.useState("blue"),[Dt,Ft]=reactExports.useState(()=>{const Ct=loadStoredJson(STORAGE_KEYS.breeder,null);return normalizeBreederInfo(Ct)}),[bt,_t]=reactExports.useState(()=>normalizeBackupSettings(loadStoredJson(STORAGE_KEYS.backupSettings,null))),[yt,jt]=reactExports.useState(()=>normalizeBackupSnapshot(loadStoredJson(STORAGE_KEYS.backupSnapshot,null))),[St,At]=reactExports.useState(()=>normalizeBackupVault(loadStoredJson(STORAGE_KEYS.backupVault,[]))),[mt,ht]=reactExports.useState(()=>[...DEFAULT_ANIMAL_EXPORT_FIELDS]),[vt,Rt]=reactExports.useState(()=>[...DEFAULT_PAIRING_EXPORT_FIELDS]),[Pt,Bt]=reactExports.useState(null),[Ut,Nt]=reactExports.useState(!1),[It,Ht]=reactExports.useState(createEmptyNewAnimalDraft),[Qt,tn]=reactExports.useState(""),[an,Wt]=reactExports.useState([]),[Xt,wt]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[zt,en]=reactExports.useState(!0),[un,pn]=reactExports.useState(null),[qt,Cn]=reactExports.useState(!1),[fn,On]=reactExports.useState(null),[An,Rn]=reactExports.useState(null),[wn,Ln]=reactExports.useState(null),[$n,Yn]=reactExports.useState(null),[gn,rn]=reactExports.useState(!1),[sn,Sn]=reactExports.useState(!1),[Wn,Vn]=reactExports.useState(null),[Gt,hn]=reactExports.useState(null),[vn,Tn]=reactExports.useState(null),In=reactExports.useRef(null),kn=reactExports.useRef(null),[Ot,Mt]=reactExports.useState(!1),[Yt,xn]=reactExports.useState(""),[dn,En]=reactExports.useState(!1),yn=reactExports.useRef(null);reactExports.useEffect(()=>{if(!dn)return;const Ct=$t=>{yn.current&&(yn.current.contains($t.target)||En(!1))};return document.addEventListener("mousedown",Ct),()=>document.removeEventListener("mousedown",Ct)},[dn]),reactExports.useEffect(()=>{a!=="pairings"&&qt&&Cn(!1)},[a,qt]);const Mn=reactExports.useCallback(Ct=>{const $t=(Ct||"").trim();if(!$t)return"";const nn=DEFAULT_STATUS_TAGS.some(Jt=>Jt.toLowerCase()===$t.toLowerCase());return lt(Jt=>{const mn=Jt.some(bn=>bn.toLowerCase()===$t.toLowerCase());return nn?mn?Jt.filter(bn=>bn.toLowerCase()!==$t.toLowerCase()):Jt:mn?Jt:[...Jt,$t]}),dt(Jt=>Jt.filter(mn=>mn.toLowerCase()!==$t.toLowerCase())),$t},[lt,dt]),_n=reactExports.useCallback(Ct=>{const $t=(Ct||"").trim();if(!$t)return;const nn=$t.toLowerCase();lt(Jt=>Jt.filter(mn=>mn.toLowerCase()!==nn)),dt(Jt=>Jt.some(mn=>mn.toLowerCase()===nn)?Jt:[...Jt,$t]),ot(Jt=>Jt.filter(mn=>mn.toLowerCase()!==nn)),s(Jt=>Jt.map(mn=>{const bn=typeof(mn==null?void 0:mn.status)=="string"?mn.status.trim():"";return!bn||bn.toLowerCase()!==nn?mn:{...mn,status:""}})),Ht(Jt=>{if(!Jt)return Jt;const mn=(Jt.status||"").trim();return!mn||mn.toLowerCase()!==nn?Jt:{...Jt,status:""}}),Rn(Jt=>{if(!Jt)return Jt;const mn=(Jt.status||"").trim();return!mn||mn.toLowerCase()!==nn?Jt:{...Jt,status:""}})},[lt,dt,ot,s,Ht,Rn]),Bn=reactExports.useCallback(Ct=>{const $t=(Ct||"").trim();$t&&ot(nn=>{const Jt=new Set(nn);return Jt.has($t)?Jt.delete($t):Jt.add($t),Array.from(Jt)})},[]),Vt=reactExports.useCallback(()=>{ot([])},[]),[Kt,cn]=reactExports.useState(()=>{const Ct={feed:"Mouse",size:"pinky",sizeDetail:"",form:"Frozen/thawed",formDetail:"",notes:"",refused:!1},$t=loadStoredJson(STORAGE_KEYS.lastFeedDefaults,Ct)||Ct;return{...Ct,...$t}});reactExports.useEffect(()=>{saveStoredJson(STORAGE_KEYS.lastFeedDefaults,Kt)},[Kt]),reactExports.useEffect(()=>{saveStoredJson(STORAGE_KEYS.breeder,normalizeBreederInfo(Dt))},[Dt]),reactExports.useEffect(()=>{if(typeof document>"u")return;const Ct=typeof(Dt==null?void 0:Dt.logoUrl)=="string"?Dt.logoUrl.trim():"",$t=Ct||DEFAULT_FAVICON_HREF;let Jt=document.querySelector("link[rel='icon']")||document.querySelector("link[rel='shortcut icon']");if(Jt||(Jt=document.createElement("link"),Jt.setAttribute("rel","icon"),document.head.appendChild(Jt)),Jt.getAttribute("href")!==$t&&Jt.setAttribute("href",$t),Ct){const mn=Ct.match(/^data:(image\/[^;]+);/i);mn&&mn[1]?Jt.setAttribute("type",mn[1]):Jt.removeAttribute("type"),Jt.removeAttribute("sizes")}else Jt.setAttribute("type","image/png"),Jt.setAttribute("sizes","512x512")},[Dt==null?void 0:Dt.logoUrl]),reactExports.useEffect(()=>{saveStoredJson(STORAGE_KEYS.backupSettings,bt)},[bt]),reactExports.useEffect(()=>{if(!yt){if(typeof window<"u")try{window.localStorage.removeItem(STORAGE_KEYS.backupSnapshot)}catch(Ct){console.warn("Failed to clear backup snapshot",Ct)}return}saveStoredJson(STORAGE_KEYS.backupSnapshot,yt)},[yt]),reactExports.useEffect(()=>{saveStoredJson(STORAGE_KEYS.backupVault,St)},[St]),reactExports.useEffect(()=>{const Ct=normalizeBackupSettings(bt).maxVaultEntries;typeof Ct!="number"||Ct<=0||At($t=>Array.isArray($t)?$t.length<=Ct?$t:$t.slice(0,Ct):[])},[bt,At]);const Dn=reactExports.useCallback(Ct=>{_t($t=>normalizeBackupSettings({...$t||{},...Ct||{}}))},[]),Nn=reactExports.useCallback(()=>({version:1,generatedAt:new Date().toISOString(),snakes:e,pairings:i,groups:ct,breederInfo:normalizeBreederInfo(Dt),theme:gt,lastFeedDefaults:Kt}),[e,i,ct,Dt,gt,Kt]),zn=reactExports.useCallback((Ct,$t={})=>{if(!Ct||typeof Ct!="object")return null;const nn=$t.source==="auto"?"auto":"manual",Jt=typeof $t.savedAt=="string"&&$t.savedAt?$t.savedAt:new Date().toISOString(),mn=typeof $t.name=="string"&&$t.name.trim()?$t.name.trim():`${nn==="auto"?"Auto":"Manual"} backup  ${formatDateTimeForDisplay(Jt)}`,bn=normalizeBackupFileEntry({id:typeof $t.id=="string"&&$t.id.trim()?$t.id.trim():uid(nn==="auto"?"auto-backup":"manual-backup"),name:mn,createdAt:Jt,updatedAt:Jt,source:nn,payload:Ct});if(!bn)return null;const{maxVaultEntries:Pn}=normalizeBackupSettings(bt);return At(Fn=>{const jn=(Array.isArray(Fn)?Fn:[]).filter(Qn=>Qn.id!==bn.id),Gn=[bn,...jn];return Gn.sort((Qn,er)=>new Date(er.createdAt||0).getTime()-new Date(Qn.createdAt||0).getTime()),typeof Pn=="number"&&Pn>0?Gn.slice(0,Pn):Gn}),bn},[At,bt]),Hn=reactExports.useCallback((Ct,$t)=>{const nn=typeof $t=="string"?$t.trim():"";if(!nn)return;const Jt=new Date().toISOString();At(mn=>(Array.isArray(mn)?mn:[]).map(Pn=>Pn.id===Ct?{...Pn,name:nn,updatedAt:Jt}:Pn))},[At]),Xn=reactExports.useCallback(Ct=>{At($t=>Array.isArray($t)?$t.filter(nn=>nn.id!==Ct):[])},[At]),qn=reactExports.useCallback(()=>{let Ct;try{Ct=Nn()}catch(Jt){console.error("Failed to build backup payload",Jt);return}let $t;try{$t=JSON.parse(JSON.stringify(Ct))}catch(Jt){console.error("Failed to serialize auto backup payload",Jt);return}const nn=new Date().toISOString();jt({savedAt:nn,payload:$t}),_t(Jt=>normalizeBackupSettings({...Jt||{},lastRun:nn})),zn($t,{source:"auto",savedAt:nn,name:`Auto backup  ${formatDateTimeForDisplay(nn)}`})},[Nn,zn,_t]);reactExports.useEffect(()=>{if(typeof window>"u")return;const Ct=backupFrequencyToMs(bt.frequency);if(!Ct)return;let $t=!1;const nn=()=>{if($t)return;const mn=bt.lastRun?new Date(bt.lastRun).getTime():0;(!mn||Number.isNaN(mn)||Date.now()-mn>=Ct)&&qn()};nn();const Jt=window.setInterval(nn,5*60*1e3);return()=>{$t=!0,window.clearInterval(Jt)}},[bt.frequency,bt.lastRun,qn]);const Zn=reactExports.useCallback(Ct=>{if(!Ct||typeof Ct!="object")throw new Error("Backup file is empty or invalid.");const nn=(Array.isArray(Ct.snakes)?Ct.snakes:[]).map(sanitizeSnakeRecord).filter(Boolean),mn=(Array.isArray(Ct.pairings)?Ct.pairings:[]).map(sanitizePairingRecord).filter(Boolean),bn=Array.isArray(Ct.groups)?Ct.groups.map(Gn=>String(Gn||"").trim()).filter(Boolean):[],Pn=normalizeBreederInfo(Ct.breederInfo||Ct.breeder),Fn=["blue","green","dark"],Un=typeof Ct.theme=="string"&&Fn.includes(Ct.theme)?Ct.theme:null,jn=Ct.lastFeedDefaults&&typeof Ct.lastFeedDefaults=="object"?{...Ct.lastFeedDefaults}:null;s(nn),o(mn),Et(bn),Ft(Pn),Un&&Lt(Un),jn&&cn(jn),jt(null),_t(Gn=>normalizeBackupSettings({...Gn||{},lastRun:null}))},[s,o,Et,Ft,Lt,cn,jt,_t]);reactExports.useEffect(()=>{try{const Ct=window.localStorage.getItem(PENDING_ANIMAL_VIEW_KEY);Ct&&(Ct==="all"||Ct==="males"||Ct==="females"||Ct==="groups")&&_(Ct)}catch(Ct){console.warn("Failed to restore pending animal view",Ct)}},[]),reactExports.useEffect(()=>{try{window.localStorage.setItem(PENDING_ANIMAL_VIEW_KEY,b)}catch(Ct){console.warn("Failed to persist animal view",Ct)}},[b]),reactExports.useEffect(()=>{d!=="completed"&&h!=="All"&&j("All")},[d,h]),reactExports.useEffect(()=>{Ut&&Ht(Ct=>{if(!Ct||Ct.autoId===!1&&String(Ct.id||"").trim().length>0)return Ct;const nn=ensureSex(Ct.sex,"F"),Jt=splitMorphHetInput(Ct.morphHetInput||""),mn=Array.isArray(Ct.morphs)&&Ct.morphs.length?Ct.morphs:Jt.morphs,bn=Array.isArray(Ct.hets)&&Ct.hets.length?Ct.hets:Jt.hets,Pn=extractYearFromDateString(Ct.birthDate),Fn=Number(Ct.year),Un=Number.isFinite(Fn)&&Fn>0?Fn:new Date().getFullYear(),jn=Pn??Un,Gn=generateSnakeId(Ct.name,jn,e,null,{idConfig:Dt==null?void 0:Dt.idGenerator,sex:nn,morphs:mn,hets:bn,birthYear:Pn}),Qn=Pn?String(Pn):Ct.year,er=extractSequenceFromId(Gn,Dt==null?void 0:Dt.idGenerator);return(Ct.id||"")===Gn&&Ct.year===Qn&&Ct.autoId===!0&&Ct.idSequence===er?Ct:{...Ct,id:Gn,year:Qn,autoId:!0,idSequence:er}})},[Ut,e,Dt,It.name,It.sex,It.morphHetInput,It.morphs,It.hets,It.year,It.birthDate,It.autoId,It.idSequence]);const sr=reactExports.useCallback(Ct=>{!Ct||Ct===b||_(Ct)},[b]),[cr,xr]=reactExports.useState(!1),[nr,pr]=reactExports.useState({maleId:"",femaleId:"",goals:[],notes:"",startDate:localYMD(new Date)}),[gr,mr]=reactExports.useState(null),zr=typeof(An==null?void 0:An.status)=="string"?An.status:"",Cr=reactExports.useMemo(()=>{const Ct=new Set(DEFAULT_STATUS_TAGS);rt.forEach(mn=>{const bn=(mn||"").trim();bn&&Ct.add(bn)}),e.forEach(mn=>{const bn=typeof(mn==null?void 0:mn.status)=="string"?mn.status.trim():"";bn&&Ct.add(bn)});const $t=typeof(It==null?void 0:It.status)=="string"?It.status.trim():"";$t&&Ct.add($t);const nn=typeof zr=="string"?zr.trim():"";nn&&Ct.add(nn);const Jt=new Set(ft.map(mn=>mn.toLowerCase()));return Array.from(Ct).filter(mn=>!Jt.has(mn.toLowerCase())).sort((mn,bn)=>mn.localeCompare(bn))},[rt,ft,e,It.status,zr]);reactExports.useMemo(()=>new Set(rt.map(Ct=>Ct.toLowerCase())),[rt]);const Qo=(zr||"").trim(),Qs=reactExports.useCallback(()=>{const Ct=(Yt||"").trim();if(!Ct)return;const $t=Mn(Ct);$t&&(Rn(nn=>nn&&{...nn,status:$t}),xn(""))},[Yt,Mn]);reactExports.useEffect(()=>{En(!1)},[Cr]);const Jo=reactExports.useCallback(Ct=>{Rn($t=>$t&&{...$t,status:Ct}),En(!1)},[Rn,En]),Zo=reactExports.useCallback(()=>{Rn(Ct=>Ct&&{...Ct,status:""}),En(!1)},[Rn,En]),na=reactExports.useCallback(Ct=>{_n(Ct),En(!1)},[_n]);reactExports.useEffect(()=>{fn||(xn(""),En(!1))},[fn]),reactExports.useEffect(()=>{s(Ct=>{let $t=!1;const nn=Ct.map(Jt=>{const mn=normalizeSexValue(Jt==null?void 0:Jt.sex);return!Jt||mn==="UNKNOWN"||Jt.sex===mn?Jt:($t=!0,{...Jt,sex:mn})});return $t?nn:Ct})},[]),reactExports.useEffect(()=>{vn&&(e.some(Ct=>Ct.id===vn)||Tn(null))},[vn,e]);const br=reactExports.useCallback(Ct=>Ct?(Array.isArray(Ct.groups)?Ct.groups:normalizeSingleGroupValue(Ct.groups)).some(nn=>typeof nn!="string"?!1:nn.trim().toLowerCase()==="breeders"):!1,[]),Js=reactExports.useMemo(()=>e.filter(isFemaleSnake).filter(br),[e,br]),Zs=reactExports.useMemo(()=>e.filter(isMaleSnake).filter(br),[e,br]),_i=reactExports.useMemo(()=>{const Ct=[],$t=[];return i.forEach(nn=>{isPairingCompleted(nn)?$t.push(nn):Ct.push(nn)}),{active:Ct,completed:$t}},[i]),Gr=_i.active,Ar=_i.completed,eo=Gr.length,xa=Ar.length,_r=reactExports.useMemo(()=>Ar.map(Ct=>{const $t=withPairingLifecycleDefaults({...Ct}),nn=getBreedingCycleDerived($t),Jt=computeBreedingCycleYear({clutchDate:(nn==null?void 0:nn.clutchDate)||"",preLayDate:(nn==null?void 0:nn.preLayDate)||"",ovulationDate:(nn==null?void 0:nn.ovulationDate)||"",hatchDate:(nn==null?void 0:nn.hatchDate)||"",startDate:$t.startDate||""}),mn=Jt&&typeof Jt=="string"&&Jt.trim()?Jt:"Unknown";return{pairing:Ct,year:mn}}),[Ar]),Rr=reactExports.useMemo(()=>{const Ct=new Set;_r.forEach(({year:nn})=>{Ct.add(nn||"Unknown")});const $t=Array.from(Ct);return $t.sort((nn,Jt)=>{const mn=Fn=>/^\d{4}$/.test(Fn)?Number(Fn):null,bn=mn(nn),Pn=mn(Jt);return bn!==null&&Pn!==null?Pn-bn:bn!==null?-1:Pn!==null?1:nn.localeCompare(Jt)}),$t},[_r]);reactExports.useEffect(()=>{d==="completed"&&h!=="All"&&(Rr.includes(h)||j(Rr[0]||"All"))},[d,h,Rr]);const to=reactExports.useMemo(()=>d!=="completed"?Ar:h==="All"?_r.map(Ct=>Ct.pairing):_r.filter(Ct=>Ct.year===h).map(Ct=>Ct.pairing),[d,Ar,_r,h]),ga=d==="completed"?to:Gr,ba=to.length;reactExports.useEffect(()=>{if(gr){if(Gr.some(Ct=>Ct.id===gr)){d!=="active"&&g("active");return}Ar.some(Ct=>Ct.id===gr)&&d!=="completed"&&g("completed")}},[gr,Gr,Ar,d]),reactExports.useEffect(()=>{const Ct=window.location.hash.match(/#snake=(.+)/);if(Ct){const $t=decodeURIComponent(Ct[1]),nn=e.find(Jt=>Jt.id===$t);nn&&(On(nn),Rn(initSnakeDraft(nn)))}},[e]),reactExports.useEffect(()=>{const Ct=window.location.hash.match(/#pairing=(.+)/);if(Ct){const $t=decodeURIComponent(Ct[1]),nn=i.find(Jt=>Jt.id===$t);nn&&(c("pairings"),g(isPairingCompleted(nn)?"completed":"active"),mr(nn.id))}},[i]),reactExports.useEffect(()=>{if(!wn){Yn(null);return}const Ct=`${window.location.origin}${window.location.pathname}#snake=${encodeURIComponent(wn)}`;browser.toDataURL(Ct,{width:300}).then($t=>Yn($t)).catch(()=>Yn(null))},[wn]);const vr=reactExports.useCallback(Ct=>{let $t=Array.isArray(Ct)?Ct.slice():[];if($t=filterSnakes($t,st,nt),Array.isArray(et)&&et.length){const mn=new Set(et.map(bn=>String(bn||"").trim()).filter(Boolean));$t=$t.filter(bn=>mn.size===0?!0:mn.has(String((bn==null?void 0:bn.status)||"").trim()))}const nn=Array.isArray(_e)&&_e.length>0,Jt=Array.isArray(at)&&at.length>0;return nn||Jt?$t=$t.filter(mn=>{const bn=Array.isArray(mn==null?void 0:mn.groups)?mn.groups:[],Pn=nn?bn.some(Un=>_e.includes(Un)):!0,Fn=Jt?bn.some(Un=>at.includes(Un)):!1;return!(nn&&!Pn||Jt&&Fn)}):xt!=="all"&&($t=$t.filter(mn=>(mn.groups||[]).includes(xt))),zt||($t=$t.filter(mn=>Array.isArray(mn.groups)&&mn.groups.length)),$t},[st,nt,et,_e,at,xt,zt]),ls=reactExports.useMemo(()=>vr(e),[vr,e]),no=reactExports.useMemo(()=>vr(e.filter(isFemaleSnake)),[vr,e]),ro=reactExports.useMemo(()=>vr(e.filter(isMaleSnake)),[vr,e]),cs=reactExports.useMemo(()=>b==="groups"?[]:b==="all"?ls:b==="females"?no:b==="males"?ro:ls,[b,ls,no,ro]),_a=b==="groups"?"Groups":b==="females"?"Females":b==="males"?"Males":"All animals",$a=jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[jsxRuntimeExports.jsx("span",{className:"text-base font-semibold",children:`${_a} (${cs.length})`}),jsxRuntimeExports.jsx(GeneLegend,{})]}),xs=snakeById(e,nr.femaleId||""),us=snakeById(e,nr.maleId||""),Hr=reactExports.useCallback(Ct=>br(Ct),[br]),$r=reactExports.useCallback(Ct=>{Ct&&(pr({maleId:isMaleSnake(Ct)?Ct.id:"",femaleId:isFemaleSnake(Ct)?Ct.id:"",goals:[],notes:"",startDate:localYMD(new Date)}),xr(!0))},[pr,xr]),xl=reactExports.useCallback(Ct=>{if(Ct){if(!Hr(Ct)){pn({snake:Ct});return}$r(Ct)}},[Hr,$r]),so=reactExports.useCallback(()=>{pn(null)},[]),El=reactExports.useCallback(()=>{if(!(un!=null&&un.snake))return;const Ct=un.snake.id;s(nn=>nn.map(Jt=>!Jt||Jt.id!==Ct?Jt:{...Jt,groups:["Breeders"]})),Et(nn=>nn.includes("Breeders")?nn:[...nn,"Breeders"]);const $t={...un.snake,groups:["Breeders"]};pn(null),$r($t)},[un,s,Et,$r]),io=reactExports.useCallback(async(Ct,$t,nn={})=>{if(!Ct)return{newEntries:[],combined:null,imageUrl:null};const mn=(Array.isArray($t)?$t:Array.from($t||[])).filter(Gn=>Gn&&(typeof Gn.type!="string"||Gn.type.startsWith("image/")));if(!mn.length)return{newEntries:[],combined:null,imageUrl:null};const bn=nn.source==="camera"?"camera":"upload",Fn=(await Promise.all(mn.map(async Gn=>{try{const Qn=await readFileAsDataURL(Gn);return normalizePhotoEntry({id:uid("photo"),url:Qn,name:Gn.name||"",type:Gn.type||"",size:Gn.size,addedAt:new Date().toISOString(),source:bn})}catch(Qn){return console.error("Failed to read image file",Qn),null}}))).filter(Boolean);if(!Fn.length)return{newEntries:[],combined:null,imageUrl:null};let Un=null,jn=null;return s(Gn=>Gn.map(Qn=>{var ur;if(!Qn||Qn.id!==Ct)return Qn;const er=normalizeSnakePhotos(Qn.photos),Kn=trimSnakePhotoList([...er,...Fn]),hr=((ur=Fn[Fn.length-1])==null?void 0:ur.url)||(Kn.length?Kn[Kn.length-1].url:void 0)||Qn.imageUrl||(Kn.length?Kn[Kn.length-1].url:void 0);return Un=Kn,jn=hr,{...Qn,photos:Kn,imageUrl:hr}})),{newEntries:Fn,combined:Un,imageUrl:jn}},[s]),Cl=reactExports.useCallback((Ct,$t)=>{!Ct||!$t||s(nn=>nn.map(Jt=>{if(!Jt||Jt.id!==Ct)return Jt;const mn=normalizeSnakePhotos(Jt.photos).filter(Pn=>Pn.id!==$t);let bn=Jt.imageUrl;return mn.some(Pn=>Pn.url===bn)||(bn=mn.length?mn[mn.length-1].url:void 0),{...Jt,photos:mn,imageUrl:bn}}))},[s]),Al=reactExports.useCallback((Ct,$t)=>{!Ct||!$t||s(nn=>nn.map(Jt=>{if(!Jt||Jt.id!==Ct)return Jt;const mn=normalizeSnakePhotos(Jt.photos),bn=mn.find(Pn=>Pn.id===$t);return bn?{...Jt,photos:mn,imageUrl:bn.url}:Jt}))},[s]),oo=reactExports.useCallback(Ct=>{Ct&&Tn(Ct)},[]),ao=reactExports.useCallback(()=>{Tn(null)},[]),lr=reactExports.useMemo(()=>vn&&e.find(Ct=>Ct.id===vn)||null,[e,vn]),Vr=reactExports.useMemo(()=>lr?normalizeSnakePhotos(lr.photos):[],[lr]),yl=reactExports.useCallback(Ct=>!Number.isFinite(Ct)||Ct<=0?"":Ct>=1024*1024?`${(Ct/(1024*1024)).toFixed(1)} MB`:Ct>=1024?`${(Ct/1024).toFixed(1)} KB`:`${Ct} B`,[]),lo=reactExports.useMemo(()=>Array.isArray(An==null?void 0:An.photos)?An.photos.length:0,[An==null?void 0:An.photos]),Wr=reactExports.useCallback(async(Ct,$t)=>{if(!(fn!=null&&fn.id))return;const nn=Array.isArray(Ct)?Ct.filter(Boolean):Array.from(Ct||[]).filter(Boolean);if(nn.length)try{Mt(!0);const Jt=await io(fn.id,nn,{source:$t}),mn=Array.isArray(Jt==null?void 0:Jt.newEntries)?Jt.newEntries:[],bn=Array.isArray(Jt==null?void 0:Jt.combined)?Jt.combined:null,Pn=typeof(Jt==null?void 0:Jt.imageUrl)=="string"?Jt.imageUrl:null;if(!mn.length)return;Rn(Fn=>{if(!Fn)return Fn;const Un=normalizeSnakePhotos(Fn.photos),jn=bn||trimSnakePhotoList([...Un,...mn]),Gn=Pn||Fn.imageUrl||(jn.length?jn[jn.length-1].url:Fn.imageUrl);return{...Fn,photos:jn,imageUrl:Gn}}),On(Fn=>{if(!Fn)return Fn;const Un=normalizeSnakePhotos(Fn.photos),jn=bn||trimSnakePhotoList([...Un,...mn]),Gn=Pn||Fn.imageUrl||(jn.length?jn[jn.length-1].url:Fn.imageUrl);return{...Fn,photos:jn,imageUrl:Gn}})}catch(Jt){console.error("Failed to add photos",Jt),alert("Could not save those pictures. Please try again with smaller images.")}finally{Mt(!1)}},[fn,io]),Dl=reactExports.useCallback(async Ct=>{var nn;const $t=(nn=Ct==null?void 0:Ct.target)==null?void 0:nn.files;$t&&$t.length&&await Wr($t,"camera"),Ct!=null&&Ct.target&&(Ct.target.value="")},[Wr]),Fl=reactExports.useCallback(async Ct=>{var nn;const $t=(nn=Ct==null?void 0:Ct.target)==null?void 0:nn.files;$t&&$t.length&&await Wr($t,"upload"),Ct!=null&&Ct.target&&(Ct.target.value="")},[Wr]),Bl=reactExports.useCallback(()=>{const Ct=In.current;Ct&&Ct.click()},[]),wl=reactExports.useCallback(()=>{const Ct=kn.current;Ct&&Ct.click()},[]),Sl=reactExports.useCallback(()=>{fn!=null&&fn.id&&oo(fn.id)},[fn,oo]);function _l(){pr({maleId:"",femaleId:"",goals:[],notes:"",startDate:localYMD(new Date)}),g("active"),xr(!0)}const co=reactExports.useCallback(Ct=>{Ct&&(Tt(a==="animals"&&b==="groups"),c("animals"),_(isFemaleSnake(Ct)?"females":"males"),On(Ct),Rn(initSnakeDraft(Ct)))},[b,a]),Yr=reactExports.useCallback(()=>{On(null),Rn(null),kt&&(c("animals"),_("groups"),Tt(!1))},[kt]),xo=reactExports.useCallback(Ct=>{Ct&&Vn(Ct)},[]),uo=reactExports.useCallback(Ct=>{Ct&&(s($t=>{const nn=$t.filter(Jt=>Jt.id!==Ct);return nn.length?nn:createFreshSnakes()}),o($t=>$t.filter(nn=>nn.maleId!==Ct&&nn.femaleId!==Ct)),fn&&fn.id===Ct&&Yr())},[Yr,fn]),Rl=reactExports.useCallback(()=>{Wn&&(uo(Wn.id),Vn(null))},[uo,Wn]),Pl=reactExports.useCallback(()=>{Vn(null)},[]);function Nl(){var or;const Ct=ensureSex(It.sex,"F"),$t=splitMorphHetInput(It.morphHetInput||""),nn=Array.isArray(It.morphs)?It.morphs.map(rr=>String(rr).trim()).filter(Boolean):$t.morphs,Jt=Array.isArray(It.hets)?It.hets.map(rr=>String(rr).trim()).filter(Boolean):$t.hets,mn=e.map(rr=>rr.id),bn=normalizeDateInput(It.birthDate||null),Pn=extractYearFromDateString(bn),Fn=Number(It.year),Un=Number.isFinite(Fn)&&Fn>0?Fn:new Date().getFullYear(),jn=Pn??Un;let Gn=(It.id||"").toString().trim();if(It.autoId===!1&&Gn.length>0){if(mn.includes(Gn)){let rr=2,ar=`${Gn}-${rr}`;for(;mn.includes(ar);)rr+=1,ar=`${Gn}-${rr}`;Gn=ar}}else Gn=generateSnakeId(It.name,jn,e,null,{idConfig:Dt==null?void 0:Dt.idGenerator,sex:Ct,morphs:nn,hets:Jt,birthYear:Pn});let er=Number(It.idSequence);(!Number.isFinite(er)||er<=0)&&(er=extractSequenceFromId(Gn,Dt==null?void 0:Dt.idGenerator)||null);const Kn=normalizeSingleGroupValue(It.groups),ir=normalizeSnakePhotos(It.photos),hr=((or=It.imageUrl)==null?void 0:or.trim())||(ir.length?ir[ir.length-1].url:void 0),ur=(It.status||"").trim()||"Active",Jn={id:Gn,name:It.name.trim()||(Ct==="F"?"New Female":"New Male"),sex:Ct,morphs:nn,hets:Jt,weight:Number(It.weight)||0,year:jn,birthDate:bn||null,tags:[],groups:Kn,status:ur,imageUrl:hr,photos:ir,logs:cloneLogs(It.logs),idSequence:Number.isFinite(er)&&er>0?er:null,isDemo:!1};s(rr=>[...rr.filter(Er=>!Er.isDemo),Jn]),Et(rr=>Array.from(new Set([...rr||[],...Jn.groups]))),Nt(!1),Ht(createEmptyNewAnimalDraft())}function Tl(){const Ct=parseReptileBuddyText(Qt);Wt(Ct)}function Ml(){const Ct=new Set(e.map(Fn=>`${(Fn.name||"").trim().toLowerCase()}|${ensureSex(Fn.sex,"F")}`)),$t=e.map(Fn=>Fn.id),nn=e.map(Fn=>({id:Fn.id,idSequence:Fn.idSequence})),Jt=new Map((ct||[]).map(Fn=>[String(Fn).trim().toLowerCase(),Fn])),mn=Fn=>{const Un=String(Fn||"").trim();if(!Un)return null;const jn=Un.toLowerCase();return Jt.has(jn)?Jt.get(jn):(Jt.set(jn,Un),Un)},bn=[];for(const Fn of an){const Un=convertParsedToSnake({...Fn,__existingIds:$t,__existingRecords:nn},Dt==null?void 0:Dt.idGenerator),jn=ensureSex(Un.sex,"F"),Qn=`${(Un.name||"").trim().toLowerCase()}|${jn}`;if(Ct.has(Qn))continue;Ct.add(Qn),$t.push(Un.id),nn.push({id:Un.id,idSequence:Un.idSequence});const er=normalizeSingleGroupValue((Un.groups||[]).map(mn).filter(Boolean));bn.push({...Un,sex:jn,groups:er,isDemo:!1})}if(!bn.length){tn(""),Wt([]),c("animals"),_("all");return}s(Fn=>[...Fn.filter(jn=>!jn.isDemo),...bn]);const Pn=Array.from(new Set(bn.flatMap(Fn=>Fn.groups||[])));Pn.length&&Et(Fn=>Array.from(new Set([...Fn||[],...Pn]))),tn(""),Wt([]),c("animals"),_("all"),wt(!1)}const Ll=(Ct,$t,nn,Jt)=>{const mn=String(Ct||"Unknown Year").trim()||"Unknown Year",bn=String($t).trim()||"Male",Pn=String(nn).trim()||"Female",Fn=`${mn} ${bn} X ${Pn}`.replace(/\s+/g," ").trim();if(!Jt.has(Fn))return Fn;let Un=2,jn=`${Fn} (${Un})`;for(;Jt.has(jn);)Un+=1,jn=`${Fn} (${Un})`;return jn};function Il(){const Ct=nr.femaleId||"",$t=nr.maleId||"";if(!Ct||!$t)return;const nn=snakeById(e,Ct),Jt=snakeById(e,$t),mn=(nn==null?void 0:nn.name)||"Female",bn=(Jt==null?void 0:Jt.name)||"Male",Pn=`${mn}  ${bn}`,Fn=extractYearFromDateString(nr.startDate)||new Date().getFullYear(),Un={femaleId:Ct,maleId:$t,label:Pn,startDate:nr.startDate,lockObserved:!1,goals:nr.goals||[],notes:nr.notes||"",appointments:genMonthlyAppointments(nr.startDate,5)};Un.appointments&&Un.appointments.length&&(Un.startDate=Un.appointments[0].date);let jn="";o(Gn=>{const Qn=new Set(Gn.map(ir=>ir==null?void 0:ir.id).filter(Boolean)),er=Ll(Fn,bn,mn,Qn);jn=er;const Kn={...Un,id:er};return[...Gn,withPairingLifecycleDefaults(Kn)]}),xr(!1),c("pairings"),mr(jn)}const ho=reactExports.useCallback(Ct=>{if(!Ct||!Ct.pairing||!Ct.count||Ct.count<=0)return;const $t=withPairingLifecycleDefaults({...Ct.pairing}),nn=Ct.hatchedDate||localYMD(new Date),Jt=parseYmd(nn)||new Date,mn=Number.isFinite(Jt.getFullYear())?Jt.getFullYear():new Date().getFullYear(),bn=snakeById(e,$t==null?void 0:$t.maleId),Pn=snakeById(e,$t==null?void 0:$t.femaleId),Fn=`${(Pn==null?void 0:Pn.name)||"Dam"}  ${(bn==null?void 0:bn.name)||"Sire"}`,Un=e.map(Kn=>({id:Kn.id,idSequence:Kn.idSequence})),jn=new Set(Un.map(Kn=>Kn.id)),Gn=Un.map(Kn=>({...Kn})),Qn=Dt!=null&&Dt.idGenerator?{...Dt.idGenerator}:null,er=Array.from({length:Ct.count},(Kn,ir)=>{const ur=`Hatchling ${Ct.existingCount+ir+1} (${Fn})`,Jn=generateSnakeId(ur,mn,Gn,null,{idConfig:Qn,sex:"F",morphs:[],hets:[],birthYear:mn});jn.add(Jn);const or=extractSequenceFromId(Jn,Qn);return Gn.push({id:Jn,idSequence:or}),{id:Jn,autoId:!0,name:ur,sex:"F",morph:"",weight:"",birthDate:nn,idSequence:or}});hn({pairingId:$t.id,pairing:$t,entries:er,currentIndex:0,hatchedDate:nn,total:Ct.count,existingCount:Ct.existingCount,previousHatch:Ct.previousHatch||$t.hatch,context:{pairingName:Fn,sireName:(bn==null?void 0:bn.name)||"",damName:(Pn==null?void 0:Pn.name)||"",groupName:`Hatchlings ${mn}`,year:mn,idConfig:Qn,existingIdsBase:Un.map(Kn=>Kn.id),existingRecordsBase:Un}})},[e,Dt]),Dr=reactExports.useCallback((Ct,$t,nn)=>{if(!Ct)return Ct;const Jt=Array.isArray(Ct.entries)?Ct.entries:[];if(!Jt[$t])return Ct;const mn=Ct.context||{},bn=Array.isArray(mn.existingIdsBase)?mn.existingIdsBase.map(Jn=>String(Jn||"").trim()).filter(Boolean):[],Pn=new Set(bn),jn=(Array.isArray(mn.existingRecordsBase)?mn.existingRecordsBase:[]).map(Jn=>{if(!Jn)return null;if(typeof Jn=="string"){const Er=Jn;return{id:Er,idSequence:extractSequenceFromId(Er,mn.idConfig)}}const or=Jn.id!=null?String(Jn.id):"";if(!or)return null;const rr=Number(Jn.idSequence),ar=Number.isFinite(rr)&&rr>0?Math.floor(rr):extractSequenceFromId(or,mn.idConfig);return{id:or,idSequence:ar}}).filter(Boolean).map(Jn=>({...Jn}));Jt.forEach((Jn,or)=>{if(or===$t)return;const rr=String((Jn==null?void 0:Jn.id)||"").trim();if(rr){Pn.add(rr);const ar=Number(Jn==null?void 0:Jn.idSequence),Er=Number.isFinite(ar)&&ar>0?Math.floor(ar):extractSequenceFromId(rr,mn.idConfig);jn.push({id:rr,idSequence:Er})}});const Gn=Jt[$t].name||mn.pairingName||`Hatchling ${$t+1}`,Qn=ensureSex(nn??Jt[$t].sex,"F"),er=extractYearFromDateString(Jt[$t].birthDate),Kn=er??mn.year??new Date().getFullYear(),ir=generateSnakeId(Gn,Kn,jn,null,{idConfig:mn.idConfig,sex:Qn,morphs:[],hets:[],birthYear:er??Kn});if(!ir)return Ct;const hr=extractSequenceFromId(ir,mn.idConfig),ur=Jt.map((Jn,or)=>or===$t?{...Jn,id:ir,autoId:!0,idSequence:hr}:Jn);return{...Ct,entries:ur}},[]),Fr=reactExports.useCallback((Ct,$t)=>{hn(nn=>{if(!nn)return nn;const Jt=Array.isArray(nn.entries)?nn.entries:[];if(Ct<0||Ct>=Jt.length)return nn;const mn=Jt.map((bn,Pn)=>{if(Pn!==Ct)return bn;const Fn={...bn,...$t};return!Object.prototype.hasOwnProperty.call($t,"autoId")&&Object.prototype.hasOwnProperty.call($t,"id")&&(Fn.autoId=!1),Fn});return{...nn,entries:mn}})},[]),Ol=reactExports.useCallback((Ct,$t)=>{Fr(Ct,{id:$t})},[Fr]),Ul=reactExports.useCallback((Ct,$t)=>{Fr(Ct,{morph:$t})},[Fr]),zl=reactExports.useCallback((Ct,$t)=>{Fr(Ct,{weight:$t})},[Fr]),Gl=reactExports.useCallback((Ct,$t)=>{hn(nn=>{var Fn;if(!nn)return nn;const Jt=Array.isArray(nn.entries)?nn.entries:[];if(Ct<0||Ct>=Jt.length)return nn;const mn=$t?normalizeDateInput($t)||$t:"",bn=Jt.map((Un,jn)=>jn===Ct?{...Un,birthDate:mn}:Un);let Pn={...nn,entries:bn};return(Fn=Jt[Ct])!=null&&Fn.autoId&&(Pn=Dr(Pn,Ct,bn[Ct].sex)),Pn})},[Dr]),Hl=reactExports.useCallback((Ct,$t)=>{const nn=ensureSex($t,"F");hn(Jt=>{var Un;if(!Jt)return Jt;const mn=Array.isArray(Jt.entries)?Jt.entries:[];if(Ct<0||Ct>=mn.length)return Jt;const bn=!!((Un=mn[Ct])!=null&&Un.autoId),Pn=mn.map((jn,Gn)=>Gn===Ct?{...jn,sex:nn}:jn);let Fn={...Jt,entries:Pn};return bn&&(Fn=Dr(Fn,Ct,nn)),Fn})},[Dr]),$l=reactExports.useCallback(Ct=>{hn($t=>{var nn,Jt;return Dr($t,Ct,(Jt=(nn=$t==null?void 0:$t.entries)==null?void 0:nn[Ct])==null?void 0:Jt.sex)})},[Dr]),Vl=reactExports.useCallback(()=>{hn(Ct=>{if(!Ct)return Ct;const $t=Array.isArray(Ct.entries)?Ct.entries.length:0,nn=Math.min($t-1,(Ct.currentIndex||0)+1);return nn===Ct.currentIndex?Ct:{...Ct,currentIndex:nn}})},[]),Wl=reactExports.useCallback(()=>{hn(Ct=>{if(!Ct)return Ct;const $t=Math.max(0,(Ct.currentIndex||0)-1);return $t===Ct.currentIndex?Ct:{...Ct,currentIndex:$t}})},[]),ds=reactExports.useCallback(()=>{hn(null)},[]),Yl=reactExports.useCallback(()=>{hn(Ct=>{if(!Ct)return Ct;const $t=Array.isArray(Ct.entries)?Ct.entries:[];if(!$t.length)return null;const nn=Ct.context||{},Jt=Ct.pairing||null,mn=Ct.hatchedDate||localYMD(new Date),bn=nn.groupName||null,Pn=new Set(e.map(jn=>jn.id)),Fn=e.map(jn=>({id:jn.id,idSequence:jn.idSequence})),Un=[];return $t.forEach((jn,Gn)=>{const Qn=jn.name||nn.pairingName||`Hatchling ${Gn+1}`,er=ensureSex(jn.sex,"F");let Kn=String(jn.id||"").trim();const ir=jn.birthDate||mn,hr=ir?normalizeDateInput(ir)||ir:"",ur=extractYearFromDateString(hr||ir),Jn=ur??nn.year??new Date().getFullYear();if(Kn||(Kn=generateSnakeId(Qn,Jn,Fn,null,{idConfig:nn.idConfig,sex:er,morphs:[],hets:[],birthYear:ur??Jn})),!Kn)return;if(Pn.has(Kn)){let ps=2,fs=`${Kn}-${ps}`;for(;Pn.has(fs);)ps+=1,fs=`${Kn}-${ps}`;Kn=fs}Pn.add(Kn);const or=extractSequenceFromId(Kn,Dt==null?void 0:Dt.idGenerator);Fn.push({id:Kn,idSequence:or});const rr=hr||ir,ar=parseYmd(rr),Er=ar&&Number.isFinite(ar.getFullYear())?ar.getFullYear():Jn,{morphs:Zl,hets:_c}=splitMorphHetInput(jn.morph||""),hs=Number(jn.weight),ex=Number.isFinite(hs)&&hs>=0?hs:0;Un.push({id:Kn,name:Qn,sex:er,morphs:Zl,hets:_c,weight:ex,year:Er,birthDate:rr,pairingId:(Jt==null?void 0:Jt.id)||Ct.pairingId||null,sireId:(Jt==null?void 0:Jt.maleId)||null,damId:(Jt==null?void 0:Jt.femaleId)||null,tags:["hatchling"],groups:bn?normalizeSingleGroupValue(bn):[],status:"Active",imageUrl:void 0,logs:cloneLogs(),idSequence:or,isDemo:!1})}),Un.length&&(s(jn=>[...jn.filter(Qn=>!Qn.isDemo),...Un]),bn&&Et(jn=>jn.includes(bn)?jn:[...jn,bn]),typeof window<"u"&&typeof window.alert=="function"&&window.alert(`${Un.length} hatchlings added${bn?` to ${bn}`:""}.`)),null})},[e,s,Et,Dt]),Xl=reactExports.useCallback(()=>{Rn(Ct=>{var jn;if(!Ct||String(Ct.id||"").trim())return Ct;const nn=e.filter(Gn=>Gn&&Gn.id!==(fn==null?void 0:fn.id)).map(Gn=>({id:Gn.id,idSequence:Gn.idSequence})),Jt=Number(Ct.year)||(Ct.birthDate?((jn=parseYmd(Ct.birthDate))==null?void 0:jn.getFullYear())||new Date().getFullYear():new Date().getFullYear()),mn=Ct.birthDate?extractYearFromDateString(Ct.birthDate):null,bn=Number(Ct.idSequence),Pn=Number.isFinite(bn)&&bn>0?Math.floor(bn):null,Fn=generateSnakeId(Ct.name,Jt,nn,null,{idConfig:Dt==null?void 0:Dt.idGenerator,sex:Ct.sex||"U",morphs:Ct.morphs||[],hets:Ct.hets||[],birthYear:mn??Jt,forceSequence:Pn});if(!Fn)return Ct;const Un=extractSequenceFromId(Fn,Dt==null?void 0:Dt.idGenerator);return{...Ct,id:Fn,idSequence:Un??Pn??Ct.idSequence??null,autoId:!0}})},[e,fn,Dt]),Kl=reactExports.useCallback(()=>{Rn(Ct=>{var Un;if(!Ct)return Ct;const $t=e.filter(jn=>jn&&jn.id!==(fn==null?void 0:fn.id)).map(jn=>({id:jn.id,idSequence:jn.idSequence})),nn=Number(Ct.year)||(Ct.birthDate?((Un=parseYmd(Ct.birthDate))==null?void 0:Un.getFullYear())||new Date().getFullYear():new Date().getFullYear()),Jt=Ct.birthDate?extractYearFromDateString(Ct.birthDate):null,mn=Number(Ct.idSequence),bn=Number.isFinite(mn)&&mn>0?Math.floor(mn):null,Pn=generateSnakeId(Ct.name,nn,$t,null,{idConfig:Dt==null?void 0:Dt.idGenerator,sex:Ct.sex||"U",morphs:Ct.morphs||[],hets:Ct.hets||[],birthYear:Jt??nn,forceSequence:bn});if(!Pn)return Ct;const Fn=extractSequenceFromId(Pn,Dt==null?void 0:Dt.idGenerator);return{...Ct,id:Pn,idSequence:Fn??bn??Ct.idSequence??null,autoId:!0}})},[e,fn,Dt]),Ql=reactExports.useCallback((Ct,$t)=>{let nn=null;o(Jt=>Jt.map(mn=>{var Qn,er,Kn;if(mn.id!==Ct)return mn;const bn=withPairingLifecycleDefaults({...mn}),Pn=typeof $t=="function"?$t(bn):$t,Fn=withPairingLifecycleDefaults({...bn,...Pn||{}});Fn.id=mn.id;const Un=(Qn=bn==null?void 0:bn.hatch)!=null&&Qn.recorded?Number(bn.hatch.hatchedCount||0):0,jn=(er=Fn==null?void 0:Fn.hatch)!=null&&er.recorded?Number(Fn.hatch.hatchedCount||0):0,Gn=(Kn=Fn==null?void 0:Fn.hatch)!=null&&Kn.recorded?Math.max(0,jn-Un):0;return Gn>0&&(nn={pairing:{...bn,...Fn},count:Gn,hatchedDate:Fn.hatch.date,existingCount:Un,previousHatch:{...bn.hatch}}),Fn})),nn&&ho(nn)},[o,ho]),Jl=gt==="green"?{"--primary":"#059669","--primary-border":"#059669","--primary-contrast":"#fff"}:gt==="dark"?{"--primary":"#374151","--primary-border":"#374151","--primary-contrast":"#fff"}:{"--primary":"#0ea5e9","--primary-border":"#0ea5e9","--primary-contrast":"#fff"};return jsxRuntimeExports.jsxs("div",{className:"app-root w-full min-h-screen bg-neutral-50 text-neutral-900",style:Jl,children:[jsxRuntimeExports.jsx("div",{className:"px-5 py-4 border-b bg-white sticky top-0 z-10",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[Dt.logoUrl?jsxRuntimeExports.jsx("img",{src:Dt.logoUrl,alt:"logo",className:"w-10 h-10 rounded-full object-cover border"}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-50 flex items-center justify-center text-xs text-neutral-400 border",children:"Logo"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-semibold tracking-tight",children:"Breeding Planner"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-600",children:Dt.businessName?`${Dt.businessName}  ${Dt.name}`:""})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx(TabButton,{theme:gt,active:a==="animals",onClick:()=>c("animals"),children:"Animals"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:a==="pairings",onClick:()=>c("pairings"),children:"Breeding Planner"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:a==="calendar",onClick:()=>c("calendar"),children:"Calendar"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:a==="setup",onClick:()=>c("setup"),children:"Setup"}),jsxRuntimeExports.jsx("div",{className:"ml-2",children:jsxRuntimeExports.jsxs("select",{className:"border rounded-lg px-2 py-1 text-sm bg-white",value:gt,onChange:Ct=>Lt(Ct.target.value),children:[jsxRuntimeExports.jsx("option",{value:"blue",children:"Blue"}),jsxRuntimeExports.jsx("option",{value:"green",children:"Green"}),jsxRuntimeExports.jsx("option",{value:"dark",children:"Dark"})]})}),jsxRuntimeExports.jsx("div",{className:"ml-auto flex items-center gap-2",children:jsxRuntimeExports.jsx("input",{value:st,onChange:Ct=>tt(Ct.target.value),placeholder:"Search name, morph, het, tag",className:"px-3 py-2 border rounded-xl text-sm w-64 focus:outline-none focus:ring-2 focus:ring-black/10"})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto p-5",children:[a==="animals"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx(TabButton,{theme:gt,active:b==="all",onClick:()=>sr("all"),children:"All"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:b==="males",onClick:()=>sr("males"),children:"Males"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:b==="females",onClick:()=>sr("females"),children:"Females"}),jsxRuntimeExports.jsx(TabButton,{theme:gt,active:b==="groups",onClick:()=>sr("groups"),children:"Groups"})]}),jsxRuntimeExports.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>rn(!0),className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),children:"Export QR"}),jsxRuntimeExports.jsx("button",{onClick:()=>Sn(!0),className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),children:"Scan QR"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Ht(createEmptyNewAnimalDraft()),Nt(!0)},className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),children:"+ Add animal"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt(!0),className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),children:"Import animals"})]})]}),b==="groups"?jsxRuntimeExports.jsx(GroupsSection,{groups:ct,setGroups:Et,snakes:e,theme:gt,onOpenSnake:co,onDeleteGroup:Ct=>{if(e.some(nn=>(nn.groups||[]).includes(Ct)))return alert("Group in use by some snakes. Remove from those snakes first.");Et(nn=>nn.filter(Jt=>Jt!==Ct)),xt===Ct&&ut("all")}}):jsxRuntimeExports.jsxs(Card,{title:$a,children:[jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-neutral-500",children:"Tags"}),Cr.length>0&&jsxRuntimeExports.jsx("span",{className:"text-[11px] text-neutral-500",children:et.length?`${et.length} selected`:"Showing all"}),et.length>0&&jsxRuntimeExports.jsx("button",{type:"button",className:"text-[11px] px-2 py-1 border rounded-lg bg-white hover:bg-neutral-50",onClick:Vt,children:"Clear"})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Cr.length?Cr.map(Ct=>{const $t=et.includes(Ct);return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsxs("label",{className:cx("inline-flex items-center gap-1 px-2 py-1 border rounded-lg text-[12px] bg-white transition-colors",$t?"border-sky-500 text-sky-700 bg-sky-50":"border-neutral-200 text-neutral-700 hover:border-sky-400"),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-3 h-3",checked:$t,onChange:()=>Bn(Ct)}),jsxRuntimeExports.jsx("span",{children:Ct})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"h-5 w-5 inline-flex items-center justify-center rounded-full border border-neutral-200 text-[11px] leading-none text-neutral-500 hover:border-rose-400 hover:text-rose-500",title:"Delete tag",onClick:()=>_n(Ct),children:""})]},Ct)}):jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No tags yet. Add one from an animal card."})})]}),jsxRuntimeExports.jsx(GroupCheckboxes,{groups:ct,showGroups:_e,setShowGroups:$,hiddenGroups:at,setHiddenGroups:it,showUnassigned:zt,setShowUnassigned:en}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 xl:grid-cols-3 gap-3",children:[cs.map(Ct=>jsxRuntimeExports.jsx(SnakeCard,{s:Ct,groups:ct,setSnakes:s,setQrFor:Ln,onEdit:$t=>{On($t),Rn(initSnakeDraft($t))},onQuickPair:$t=>xl($t),onDelete:xo,pairings:i,onOpenPairing:$t=>{const nn=i.find(Jt=>Jt.id===$t);nn&&(c("pairings"),mr(nn.id))},lastFeedDefaults:Kt,setLastFeedDefaults:cn},Ct.id)),!cs.length&&jsxRuntimeExports.jsx("div",{className:"col-span-full text-sm text-neutral-500",children:"No animals match your filters."})]})]})]}),a==="pairings"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsxs(TabButton,{theme:gt,active:d==="active",onClick:()=>{g("active"),mr(null),j("All")},children:["Active projects (",eo,")"]}),jsxRuntimeExports.jsxs(TabButton,{theme:gt,active:d==="completed",onClick:()=>{g("completed"),mr(null),j("All")},children:["Completed projects (",xa,")"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Cn(Ct=>!Ct),className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!qt)),"aria-pressed":qt,children:qt?"Hide advisor":"Breeding advisor"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:_l,className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),children:"New pairing"})]})]}),d==="completed"&&Rr.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx(TabButton,{theme:gt,active:h==="All",onClick:()=>j("All"),children:"All years"}),Rr.map(Ct=>jsxRuntimeExports.jsx(TabButton,{theme:gt,active:h===Ct,onClick:()=>j(Ct),children:Ct},Ct))]}),qt&&jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-4",children:jsxRuntimeExports.jsx(SuggestionsTab,{males:Zs,females:Js})}),jsxRuntimeExports.jsx(PairingsSection,{snakes:e,pairings:ga,onDelete:Ct=>{o($t=>$t.filter(nn=>nn.id!==Ct)),mr($t=>$t===Ct?null:$t)},onOpenSnake:co,onUpdatePairing:Ql,focusedPairingId:gr,onFocusPairing:mr,theme:gt,title:d==="completed"?`Completed projects (${ba}${h!=="All"?`  ${h}`:""})`:`Breeding Planner (${eo})`,emptyMessage:d==="completed"?h==="All"?"No completed projects yet. Hatchlings will land here once the cycle is marked finished.":`No completed projects recorded for ${h}.`:"No active pairings yet. Use New pairing.",variant:"collapsed"})]}),a==="calendar"&&jsxRuntimeExports.jsx(CalendarSection,{snakes:e,pairings:i,theme:gt,onOpenPairing:Ct=>{const $t=i.find(nn=>nn.id===Ct);$t&&(c("pairings"),mr($t.id))}}),a==="setup"&&jsxRuntimeExports.jsx(BreederSection,{breederInfo:Dt,setBreederInfo:Ft,theme:gt,onSaved:()=>c("animals"),createBackupPayload:Nn,onRestoreBackup:Zn,backupSettings:bt,updateBackupSettings:Dn,autoBackupSnapshot:yt,onTriggerAutoBackup:qn,backupVault:St,onCreateVaultEntry:zn,onRenameVaultEntry:Hn,onDeleteVaultEntry:Xn,snakes:e,pairings:i,animalExportFields:mt,setAnimalExportFields:ht,pairingExportFields:vt,setPairingExportFields:Rt,exportFeedback:Pt,setExportFeedback:Bt})]}),lr&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 flex items-center justify-center p-4 z-[80]",overlayClass(gt)),onClick:ao,children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-4xl bg-white text-neutral-900 rounded-2xl shadow-xl border border-neutral-200 max-h-[90vh] overflow-hidden",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4 px-5 pt-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-base font-semibold",children:lr.name||"Unnamed snake"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:lr.id}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[Vr.length," photo",Vr.length===1?"":"s"," stored"]})]}),jsxRuntimeExports.jsx("button",{className:"text-sm px-3 py-1.5 border rounded-lg",onClick:ao,children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"px-5 pb-5 overflow-y-auto max-h-[70vh] mt-4",children:Vr.length?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:Vr.map(Ct=>{const $t=!!(lr.imageUrl&&Ct.url===lr.imageUrl),nn=formatDateTimeForDisplay(Ct.addedAt)||"",Jt=typeof Ct.size=="number"?yl(Ct.size):"",mn=Ct.name||`${lr.name||lr.id||"snake"}-${Ct.id}`;return jsxRuntimeExports.jsxs("div",{className:"border border-neutral-200 rounded-xl overflow-hidden bg-neutral-50 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"relative bg-black/5",children:[jsxRuntimeExports.jsx("img",{src:Ct.url,alt:Ct.name||`${lr.name||"Snake"} photo`,className:"w-full h-full object-cover",loading:"lazy"}),$t&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-0.5 rounded-full bg-emerald-500 text-white shadow",children:"Cover"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 flex-1 flex flex-col gap-2 text-sm",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between gap-2",children:jsxRuntimeExports.jsx("div",{className:"font-medium truncate",title:Ct.name||mn,children:Ct.name||"Untitled photo"})}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:[Ct.source==="camera"?"Captured on device":"Uploaded file",Jt?`  ${Jt}`:""]}),nn&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Added ",nn]}),jsxRuntimeExports.jsxs("div",{className:"mt-auto flex flex-wrap items-center gap-2 pt-2",children:[jsxRuntimeExports.jsx("a",{href:Ct.url,download:mn,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 border rounded-lg hover:bg-neutral-100",children:"Open"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg hover:bg-neutral-100 disabled:opacity-60",onClick:()=>Al(lr.id,Ct.id),disabled:$t,children:$t?"Current cover":"Set as cover"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600 hover:bg-rose-50",onClick:()=>{window.confirm("Remove this photo?")&&Cl(lr.id,Ct.id)},children:"Remove"})]})]})]},Ct.id)})}):jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500",children:"No photos saved for this snake yet. Use the card buttons to add some."})})]})}),Ut&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),onClick:()=>Nt(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-xl border overflow-hidden max-h-[92vh]",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Add animal"}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1",onClick:()=>Nt(!1),children:"Close"})]}),jsxRuntimeExports.jsx(AddAnimalWizard,{newAnimal:It,setNewAnimal:Ht,groups:ct,setGroups:Et,statusOptions:Cr,customStatusTags:rt,onCreateStatusTag:Mn,onDeleteStatusTag:_n,onCancel:()=>Nt(!1),onAdd:Nl,theme:gt})]})}),un&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),onClick:so,children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-xl border p-6 space-y-4",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold text-center",children:"Breeders only"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-600 text-center",children:"Only snakes in the Breeders group can be paired."}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-neutral-500 text-center",children:["Add"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-700",children:((po=un==null?void 0:un.snake)==null?void 0:po.name)||((fo=un==null?void 0:un.snake)==null?void 0:fo.id)||"this snake"})," ","to Breeders and continue?"]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:so,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm text-white",primaryBtnClass(gt,!0)),onClick:El,children:"Add to Breeders & pair"})]})]})}),Gt&&(()=>{var Fn,Un;const Ct=Array.isArray(Gt.entries)?Gt.entries.length:0,$t=Ct?Math.min(Ct-1,Math.max(0,Gt.currentIndex||0)):0,nn=Ct?Gt.entries[$t]:null,Jt=((Fn=Gt.context)==null?void 0:Fn.pairingName)||"Hatchling",mn=((Un=Gt.context)==null?void 0:Un.groupName)||"",bn=$t===Ct-1,Pn=nn&&String(nn.id||"").trim().length>0;return jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),onClick:ds,children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-xl border overflow-hidden max-h-[92vh] flex flex-col",onClick:jn=>jn.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Log hatchlings"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:Ct>0?`Hatchling ${$t+1} of ${Ct}`:"No hatchlings to record"})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-sm px-2 py-1",onClick:ds,children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"p-4 overflow-auto flex-1",children:nn?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-600",children:["Pairing: ",jsxRuntimeExports.jsx("span",{className:"font-medium text-neutral-800",children:Jt})]}),mn&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["New hatchlings will be placed in ",jsxRuntimeExports.jsx("span",{className:"font-medium text-neutral-700",children:mn}),"."]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Hatchling ID"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"flex-1 border rounded-xl px-3 py-2 text-sm",value:nn.id||"",onChange:jn=>Ol($t,jn.target.value)}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-xl text-sm border",nn.autoId?"text-neutral-600":"text-neutral-700"),onClick:()=>$l($t),children:"Regenerate"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:nn.autoId?"Generated automatically based on pairing.":"ID lockededit to override or regenerate."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sex"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2 text-sm bg-white",value:nn.sex||"F",onChange:jn=>Hl($t,jn.target.value),children:[jsxRuntimeExports.jsx("option",{value:"F",children:"Female"}),jsxRuntimeExports.jsx("option",{value:"M",children:"Male"}),jsxRuntimeExports.jsx("option",{value:"U",children:"Unknown"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Weight (g)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",className:"mt-1 w-full border rounded-xl px-3 py-2 text-sm",value:nn.weight,onChange:jn=>zl($t,jn.target.value),placeholder:"e.g., 75"})]}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Morph / het notes"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2 text-sm",value:nn.morph||"",onChange:jn=>Ul($t,jn.target.value),placeholder:"e.g., Pastel Clown 66% Het Hypo"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Birth date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2 text-sm",value:nn.birthDate||"",onChange:jn=>Gl($t,jn.target.value)})]})]})]}):jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500",children:"No hatchlings to record."})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-xl text-sm border",onClick:ds,children:"Cancel"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[$t>0&&jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-xl text-sm border",onClick:Wl,children:"Previous"}),!bn&&jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-xl text-sm text-white",Pn?primaryBtnClass(gt,!0):primaryBtnClass(gt,!1)),onClick:Vl,disabled:!Pn,children:"Next"}),bn&&jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-xl text-sm text-white",Pn?primaryBtnClass(gt,!0):primaryBtnClass(gt,!1)),onClick:Yl,disabled:!Pn,children:"Save hatchlings"})]})]})]})})})(),Xt&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),onClick:()=>wt(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-2xl shadow-xl border overflow-hidden max-h-[92vh]",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Import animals"}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1",onClick:()=>wt(!1),children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"p-4 overflow-auto max-h-[80vh]",children:jsxRuntimeExports.jsx(ImportSection,{importText:Qt,setImportText:tn,importPreview:an,setImportPreview:Wt,runImportPreview:Tl,applyImport:Ml,theme:gt,onCancel:()=>wt(!1)})})]})}),cr&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),onClick:()=>xr(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-xl border overflow-hidden max-h-[92vh]",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Create pairing"}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1",onClick:()=>xr(!1),children:"Close"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[70vh] overflow-auto",children:[(()=>{const Ct=Zs.filter(Hr),$t=Js.filter(Hr),nn=!Ct.length||!$t.length;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[nn&&jsxRuntimeExports.jsx("div",{className:"sm:col-span-2 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-2",children:"Add at least one male and one female to the Breeders group to enable pairing."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Male"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2 bg-white",value:nr.maleId||"",onChange:Jt=>pr(mn=>({...mn,maleId:Jt.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select male"}),Ct.map(Jt=>{const bn=combineMorphsAndHetsForDisplay(Jt.morphs,Jt.hets,Jt.possibleHets).join(" ");return jsxRuntimeExports.jsxs("option",{value:Jt.id,children:[Jt.name,bn?`  ${bn}`:""]},Jt.id)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Female"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2 bg-white",value:nr.femaleId||"",onChange:Jt=>pr(mn=>({...mn,femaleId:Jt.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select female"}),$t.map(Jt=>{const bn=combineMorphsAndHetsForDisplay(Jt.morphs,Jt.hets,Jt.possibleHets).join(" ");return jsxRuntimeExports.jsxs("option",{value:Jt.id,children:[Jt.name,bn?`  ${bn}`:""]},Jt.id)})]})]})]})})(),nr.maleId&&nr.femaleId&&jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2 text-xs text-neutral-500",children:["Pairing label will be saved as ",(xs==null?void 0:xs.name)||nr.femaleId,"  ",(us==null?void 0:us.name)||nr.maleId,"."]}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Starting date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2",value:nr.startDate||"",onChange:Ct=>pr($t=>({...$t,startDate:Ct.target.value}))})]}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{className:"mt-1 w-full border rounded-xl px-3 py-2",rows:3,value:nr.notes||"",onChange:Ct=>pr($t=>({...$t,notes:Ct.target.value})),placeholder:"Ultrasound size, rotation plan, etc."})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 border-t flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Appointments generate monthly from the start date. Calendar staggers same-male appointments by 3 days."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:()=>xr(!1),children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm text-white",nr.femaleId&&nr.maleId?primaryBtnClass(gt,!0):primaryBtnClass(gt,!1)),disabled:!nr.femaleId||!nr.maleId,onClick:()=>{if(!nr.maleId||!nr.femaleId){alert("Choose a breeder male and female first.");return}Il()},children:"Add pairing"})]})]})]})}),fn&&An&&jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 backdrop-blur-sm flex items-center justify-center p-4 z-50",overlayClass(gt)),children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-xl border max-h-[92vh] flex flex-col",onClick:Ct=>Ct.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"p-5 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:fn.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border border-rose-200 text-rose-600",onClick:()=>xo(fn),children:"Delete"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),onClick:async()=>{try{await exportSnakeToPdf(An,Dt,gt,i)}catch(Ct){console.error(Ct),alert("Export failed")}},children:"Export PDF"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),onClick:()=>{const Ct=fn.id,$t=An.id||Ct,nn=ensureSex(An.sex,ensureSex(fn.sex,"F")),Jt=(An.status||"").trim()||"Active",mn=normalizeSingleGroupValue(An.groups);s(bn=>bn.map(Pn=>Pn.id===Ct?{...An,id:$t,sex:nn,status:Jt,groups:mn}:Pn)),o(bn=>bn.map(Pn=>({...Pn,maleId:Pn.maleId===Ct?$t:Pn.maleId,femaleId:Pn.femaleId===Ct?$t:Pn.femaleId}))),Yr()},children:"Save changes"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(gt,!0)),onClick:Yr,children:"Cancel"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 grid grid-cols-1 md:grid-cols-3 gap-4 overflow-auto min-h-0 flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Name"}),jsxRuntimeExports.jsx("input",{className:"mt-0.5 w-full border rounded-xl px-2 py-1 text-sm",value:An.name,onChange:Ct=>Rn($t=>({...$t,name:Ct.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"ID"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"text-[11px] px-2 py-1 border rounded-lg text-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Xl,disabled:!!(An.id||"").trim(),children:"Generate ID"}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-[11px] px-2 py-1 border rounded-lg text-neutral-700",onClick:Kl,children:"Update ID"})]})]}),jsxRuntimeExports.jsx("input",{className:"mt-0.5 w-full border rounded-xl px-2 py-1 text-sm font-mono",value:An.id,onChange:Ct=>Rn($t=>({...$t,id:Ct.target.value}))}),!(An.id||"").trim()&&jsxRuntimeExports.jsx("div",{className:"mt-0.5 text-[11px] text-neutral-500",children:"Will use your breeder wizard settings the first time you generate."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sex"}),jsxRuntimeExports.jsxs("select",{className:"mt-0.5 w-full border rounded-xl px-2 py-1 text-sm bg-white",value:An.sex,onChange:Ct=>Rn($t=>({...$t,sex:Ct.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"F",children:"Female"}),jsxRuntimeExports.jsx("option",{value:"M",children:"Male"})]})]}),jsxRuntimeExports.jsxs("div",{ref:yn,className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Tag"}),jsxRuntimeExports.jsxs("button",{type:"button",className:"mt-0.5 w-full border rounded-xl px-2 py-1 text-sm bg-white text-left flex items-center justify-between",onClick:()=>En(Ct=>!Ct),children:[jsxRuntimeExports.jsx("span",{children:Qo||"No tag"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-neutral-500",children:"v"})]}),dn&&jsxRuntimeExports.jsxs("div",{className:"absolute z-40 mt-1 w-full rounded-xl border border-neutral-200 bg-white shadow-lg",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm hover:bg-neutral-100",onClick:Zo,children:"No tag"}),jsxRuntimeExports.jsx("div",{className:"border-t border-neutral-100"}),Cr.length?Cr.map(Ct=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-sm hover:bg-neutral-50",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"flex-1 text-left",onClick:()=>Jo(Ct),children:Ct}),jsxRuntimeExports.jsx("button",{type:"button",className:"ml-3 text-sm font-semibold text-rose-500 hover:text-rose-600",onClick:()=>na(Ct),title:"Delete tag",children:"-"})]},Ct)):jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-sm text-neutral-400",children:"No tags available yet."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 grid w-full grid-cols-[minmax(0,1fr)_auto] gap-2",children:[jsxRuntimeExports.jsx("input",{className:"w-full border rounded-lg px-2 py-1 text-sm",value:Yt,onChange:Ct=>xn(Ct.target.value),onKeyDown:Ct=>{Ct.key==="Enter"&&(Ct.preventDefault(),Qs())},placeholder:"Create new tag"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-2.5 py-1 rounded-lg text-sm border transition-colors whitespace-nowrap",Yt.trim()?primaryBtnClass(gt,!0):"bg-neutral-100 text-neutral-400 border-neutral-200 cursor-not-allowed"),onClick:Qs,disabled:!Yt.trim(),children:"Add tag"})]}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 mt-1",children:"Create and assign custom tags to track sales channels or availability. Use the dropdown above to select a tag or remove it with the minus icon."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Birth date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-0.5 w-full border rounded-xl px-2 py-1 text-sm",value:An.birthDate||"",onChange:Ct=>Rn($t=>({...$t,birthDate:Ct.target.value}))}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-0.5",children:An.birthDate?formatDateForDisplay(An.birthDate):""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Genetics (morphs & hets)"}),jsxRuntimeExports.jsx("textarea",{rows:3,className:"mt-0.5 w-full border rounded-xl px-2 py-2 text-sm",value:formatMorphHetForInput(An.morphs,An.hets),onChange:Ct=>{const{morphs:$t,hets:nn}=splitMorphHetInput(Ct.target.value);Rn(Jt=>({...Jt,morphs:$t,hets:nn}))},placeholder:`Clown
Pastel
Het Hypo`}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 mt-0.5",children:"One trait per line works best. Prefix recessive targets with Het, Possible, or a percentage when needed."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Weight (g)"}),jsxRuntimeExports.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm",value:An.weight,onChange:Ct=>Rn($t=>({...$t,weight:Number(Ct.target.value)||0}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Group"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-2 py-1 text-sm bg-white",value:Array.isArray(An.groups)&&An.groups[0]||"",onChange:Ct=>{const $t=Ct.target.value.trim();Rn(nn=>({...nn,groups:$t?[$t]:[]}))},children:[jsxRuntimeExports.jsx("option",{value:"",children:"No group"}),ct.map(Ct=>jsxRuntimeExports.jsx("option",{value:Ct,children:Ct},Ct))]}),jsxRuntimeExports.jsx("div",{className:"mt-2 border border-dashed border-neutral-200 rounded-xl p-3 bg-white",children:jsxRuntimeExports.jsx(AddGroupInline,{onAdd:Ct=>{Ct&&(Et($t=>$t.includes(Ct)?$t:[...$t,Ct]),Rn($t=>({...$t,groups:[Ct]})))}})}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500 mt-1",children:["Existing: ",ct.join(", ")||""]})]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"mt-4 p-2 border rounded-xl bg-neutral-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Logs"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Edit recent feeds, weights, sheds, cleanings, meds"})]}),jsxRuntimeExports.jsx(LogsEditor,{editSnakeDraft:An,setEditSnakeDraft:Rn,lastFeedDefaults:Kt,setLastFeedDefaults:cn})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col items-end gap-3",children:[jsxRuntimeExports.jsxs("div",{style:{width:318,height:318},className:"rounded-lg overflow-hidden border-2 border-neutral-200 relative",children:[An.imageUrl?jsxRuntimeExports.jsx("img",{src:An.imageUrl,alt:An.name,className:"w-full h-full object-cover object-center"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm text-neutral-500 bg-neutral-50",children:"No image"}),Ot&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center text-sm text-neutral-600",children:"Saving pictures"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("input",{ref:In,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:Dl}),jsxRuntimeExports.jsx("input",{ref:kn,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Fl}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:Bl,disabled:Ot||!(fn!=null&&fn.id),children:"Take picture"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:wl,disabled:Ot||!(fn!=null&&fn.id),children:"Upload picture"}),jsxRuntimeExports.jsxs("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:Sl,disabled:!(fn!=null&&fn.id),children:["View pictures",lo?` (${lo})`:""]}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{Rn(Ct=>Ct&&{...Ct,imageUrl:void 0}),On(Ct=>Ct&&{...Ct,imageUrl:void 0})},disabled:!(An!=null&&An.imageUrl),children:"Clear cover"})]})]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"py-10"}),wn&&(()=>{const Ct=e.find($t=>$t.id===wn);return jsxRuntimeExports.jsx(QRModal,{id:wn,name:Ct==null?void 0:Ct.name,morphs:Ct==null?void 0:Ct.morphs,hets:Ct==null?void 0:Ct.hets,dataUrl:$n,onClose:()=>Ln(null)})})(),jsxRuntimeExports.jsx(ExportQrModal,{open:gn,onClose:()=>rn(!1),snakes:e,groups:ct,onGenerate:Ct=>exportQrToPdf(Ct,Dt),theme:gt}),sn&&jsxRuntimeExports.jsx(QrScannerModal,{onClose:()=>Sn(!1),onFound:Ct=>{Sn(!1);const $t=e.find(nn=>nn.id===Ct);$t?(On($t),Rn(initSnakeDraft($t))):alert(`No snake found with ID: ${Ct}`)}}),jsxRuntimeExports.jsx(ConfirmDeleteSnakeModal,{snake:Wn,onCancel:Pl,onConfirm:Rl,theme:gt}),jsxRuntimeExports.jsx(ScrollToTopButton,{theme:gt})]})}function QrScannerModal({onClose:e,onFound:s}){const i=reactExports.useRef(null),o=reactExports.useRef(null),a=reactExports.useRef(null),[c,d]=reactExports.useState(""),g=reactExports.useMemo(()=>{if(typeof navigator>"u")return"camera";const $=navigator.userAgent||"";return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile/i.test($)?"camera":"scanner"},[]),[h,j]=reactExports.useState(()=>{if(typeof window<"u")try{const $=window.localStorage.getItem(SCAN_MODE_STORAGE_KEY);if($==="camera"||$==="scanner")return $}catch{}return g}),b=h==="camera",_=reactExports.useCallback(async()=>{const $=o.current;if(!$)return;o.current=null;const at=[];typeof $.stop=="function"&&at.push($.stop().catch(()=>{})),typeof $.clear=="function"&&at.push($.clear().catch(()=>{})),typeof $.close=="function"&&at.push($.close().catch(()=>{})),at.length&&await Promise.allSettled(at)},[]),st=reactExports.useCallback($=>{$!=="camera"&&$!=="scanner"||(j(at=>at===$?at:$),$!=="camera"&&_().catch(()=>{}))},[_]),tt=reactExports.useCallback(async()=>{var it,et;if(i.current)return i.current;if(typeof window>"u")return null;let $=null;try{$=await __vitePreload(()=>import("./index-Btm7mGBH.js"),[])}catch(ot){console.warn("Failed to import html5-qrcode via ESM",ot)}const at={Html5Qrcode:($==null?void 0:$.Html5Qrcode)||((it=$==null?void 0:$.default)==null?void 0:it.Html5Qrcode)||window.Html5Qrcode||null,Html5QrcodeScanner:($==null?void 0:$.Html5QrcodeScanner)||((et=$==null?void 0:$.default)==null?void 0:et.Html5QrcodeScanner)||window.Html5QrcodeScanner||null};return!at.Html5Qrcode&&!at.Html5QrcodeScanner?null:(i.current=at,at)},[]);reactExports.useEffect(()=>{let $=!0;return b?((async()=>{await _().catch(()=>{});const it=await tt();if(!$)return;if(!it){alert("QR scanner library failed to load. Check your connection and reload.");return}if(!document.getElementById("qr-scan-root"))return;const{Html5QrcodeScanner:ot,Html5Qrcode:rt}=it;try{if(ot){const lt=new ot("qr-scan-root",{fps:10,qrbox:250},!1);o.current=lt,lt.render(ft=>{const dt=extractSnakeIdFromPayload(ft);dt&&($&&s(dt),_().catch(()=>{}))},()=>{})}else if(rt){const lt=new rt("qr-scan-root");o.current=lt,await lt.start({facingMode:{ideal:"environment"}},{fps:10,qrbox:250},ft=>{const dt=extractSnakeIdFromPayload(ft);dt&&($&&s(dt),_().catch(()=>{}))},()=>{})}else throw new Error("html5-qrcode module unavailable")}catch(lt){console.error("QR importer failed",lt),$&&alert("Unable to start QR scanner. Verify camera permissions and try again.")}})(),()=>{$=!1,_().catch(()=>{})}):(_().catch(()=>{}),()=>{$=!1,_().catch(()=>{})})},[tt,b,s,_]),reactExports.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(SCAN_MODE_STORAGE_KEY,h)}catch{}},[h]),reactExports.useEffect(()=>{if(h!=="scanner")return;const $=a.current;if($){try{$.focus({preventScroll:!0})}catch{try{$.focus()}catch{}}if(typeof $.select=="function")try{$.select()}catch{}}},[h]);const nt=async $=>{const at=$.target.files&&$.target.files[0];if(at){$.target&&($.target.value="");try{const it=await tt();let et=null;if(it&&it.Html5Qrcode){const{Html5Qrcode:rt}=it;try{let lt=null;typeof rt.scanFileV2=="function"?lt=await rt.scanFileV2(at,!0):typeof rt.scanFile=="function"&&(lt=await rt.scanFile(at,!0)),et=extractDecodedText(lt)}catch(lt){console.warn("html5-qrcode file scan failed, will fall back to jsQR",lt)}}if(et||(et=await decodeQrFromImageFile(at)),!et){alert("Could not read a QR code from that image. Try a clearer, well-lit photo.");return}const ot=extractSnakeIdFromPayload(et);if(!ot){alert("Could not parse an ID from that QR code.");return}s(ot)}catch(it){console.error("file scan failed",it),alert("Failed to scan uploaded image")}}},xt=reactExports.useCallback(()=>{const $=c.trim();if(!$){alert("Scan or paste a QR value first.");return}const at=extractSnakeIdFromPayload($);if(!at){alert("Scan or paste a QR value first.");return}d(""),s(at)},[c,s]),ut=$=>{$.key==="Enter"&&($.preventDefault(),xt())},_e=c.trim().length>0;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",onClick:e,children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 rounded-lg shadow w-full max-w-md",onClick:$=>$.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-lg",children:"Scan QR Code"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Choose how you'd like to scan. Cameras shine on mobile; USB readers are handy on desktop."})]}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1 border rounded",onClick:e,children:""})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-neutral-600",children:"Scan method"}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>st("camera"),className:cx("px-3 py-1.5 rounded-lg text-sm border transition-colors",b?"bg-sky-600 text-white border-sky-600 shadow-sm":"bg-white text-neutral-700 border-neutral-200 hover:border-sky-400"),children:"Device camera"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>st("scanner"),className:cx("px-3 py-1.5 rounded-lg text-sm border transition-colors",b?"bg-white text-neutral-700 border-neutral-200 hover:border-sky-400":"bg-sky-600 text-white border-sky-600 shadow-sm"),children:"USB / handheld scanner"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:[b?"Camera starts automatically. Switch if you prefer a USB reader.":"Input field below is ready for your USB reader. Switch if you need the device camera."," ","Your choice is remembered. Suggested default: ",g==="camera"?"device camera (mobile).":"USB / handheld scanner (desktop)."]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx("div",{id:"qr-scan-root",className:cx("w-full h-56 rounded-lg border-2 border-dashed flex items-center justify-center transition-colors",b?"border-neutral-200 bg-neutral-50":"border-neutral-300 bg-neutral-100"),children:b?jsxRuntimeExports.jsx("div",{className:"text-center text-sm text-neutral-500 px-4",children:"Align the QR inside the box"}):jsxRuntimeExports.jsx("div",{className:"text-center text-sm text-neutral-500 px-4",children:"Camera disabled. Trigger your USB scanner and the scanned text will appear below."})},h)}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs text-neutral-500",children:b?"Tip: Hold the camera steady and ensure the code is well-lit. If the camera is blocked, upload a photo instead.":"Tip: USB readers usually act like keyboards. If the field below loses focus, click it once before scanning."}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm",children:"Upload image:"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:nt})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 border-t border-neutral-200 pt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:b?"Using a USB / handheld scanner?":"Scanner input"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:b?"Most external QR readers act like keyboards. Click the field below, then trigger your scanner to fill it.":"We focused this field so your USB reader can type the QR value automatically. You can also paste a code manually."}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row gap-2",children:[jsxRuntimeExports.jsx("input",{ref:a,type:"text",value:c,onChange:$=>d($.target.value),onKeyDown:ut,className:"flex-1 border rounded-lg px-3 py-2 text-sm font-mono",placeholder:b?"Scan or paste the QR contents here":"Scanner-ready: trigger your reader or paste the QR contents here",inputMode:"text",autoComplete:"off",autoFocus:h==="scanner"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm border transition-colors",_e?"bg-sky-600 text-white border-sky-600":"bg-neutral-100 text-neutral-400 border-neutral-200 cursor-not-allowed"),onClick:xt,disabled:!_e,children:"Look up"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex justify-end",children:jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-lg border",onClick:e,children:"Close"})})]})})}function ConfirmDeleteSnakeModal({snake:e,onCancel:s,onConfirm:i,theme:o="blue"}){return e?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-[70]",onClick:s,children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-xl border p-5",onClick:a=>a.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"font-semibold text-lg",children:["Delete ",e.name||"this snake","?"]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-neutral-600 leading-relaxed",children:"This removes the animal and detaches any pairings linked to it. Demo animals will return automatically whenever your collection is empty, so you always have something to explore."}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:s,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm text-white",o==="dark"?"bg-rose-500 hover:bg-rose-600":"bg-rose-600 hover:bg-rose-700"),onClick:i,children:"Delete"})]})]})}):null}function themeClasses(e){return e==="green"?{active:"bg-emerald-600 text-white border-emerald-600",soft:"bg-emerald-300"}:e==="dark"?{active:"bg-neutral-800 text-white border-neutral-700",soft:"bg-neutral-600"}:{active:"bg-sky-600 text-white border-sky-600",soft:"bg-sky-300"}}function primaryBtnClass(e,s=!0){return e==="green"?s?"bg-emerald-600 text-white":"bg-emerald-300 text-white":e==="dark"?s?"bg-neutral-800 text-white":"bg-neutral-600 text-white":s?"bg-sky-600 text-white":"bg-sky-300 text-white"}function overlayClass(e){return e==="green"?"bg-emerald-900/20":e==="dark"?"bg-neutral-900/40":"bg-sky-900/20"}function TabButton({theme:e="blue",active:s,onClick:i,children:o}){const a=themeClasses(e);return jsxRuntimeExports.jsx("button",{className:cx("px-3 py-1.5 rounded-lg text-sm border",s?a.active:"bg-white hover:bg-neutral-50"),onClick:i,children:o})}function Card({title:e,children:s}){return jsxRuntimeExports.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-b font-semibold",children:e}),jsxRuntimeExports.jsx("div",{className:"p-4",children:s})]})}function Badge({children:e}){return jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full border bg-neutral-50",children:e})}function GroupCheckboxes({groups:e,showGroups:s,setShowGroups:i,hiddenGroups:o,setHiddenGroups:a,showUnassigned:c=!0,setShowUnassigned:d}){const g=nt=>{typeof i!="function"||typeof a!="function"||i(xt=>{const ut=new Set(xt||[]);return ut.has(nt)?ut.delete(nt):(ut.add(nt),a(_e=>(_e||[]).filter($=>$!==nt))),[...ut]})},h=nt=>{typeof a!="function"||typeof i!="function"||a(xt=>{const ut=new Set(xt||[]);return ut.has(nt)?ut.delete(nt):(ut.add(nt),i(_e=>(_e||[]).filter($=>$!==nt))),[...ut]})},j=()=>{typeof i=="function"&&i([]),typeof a=="function"&&a([])},b=()=>{typeof d=="function"&&d(nt=>!nt)},_=new Set(s||[]),st=new Set(o||[]),tt=_.size>0||st.size>0;return jsxRuntimeExports.jsxs("div",{className:"space-y-2 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[jsxRuntimeExports.jsx("button",{type:"button",disabled:!tt,className:cx("px-2.5 py-1 rounded-lg border text-xs font-medium transition-colors",tt?"bg-white hover:bg-neutral-50 border-neutral-300":"bg-neutral-100 text-neutral-400 border-neutral-200 cursor-not-allowed"),onClick:j,children:"Clear filters"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-2.5 py-1 rounded-lg border text-xs font-medium transition-colors",c?"bg-amber-100 border-amber-300 text-amber-900":"bg-white hover:bg-neutral-50 border-neutral-300"),onClick:b,children:c?"Hide unassigned":"Show unassigned"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map(nt=>{const xt=_.has(nt)?"show":st.has(nt)?"hide":"neutral";return jsxRuntimeExports.jsxs("div",{className:cx("inline-flex items-center gap-1 text-sm px-2.5 py-1 rounded-lg border transition-colors",xt==="show"?"bg-emerald-50 border-emerald-400 text-emerald-700":xt==="hide"?"bg-rose-50 border-rose-400 text-rose-700":"bg-white border-neutral-300 text-neutral-700"),children:[jsxRuntimeExports.jsx("span",{className:"font-medium mr-0.5",children:nt}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(nt),className:cx("px-1.5 py-0.5 rounded-md border text-[10px] uppercase tracking-wide",xt==="show"?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-neutral-300 text-neutral-600 hover:bg-neutral-50"),children:"Show"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h(nt),className:cx("px-1.5 py-0.5 rounded-md border text-[10px] uppercase tracking-wide",xt==="hide"?"bg-rose-500 border-rose-500 text-white":"bg-white border-neutral-300 text-neutral-600 hover:bg-neutral-50"),children:"Hide"})]})]},nt)}),!e.length&&jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500",children:"No groups yet."})]})]})}function QRModal({id:e,name:s,morphs:i,hets:o,dataUrl:a,onClose:c}){if(!e)return null;const d=combineMorphsAndHetsForDisplay(i,o,possibleHets);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",onClick:c,children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",onClick:g=>g.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"font-medium mb-2",children:["QR for ",s||e]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-500 mb-2",children:["ID: ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:e})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mb-3",children:d.length?jsxRuntimeExports.jsx(GeneLine,{label:"Genetics",genes:d,size:"md"}):jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Genetics: -"})}),a?jsxRuntimeExports.jsx("img",{src:a,className:"w-64 h-64",alt:`QR ${e}`}):jsxRuntimeExports.jsx("div",{className:"w-64 h-64 flex items-center justify-center",children:"Generating"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[a&&jsxRuntimeExports.jsx("a",{className:"px-3 py-2 rounded-lg text-sm border",download:`snake-${e}.png`,href:a,children:"Download"}),jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-lg text-sm border",onClick:c,children:"Close"})]})]})})}function ExportQrModal({open:e,onClose:s,snakes:i,groups:o,onGenerate:a,theme:c="blue"}){const[d,g]=reactExports.useState("all"),[h,j]=reactExports.useState([]),[b,_]=reactExports.useState([]);reactExports.useEffect(()=>{e||(g("all"),j([]),_([]))},[e]);const st=async()=>{let tt=[];d==="all"?tt=i:d==="groups"?tt=i.filter(nt=>(nt.groups||[]).some(xt=>h.includes(xt))):tt=i.filter(nt=>b.includes(nt.id)),a(tt),s()};return e?jsxRuntimeExports.jsx("div",{className:cx("fixed inset-0 flex items-center justify-center p-4 z-50",overlayClass(c)),onClick:s,children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 rounded-lg shadow w-full max-w-2xl",onClick:tt=>tt.stopPropagation(),children:[jsxRuntimeExports.jsx("div",{className:"font-medium mb-2",children:"Export QR to PDF (100mm  50mm)"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:d==="all",onChange:()=>g("all")})," All snakes"]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:d==="groups",onChange:()=>g("groups")})," By groups"]}),d==="groups"&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:o.map(tt=>{const nt=h.includes(tt);return jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 px-2 py-1 border rounded-lg",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:nt,onChange:xt=>{const ut=xt.target.checked;j(_e=>{const $=new Set(_e||[]);return ut?$.add(tt):$.delete(tt),[...$]})}}),tt]},tt)})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"radio",checked:d==="selected",onChange:()=>g("selected")})," Selected snakes"]}),d==="selected"&&jsxRuntimeExports.jsx("div",{className:"mt-2 max-h-40 overflow-auto border rounded p-2",children:i.map(tt=>{const nt=b.includes(tt.id);return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:nt,onChange:xt=>{const ut=xt.target.checked;_(_e=>{const $=new Set(_e||[]);return ut?$.add(tt.id):$.delete(tt.id),[...$]})}}),tt.name," ",jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500",children:tt.id})]},tt.id)})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-lg border",onClick:s,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-lg text-white",primaryBtnClass(c,!0)),onClick:st,children:"Generate PDF"})]})]})}):null}const PT_TO_MM=.352778;function fitTextToWidth(e,s,i,o=18,a=8){if(!s)return a;let c=o;for(;c>=a;){if(e.setFontSize(c),e.getTextWidth(s)<=i)return c;c-=1}return e.setFontSize(a),a}function estimateLineHeight(e,s=1.2){return e*PT_TO_MM*s}const canUseCanvas=typeof document<"u"&&typeof document.createElement=="function";async function createQrDataUrl(e,s){try{if(canUseCanvas){const o=document.createElement("canvas");if(await new Promise((a,c)=>{browser.toCanvas(o,e,{width:600,margin:1},d=>d?c(d):a())}),s)try{const a=o.getContext("2d");if(a){const c=await loadImageElement(s),g=600*.2,h=g*.25,j=(600-g)/2,b=(600-g)/2;a.fillStyle="#ffffff",a.fillRect(j-h/2,b-h/2,g+h,g+h),a.drawImage(c,j,b,g,g)}}catch(a){console.warn("Unable to overlay logo on QR code",a)}return o.toDataURL("image/png")}}catch(o){console.warn("Falling back to basic QR generation",o)}return await browser.toDataURL(e,{width:600,margin:1})}function loadImageElement(e){return new Promise((s,i)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>s(o),o.onerror=i,o.src=e})}async function exportQrToPdf(e,s={}){const{jsPDF:i}=await __vitePreload(async()=>{const{jsPDF:g}=await import("./jspdf.es.min-DGvFeT9U.js").then(h=>h.j);return{jsPDF:g}},[]),o=100,a=50,c=6,d=new i({unit:"mm",format:[o,a],orientation:"landscape"});for(let g=0;g<e.length;g++){const h=e[g],j=`${window.location.origin}${window.location.pathname}#snake=${encodeURIComponent(h.id)}`;try{const b=await createQrDataUrl(j,s==null?void 0:s.logoUrl),_=Math.min(a-c*2,38),st=c,tt=(a-_)/2;d.addImage(b,"PNG",st,tt,_,_);const nt=1.5;d.setDrawColor(50),d.setLineWidth(.3),d.rect(st-nt,tt-nt,_+nt*2,_+nt*2);const xt=Math.max(20,o-c-(st+_)-8),ut=h.name||"Unnamed",_e=h.id?`ID: ${h.id}`:"",at=combineMorphsAndHetsForDisplay(h.morphs,h.hets,h.possibleHets).join(", "),it=fitTextToWidth(d,ut,xt,18,10),et=10;let ot=9;const rt=6;d.setFontSize(it);const lt=d.splitTextToSize(ut,xt),ft=estimateLineHeight(it,1),dt=lt.length*ft,ct=at?[`Genetics: ${at}`]:[],Et=a-c*2,gt=At=>{d.setFontSize(At);const mt=[];ct.forEach(vt=>{const Rt=d.splitTextToSize(vt,xt);mt.push(...Rt)});const ht=mt.length?mt.length*estimateLineHeight(At,1):0;return{lines:mt,height:ht}};let{lines:Lt,height:Dt}=gt(ot);const Ft=3;let bt=Lt.length?2:0;const _t=_e?estimateLineHeight(et,1):0;let yt=dt+Ft+_t+bt+Dt;for(;yt>Et&&ot>rt;)ot-=1,{lines:Lt,height:Dt}=gt(ot),bt=Lt.length?2:0,yt=dt+Ft+_t+bt+Dt;let jt=(a-yt)/2;jt<c&&(jt=c);const St=st+_+8;try{d.setFont(void 0,"bold")}catch{}d.setFontSize(it),d.text(lt,St,jt,{baseline:"top"}),jt+=dt+Ft;try{d.setFont(void 0,"normal")}catch{}_e&&(d.setFontSize(et),d.text(_e,St,jt,{baseline:"top"}),jt+=_t+bt),Lt.length&&(d.setFontSize(ot),d.text(Lt,St,jt,{baseline:"top"}))}catch(b){console.error("QR gen failed",b)}d.setDrawColor(120),d.setLineWidth(.4),d.rect(1.5,1.5,o-3,a-3),g<e.length-1&&d.addPage([o,a],"landscape")}d.save("qr-labels.pdf")}async function exportSnakeToPdf(e,s={},i="blue",o=[]){const{jsPDF:a}=await __vitePreload(async()=>{const{jsPDF:St}=await import("./jspdf.es.min-DGvFeT9U.js").then(At=>At.j);return{jsPDF:St}},[]),c=new a({unit:"mm",format:"a4"}),d=210,g=297,h=15;let j=20;const b=8,_={blue:"#1E40AF",green:"#059669",dark:"#374151"},st=_[i]||_.blue,nt=normalizeSexValue(e==null?void 0:e.sex)==="F"?getFemaleBreedingCyclesByYear(e==null?void 0:e.id,o):[];function xt(St){const At=String(St).replace("#",""),mt=parseInt(At.length===3?At.split("").map(ht=>ht+ht).join(""):At,16);return{r:mt>>16&255,g:mt>>8&255,b:mt&255}}function ut(St){return St?String(St).replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").split(/\s+/).map(mt=>mt?mt.charAt(0).toUpperCase()+mt.slice(1):"").join(" "):""}function _e(St=!1){if(c.setDrawColor(st),c.setLineWidth(1.5),c.rect(b,b,d-b*2,297-b*2),St){j=20;try{if(s&&s.logoUrl)try{c.addImage(s.logoUrl,"PNG",h,j,20,20)}catch{}}catch{}const At=h+24;c.setFontSize(14),s.businessName?(c.text(s.businessName,At,j+6),c.setFontSize(12),c.text(s.name||"",At,j+12)):s.name&&c.text(s.name,At,j+6),c.setFontSize(10);const mt=[];s.email&&mt.push(s.email),s.phone&&mt.push(s.phone),mt.length&&c.text(mt.join("  "),At,j+18);const ht=j+26;c.setLineWidth(.6),c.setDrawColor(180),c.line(b+4,ht,d-b-4,ht),j=ht+6,c.setFontSize(16),c.text(e.name||"",d/2,j,{align:"center"}),j+=10,c.setFontSize(10),c.text(`ID: ${e.id||""}`,h,j),c.text(`Sex: ${e.sex||""}`,h+70,j),c.text(`Birth date: ${e.birthDate?formatDateForDisplay(e.birthDate):""}`,h+110,j),j+=7,c.text(`Weight: ${e.weight||""} g`,h,j),c.text(`Groups: ${(e.groups||[]).join(", ")}`,h+70,j),j+=8;const vt=combineMorphsAndHetsForDisplay(e.morphs,e.hets,e.possibleHets),Rt=vt.length?vt.join(", "):"-";c.text(`Genetics: ${Rt}`,h,j),j+=8;const Pt=j+2;c.setLineWidth(.6),c.setDrawColor(180),c.line(b+4,Pt,d-b-4,Pt),j=Pt+8}else j=b+18}_e(!0);const $=e.logs||{},at=d-h*2,it=g-b-6;function et(St,At){return j+St>it?(c.addPage(),_e(!1),typeof At=="function"&&At(),!0):!1}function ot(St,At,mt,ht={}){const Rt=ht.cellFontSize||10,Pt=Math.max(4,Math.round(Rt*.35278*.8)),Bt=Rt*.35278*1.05,Ut=At.length,Nt=At.map(Wt=>Wt.width||at/Ut);function It(){c.setFontSize(12),c.text(St,h,j),j+=8;let Wt=h;const Xt=xt(st);c.setFillColor(Xt.r,Xt.g,Xt.b),c.rect(h,j,at,9,"F");for(let wt=0;wt<Ut;wt++){c.setDrawColor(0),c.setLineWidth(.3),c.rect(Wt,j,Nt[wt],9,"S"),c.setFontSize(8),c.setTextColor(255);try{c.setFont(void 0,"bold")}catch{}const kt=ut(At[wt].title||At[wt].key||""),Tt=Wt+Nt[wt]/2,zt=j+9/2;c.text(String(kt),Tt,zt,{align:"center",baseline:"middle"});try{c.setFont(void 0,"normal")}catch{}Wt+=Nt[wt]}j+=9,c.setFontSize(Rt),c.setTextColor(10)}et(19,It)||It(),mt.forEach((Wt,Xt)=>{c.setFontSize(Rt);let wt=1;const kt=[];for(let un=0;un<Ut;un++){const pn=At[un].key;let qt="";typeof pn=="function"?qt=pn(Wt)||"":qt=Wt&&typeof Wt[pn]<"u"?Wt[pn]:"";let Cn="";qt===null||typeof qt>"u"?Cn="":typeof qt=="boolean"?Cn=qt?"Yes":"No":Array.isArray(qt)?Cn=qt.join(", "):typeof qt=="object"?Cn=JSON.stringify(qt):Cn=String(qt);const fn=typeof pn=="string"?pn:At[un].title;typeof Cn=="string"&&(fn==="date"||/date$/i.test(String(fn)))&&(Cn=formatDateForDisplay(Cn)||Cn);const On=c.splitTextToSize(Cn,Math.max(10,Nt[un]-4));kt.push(On),On.length>wt&&(wt=On.length)}const zt=Math.max(Pt,Math.ceil(wt*Bt))+4;et(zt+2,It);let en=h;for(let un=0;un<Ut;un++){const pn=Nt[un];c.setDrawColor(0),c.setLineWidth(.25),c.rect(en,j,pn,zt,"S");const qt=kt[un]||[""],Cn=en+3,fn=j+zt/2-(qt.length-1)*Bt/2;c.setFontSize(Rt),c.text(qt,Cn,fn),en+=pn}j+=zt});const Qt=Math.max(Pt,Math.ceil(Bt))+4;et(Qt+2,It),c.setDrawColor(0),c.setLineWidth(.3),c.rect(h,j,at,Qt,"S"),c.setFontSize(Math.max(8,Rt));const tn=j+2+Bt/2;c.text(`Total entries: ${mt.length}`,h+3,tn),j+=Qt+4;const an=typeof ht.spacingAfter=="number"?ht.spacingAfter:0;an>0&&(et(an,null)||(j+=an))}function rt(){et(7,null)||(j+=2,c.setDrawColor(200),c.setLineWidth(.4),c.line(h,j,h+at,j),j+=4)}function lt(St){if(!Array.isArray(St)||!St.length)return;const At=()=>{c.setFontSize(12),c.text("Breeding cycles",h,j),j+=7},mt=Pt=>{c.setFontSize(10),c.text(String(Pt),h,j),j+=5.5};At();const ht=9,vt=4,Rt=estimateLineHeight(ht,1.05);St.forEach(Pt=>{et(6,()=>{_e(!1),At()}),mt(Pt.year),(Pt.cycles||[]).forEach(Bt=>{const Ut=[],Nt=Bt.label||`Pairing ${Bt.id||""}`;if(Ut.push(` ${Nt}`),Bt.locks&&Bt.locks.length){const Qt=Bt.locks.map(tn=>tn.display||formatDateTimeForDisplay(tn.iso)).filter(Boolean).join(", ");Qt&&Ut.push(`   Locks: ${Qt}`)}Bt.ovulationDate&&Ut.push(`   Ovulation: ${formatDateForDisplay(Bt.ovulationDate)}`),Bt.preLayDate&&Ut.push(`   Pre-Lay Shed: ${formatDateForDisplay(Bt.preLayDate)}`),Bt.clutchDate&&Ut.push(`   Eggs laid: ${formatDateForDisplay(Bt.clutchDate)}`),Bt.hatchDate&&Ut.push(`   Hatched: ${formatDateForDisplay(Bt.hatchDate)}`),Ut.length===1&&Ut.push("   No events recorded");const It=Ut.flatMap(Qt=>c.splitTextToSize(Qt,at-vt)),Ht=It.length*Rt+2;et(Ht+2,()=>{_e(!1),At(),mt(Pt.year)}),c.setFontSize(ht),c.text(It,h+vt,j,{baseline:"top"}),j+=Ht}),j+=2})}nt.length&&(lt(nt),rt());const ft=($.feeds||[]).slice().reverse(),dt=[{title:"Date",key:"date",width:26},{title:"Food",key:"feed",width:46},{title:"Size",key:St=>{if(!St)return"";const At=[St.size,St.sizeDetail,St.preySize,St.portionSize,St.itemSize],mt=At.find(ht=>typeof ht=="string"&&ht.trim().length)||At.find(ht=>typeof ht=="number");return typeof mt=="number"?`${mt}`:mt||""},width:30},{title:"Weight",key:St=>St&&(St.weightGrams||St.grams)?`${St.weightGrams||St.grams} g`:"",width:24},{title:"Form",key:St=>{const At=St&&(St.method||St.form),mt=St&&(St.methodDetail||St.formDetail);return At?At==="Other"?mt||"Other":At:""},width:36},{title:"Notes",key:"notes",width:at-162}];ot("Feed",dt,ft,{cellFontSize:6,spacingAfter:0}),rt();const ct=($.weights||[]).slice().reverse(),Et=[{title:"Date",key:"date",width:30},{title:"Grams",key:St=>St&&typeof St.grams<"u"?`${St.grams} g`:"",width:30},{title:"Notes",key:"notes",width:at-60}];ot("Weights",Et,ct,{cellFontSize:6,spacingAfter:0}),rt();const gt=($.cleanings||[]).slice().reverse(),Lt=[{title:"Date",key:"date",width:30},{title:"Type",key:St=>St&&St.deep?"Deep cleaning":"Quick cleaning",width:40},{title:"Notes",key:"notes",width:at-70}];ot("Cleanings",Lt,gt,{cellFontSize:6,spacingAfter:0}),rt();const Dt=($.sheds||[]).slice().reverse(),Ft=[{title:"Date",key:"date",width:30},{title:"Status",key:St=>St&&St.complete?"Complete":"Incomplete",width:30},{title:"Notes",key:"notes",width:at-60}];ot("Sheds",Ft,Dt,{cellFontSize:6,spacingAfter:0}),rt();const bt=($.meds||[]).slice().reverse(),_t=[{title:"Date",key:"date",width:30},{title:"Drug",key:"drug",width:48},{title:"Dose",key:St=>St&&(St.dose||St.dose===0)?`${St.dose} mg`:"",width:26},{title:"Notes",key:"notes",width:at-104}];ot("Meds",_t,bt,{cellFontSize:6,spacingAfter:0});const yt=c.getNumberOfPages();for(let St=1;St<=yt;St++)c.setPage(St),c.setFontSize(9),c.text(`Page ${St} / ${yt}`,h,12);const jt=`${e.id||"snake"}-${(e.name||"").replace(/\s+/g,"_")}.pdf`;c.save(jt)}async function exportClutchCardToPdf(e={}){const{jsPDF:s}=await __vitePreload(async()=>{const{jsPDF:dt}=await import("./jspdf.es.min-DGvFeT9U.js").then(ct=>ct.j);return{jsPDF:dt}},[]),i=100,o=50,a=6,c=new s({unit:"mm",format:[i,o],orientation:"landscape"}),d=e.clutchNumber?String(e.clutchNumber):"",g=e.label?e.label:e.clutchNumber?`Clutch #${d}`:"Clutch Card",h=e.femaleName||"",j=e.maleName||"",b=dt=>{if(dt===null||typeof dt>"u")return"";const ct=String(dt).trim();return!ct||ct===""?"":ct},_=b(e.femaleGenetics),st=b(e.maleGenetics);c.setDrawColor(80),c.setLineWidth(.5),c.roundedRect(3,3,i-6,o-6,2,2);const tt=fitTextToWidth(c,g,i-a*2,18,12);try{c.setFont(void 0,"bold")}catch{}c.setFontSize(tt),c.text(g,i/2,a,{align:"center",baseline:"top"});try{c.setFont(void 0,"normal")}catch{}const nt=e.clutchDate||"",xt=nt?addDaysYmd(nt,59):"",ut=(()=>{const dt=e.eggsTotal;if(dt===null||typeof dt>"u"||dt==="")return"";if(typeof dt=="number"&&Number.isFinite(dt))return String(dt);const ct=Number(dt);return Number.isFinite(ct)?String(ct):String(dt)})(),_e=[{label:"Clutch #",value:d},{label:"Date",value:nt?formatDateForDisplay(nt):""},{label:"Female",value:h,secondary:_},{label:"Male",value:j,secondary:st},{label:"Eggs",value:ut},{label:"Est. hatch",value:xt?formatDateForDisplay(xt):""}];let at=a+estimateLineHeight(tt,.9)+2;const it=i-a*2,et=10;c.setFontSize(et);const ot=estimateLineHeight(et,1.05),rt=Math.max(8,et-1);_e.forEach(dt=>{const ct=`${dt.label}: ${dt.value}`,Et=c.splitTextToSize(ct,it);if(c.text(Et,a,at,{baseline:"top"}),at+=Et.length*ot,dt.secondary){c.setFontSize(rt);const gt=c.splitTextToSize(`   ${dt.secondary}`,it);c.text(gt,a,at,{baseline:"top"}),at+=gt.length*estimateLineHeight(rt,1.05),c.setFontSize(et)}});const ft=(e.label||(e.clutchNumber?`clutch-${e.clutchNumber}`:"clutch-card")).toString().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"clutch-card";c.save(`${ft}.pdf`)}function SnakeCard({s:e,onEdit:s,onQuickPair:i,onDelete:o,groups:a=[],setSnakes:c,setQrFor:d,pairings:g=[],onOpenPairing:h,lastFeedDefaults:j,setLastFeedDefaults:b}){var Dt;const _=typeof s=="function",st=typeof i=="function",tt=typeof o=="function",[nt,xt]=reactExports.useState(!1),[ut,_e]=reactExports.useState(null),[$,at]=reactExports.useState({date:localYMD(new Date),notes:"",grams:0,feed:"Mouse",size:"pinky",sizeDetail:"",form:"",formDetail:"",drug:"",dose:"",refused:!1}),it=reactExports.useRef(null),et=reactExports.useMemo(()=>combineMorphsAndHetsForDisplay(e==null?void 0:e.morphs,e==null?void 0:e.hets,e==null?void 0:e.possibleHets),[e==null?void 0:e.morphs,e==null?void 0:e.hets,e==null?void 0:e.possibleHets]),ot=reactExports.useMemo(()=>normalizeSexValue(e==null?void 0:e.sex),[e==null?void 0:e.sex]),rt=reactExports.useMemo(()=>(typeof(e==null?void 0:e.status)=="string"?e.status.trim():"")||"Active",[e==null?void 0:e.status]),lt=reactExports.useMemo(()=>{var _t;return(Array.isArray((_t=e==null?void 0:e.logs)==null?void 0:_t.weights)?e.logs.weights:[]).map((yt,jt)=>{const St=typeof(yt==null?void 0:yt.grams)=="number"?yt.grams:typeof(yt==null?void 0:yt.weightGrams)=="number"?yt.weightGrams:typeof(yt==null?void 0:yt.weight)=="number"?yt.weight:Number((yt==null?void 0:yt.grams)??(yt==null?void 0:yt.weightGrams)??(yt==null?void 0:yt.weight)??(yt==null?void 0:yt.value));if(!Number.isFinite(St))return null;const At=(yt==null?void 0:yt.date)||(yt==null?void 0:yt.loggedAt)||(yt==null?void 0:yt.createdAt)||null,ht=(typeof At=="string"?parseYmd(At):null)||(At?new Date(At):null);return!(ht instanceof Date)||Number.isNaN(ht.getTime())?null:{grams:St,date:ht,label:formatDateForDisplay(ht)||ht.toLocaleDateString(),rawDate:At||ht.toISOString(),index:jt}}).filter(Boolean).sort((yt,jt)=>yt.date.getTime()-jt.date.getTime()).slice(-12)},[(Dt=e==null?void 0:e.logs)==null?void 0:Dt.weights]),ft=reactExports.useMemo(()=>{if(e!=null&&e.imageUrl)return e.imageUrl;if(Array.isArray(e==null?void 0:e.photos)&&e.photos.length){const Ft=e.photos[e.photos.length-1];return(Ft==null?void 0:Ft.url)||null}return null},[e==null?void 0:e.imageUrl,e==null?void 0:e.photos]),dt=reactExports.useMemo(()=>ot!=="F"?[]:getFemaleBreedingCyclesByYear(e==null?void 0:e.id,g),[ot,e==null?void 0:e.id,g]);function ct(Ft){if(!Ft)return{key:"feeds",defaults:{}};const bt=String(Ft).toLowerCase();return bt.includes("weight")?{key:"weights",defaults:{grams:0}}:bt.includes("feed")||bt.includes("feeding")?{key:"feeds",defaults:{feed:"Mouse",size:"pinky",grams:0}}:bt.includes("shed")?{key:"sheds",defaults:{complete:!0}}:bt.includes("clean")?{key:"cleanings",defaults:{deep:!1}}:bt.includes("med")?{key:"meds",defaults:{drug:"",dose:""}}:{key:"feeds",defaults:{}}}function Et(Ft,bt){bt&&bt.stopPropagation();const yt={feeds:"Feed",weights:"Weight",cleanings:"Cleaning",sheds:"Shed",meds:"Meds"}[Ft]||Ft;try{const St=it.current;St&&St.scrollIntoView({block:"nearest",behavior:"smooth"})}catch{}const jt=ct(yt);jt.key==="feeds"&&j?at({date:localYMD(new Date),notes:j.notes||"",grams:jt.defaults.grams||0,feed:j.feed||jt.defaults.feed||"Mouse",size:j.size||jt.defaults.size||"pinky",sizeDetail:j.sizeDetail||"",form:j.form||jt.defaults.form||"",formDetail:j.formDetail||"",refused:!1,drug:jt.defaults.drug||"",dose:jt.defaults.dose||""}):at({date:localYMD(new Date),notes:"",grams:jt.defaults.grams||0,feed:jt.defaults.feed||"Mouse",size:jt.defaults.size||"pinky",sizeDetail:jt.defaults.sizeDetail||"",form:jt.defaults.form||"",formDetail:jt.defaults.formDetail||"",drug:jt.defaults.drug||"",dose:jt.defaults.dose||"",refused:!1}),_e(yt)}function gt(){_e(null)}function Lt(Ft,bt={}){if(!c){alert("Editing not enabled"),gt();return}const _t=(Ft||"").toLowerCase();let yt="feeds";_t.includes("weight")?yt="weights":_t.includes("feed")?yt="feeds":_t.includes("shed")?yt="sheds":_t.includes("clean")?yt="cleanings":_t.includes("med")&&(yt="meds");const jt={date:$.date};yt==="weights"&&(jt.grams=Number($.grams)||0);const St=bt.forceRefused===!0;if(yt==="feeds"&&(jt.feed=$.feed,jt.size=$.size==="Other"?$.sizeDetail||"":$.size,jt.weightGrams=Number($.grams)||0,$.form?(jt.method=$.form==="Other"?"Other":$.form,jt.methodDetail=$.form==="Other"&&$.formDetail||""):(jt.method="Other",jt.methodDetail=""),jt.refused=St?!0:!!$.refused),yt==="meds"&&(jt.drug=$.drug,jt.dose=$.dose),jt.notes=$.notes||"",c(At=>At.map(mt=>mt.id===e.id?{...mt,logs:{...mt.logs,[yt]:[...mt.logs[yt]||[],jt]}}:mt)),yt==="feeds"&&typeof b=="function")try{b({feed:$.feed,size:$.size,sizeDetail:$.sizeDetail||"",form:$.form,formDetail:$.formDetail||"",notes:$.notes||"",refused:!1})}catch{}gt()}return jsxRuntimeExports.jsxs("div",{ref:it,className:"relative bg-white border rounded-xl p-2 flex flex-col gap-1 min-h-[280px] max-h-[520px] min-w-0 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:ft?jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border ring-1 ring-white/60 shadow-sm",children:jsxRuntimeExports.jsx("img",{src:ft,alt:e!=null&&e.name?`${e.name} photo`:"Snake photo",className:"w-full h-full object-cover object-center",onError:Ft=>{Ft.currentTarget.style.display="none"}})}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border bg-neutral-50 flex items-center justify-center text-[11px] text-neutral-400 text-center leading-tight px-1 ring-1 ring-white/60 shadow-sm",children:"No picture"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-base truncate",children:e.name}),jsxRuntimeExports.jsx("div",{className:"text-xs font-mono text-neutral-500 mt-1 truncate",children:e.id}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:e.birthDate?formatDateForDisplay(e.birthDate):""})]}),jsxRuntimeExports.jsx("div",{className:"shrink-0",children:jsxRuntimeExports.jsx(Badge,{children:ot==="M"?"":ot==="F"?"":""})})]}),jsxRuntimeExports.jsx("div",{className:"mt-1 space-y-1",children:et.length?jsxRuntimeExports.jsx(GeneLine,{label:"Genetics",genes:et,size:"sm"}):jsxRuntimeExports.jsx("div",{className:"text-[11px] uppercase tracking-wide text-neutral-500",children:"Genetics: -"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[_&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-0.5 border rounded-lg",onClick:()=>s(e),children:"Edit"}),st&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-0.5 border rounded-lg",onClick:()=>i(e),children:"Pair"}),jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-0.5 border rounded-lg",onClick:()=>{typeof d=="function"&&d(e.id)},children:"QR"}),tt&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-0.5 border rounded-lg text-rose-600",onClick:()=>o(e),title:"Delete snake",children:"Delete"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto",children:jsxRuntimeExports.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1",children:(()=>{const Ft=e.logs||{},bt=Ft.feeds&&Ft.feeds.length?Ft.feeds[Ft.feeds.length-1]:null,_t=Ft.weights&&Ft.weights.length?Ft.weights[Ft.weights.length-1]:null,yt=Ft.cleanings&&Ft.cleanings.length?Ft.cleanings[Ft.cleanings.length-1]:null,jt=Ft.sheds&&Ft.sheds.length?Ft.sheds[Ft.sheds.length-1]:null,St=Ft.meds&&Ft.meds.length?Ft.meds[Ft.meds.length-1]:null,At=e.groups||[];return[{key:"feeds",entry:bt},{key:"weights",entry:_t},{key:"cleanings",entry:yt},{key:"sheds",entry:jt},{key:"meds",entry:St},{key:"groups",groups:At}].map(ht=>{const vt=ht.key,Rt=ht.entry&&ht.entry.date||"",Pt=vt==="feeds"?"Feed":vt==="weights"?"Weight":vt==="cleanings"?"Cleaning":vt==="sheds"?"Shed":vt==="meds"?"Meds":"Group",Bt=["feeds","weights","cleanings","sheds","meds"].includes(vt),Ut=activityPalettes[vt]||{bg:"#efefef",border:"#ddd"};return jsxRuntimeExports.jsxs("div",{onClick:Nt=>{Bt&&(Nt.stopPropagation(),Et(vt,Nt))},role:Bt?"button":void 0,className:cx(Bt?"cursor-pointer":"","w-full px-2 py-1 text-[11px] rounded-lg border flex flex-col justify-between gap-1 min-h-[48px]"),style:{backgroundColor:Ut.bg,borderColor:Ut.border},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] text-neutral-600 font-semibold uppercase",children:Pt}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-neutral-600",children:formatDateForDisplay(Rt)||" "})]}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[vt==="feeds"?(()=>{if(!ht.entry)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const Nt=ht.entry,It=(Nt.feed||Nt.item||"").trim(),Ht=(Nt.size||"").trim(),Qt=typeof Nt.weightGrams=="number"&&Nt.weightGrams>0?`${Nt.weightGrams} g`:typeof Nt.grams=="number"&&Nt.grams>0?`${Nt.grams} g`:"",tn=Nt.method?Nt.methodDetail?`${Nt.method} (${Nt.methodDetail})`:Nt.method:"";let an="";if(!Nt.refused){const Xt=[];It&&Xt.push(It),Ht&&Xt.push(Ht),Qt&&Xt.push(Qt),tn&&Xt.push(tn),an=Xt.join("  ")}const Wt=Nt.refused?"Refused feed":an||"Feed";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:cx("truncate",Nt.refused?"font-semibold text-rose-600":"font-medium text-neutral-800"),children:Wt}),Nt.refused&&an?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:an}):null,Nt.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:Nt.notes}):null]})})():null,vt==="weights"?(()=>{if(!ht.entry)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const Nt=ht.entry;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:typeof Nt.grams=="number"?`${Nt.grams} g`:`${Nt.grams||""}`}),Nt.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:Nt.notes}):null]})})():null,vt==="cleanings"?(()=>{if(!ht.entry)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const Nt=ht.entry;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:["Cleaning",Nt.deep?"  deep":""]}),Nt.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:Nt.notes}):null]})})():null,vt==="sheds"?(()=>{if(!ht.entry)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const Nt=ht.entry;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:["Shed",Nt.complete?"  complete":""]}),Nt.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:Nt.notes}):null]})})():null,vt==="meds"?(()=>{if(!ht.entry)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const Nt=ht.entry;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium truncate",children:[Nt.drug," ",Nt.dose?` ${Nt.dose}`:""]}),Nt.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-700 truncate",children:Nt.notes}):null]})})():null,vt==="groups"?(()=>{const Nt=ht.groups||[];if(!Nt.length)return jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""});const It=Nt.join(", ");return It.trim().toLowerCase()==="group"?jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-700",children:""}):jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:It})})():null]})]},vt)})})()})}),ut&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4",onClick:Ft=>{Ft.stopPropagation(),gt()},children:jsxRuntimeExports.jsxs("div",{className:"pointer-events-auto w-full max-w-md bg-white border rounded-xl shadow-2xl p-4 max-h-[90vh] overflow-y-auto",onClick:Ft=>Ft.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-base font-semibold",children:["Add ",ut]}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1 border rounded-lg text-neutral-500 hover:text-neutral-700",onClick:Ft=>{Ft.stopPropagation(),gt()},children:"Close"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Date"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",type:"date",value:$.date,onChange:Ft=>at(bt=>({...bt,date:Ft.target.value}))})]}),ut.toLowerCase().includes("feed")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Feed type"}),jsxRuntimeExports.jsxs("select",{className:"w-full px-2 py-1 border rounded",value:$.feed||"",onChange:Ft=>at(bt=>({...bt,feed:Ft.target.value,size:Ft.target.value==="Mouse"||Ft.target.value==="Rat"?bt.size||"pinky":""})),children:[jsxRuntimeExports.jsx("option",{value:"Mouse",children:"Mouse"}),jsxRuntimeExports.jsx("option",{value:"Rat",children:"Rat"}),jsxRuntimeExports.jsx("option",{value:"Chick",children:"Chick"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Size"}),$.feed==="Mouse"||$.feed==="Rat"?jsxRuntimeExports.jsxs("select",{className:"w-full px-2 py-1 border rounded",value:$.size||"",onChange:Ft=>at(bt=>({...bt,size:Ft.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"pinky",children:"pinky"}),jsxRuntimeExports.jsx("option",{value:"fuzzy",children:"fuzzy"}),jsxRuntimeExports.jsx("option",{value:"medium",children:"medium"}),jsxRuntimeExports.jsx("option",{value:"adult",children:"adult"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("select",{className:"w-full px-2 py-1 border rounded",value:$.size||"",onChange:Ft=>at(bt=>({...bt,size:Ft.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}),$.size==="Other"&&jsxRuntimeExports.jsx("input",{className:"mt-2 w-full px-2 py-1 border rounded",placeholder:"Custom size",value:$.sizeDetail||"",onChange:Ft=>at(bt=>({...bt,sizeDetail:Ft.target.value}))})]}),$.size==="Other"&&$.feed!=="Mouse"&&$.feed!=="Rat"&&jsxRuntimeExports.jsx("input",{className:"mt-2 w-full px-2 py-1 border rounded",placeholder:"Custom size",value:$.sizeDetail||"",onChange:Ft=>at(bt=>({...bt,sizeDetail:Ft.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Weight (g)"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",type:"number",value:$.grams,onChange:Ft=>at(bt=>({...bt,grams:Ft.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Form"}),jsxRuntimeExports.jsxs("select",{className:"w-full px-2 py-1 border rounded",value:$.form||"",onChange:Ft=>at(bt=>({...bt,form:Ft.target.value})),children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select"}),jsxRuntimeExports.jsx("option",{value:"Live",children:"Live"}),jsxRuntimeExports.jsx("option",{value:"Freshly killed",children:"Freshly killed"}),jsxRuntimeExports.jsx("option",{value:"Frozen/thawed",children:"Frozen/thawed"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}),$.form==="Other"&&jsxRuntimeExports.jsx("input",{className:"mt-2 w-full px-2 py-1 border rounded",placeholder:"Method details",value:$.formDetail||"",onChange:Ft=>at(bt=>({...bt,formDetail:Ft.target.value}))})]})]}),ut.toLowerCase().includes("weight")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Grams"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",type:"number",value:$.grams,onChange:Ft=>at(bt=>({...bt,grams:Ft.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Recent progress"}),jsxRuntimeExports.jsx(WeightTrendMiniChart,{data:lt})]})]}),ut.toLowerCase().includes("med")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Drug"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",value:$.drug,onChange:Ft=>at(bt=>({...bt,drug:Ft.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Dose"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",value:$.dose,onChange:Ft=>at(bt=>({...bt,dose:Ft.target.value}))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Notes"}),jsxRuntimeExports.jsx("input",{className:"w-full px-2 py-1 border rounded",value:$.notes,onChange:Ft=>at(bt=>({...bt,notes:Ft.target.value}))})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-2 py-1 border rounded",onClick:Ft=>{Ft.stopPropagation(),gt()},children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-2 py-1 border rounded text-rose-600",onClick:Ft=>{Ft.stopPropagation(),Lt(ut,{forceRefused:!0})},children:"Refused feed"}),jsxRuntimeExports.jsx("button",{className:"px-2 py-1 bg-emerald-500 text-white rounded",onClick:Ft=>{Ft.stopPropagation(),Lt(ut)},children:"Add"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Assign group"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 text-[11px]",children:[a.map(Ft=>jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-1 px-2 py-0.5 border rounded-lg bg-white text-[11px] min-w-0",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:`group-${e.id}`,className:"w-3 h-3",checked:(e.groups||[]).includes(Ft),onChange:()=>{c&&c(bt=>bt.map(_t=>_t.id===e.id?{..._t,groups:[Ft]}:_t))}}),jsxRuntimeExports.jsx("span",{className:"truncate max-w-[8rem]",children:Ft})]},Ft)),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-1 px-2 py-0.5 border rounded-lg bg-white text-[11px]",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:`group-${e.id}`,className:"w-3 h-3",checked:!(e.groups||[]).length,onChange:()=>{c&&c(Ft=>Ft.map(bt=>bt.id===e.id?{...bt,groups:[]}:bt))}}),jsxRuntimeExports.jsx("span",{children:"None"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(StatusDot,{status:rt}),jsxRuntimeExports.jsx("div",{className:"text-xs",children:rt})]}),ot==="F"&&dt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Breeding cycles"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1 max-h-40 overflow-auto pr-1",children:dt.map(Ft=>jsxRuntimeExports.jsxs("div",{className:"rounded-lg border bg-neutral-50 p-2 space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-[10px] font-semibold uppercase text-neutral-500",children:Ft.year}),Ft.cycles.map(bt=>{var _t;return jsxRuntimeExports.jsxs("div",{className:"rounded-lg border bg-white px-2 py-1 text-[11px] space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:bt.label}),h&&bt.id&&jsxRuntimeExports.jsx("button",{className:"text-[10px] px-1.5 py-0.5 border rounded-lg",onClick:()=>h(bt.id),children:"Open"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-0.5 text-neutral-700",children:[bt.locks&&bt.locks.length?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-600",children:"Locks:"})," ",jsxRuntimeExports.jsx("span",{children:bt.locks.map(yt=>yt.display||formatDateTimeForDisplay(yt.iso)).filter(Boolean).join(", ")})]}):null,bt.ovulationDate?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-600",children:"Ovulation:"})," ",jsxRuntimeExports.jsx("span",{children:formatDateForDisplay(bt.ovulationDate)})]}):null,bt.preLayDate?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-600",children:"Pre-Lay Shed:"})," ",jsxRuntimeExports.jsx("span",{children:formatDateForDisplay(bt.preLayDate)})]}):null,bt.clutchDate?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-600",children:"Eggs laid:"})," ",jsxRuntimeExports.jsx("span",{children:formatDateForDisplay(bt.clutchDate)})]}):null,bt.hatchDate?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-600",children:"Hatched:"})," ",jsxRuntimeExports.jsx("span",{children:formatDateForDisplay(bt.hatchDate)})]}):null,!((_t=bt.locks)!=null&&_t.length)&&!bt.ovulationDate&&!bt.preLayDate&&!bt.clutchDate&&!bt.hatchDate?jsxRuntimeExports.jsx("div",{className:"text-neutral-500",children:"No cycle events recorded."}):null]})]},bt.id)})]},Ft.year))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Pairings"}),(()=>{const Ft=g.filter(_t=>_t.maleId===e.id||_t.femaleId===e.id),bt=Ft.slice(0,3);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 max-h-36 overflow-auto",children:[bt.map(_t=>jsxRuntimeExports.jsxs("button",{className:"text-sm text-left px-2 py-1 rounded-lg border hover:bg-neutral-50 min-w-0",onClick:()=>h?h(_t.id):null,children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:_t.label||`${_t.femaleId}  ${_t.maleId}`}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Start: ",_t.startDate?formatDateForDisplay(_t.startDate):""]})]},_t.id)),Ft.length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No pairings"}),Ft.length>3&&jsxRuntimeExports.jsxs("button",{className:"text-xs mt-1 px-2 py-1 border rounded-lg text-neutral-700",onClick:()=>xt(!0),children:["+",Ft.length-3," more"]})]})})()]}),nt&&jsxRuntimeExports.jsx(PairingsModal,{snake:e,pairings:g.filter(Ft=>Ft.maleId===e.id||Ft.femaleId===e.id),onClose:()=>xt(!1),onOpenPairing:Ft=>{xt(!1),h&&h(Ft)}})]})}function WeightTrendMiniChart({data:e=[]}){const s="#0ea5e9",a={top:18,right:28,bottom:32,left:42},c=320-a.left-a.right,d=140-a.top-a.bottom,g=reactExports.useMemo(()=>`weight-gradient-${Math.random().toString(36).slice(2,8)}`,[]);if(!Array.isArray(e)||e.length===0)return jsxRuntimeExports.jsx("div",{className:"mt-2 border rounded-lg bg-neutral-50 px-3 py-4 text-xs text-neutral-500",children:"No weight history yet. Log a weight to start tracking progress."});const h=e.map(et=>et.grams),j=Math.min(...h),_=Math.max(...h)-j||1,st=a.top+d,tt=et=>new Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(et),nt=e.map((et,ot)=>{const rt=e.length===1?.5:ot/(e.length-1),lt=a.left+c*rt,ft=a.top+d-(et.grams-j)/_*d;return{x:lt,y:ft,grams:et.grams,label:et.label||""}}),xt=nt.map((et,ot)=>`${ot===0?"M":"L"}${et.x.toFixed(2)} ${et.y.toFixed(2)}`).join(" "),ut=nt.length>1?`${xt} L${nt[nt.length-1].x.toFixed(2)} ${st.toFixed(2)} L${nt[0].x.toFixed(2)} ${st.toFixed(2)} Z`:null,_e=nt[nt.length-1],$=nt[0],at=_e.grams-$.grams,it=`${at>=0?"+":""}${tt(at)} g`;return jsxRuntimeExports.jsxs("div",{className:"mt-2 border rounded-lg bg-neutral-50 p-3",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 320 140",role:"img","aria-label":"Weight trend chart",className:"w-full h-32",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:g,x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:s,stopOpacity:"0.28"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:s,stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("rect",{x:a.left,y:a.top,width:c,height:d,fill:"#f8fafc",rx:12}),jsxRuntimeExports.jsx("line",{x1:a.left,y1:st,x2:a.left+c,y2:st,stroke:"#e2e8f0",strokeDasharray:"4 4"}),ut?jsxRuntimeExports.jsx("path",{d:ut,fill:`url(#${g})`}):null,jsxRuntimeExports.jsx("path",{d:xt,fill:"none",stroke:s,strokeWidth:2.5,strokeLinejoin:"round",strokeLinecap:"round"}),nt.map((et,ot)=>jsxRuntimeExports.jsx("circle",{cx:et.x,cy:et.y,r:4,fill:"#fff",stroke:s,strokeWidth:2},`weight-point-${ot}`))]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-[11px] text-neutral-600 grid grid-cols-2 gap-y-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-700",children:"Latest:"})," ",tt(_e.grams)," g"]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-700",children:"Change:"})," ",it]}),jsxRuntimeExports.jsx("div",{className:"col-span-2 text-neutral-500",children:nt.length>1?`From ${$.label} to ${_e.label}`:`Logged on ${_e.label}`})]}),nt.length>1&&jsxRuntimeExports.jsxs("div",{className:"mt-1 flex justify-between text-[10px] uppercase tracking-wide text-neutral-400",children:[jsxRuntimeExports.jsx("span",{children:e[0].label}),jsxRuntimeExports.jsx("span",{children:e[e.length-1].label})]})]})}function PairingsModal({snake:e,pairings:s,onClose:i,onOpenPairing:o}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",onClick:i,children:jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 rounded-lg shadow w-full max-w-md",onClick:a=>a.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:["Pairings for ",e.name]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Click a pairing to open it."})]}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1 border rounded",onClick:i,children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 space-y-2 max-h-72 overflow-auto",children:s.length?s.map(a=>jsxRuntimeExports.jsxs("div",{className:"p-2 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:a.label}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Start: ",a.startDate?formatDateForDisplay(a.startDate):""]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>o&&o(a.id),children:"Open"})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs",children:["Appointments:",jsxRuntimeExports.jsx("div",{className:"mt-1 space-y-1",children:(a.appointments||[]).map(c=>jsxRuntimeExports.jsxs("div",{className:"text-[11px] px-2 py-1 rounded border bg-neutral-50",children:[formatDateForDisplay(c.date)," ",c.notes?` ${c.notes}`:""]},c.id))})]})]},a.id)):jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500",children:"No pairings"})})]})})}function StatusDot({status:e}){const s=e==="Active"?"bg-emerald-500":e==="Hold"?"bg-amber-500":"bg-rose-500";return jsxRuntimeExports.jsx("span",{className:cx("inline-block w-2 h-2 rounded-full",s)})}function filterSnakes(e,s,i){const o=String(s||"").trim().toLowerCase(),a=o?o.split(/\s+/).filter(Boolean):[],c=String(i).trim().toLowerCase();return e.filter(d=>{if(!d||c!=="all"&&!(Array.isArray(d.tags)?d.tags:[]).some(b=>String(b||"").trim().toLowerCase()===c))return!1;if(!a.length)return!0;const g=combineMorphsAndHetsForDisplay(d.morphs,d.hets,d.possibleHets),h=[d.id,d.name,...Array.isArray(g)?g:[],d.morphHetInput,...Array.isArray(d.morphs)?d.morphs:[],...Array.isArray(d.hets)?d.hets:[],...Array.isArray(d.tags)?d.tags:[],...Array.isArray(d.groups)?d.groups:[]].map(j=>String(j||"").trim().toLowerCase()).filter(Boolean);return h.length?a.every(j=>h.some(b=>b.includes(j))):!1})}function AddGroupInline({onAdd:e}){const[s,i]=reactExports.useState("");return jsxRuntimeExports.jsxs("div",{className:"flex gap-2 px-2",children:[jsxRuntimeExports.jsx("input",{className:"flex-1 border rounded-lg px-2 py-1 text-sm",placeholder:"Add new group",value:s,onChange:o=>i(o.target.value)}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const o=s.trim();o&&(e(o),i(""))},children:"Add"})]})}function BreederSection({breederInfo:e,setBreederInfo:s,theme:i="blue",onSaved:o,createBackupPayload:a,onRestoreBackup:c,backupSettings:d,updateBackupSettings:g,autoBackupSnapshot:h,onTriggerAutoBackup:j,backupVault:b,onCreateVaultEntry:_,onRenameVaultEntry:st,onDeleteVaultEntry:tt,snakes:nt,pairings:xt,animalExportFields:ut,setAnimalExportFields:_e,pairingExportFields:$,setPairingExportFields:at,exportFeedback:it,setExportFeedback:et}){const ot=normalizeBreederInfo(e),rt=reactExports.useMemo(()=>normalizeIdGeneratorConfig(ot.idGenerator),[ot.idGenerator]),lt=reactExports.useCallback(Vt=>{s(Kt=>{const cn=normalizeBreederInfo(Kt),Dn=typeof Vt=="function"?Vt(cn):Vt;return normalizeBreederInfo(Dn)})},[s]),ft=reactExports.useCallback(Vt=>{lt(Kt=>{const cn={...Kt.idGenerator,...Vt||{}};return{...Kt,idGenerator:normalizeIdGeneratorConfig(cn)}})},[lt]),dt=reactExports.useCallback(()=>{lt(Vt=>({...Vt,idGenerator:getDefaultIdGeneratorConfig()}))},[lt]),ct=reactExports.useCallback(Vt=>{const Kt=rt.template||"",cn=Vt==="[-]"?"[-]":Vt,Dn=Ln.current,Nn=(Zn,sr)=>{Yn.current={start:Zn,end:sr}};if(Vt!=="[-]"&&Kt.includes(cn)){const Zn=Kt.indexOf(cn);if(Zn===-1)return;const sr=`${Kt.slice(0,Zn)}${Kt.slice(Zn+cn.length)}`;$n.current={start:Zn,end:Zn,focus:!0},Nn(Zn,Zn),ft({template:sr});return}let zn=Kt.length,Hn=Kt.length;if(Dn&&typeof Dn.selectionStart=="number"&&typeof Dn.selectionEnd=="number")zn=Dn.selectionStart,Hn=Dn.selectionEnd;else if(Yn.current){const{start:Zn,end:sr}=Yn.current;typeof Zn=="number"&&typeof sr=="number"&&(zn=Zn,Hn=sr)}const Xn=`${Kt.slice(0,zn)}${cn}${Kt.slice(Hn)}`,qn=zn+cn.length;$n.current={start:qn,end:qn,focus:!0},Nn(qn,qn),ft({template:Xn})},[rt.template,ft]),Et=reactExports.useCallback(()=>{const Vt=Ln.current;if(!Vt)return;const Kt=typeof Vt.selectionStart=="number"?Vt.selectionStart:Vt.value.length,cn=typeof Vt.selectionEnd=="number"?Vt.selectionEnd:Kt;Yn.current={start:Kt,end:cn}},[]),[gt,Lt]=reactExports.useState("info"),[Dt,Ft]=reactExports.useState(null),[bt,_t]=reactExports.useState(null),yt=reactExports.useRef(null),jt=reactExports.useRef(null),St=reactExports.useMemo(()=>normalizeBackupSettings(d),[d]),At=reactExports.useMemo(()=>Array.isArray(b)?b:[],[b]),mt=reactExports.useMemo(()=>normalizeExportFieldSelection(ut,DEFAULT_ANIMAL_EXPORT_FIELDS,ANIMAL_EXPORT_FIELD_DEFS),[ut]),ht=reactExports.useMemo(()=>normalizeExportFieldSelection($,DEFAULT_PAIRING_EXPORT_FIELDS,PAIRING_EXPORT_FIELD_DEFS),[$]),vt=reactExports.useMemo(()=>groupFieldDefsBySection(ANIMAL_EXPORT_FIELD_DEFS),[]),Rt=reactExports.useMemo(()=>groupFieldDefsBySection(PAIRING_EXPORT_FIELD_DEFS),[]),Pt=reactExports.useMemo(()=>new Set(mt),[mt]),Bt=reactExports.useMemo(()=>new Set(ht),[ht]),Ut=typeof St.maxVaultEntries=="number"&&St.maxVaultEntries>0?String(St.maxVaultEntries):"unlimited",Nt=St.maxVaultEntries?`Keeping the latest ${St.maxVaultEntries} backups. Oldest entries are pruned automatically.`:"Keeping all backups (no limit).",It=reactExports.useMemo(()=>{if(!h||typeof h!="object")return null;const Vt=h.payload||{};return{snakes:Array.isArray(Vt.snakes)?Vt.snakes.length:0,pairings:Array.isArray(Vt.pairings)?Vt.pairings.length:0,groups:Array.isArray(Vt.groups)?Vt.groups.length:0}},[h]),Ht=St.lastRun?formatDateTimeForDisplay(St.lastRun):"Never",Qt=(Dt==null?void 0:Dt.context)==="manual"?Dt:null,tn=Dt&&typeof Dt.context=="string"&&Dt.context.startsWith("auto")?Dt:null,an=Dt&&typeof Dt.context=="string"&&Dt.context.startsWith("vault")?Dt:null,Wt=it&&it.context==="animals"?it:null,Xt=it&&it.context==="pairings"?it:null,wt=Array.isArray(nt)&&nt.length>0,kt=Array.isArray(xt)&&xt.length>0,[Tt,zt]=reactExports.useState(()=>ot.name||ot.businessName||BORIS_PREVIEW_DEFAULTS.name),[en,un]=reactExports.useState(()=>BORIS_PREVIEW_DEFAULTS.year),[pn,qt]=reactExports.useState(()=>BORIS_PREVIEW_DEFAULTS.birthYear),[Cn,fn]=reactExports.useState(BORIS_PREVIEW_DEFAULTS.sex),[On,An]=reactExports.useState(1),[Rn,wn]=reactExports.useState(()=>BORIS_PREVIEW_DEFAULTS.genes||""),Ln=reactExports.useRef(null),$n=reactExports.useRef(null),Yn=reactExports.useRef({start:null,end:null}),gn=reactExports.useCallback(()=>{if(typeof a!="function"){Ft({type:"error",message:"Backup export is unavailable.",context:"manual",timestamp:new Date().toISOString()});return}try{const Vt=a(),Kt=JSON.stringify(Vt,null,2),cn=new Date().toISOString(),Dn=cn.replace(/[:.]/g,"-");if(typeof window>"u"||typeof document>"u")throw new Error("Downloads are not supported in this environment.");const Nn=buildBackupFilename("breeding-planner-backup",Dn),zn=new Blob([Kt],{type:BACKUP_FILE_MIME}),Hn=URL.createObjectURL(zn),Xn=document.createElement("a");Xn.href=Hn,Xn.download=Nn,document.body.appendChild(Xn),Xn.click(),document.body.removeChild(Xn),window.setTimeout(()=>URL.revokeObjectURL(Hn),1e3),Ft({type:"success",message:`Backup downloaded (${Array.isArray(Vt.snakes)?Vt.snakes.length:0} snakes, ${Array.isArray(Vt.pairings)?Vt.pairings.length:0} pairings).`,context:"manual",timestamp:cn})}catch(Vt){console.error(Vt),Ft({type:"error",message:(Vt==null?void 0:Vt.message)||"Unable to download backup.",context:"manual",timestamp:new Date().toISOString()})}},[a]),rn=reactExports.useCallback(()=>{if(typeof a!="function"||typeof _!="function"){Ft({type:"error",message:"Backup vault is unavailable.",context:"vault",timestamp:new Date().toISOString()});return}try{const Vt=a(),Kt=new Date().toISOString();let cn=`Manual backup  ${formatDateTimeForDisplay(Kt)}`;if(typeof window<"u"&&typeof window.prompt=="function"){const Nn=window.prompt("Name this backup file",cn);Nn&&Nn.trim()&&(cn=Nn.trim())}const Dn=_(Vt,{source:"manual",name:cn,savedAt:Kt});Ft({type:Dn?"success":"error",message:Dn?`Saved ${Dn.name} to the backup vault.`:"Failed to save backup to the vault.",context:"vault",timestamp:Kt})}catch(Vt){console.error(Vt),Ft({type:"error",message:(Vt==null?void 0:Vt.message)||"Unable to save the backup to the vault.",context:"vault",timestamp:new Date().toISOString()})}},[a,_]),sn=reactExports.useCallback(()=>{if(!h||!h.payload){Ft({type:"error",message:"No automatic backup is available yet.",context:"auto-download",timestamp:new Date().toISOString()});return}try{if(typeof window>"u"||typeof document>"u")throw new Error("Downloads are not supported in this environment.");const Vt=h.payload,Kt=JSON.stringify(Vt,null,2),Dn=(h.savedAt||new Date().toISOString()).replace(/[:.]/g,"-"),Nn=buildBackupFilename("breeding-planner-auto-backup",Dn),zn=new Blob([Kt],{type:BACKUP_FILE_MIME}),Hn=URL.createObjectURL(zn),Xn=document.createElement("a");Xn.href=Hn,Xn.download=Nn,document.body.appendChild(Xn),Xn.click(),document.body.removeChild(Xn),window.setTimeout(()=>URL.revokeObjectURL(Hn),1e3),Ft({type:"success",message:"Latest automatic backup downloaded.",context:"auto-download",timestamp:new Date().toISOString()})}catch(Vt){console.error(Vt),Ft({type:"error",message:(Vt==null?void 0:Vt.message)||"Unable to download the automatic backup.",context:"auto-download",timestamp:new Date().toISOString()})}},[h]),Sn=reactExports.useCallback(Vt=>{_e(Kt=>{const cn=normalizeExportFieldSelection(Kt,DEFAULT_ANIMAL_EXPORT_FIELDS,ANIMAL_EXPORT_FIELD_DEFS);return Vt?cn.includes(Vt)?cn.length<=1?cn:cn.filter(Nn=>Nn!==Vt):[...cn,Vt]:cn})},[_e]),Wn=reactExports.useCallback(()=>{_e(ANIMAL_EXPORT_FIELD_DEFS.map(Vt=>Vt.key))},[_e]),Vn=reactExports.useCallback(()=>{_e([...DEFAULT_ANIMAL_EXPORT_FIELDS])},[_e]),Gt=reactExports.useCallback(Vt=>{at(Kt=>{const cn=normalizeExportFieldSelection(Kt,DEFAULT_PAIRING_EXPORT_FIELDS,PAIRING_EXPORT_FIELD_DEFS);return Vt?cn.includes(Vt)?cn.length<=1?cn:cn.filter(Nn=>Nn!==Vt):[...cn,Vt]:cn})},[at]),hn=reactExports.useCallback(()=>{at(PAIRING_EXPORT_FIELD_DEFS.map(Vt=>Vt.key))},[at]),vn=reactExports.useCallback(()=>{at([...DEFAULT_PAIRING_EXPORT_FIELDS])},[at]),Tn=reactExports.useCallback(async()=>{const Vt=new Date().toISOString();try{const Kt=buildAnimalExportDataset(nt,xt,mt);if(!Kt.columns.length)throw new Error("Select at least one field before exporting.");if(!Kt.rows.length)throw new Error("No animals available to export.");const cn=Vt.replace(/[:.]/g,"-");await exportDatasetToPdf(Kt,{title:"Animals export",subtitle:`${Kt.rows.length} animals  ${Kt.columns.length} fields`,fileName:`animals-export-${cn}.pdf`}),et({type:"success",message:`Exported ${Kt.rows.length} animals to PDF.`,context:"animals",timestamp:new Date().toISOString()})}catch(Kt){console.error("Animals PDF export failed",Kt),et({type:"error",message:(Kt==null?void 0:Kt.message)||"Failed to export animals to PDF.",context:"animals",timestamp:new Date().toISOString()})}},[nt,xt,mt,et]),In=reactExports.useCallback(async()=>{const Vt=new Date().toISOString();try{const Kt=buildAnimalExportDataset(nt,xt,mt);if(!Kt.columns.length)throw new Error("Select at least one field before exporting.");if(!Kt.rows.length)throw new Error("No animals available to export.");const cn=Vt.replace(/[:.]/g,"-");await exportDatasetToXlsx(Kt,{fileName:`animals-export-${cn}.xlsx`,sheetName:"Animals"}),et({type:"success",message:`Exported ${Kt.rows.length} animals to spreadsheet.`,context:"animals",timestamp:new Date().toISOString()})}catch(Kt){console.error("Animals sheet export failed",Kt),et({type:"error",message:(Kt==null?void 0:Kt.message)||"Failed to export animals to spreadsheet.",context:"animals",timestamp:new Date().toISOString()})}},[nt,xt,mt,et]),kn=reactExports.useCallback(async()=>{const Vt=new Date().toISOString();try{const Kt=buildPairingExportDataset(xt,nt,ht);if(!Kt.columns.length)throw new Error("Select at least one field before exporting.");if(!Kt.rows.length)throw new Error("No breeding projects available to export.");const cn=Vt.replace(/[:.]/g,"-");await exportDatasetToPdf(Kt,{title:"Breeding projects export",subtitle:`${Kt.rows.length} projects  ${Kt.columns.length} fields`,fileName:`pairings-export-${cn}.pdf`}),et({type:"success",message:`Exported ${Kt.rows.length} projects to PDF.`,context:"pairings",timestamp:new Date().toISOString()})}catch(Kt){console.error("Pairings PDF export failed",Kt),et({type:"error",message:(Kt==null?void 0:Kt.message)||"Failed to export breeding projects to PDF.",context:"pairings",timestamp:new Date().toISOString()})}},[xt,nt,ht,et]),Ot=reactExports.useCallback(async()=>{const Vt=new Date().toISOString();try{const Kt=buildPairingExportDataset(xt,nt,ht);if(!Kt.columns.length)throw new Error("Select at least one field before exporting.");if(!Kt.rows.length)throw new Error("No breeding projects available to export.");const cn=Vt.replace(/[:.]/g,"-");await exportDatasetToXlsx(Kt,{fileName:`pairings-export-${cn}.xlsx`,sheetName:"Pairings"}),et({type:"success",message:`Exported ${Kt.rows.length} projects to spreadsheet.`,context:"pairings",timestamp:new Date().toISOString()})}catch(Kt){console.error("Pairings sheet export failed",Kt),et({type:"error",message:(Kt==null?void 0:Kt.message)||"Failed to export breeding projects to spreadsheet.",context:"pairings",timestamp:new Date().toISOString()})}},[xt,nt,ht,et]),Mt=reactExports.useCallback(Vt=>{var cn;const Kt=((cn=Vt==null?void 0:Vt.target)==null?void 0:cn.value)||"off";typeof g=="function"&&g({frequency:Kt})},[g]),Yt=reactExports.useCallback(Vt=>{var Dn;if(typeof g!="function")return;const Kt=(Dn=Vt==null?void 0:Vt.target)==null?void 0:Dn.value;if(Kt==="unlimited"){g({maxVaultEntries:"unlimited"});return}const cn=parseInt(Kt,10);Number.isFinite(cn)&&cn>0&&g({maxVaultEntries:cn})},[g]),xn=reactExports.useCallback(()=>{if(typeof j!="function"){Ft({type:"error",message:"Automatic backup is unavailable.",context:"auto",timestamp:new Date().toISOString()});return}try{j(),Ft({type:"success",message:"Automatic backup created.",context:"auto",timestamp:new Date().toISOString()})}catch(Vt){console.error(Vt),Ft({type:"error",message:(Vt==null?void 0:Vt.message)||"Automatic backup failed.",context:"auto",timestamp:new Date().toISOString()})}},[j]),dn=reactExports.useCallback(Vt=>{const Kt=At.find(cn=>cn.id===Vt);if(!Kt){Ft({type:"error",message:"Backup file not found.",context:"vault-download",timestamp:new Date().toISOString()});return}try{if(typeof window>"u"||typeof document>"u")throw new Error("Downloads are not supported in this environment.");const cn=JSON.stringify(Kt.payload,null,2),Nn=Kt.name.replace(/[\\/:*?"<>|]+/g,"-")||"breeding-planner-backup",zn=buildBackupFilename(Nn,Kt.id),Hn=new Blob([cn],{type:BACKUP_FILE_MIME}),Xn=URL.createObjectURL(Hn),qn=document.createElement("a");qn.href=Xn,qn.download=zn,document.body.appendChild(qn),qn.click(),document.body.removeChild(qn),window.setTimeout(()=>URL.revokeObjectURL(Xn),1e3),Ft({type:"success",message:`Downloaded ${Kt.name}.`,context:"vault-download",timestamp:new Date().toISOString()})}catch(cn){console.error(cn),Ft({type:"error",message:(cn==null?void 0:cn.message)||"Unable to download the backup.",context:"vault-download",timestamp:new Date().toISOString()})}},[At]),En=reactExports.useCallback(Vt=>{const Kt=At.find(cn=>cn.id===Vt);if(!Kt){_t({type:"error",message:"Backup file not found.",timestamp:new Date().toISOString()});return}try{if(typeof c!="function")throw new Error("Restore handler is unavailable.");c(Kt.payload),_t({type:"success",message:`Restored data from ${Kt.name}.`,timestamp:new Date().toISOString()})}catch(cn){console.error(cn),_t({type:"error",message:(cn==null?void 0:cn.message)||"Failed to restore backup.",timestamp:new Date().toISOString()})}},[At,c]),yn=reactExports.useCallback(Vt=>{if(typeof st!="function")return;const Kt=At.find(cn=>cn.id===Vt);if(Kt&&typeof window<"u"&&typeof window.prompt=="function"){const cn=window.prompt("Rename backup",Kt.name);cn&&cn.trim()&&(st(Vt,cn.trim()),Ft({type:"success",message:`Renamed backup to ${cn.trim()}.`,context:"vault-rename",timestamp:new Date().toISOString()}))}},[st,At]),Mn=reactExports.useCallback(Vt=>{if(typeof tt!="function")return;const Kt=At.find(Dn=>Dn.id===Vt);if(!Kt)return;let cn=!0;typeof window<"u"&&typeof window.confirm=="function"&&(cn=window.confirm(`Delete ${Kt.name}? This cannot be undone.`)),cn&&(tt(Vt),Ft({type:"success",message:`Deleted ${Kt.name}.`,context:"vault-delete",timestamp:new Date().toISOString()}))},[tt,At]),_n=reactExports.useCallback(async Vt=>{var cn,Dn,Nn,zn;const Kt=(Dn=(cn=Vt==null?void 0:Vt.target)==null?void 0:cn.files)==null?void 0:Dn[0];if(Kt)try{const Hn=((zn=(Nn=Vt==null?void 0:Vt.target)==null?void 0:Nn.dataset)==null?void 0:zn.allowLegacyJson)==="true",Xn=typeof Kt.name=="string"?Kt.name:"",qn=Xn.toLowerCase(),Zn=!!Xn&&qn.endsWith(BACKUP_FILE_DOT_EXTENSION),sr=!!Xn&&qn.endsWith(".json");if(!Zn&&(!Hn||!sr))throw new Error(`Select a ${BACKUP_FILE_DOT_EXTENSION} backup${Hn?" or legacy .json file":""}.`);if(Kt.type){const nr=Kt.type.toLowerCase(),pr=[BACKUP_FILE_MIME,"application/octet-stream"],gr=["application/json","text/json","application/octet-stream"];if(Zn&&!pr.includes(nr))throw new Error("Unsupported backup file type.");if(!Zn&&Hn&&sr&&!gr.includes(nr))throw new Error("Unsupported legacy backup file type.")}const cr=await Kt.text(),xr=JSON.parse(cr);if(typeof c!="function")throw new Error("Restore handler is unavailable.");await Promise.resolve(c(xr)),_t({type:"success",message:`Restored data from ${Kt.name}`,timestamp:new Date().toISOString()})}catch(Hn){console.error(Hn),_t({type:"error",message:(Hn==null?void 0:Hn.message)||"Failed to restore backup.",timestamp:new Date().toISOString()})}finally{Vt!=null&&Vt.target&&(Vt.target.value="")}},[c]);reactExports.useEffect(()=>{const Vt=ot.name||ot.businessName;Vt&&!Tt&&zt(Vt)},[ot.name,ot.businessName,Tt]),reactExports.useEffect(()=>{var cn;const Vt=$n.current;if(!Vt)return;const Kt=Ln.current;if(Kt)try{Vt.focus&&Kt.focus();const Dn=((cn=Kt.value)==null?void 0:cn.length)??0,Nn=Math.max(0,Math.min(Vt.start??Dn,Dn)),zn=Math.max(0,Math.min(Vt.end??Dn,Dn));Kt.setSelectionRange(Nn,zn),Yn.current={start:Nn,end:zn}}catch{}$n.current=null},[rt.template]);const Bn=reactExports.useMemo(()=>{try{const Vt=Number(en),Kt=Number.isFinite(Vt)&&Vt>0?Vt:new Date().getFullYear(),cn=Number(pn),Dn=Number.isFinite(cn)&&cn>0?cn:Kt,Nn=Number(On),zn=Number.isFinite(Nn)&&Nn>0?Nn:1,Hn=splitMorphHetInput(Rn),Xn=Hn.morphs||[],qn=Hn.hets||[],Zn=buildIdTemplateContext({name:Tt,rawName:Tt,morphs:Xn,hets:qn,year:Kt,sex:Cn,birthYear:Dn});return buildIdFromTemplateNormalized(rt,Zn,zn)}catch{return"Template error"}},[rt,Tt,en,pn,Cn,On,Rn]);return jsxRuntimeExports.jsxs(Card,{title:"Setup",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(TabButton,{theme:i,active:gt==="info",onClick:()=>Lt("info"),children:"Breeder info"}),jsxRuntimeExports.jsx(TabButton,{theme:i,active:gt==="id",onClick:()=>Lt("id"),children:"ID wizard"}),jsxRuntimeExports.jsx(TabButton,{theme:i,active:gt==="export",onClick:()=>Lt("export"),children:"Data exports"}),jsxRuntimeExports.jsx(TabButton,{theme:i,active:gt==="backup",onClick:()=>Lt("backup"),children:"Backups"})]}),gt==="info"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Name"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:ot.name,onChange:Vt=>lt(Kt=>({...Kt,name:Vt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Business name"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:ot.businessName,onChange:Vt=>lt(Kt=>({...Kt,businessName:Vt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Email"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:ot.email,onChange:Vt=>lt(Kt=>({...Kt,email:Vt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Phone"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:ot.phone,onChange:Vt=>lt(Kt=>({...Kt,phone:Vt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Logo"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{id:"breeder-logo-upload",type:"file",accept:"image/*",className:"hidden",onChange:async Vt=>{const Kt=Vt.target.files&&Vt.target.files[0];if(Kt)try{const cn=await readFileAsDataURL(Kt);lt(Dn=>({...Dn,logoUrl:cn}))}catch(cn){console.error(cn)}}}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg border text-sm",onClick:()=>{const Vt=document.getElementById("breeder-logo-upload");Vt&&Vt.click()},children:"Upload logo"}),ot.logoUrl&&jsxRuntimeExports.jsx("img",{src:ot.logoUrl,alt:"logo",className:"w-20 h-20 object-cover rounded-md border"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-lg text-white",primaryBtnClass(i,!0)),onClick:()=>{alert("Breeder info saved locally for this demo"),typeof o=="function"&&o()},children:"Save"})})]}),gt==="id"&&jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"ID generator wizard"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Define how automatic IDs are created when you add animals, generate hatchlings, or import data."})]}),jsxRuntimeExports.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded-lg",onClick:dt,children:"Reset to default"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Template"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2 font-mono text-sm",ref:Ln,value:rt.template,onChange:Vt=>{ft({template:Vt.target.value}),Et()},onSelect:Et,onKeyUp:Et,onClick:Et,onFocus:Et,onBlur:Et,placeholder:DEFAULT_ID_GENERATOR_CONFIG.template}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:["Use tokens such as ",jsxRuntimeExports.jsx("code",{children:"[YROB]"}),", ",jsxRuntimeExports.jsx("code",{children:"[GEN3]"}),", ",jsxRuntimeExports.jsx("code",{children:"[SEX]"}),", and ",jsxRuntimeExports.jsx("code",{children:"[SEQ]"}),". The sequence token is requiredwell append it automatically if you omit it."]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sequence padding"}),jsxRuntimeExports.jsx("input",{type:"number",min:1,max:6,className:"mt-1 w-full border rounded-xl px-3 py-2",value:rt.sequencePadding,onChange:Vt=>ft({sequencePadding:parseInt(Vt.target.value,10)||1})}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Pads the [SEQ] number (e.g., 001)."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Letter casing"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:rt.uppercase,onChange:Vt=>ft({uppercase:Vt.target.checked})}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Force uppercase output"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:["Uncheck to keep mixed case like ",jsxRuntimeExports.jsx("em",{children:"Ath"}),"."]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Free text token value"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:rt.customText,onChange:Vt=>ft({customText:Vt.target.value}),placeholder:"BREED"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:["Rendered wherever ",jsxRuntimeExports.jsx("code",{children:"[TEXT]"})," appears in your template."]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-xl bg-neutral-50 p-4 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Live preview"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sample name"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:Tt,onChange:Vt=>zt(Vt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Year"}),jsxRuntimeExports.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:en,onChange:Vt=>un(Vt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Birth year"}),jsxRuntimeExports.jsx("input",{type:"number",className:"mt-1 w-full border rounded-xl px-3 py-2",value:pn,onChange:Vt=>qt(Vt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sex"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full border rounded-xl px-3 py-2 bg-white",value:Cn,onChange:Vt=>fn(Vt.target.value),children:[jsxRuntimeExports.jsx("option",{value:"F",children:"Female"}),jsxRuntimeExports.jsx("option",{value:"M",children:"Male"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sequence"}),jsxRuntimeExports.jsx("input",{type:"number",min:1,className:"mt-1 w-full border rounded-xl px-3 py-2",value:On,onChange:Vt=>An(Vt.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Sample genes"}),jsxRuntimeExports.jsx("input",{className:"mt-1 w-full border rounded-xl px-3 py-2",value:Rn,onChange:Vt=>wn(Vt.target.value),placeholder:"Enchi, Fire, Clown"}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Comma, slash, or newline separated list. Each gene contributes a three-letter chunk."})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:["Example ID: ",jsxRuntimeExports.jsx("code",{className:"font-mono text-base font-semibold",children:Bn})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-[11px] text-neutral-600",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-700",children:"Available tokens"}),jsxRuntimeExports.jsx("div",{className:"space-y-1.5",children:ID_TEMPLATE_TOKENS.map(({token:Vt,description:Kt})=>{const cn=Vt,Dn=(rt.template||"").includes(cn);return jsxRuntimeExports.jsxs("button",{type:"button","aria-pressed":Dn,onClick:()=>ct(Vt),className:cx("w-full flex items-center gap-3 rounded-lg border px-2 py-1.5 text-left transition",Dn?"border-blue-500/60 bg-blue-50 text-blue-700 shadow-sm":"border-neutral-200 bg-white hover:border-blue-400 hover:bg-blue-50/40"),children:[jsxRuntimeExports.jsx("span",{className:cx("font-mono text-[10px] px-1.5 py-0.5 rounded border",Dn?"border-blue-400 bg-white text-blue-700":"border-neutral-200 bg-neutral-50 text-neutral-700"),children:Vt}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-[11px] sm:text-xs text-neutral-600",children:Kt}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide text-neutral-500",children:Dn?"Remove":"Add"})]},Vt)})})]})]}),gt==="export"&&jsxRuntimeExports.jsx("div",{className:"border-t pt-4 space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Data exports"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Choose the columns to include and download PDF or spreadsheet summaries for animals and breeding projects."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-xl bg-white p-3 shadow-sm space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Animals"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Selected ",mt.length," of ",ANIMAL_EXPORT_FIELD_DEFS.length," fields."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm text-white",primaryBtnClass(i,!0),wt?"":"opacity-60 cursor-not-allowed"),onClick:Tn,disabled:!wt,children:"Export PDF"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm border",wt?"":"opacity-60 cursor-not-allowed"),onClick:In,disabled:!wt,children:"Export sheet (.xlsx)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-neutral-500",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"underline",onClick:Wn,children:"Select all"}),jsxRuntimeExports.jsx("button",{type:"button",className:"underline",onClick:Vn,children:"Reset defaults"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:vt.map(Vt=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-neutral-500",children:Vt.section}),jsxRuntimeExports.jsx("div",{className:"space-y-1.5",children:Vt.fields.map(Kt=>{const cn=Pt.has(Kt.key);return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-neutral-300",checked:cn,onChange:()=>Sn(Kt.key)}),jsxRuntimeExports.jsx("span",{children:Kt.label})]},Kt.key)})})]},Vt.section))}),!wt&&jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500",children:"Add animals to enable exports."}),Wt&&jsxRuntimeExports.jsxs("div",{className:cx("text-xs",Wt.type==="success"?"text-emerald-600":"text-red-600"),children:[Wt.message,Wt.timestamp?`  ${formatDateTimeForDisplay(Wt.timestamp)}`:""]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-xl bg-white p-3 shadow-sm space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Breeding projects"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Selected ",ht.length," of ",PAIRING_EXPORT_FIELD_DEFS.length," fields."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm text-white",primaryBtnClass(i,!0),kt?"":"opacity-60 cursor-not-allowed"),onClick:kn,disabled:!kt,children:"Export PDF"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm border",kt?"":"opacity-60 cursor-not-allowed"),onClick:Ot,disabled:!kt,children:"Export sheet (.xlsx)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-neutral-500",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"underline",onClick:hn,children:"Select all"}),jsxRuntimeExports.jsx("button",{type:"button",className:"underline",onClick:vn,children:"Reset defaults"})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Rt.map(Vt=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-neutral-500",children:Vt.section}),jsxRuntimeExports.jsx("div",{className:"space-y-1.5",children:Vt.fields.map(Kt=>{const cn=Bt.has(Kt.key);return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-neutral-300",checked:cn,onChange:()=>Gt(Kt.key)}),jsxRuntimeExports.jsx("span",{children:Kt.label})]},Kt.key)})})]},Vt.section))}),!kt&&jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500",children:"Build at least one pairing to enable exports."}),Xt&&jsxRuntimeExports.jsxs("div",{className:cx("text-xs",Xt.type==="success"?"text-emerald-600":"text-red-600"),children:[Xt.message,Xt.timestamp?`  ${formatDateTimeForDisplay(Xt.timestamp)}`:""]})]})]})]})}),gt==="backup"&&jsxRuntimeExports.jsxs("div",{className:"border-t pt-4 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Manual backup"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Download a Breeding Planner backup containing all animals, pairings, groups, breeder info, and settings."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm text-white",primaryBtnClass(i,!0)),onClick:gn,children:["Download backup (",BACKUP_FILE_DOT_EXTENSION,")"]}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg border text-sm",onClick:rn,children:"Save to vault"})]}),Qt&&jsxRuntimeExports.jsxs("span",{className:cx("text-xs",Qt.type==="success"?"text-emerald-600":"text-red-600"),children:[Qt.message,Qt.timestamp?`  ${formatDateTimeForDisplay(Qt.timestamp)}`:""]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 border-t pt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Automatic backups"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Keep an automatic snapshot while the planner is open in your browser."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 text-sm",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-neutral-500",children:"Schedule"}),jsxRuntimeExports.jsxs("select",{className:"border rounded-lg px-3 py-2 bg-white text-sm",value:St.frequency,onChange:Mt,children:[jsxRuntimeExports.jsx("option",{value:"off",children:"Off"}),jsxRuntimeExports.jsx("option",{value:"nightly",children:"Every night"}),jsxRuntimeExports.jsx("option",{value:"weekly",children:"Every week"}),jsxRuntimeExports.jsx("option",{value:"monthly",children:"Every month"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Last automatic backup: ",Ht,".",It&&(It.snakes||It.pairings||It.groups)?jsxRuntimeExports.jsxs("span",{children:[" ","Includes ",It.snakes," snakes, ",It.pairings," pairings, ",It.groups," groups."]}):null]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm text-white",primaryBtnClass(i,!0)),onClick:xn,children:"Run now"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-2 rounded-lg text-sm border",h?"":"opacity-60 cursor-not-allowed"),onClick:sn,disabled:!h,children:"Download latest snapshot"})]}),tn&&jsxRuntimeExports.jsxs("div",{className:cx("text-xs",tn.type==="success"?"text-emerald-600":"text-red-600"),children:[tn.message,tn.timestamp?`  ${formatDateTimeForDisplay(tn.timestamp)}`:""]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 border-t pt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Backup vault"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Stored backups with unique identifiers. Rename, download, restore, or remove them here."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-neutral-500",children:"Retention limit"}),jsxRuntimeExports.jsx("select",{className:"border rounded-lg px-3 py-2 bg-white text-sm w-full sm:w-auto",value:Ut,onChange:Yt,children:VAULT_LIMIT_OPTIONS.map(Vt=>{const Kt=Vt==="unlimited"?"unlimited":String(Vt),cn=Vt==="unlimited"?"Unlimited (no pruning)":`Keep last ${Vt}`;return jsxRuntimeExports.jsx("option",{value:Kt,children:cn},Kt)})})]}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500",children:Nt}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:At.length?`${At.length} backup${At.length===1?"":"s"} saved.`:"No backups saved yet."}),an&&jsxRuntimeExports.jsxs("div",{className:cx("text-xs",an.type==="success"?"text-emerald-600":"text-red-600"),children:[an.message,an.timestamp?`  ${formatDateTimeForDisplay(an.timestamp)}`:""]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:At.length?At.map(Vt=>{const Kt=formatDateTimeForDisplay(Vt.createdAt),cn=Vt.updatedAt&&Vt.updatedAt!==Vt.createdAt?formatDateTimeForDisplay(Vt.updatedAt):null;let Dn=null;try{const Nn=JSON.stringify(Vt.payload);Dn=Math.max(1,Math.ceil(Nn.length/1024))}catch{Dn=null}return jsxRuntimeExports.jsxs("div",{className:"border rounded-xl bg-white p-3 shadow-sm space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm text-neutral-800",children:Vt.name}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500 space-x-2",children:[jsxRuntimeExports.jsx("span",{children:Vt.source==="auto"?"Auto backup":"Manual backup"}),jsxRuntimeExports.jsxs("span",{children:["Created ",Kt]}),cn&&jsxRuntimeExports.jsxs("span",{children:["Updated ",cn]}),Dn&&jsxRuntimeExports.jsxs("span",{children:["~",Dn," KB"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border text-xs",onClick:()=>dn(Vt.id),children:"Download"}),jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-3 py-1.5 rounded-lg text-xs text-white",primaryBtnClass(i,!0)),onClick:()=>En(Vt.id),children:"Restore"}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border text-xs",onClick:()=>yn(Vt.id),children:"Rename"}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg border text-xs text-red-600",onClick:()=>Mn(Vt.id),children:"Delete"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-[10px] text-neutral-400 break-words",children:["ID: ",Vt.id]})]},Vt.id)}):jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Create a manual or automatic backup to populate the vault."})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 border-t pt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-sm",children:"Restore from backup"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Upload a Breeding Planner backup file or import a legacy JSON export to replace the current data."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("input",{ref:yt,type:"file",accept:`${BACKUP_FILE_MIME},${BACKUP_FILE_DOT_EXTENSION}`,className:"hidden",onChange:_n}),jsxRuntimeExports.jsx("input",{ref:jt,type:"file",accept:"application/json,.json","data-allow-legacy-json":"true",className:"hidden",onChange:_n}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg border text-sm",onClick:()=>{yt.current&&yt.current.click()},children:"Choose backup file"}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg border text-sm",onClick:()=>{jt.current&&jt.current.click()},children:"Import legacy JSON"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-500",children:[BACKUP_FILE_DOT_EXTENSION," or .json files"]})]}),bt&&jsxRuntimeExports.jsxs("div",{className:cx("text-xs",bt.type==="success"?"text-emerald-600":"text-red-600"),children:[bt.message,bt.timestamp?`  ${formatDateTimeForDisplay(bt.timestamp)}`:""]}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500",children:"Restoring replaces everything in the app. Download a backup first to stay safe."})]})]})]})}function PairingsSection({snakes:e,pairings:s,onDelete:i,onOpenSnake:o,onUpdatePairing:a,theme:c="blue",focusedPairingId:d=null,onFocusPairing:g,title:h,emptyMessage:j="No pairings yet. Use New pairing.",variant:b="default"}){const _=typeof i=="function"?i:null,st=typeof o=="function"?o:null,tt=Array.isArray(s)?s:[],nt=h||`Breeding Planner (${tt.length})`,xt=b==="collapsed",ut=xt?"flex flex-col gap-3":"space-y-4";return jsxRuntimeExports.jsx(Card,{title:nt,children:jsxRuntimeExports.jsxs("div",{className:ut,children:[tt.map((_e,$)=>jsxRuntimeExports.jsx(PairingInlineCard,{pairing:_e,pairingNumber:$+1,snakes:e,onDelete:_,onOpenSnake:st,onUpdatePairing:a,theme:c,isFocused:d===_e.id,onFocus:g?()=>g(_e.id):void 0,variant:b},_e.id)),!tt.length&&jsxRuntimeExports.jsx("div",{className:cx("text-sm text-neutral-500",xt&&"w-full"),children:j})]})})}function PairingInlineCard({pairing:e,pairingNumber:s,snakes:i,onDelete:o,onOpenSnake:a,onUpdatePairing:c,theme:d="blue",isFocused:g=!1,onFocus:h,variant:j="default"}){var Rt,Pt;const b=reactExports.useRef(null),[_,st]=reactExports.useState(!1),[tt,nt]=reactExports.useState(j!=="collapsed");reactExports.useEffect(()=>{if(g&&b.current)try{b.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},[g]),reactExports.useEffect(()=>{g&&typeof h=="function"&&h()},[g,h]);const xt=j==="collapsed";reactExports.useEffect(()=>{nt(!xt)},[xt]),reactExports.useEffect(()=>{xt&&g&&nt(!0)},[xt,g]);const ut=reactExports.useMemo(()=>withPairingLifecycleDefaults(e||{}),[e]),_e=reactExports.useMemo(()=>snakeById(i,ut.femaleId),[i,ut.femaleId]),$=reactExports.useMemo(()=>snakeById(i,ut.maleId),[i,ut.maleId]),at=(_e==null?void 0:_e.name)||ut.femaleId||"Female",it=($==null?void 0:$.name)||ut.maleId||"Male",et=`${at}  ${it}`,ot=reactExports.useMemo(()=>_e?combineMorphsAndHetsForDisplay(_e.morphs,_e.hets,_e.possibleHets):[],[_e]),rt=reactExports.useMemo(()=>$?combineMorphsAndHetsForDisplay($.morphs,$.hets,$.possibleHets):[],[$]),lt=_e?ot.length?ot.join(", "):"Normal":"",ft=$?rt.length?rt.join(", "):"Normal":"",dt=reactExports.useCallback(Bt=>{typeof c=="function"&&c(e.id,Bt)},[c,e.id]);reactExports.useEffect(()=>{dt(Bt=>{if(!Bt)return Bt;const Ut=(Bt.label||"").trim(),Nt=et;return!Ut&&Bt.label!==Nt?{...Bt,label:Nt}:Bt})},[et,dt]);const ct=ut.label||et,Et=reactExports.useMemo(()=>computePairingGenetics($,_e),[$,_e]),gt=reactExports.useMemo(()=>{if(!Et)return!1;const Bt=Array.isArray(Et.perGene)?Et.perGene:[],Ut=Array.isArray(Et.combined)?Et.combined:[];return Bt.length>0||Ut.length>0},[Et]);reactExports.useEffect(()=>{!gt&&_&&st(!1)},[gt,_]);const Lt=reactExports.useMemo(()=>i.filter(Bt=>{var an;if(!Bt)return!1;const Ut=Array.isArray(Bt.tags)?Bt.tags:[],Nt=Array.isArray(Bt.groups)?Bt.groups:[];if(!(Ut.includes("hatchling")||Nt.some(Wt=>/^hatchlings\b/i.test(Wt))))return!1;const Ht=Bt.pairingId===e.id||((an=Bt==null?void 0:Bt.metadata)==null?void 0:an.pairingId)===e.id,Qt=Bt.damId&&Bt.damId===e.femaleId&&Bt.sireId&&Bt.sireId===e.maleId,tn=typeof Bt.name=="string"&&ct&&Bt.name.includes(ct);return Ht||Qt||tn}),[i,e,ct]),Dt=reactExports.useMemo(()=>getBreedingCycleDerived(ut),[ut]),Ft=reactExports.useMemo(()=>computeBreedingCycleYear({clutchDate:Dt.clutchDate,preLayDate:Dt.preLayDate,ovulationDate:Dt.ovulationDate,hatchDate:Dt.hatchDate,startDate:ut.startDate||""}),[Dt.clutchDate,Dt.preLayDate,Dt.ovulationDate,Dt.hatchDate,ut.startDate]),bt=ut.startDate?formatDateForDisplay(ut.startDate):"",_t=Dt.hatchDate||((Rt=ut==null?void 0:ut.hatch)!=null&&Rt.recorded?(Pt=ut==null?void 0:ut.hatch)==null?void 0:Pt.date:"")||Dt.clutchDate||"",yt=_t?formatDateForDisplay(_t):"",jt=reactExports.useCallback(()=>{dt(Bt=>{const Ut=genMonthlyAppointments(Bt.startDate||localYMD(new Date),5),Nt={...Bt,appointments:Ut};return Nt.startDate=Nt.appointments&&Nt.appointments[0]?Nt.appointments[0].date:Nt.startDate,Nt})},[dt]),St=reactExports.useCallback(()=>{dt(Bt=>{var Nt;const Ut=[...Bt.appointments||[],{id:uid(),date:localYMD(new Date),lockObserved:!1,lockLoggedAt:null,notes:""}];return{...Bt,appointments:Ut,startDate:((Nt=Ut[0])==null?void 0:Nt.date)||Bt.startDate||null}})},[dt]),At=reactExports.useCallback(()=>{typeof a!="function"||!$||a($)},[a,$]),mt=reactExports.useCallback(()=>{typeof a!="function"||!_e||a(_e)},[a,_e]),ht=reactExports.useCallback(async()=>{var Nt,It;const Bt=(Nt=ut==null?void 0:ut.clutch)==null?void 0:Nt.date;if(!Bt){alert("Please add a clutch date before generating the clutch card.");return}let Ut=(It=ut==null?void 0:ut.clutch)==null?void 0:It.eggsTotal;if(Ut===""||typeof Ut>"u")Ut=null;else if(typeof Ut=="string"){const Ht=Number(Ut);Ut=Number.isFinite(Ht)?Ht:Ut}try{const Ht=$?rt.length?rt.join(", "):"Normal":"",Qt=_e?ot.length?ot.join(", "):"Normal":"";await exportClutchCardToPdf({clutchNumber:s,clutchDate:Bt,femaleName:at,femaleGenetics:Qt,maleName:it,maleGenetics:Ht,eggsTotal:Ut,label:ct})}catch(Ht){console.error("Failed to generate clutch card",Ht),alert("Unable to generate clutch card PDF.")}},[ut,s,at,it,ot,rt,ct,_e,$]),vt=cx("border rounded-xl shadow-sm bg-white focus:outline-none w-full p-3",g?"ring-2 ring-sky-400 ring-offset-1":"ring-0");return tt?jsxRuntimeExports.jsxs("div",{ref:b,className:vt,tabIndex:-1,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold leading-tight text-sm sm:text-base",children:jsxRuntimeExports.jsxs("div",{className:"truncate",children:["Clutch #",s,"  ",Ft]})}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-600 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"truncate text-[12px] text-neutral-800 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] text-neutral-500",children:""}),typeof a=="function"&&$?jsxRuntimeExports.jsx("button",{type:"button",className:"truncate font-medium text-left text-sky-600 hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded",onClick:At,children:it}):jsxRuntimeExports.jsx("span",{className:"truncate font-medium",children:it})]}),jsxRuntimeExports.jsx("div",{className:"truncate",children:ft})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"truncate text-[12px] text-neutral-800 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] text-neutral-500",children:""}),typeof a=="function"&&_e?jsxRuntimeExports.jsx("button",{type:"button",className:"truncate font-medium text-left text-sky-600 hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded",onClick:mt,children:at}):jsxRuntimeExports.jsx("span",{className:"truncate font-medium",children:at})]}),jsxRuntimeExports.jsx("div",{className:"truncate",children:lt})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1 flex-wrap mt-1",children:(e.goals||[]).slice(0,4).map(Bt=>jsxRuntimeExports.jsx(Badge,{children:Bt},Bt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 shrink-0",children:[typeof o=="function"&&jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>o(e.id),children:"Delete"}),tt&&jsxRuntimeExports.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>nt(!1),children:"Collapse"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Label"}),jsxRuntimeExports.jsx("input",{className:"w-full border rounded-xl px-3 py-2 text-sm",value:ct,onChange:Bt=>dt(Ut=>({...Ut,label:Bt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Starting date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"w-full border rounded-xl px-3 py-2 text-sm",value:ut.startDate||"",onChange:Bt=>dt(Ut=>({...Ut,startDate:Bt.target.value}))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)] gap-3 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm p-3 flex flex-col gap-3 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500",children:"Appointments"}),jsxRuntimeExports.jsx("div",{className:"text-[13px] text-neutral-500",children:"Manage pairing touchpoints"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:jt,children:"Generate 5 months"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:St,children:"+ Add appointment"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-w-0",children:[(ut.appointments||[]).map((Bt,Ut)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-[minmax(0,150px)_minmax(0,1fr)_auto] gap-2 items-center min-w-0",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1 text-sm min-w-0",value:Bt.date,onChange:Nt=>{const It=Nt.target.value;dt(Ht=>{const Qt=[...Ht.appointments||[]];return Qt[Ut]={...Qt[Ut],date:It},{...Ht,appointments:Qt}})}}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-3 gap-1",children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-xs",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!Bt.lockObserved,onChange:Nt=>{const It=Nt.target.checked;dt(Ht=>{const Qt=[...Ht.appointments||[]],tn=Qt[Ut]||{};let an=tn.notes||"",Wt=tn.lockLoggedAt||null;if(It){const Xt=nowIsoString();Wt=Xt,an=appendNoteLine(an,buildLockLogLine(Xt))}else Wt=null;return Qt[Ut]={...tn,lockObserved:It,lockLoggedAt:Wt,notes:an},{...Ht,appointments:Qt}})}}),"Lock"]}),jsxRuntimeExports.jsx("input",{placeholder:"Notes",className:"border rounded-lg px-2 py-1 text-xs flex-1 min-w-0",value:Bt.notes||"",onChange:Nt=>{const It=Nt.target.value;dt(Ht=>{const Qt=[...Ht.appointments||[]];return Qt[Ut]={...Qt[Ut],notes:It},{...Ht,appointments:Qt}})}})]}),jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-1 border rounded-lg",onClick:()=>{dt(Nt=>{var Ht;const It=[...Nt.appointments||[]];return It.splice(Ut,1),{...Nt,appointments:It,startDate:((Ht=It[0])==null?void 0:Ht.date)||Nt.startDate||null}})},children:"Remove"})]},Bt.id)),!(ut.appointments||[]).length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No appointments yet."})]})]}),jsxRuntimeExports.jsx(CycleTimersFrame,{lifecycle:Dt,theme:d})]}),jsxRuntimeExports.jsx(PairingLifecycleEditor,{edit:ut,setEdit:dt,theme:d,onCreateClutchCard:ht,lifecycle:Dt})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{rows:2,className:"w-full border rounded-xl px-3 py-2 text-sm",value:ut.notes||"",onChange:Bt=>dt(Ut=>({...Ut,notes:Bt.target.value}))})]}),Lt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium mb-1",children:"Hatchlings"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Lt.map(Bt=>jsxRuntimeExports.jsx("button",{type:"button",className:cx("px-2 py-0.5 text-xs rounded-full border bg-amber-50 text-amber-900",a?"hover:bg-amber-100 transition-colors":"cursor-default opacity-80"),onClick:a?()=>a(Bt):void 0,title:Bt.name||Bt.id,children:Bt.name||Bt.id},Bt.id))})]}),gt&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs("div",{className:"border rounded-xl bg-neutral-50",children:[jsxRuntimeExports.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-3 py-2 text-xs font-semibold text-neutral-700",onClick:()=>st(Bt=>!Bt),"aria-expanded":_,children:[jsxRuntimeExports.jsx("span",{children:"Genetics calculator"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-neutral-500",children:_?"Hide":"Show"})]}),_&&jsxRuntimeExports.jsx("div",{className:"border-t px-3 pb-3",children:jsxRuntimeExports.jsx(PairingGeneticsOdds,{male:$,female:_e,odds:Et})})]})})]}):jsxRuntimeExports.jsx("button",{ref:b,type:"button",className:cx(vt,"text-left cursor-pointer"),onClick:()=>{nt(!0),typeof h=="function"&&h()},"aria-expanded":!1,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500 shrink-0",children:["Clutch #",s,"  ",Ft]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"View details"}),jsxRuntimeExports.jsx("span",{"aria-hidden":"true",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-neutral-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-[12rem]",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] uppercase text-neutral-500 font-semibold",children:" Male"}),typeof a=="function"&&$?jsxRuntimeExports.jsx("button",{type:"button",className:"truncate font-medium text-sm text-left text-sky-600 hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded",onClick:At,children:it}):jsxRuntimeExports.jsx("span",{className:"font-medium truncate",children:it})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-[12rem]",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] uppercase text-neutral-500 font-semibold",children:" Female"}),typeof a=="function"&&_e?jsxRuntimeExports.jsx("button",{type:"button",className:"truncate font-medium text-sm text-left text-sky-600 hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded",onClick:mt,children:at}):jsxRuntimeExports.jsx("span",{className:"font-medium truncate",children:at})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-[10rem]",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] uppercase text-neutral-500 font-semibold",children:"Start"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:bt})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-[10rem]",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] uppercase text-neutral-500 font-semibold",children:"End"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:yt})]})]})]})})}function PairingGeneticsOdds({male:e,female:s,odds:i}){const o=reactExports.useMemo(()=>i||computePairingGenetics(e,s),[i,e,s]),a=(o==null?void 0:o.perGene)||[],c=(o==null?void 0:o.combined)||[];return!a.length&&!c.length?null:jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[a.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium mb-1",children:"Genetics odds"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:a.map(d=>jsxRuntimeExports.jsxs("div",{className:"rounded-lg border bg-neutral-50 px-2 py-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-neutral-700",children:d.gene}),jsxRuntimeExports.jsx("div",{className:"mt-1 flex flex-wrap gap-1.5",children:d.outcomes.map(g=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border bg-white px-2 py-0.5 text-[11px]",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:formatProbabilityPercent(g.probability)}),jsxRuntimeExports.jsx("span",{children:g.label})]},`${d.gene}-${g.label}`))}),d.notes?jsxRuntimeExports.jsx("div",{className:"mt-1 text-[10px] text-neutral-500",children:d.notes}):null]},d.gene))})]}),c.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium mb-1",children:"Combined genetics odds"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1.5",children:c.map(d=>{const g=(d.breakdown||[]).filter(h=>h.label&&h.label!=="Normal");return jsxRuntimeExports.jsxs("div",{className:"rounded-lg border bg-white px-2 py-1.5 text-[11px] text-neutral-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-900",children:formatProbabilityPercent(d.probability)}),jsxRuntimeExports.jsx("span",{children:d.label})]}),g.length?jsxRuntimeExports.jsx("div",{className:"mt-1 flex flex-wrap gap-1 text-[10px] text-neutral-500",children:g.map(h=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-1.5 py-0.5 bg-neutral-50",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-neutral-700",children:h.gene}),jsxRuntimeExports.jsx("span",{children:h.label})]},`${d.key}-${h.gene}`))}):null]},d.key)})})]})]})}function computePairingGenetics(e,s){if(!e||!s)return{perGene:[],combined:[]};const i=buildSnakeGeneProfile(e),o=buildSnakeGeneProfile(s),a=new Set([...i.keys(),...o.keys()]),c=[];for(const g of a){const h=i.get(g)||null,j=o.get(g)||null,b=(h==null?void 0:h.displayName)||(j==null?void 0:j.displayName)||"";if(!b||/^normal$/i.test(b))continue;const _=resolveGeneInheritanceType(b,h,j);if(!_)continue;let st=null;if(_==="Recessive")st=calcRecessiveOutcome(b,h,j);else if(_==="Incomplete Dominant"||_==="Dominant")st=calcDominantOutcome(b,h,j,_);else continue;if(!st||!st.outcomes||!st.outcomes.length||!st.outcomes.some(xt=>xt.label!=="Normal"&&xt.probability>1e-4))continue;const nt=[`Inheritance: ${_}`];st.sireDescriptor&&nt.push(`Sire: ${st.sireDescriptor}`),st.damDescriptor&&nt.push(`Dam: ${st.damDescriptor}`),c.push({gene:b,inheritance:_,outcomes:st.outcomes,notes:nt.join("  ")})}c.sort((g,h)=>g.gene.localeCompare(h.gene));const d=buildCombinedOutcomes(c);return{perGene:c,combined:d}}function buildCombinedOutcomes(e,s=12,i=.01){if(!Array.isArray(e)||!e.length)return[];let o=[{probability:1,breakdown:[],labelParts:[],geneOutcomes:[]}];e.forEach(c=>{const d=Array.isArray(c.outcomes)&&c.outcomes.length?c.outcomes:[{label:"Normal",probability:1}],g=new Map;o.forEach(h=>{d.forEach(j=>{const b=h.probability*(j.probability||0);if(b<=0)return;const _=[...h.breakdown,{gene:c.gene,label:j.label}],st=j.label&&j.label!=="Normal"?[...h.labelParts,j.label]:[...h.labelParts],tt=[...h.geneOutcomes,`${c.gene}:${j.label}`],nt=tt.join("|"),xt=g.get(nt);xt?xt.probability+=b:g.set(nt,{probability:b,breakdown:_,labelParts:st,geneOutcomes:tt})})}),o=Array.from(g.values()),o.sort((h,j)=>j.probability-h.probability),o.length>1024&&(o=o.slice(0,1024))}),o.sort((c,d)=>d.probability-c.probability);const a=[];return o.forEach(c=>{(c.probability>=i||a.length<s)&&a.push(c)}),a.slice(0,s).map(c=>({key:c.geneOutcomes.join("|"),label:c.labelParts.length?c.labelParts.join(" + "):"Normal (all genes)",probability:c.probability,breakdown:c.breakdown}))}function buildSnakeGeneProfile(e){const s=new Map;if(!e)return s;const i=(o,a)=>{s.has(o)||s.set(o,{key:o,displayName:a||"",group:null,visualCount:0,superVisual:!1,hetCount:0,possibleHetProbabilities:[],morphTokens:[],hetTokens:[]});const c=s.get(o);if(a&&((!c.displayName||c.displayName.length<a.length)&&(c.displayName=a),!c.group||c.group==="Other")){const d=getGeneDisplayGroup(a);d&&(c.group=d)}return c};return(Array.isArray(e.morphs)?e.morphs:[]).forEach(o=>{const a=parseVisualMorphToken(o);if(!a)return;const c=normalizeGeneCandidate(a.gene);if(!c)return;const d=i(c,a.displayName);d.visualCount+=1,d.superVisual=d.superVisual||!!a.isSuper,d.morphTokens.push(a.original)}),(Array.isArray(e.hets)?e.hets:[]).forEach(o=>{const a=parseHetDescriptor(o);if(!a)return;const c=normalizeGeneCandidate(a.gene);if(!c)return;const d=i(c,a.displayName);d.hetTokens.push(a.original),a.isCertain?d.hetCount+=1:d.possibleHetProbabilities.push(Math.max(0,Math.min(1,a.probability))),(!d.group||d.group==="Other")&&(d.group="Recessive")}),s}function parseVisualMorphToken(e){if(!e)return null;const s=String(e).trim();if(!s)return null;let i=s,o=!1;const a=i.match(/^super[\s-]+(.+)$/i);if(a&&a[1])o=!0,i=a[1].trim();else{const d=i.match(/^Super([A-Z].*)$/);d&&d[1]&&(o=!0,i=d[1].trim())}const c=i.replace(/\s+/g," ").trim();return c?{gene:c,displayName:c,isSuper:o,original:s}:null}function parseHetDescriptor(e){if(!e)return null;const s=String(e).trim();if(!s)return null;let i=s,o=1,a=!1;const c=i.match(/^(\d{1,3})%\s*(.+)$/i);if(c&&c[2]&&(a=!0,o=Math.min(1,parseInt(c[1],10)/100),i=c[2].trim()),/^possible\s+/i.test(i)?(a||(o=Math.min(o,.5)),i=i.replace(/^possible\s+/i,"").trim()):/^probable\s+/i.test(i)?(a||(o=Math.min(o,.66)),i=i.replace(/^probable\s+/i,"").trim()):/^maybe\s+/i.test(i)&&(a||(o=Math.min(o,.33)),i=i.replace(/^maybe\s+/i,"").trim()),i=i.replace(/^het\s+/i,"").trim(),!i)return null;const d=i,g=o>=.999;return{gene:i,displayName:d,probability:o,isCertain:g,original:s}}function resolveGeneInheritanceType(e,s,i){const o=[s==null?void 0:s.group,i==null?void 0:i.group,getGeneDisplayGroup(e)].filter(Boolean),a=o.find(d=>d&&d!=="Other");if(a)return a;const c=inferGeneTypeFromEntry(s)||inferGeneTypeFromEntry(i);return c||o[0]||null}function inferGeneTypeFromEntry(e){return e?(e.hetCount||0)>0||(e.possibleHetProbabilities||[]).some(s=>s>0)?"Recessive":e.superVisual||(e.visualCount||0)>0?"Incomplete Dominant":null:null}function getRecessiveParentStates(e){if(!e)return{descriptor:"Normal",states:[{genotype:"NN",probability:1}]};if((e.visualCount||0)>0)return{descriptor:"Visual",states:[{genotype:"rr",probability:1}]};if((e.hetCount||0)>0)return{descriptor:"Het",states:[{genotype:"Nr",probability:1}]};const s=(e.possibleHetProbabilities||[]).filter(i=>i>0);if(s.length){const i=Math.max(...s),o=Math.max(0,Math.min(1,i));return o>=.999?{descriptor:"Het (proven)",states:[{genotype:"Nr",probability:1}]}:{descriptor:`${formatProbabilityPercent(o)} possible het`,states:[{genotype:"Nr",probability:o},{genotype:"NN",probability:1-o}]}}return{descriptor:"Normal",states:[{genotype:"NN",probability:1}]}}function recessiveGametes(e){return e==="rr"?[{allele:"r",probability:1}]:e==="Nr"||e==="rN"?[{allele:"r",probability:.5},{allele:"N",probability:.5}]:[{allele:"N",probability:1}]}function calcRecessiveOutcome(e,s,i){const o=getRecessiveParentStates(s),a=getRecessiveParentStates(i),c=new Map;return o.states.forEach(g=>{a.states.forEach(h=>{const j=g.probability*h.probability;if(j<=0)return;const b=recessiveGametes(g.genotype),_=recessiveGametes(h.genotype);b.forEach(st=>{_.forEach(tt=>{const nt=j*st.probability*tt.probability;if(nt<=0)return;const xt=(st.allele==="r"?1:0)+(tt.allele==="r"?1:0),ut=xt===2?`Visual ${e}`:xt===1?`Het ${e}`:"Normal";c.set(ut,(c.get(ut)||0)+nt)})})})}),{outcomes:Array.from(c.entries()).map(([g,h])=>({label:g,probability:h})).filter(g=>g.probability>1e-4).sort((g,h)=>h.probability-g.probability),sireDescriptor:o.descriptor,damDescriptor:a.descriptor}}function getDominantParentStates(e,s){if(!e)return{descriptor:"Normal",states:[{copies:0,probability:1}]};if(e.superVisual)return{descriptor:s==="Incomplete Dominant"?"Super visual":"Homozygous visual",states:[{copies:2,probability:1}]};if((e.visualCount||0)>0)return{descriptor:"Visual",states:[{copies:1,probability:1}]};if((e.hetCount||0)>0)return{descriptor:"Carrier",states:[{copies:1,probability:1}]};const i=(e.possibleHetProbabilities||[]).filter(o=>o>0);if(i.length){const o=Math.max(...i),a=Math.max(0,Math.min(1,o));return a>=.999?{descriptor:"Visual (likely homozygous)",states:[{copies:1,probability:1}]}:{descriptor:`${formatProbabilityPercent(a)} possible carrier`,states:[{copies:1,probability:a},{copies:0,probability:1-a}]}}return{descriptor:"Normal",states:[{copies:0,probability:1}]}}function dominantGametes(e){return e>=2?[{allele:"A",probability:1}]:e>=1?[{allele:"A",probability:.5},{allele:"a",probability:.5}]:[{allele:"a",probability:1}]}function calcDominantOutcome(e,s,i,o){const a=getDominantParentStates(s,o),c=getDominantParentStates(i,o),d=new Map;return a.states.forEach(h=>{c.states.forEach(j=>{const b=h.probability*j.probability;if(b<=0)return;const _=dominantGametes(h.copies),st=dominantGametes(j.copies);_.forEach(tt=>{st.forEach(nt=>{const xt=b*tt.probability*nt.probability;if(xt<=0)return;const ut=(tt.allele==="A"?1:0)+(nt.allele==="A"?1:0);let _e;ut===0?_e="Normal":ut===2&&o==="Incomplete Dominant"?_e=`Super ${e}`:_e=e,d.set(_e,(d.get(_e)||0)+xt)})})})}),{outcomes:Array.from(d.entries()).map(([h,j])=>({label:h,probability:j})).filter(h=>h.probability>1e-4).sort((h,j)=>j.probability-h.probability),sireDescriptor:a.descriptor,damDescriptor:c.descriptor}}function formatProbabilityPercent(e){if(!Number.isFinite(e)||e<=0)return"0%";if(e>=.9995)return"100%";const s=e*100,i=Math.round(s*10)/10;return Number.isInteger(i)?`${i}%`:`${i.toFixed(1)}%`}function getBreedingCycleDerived(e={}){const s=(e==null?void 0:e.ovulation)||{},i=(e==null?void 0:e.preLayShed)||{},o=(e==null?void 0:e.clutch)||{},a=(e==null?void 0:e.hatch)||{},c=!!s.observed,d=!!i.observed,g=!!o.recorded,h=!!a.recorded,j=s.date||"",b=i.date||"",_=o.date||"",st=a.scheduledDate||"",tt=a.date||"",nt=j?addDaysYmd(j,21):null,xt=b?addDaysYmd(b,30):null,ut=_?addDaysYmd(_,60):null,_e=st||ut,$=o.eggsTotal,at=o.fertileEggs,it=o.slugs,et=typeof $=="number"&&Number.isFinite($)?Math.max(0,$):null,ot=typeof at=="number"&&Number.isFinite(at)?Math.max(0,at):null,rt=at===""||typeof at>"u"?"":String(at),lt=it===""||typeof it>"u"?"":String(it),ft=$===""||typeof $>"u"?"":String($),dt=c&&!d,ct=d&&!g,Et=g&&!h,bt=[dt&&nt?{key:"preLay",label:"Pre-Lay ETA",targetDate:nt,totalDays:21}:null,ct&&xt?{key:"eggLay",label:"Egg Lay ETA",targetDate:xt,totalDays:30}:null,Et&&ut?{key:"hatch",label:"Hatch ETA",targetDate:ut,totalDays:60}:null,!Et&&_e&&!h&&et!==0?{key:"scheduled",label:"Scheduled Hatch",targetDate:_e,totalDays:null}:null].filter(Boolean),_t=bt.length?bt[0]:null;return{ovulationObserved:c,preLayObserved:d,clutchRecorded:g,hatchedRecorded:h,ovulationDate:j,preLayDate:b,clutchDate:_,hatchScheduledDate:st,preLayWindowTarget:nt,eggLayingTarget:xt,hatchTarget:ut,hatchCountdownTarget:_e,hatchDate:tt,eggsTotalNumber:et,fertileEggsNumber:ot,clutchFertileValue:rt,clutchTotalValue:ft,clutchSlugsValue:lt,timerQueue:bt,activeTimer:_t,hasActiveTimers:bt.length>0}}function isPairingCompleted(e){if(!e)return!1;const s=withPairingLifecycleDefaults({...e});return!!getBreedingCycleDerived(s).hatchedRecorded}function computeBreedingCycleYear({clutchDate:e,preLayDate:s,ovulationDate:i,hatchDate:o,startDate:a}){const c=[e,s,i,o,a];for(const d of c){if(!d)continue;const g=Date.parse(d);if(!Number.isNaN(g))return String(new Date(g).getFullYear());const h=String(d).match(/^(\d{4})/);if(h)return h[1]}return"Unknown"}function summarizePairingCycleForFemale(e){if(!e)return null;const s=withPairingLifecycleDefaults({...e}),i=getBreedingCycleDerived(s),o=(s.appointments||[]).filter(tt=>tt&&tt.lockObserved&&(tt.lockLoggedAt||tt.date)).map(tt=>{const nt=tt.lockLoggedAt||tt.date||"",xt=Date.parse(nt),ut=formatDateTimeForDisplay(nt)||formatDateForDisplay(tt.date)||"";return{iso:nt,display:ut,notes:tt.notes?String(tt.notes).trim():"",timestamp:Number.isNaN(xt)?null:xt}}).filter(tt=>tt.iso).sort((tt,nt)=>{const xt=typeof tt.timestamp=="number"?tt.timestamp:1/0,ut=typeof nt.timestamp=="number"?nt.timestamp:1/0;return xt-ut}).map(({timestamp:tt,...nt})=>nt),a=i.ovulationDate||"",c=i.preLayDate||"",d=i.clutchDate||"",g=i.hatchDate||"";if(!(o.length||a||c||d||g))return null;const j=computeBreedingCycleYear({clutchDate:d,preLayDate:c,ovulationDate:a,hatchDate:g,startDate:s.startDate||""}),b=d||c||a||g||s.startDate||"",_=b&&!Number.isNaN(Date.parse(b))?Date.parse(b):null,st=s.label||`${s.femaleId||"Female"}  ${s.maleId||"Male"}`;return{id:s.id||`${s.femaleId||"female"}-${s.maleId||"male"}-${j}`,label:st,year:j,startDate:s.startDate||"",locks:o,ovulationDate:a,preLayDate:c,clutchDate:d,hatchDate:g,sortValue:_}}function getFemaleBreedingCyclesByYear(e,s=[]){if(!e||!Array.isArray(s)||!s.length)return[];const i=s.filter(c=>c&&c.femaleId===e).map(summarizePairingCycleForFemale).filter(Boolean);if(!i.length)return[];const o=new Map;i.forEach(c=>{const d=c.year||"Unknown";o.has(d)||o.set(d,[]),o.get(d).push(c)});const a=c=>{const d=Number(c);return Number.isFinite(d)?d:-1/0};return Array.from(o.entries()).sort((c,d)=>{const g=a(d[0])-a(c[0]);return g!==0?g:String(d[0]).localeCompare(String(c[0]))}).map(([c,d])=>{const g=d.slice().sort((h,j)=>{const b=typeof h.sortValue=="number"?h.sortValue:-1/0;return(typeof j.sortValue=="number"?j.sortValue:-1/0)-b}).map(({sortValue:h,...j})=>j);return{year:c,cycles:g}})}function PairingLifecycleEditor({edit:e,setEdit:s,theme:i="blue",onCreateClutchCard:o,lifecycle:a}){var Ut,Nt,It,Ht,Qt,tn,an,Wt,Xt,wt;const[c,d]=reactExports.useState(null),[g,h]=reactExports.useState({date:"",notes:""}),[j,b]=reactExports.useState({date:"",notes:""}),[_,st]=reactExports.useState({fertileEggs:"",slugs:""}),[tt,nt]=reactExports.useState({date:"",hatchedCount:"",notes:""}),xt=a||getBreedingCycleDerived(e),{ovulationObserved:ut,preLayObserved:_e,clutchRecorded:$,hatchedRecorded:at,ovulationDate:it,preLayDate:et,clutchDate:ot,preLayWindowTarget:rt,eggLayingTarget:lt,hatchTarget:ft,eggsTotalNumber:dt,fertileEggsNumber:ct,clutchFertileValue:Et,clutchSlugsValue:gt}=xt,Lt=reactExports.useMemo(()=>{if(typeof dt=="number")return dt;const kt=typeof ct=="number"?ct:(()=>{if(Et===""||typeof Et>"u")return null;const zt=Number(Et);return Number.isFinite(zt)&&zt>=0?zt:null})(),Tt=(()=>{if(gt===""||typeof gt>"u")return null;const zt=Number(gt);return Number.isFinite(zt)&&zt>=0?zt:null})();return kt===null&&Tt===null?null:Math.max(0,kt??0)+Math.max(0,Tt??0)},[dt,ct,Et,gt]),Dt=typeof ct=="number"?ct:typeof dt=="number"?dt:null,Ft=typeof ct=="number"?"fertile eggs":"eggs laid",bt=typeof o=="function"&&$&&!!ot;reactExports.useEffect(()=>{var kt,Tt;c==="ovulation"&&h({date:((kt=e==null?void 0:e.ovulation)==null?void 0:kt.date)||localYMD(new Date),notes:((Tt=e==null?void 0:e.ovulation)==null?void 0:Tt.notes)||""})},[c,(Ut=e==null?void 0:e.ovulation)==null?void 0:Ut.date,(Nt=e==null?void 0:e.ovulation)==null?void 0:Nt.notes]),reactExports.useEffect(()=>{var kt,Tt;c==="preLay"&&b({date:((kt=e==null?void 0:e.preLayShed)==null?void 0:kt.date)||localYMD(new Date),notes:((Tt=e==null?void 0:e.preLayShed)==null?void 0:Tt.notes)||""})},[c,(It=e==null?void 0:e.preLayShed)==null?void 0:It.date,(Ht=e==null?void 0:e.preLayShed)==null?void 0:Ht.notes]),reactExports.useEffect(()=>{c==="clutch"&&st({fertileEggs:Et===""?"":Et,slugs:gt===""?"0":gt})},[c,Et,gt]),reactExports.useEffect(()=>{var kt,Tt,zt;c==="hatched"&&nt({date:((kt=e==null?void 0:e.hatch)==null?void 0:kt.date)||localYMD(new Date),hatchedCount:(Tt=e==null?void 0:e.hatch)!=null&&Tt.hatchedCount?String(e.hatch.hatchedCount):"",notes:((zt=e==null?void 0:e.hatch)==null?void 0:zt.notes)||""})},[c,e==null?void 0:e.hatch]);const _t=reactExports.useCallback(kt=>{s(Tt=>{const zt=withPairingLifecycleDefaults({...Tt});if(kt)zt.clutch.recorded=!0,zt.clutch.date=zt.clutch.date||localYMD(new Date),!zt.hatch.scheduledDate&&zt.clutch.date&&(zt.hatch.scheduledDate=addDaysYmd(zt.clutch.date,60));else{const en=pairingLifecycleDefaults();zt.clutch={...en.clutch},zt.hatch={...en.hatch}}return zt})},[s]),yt=reactExports.useCallback((kt,Tt)=>{s(zt=>{const en=withPairingLifecycleDefaults({...zt});if(en.clutch.recorded=!0,kt==="date"){const un=Tt||"";en.clutch.date=un,!en.hatch.scheduledDate&&un&&(en.hatch.scheduledDate=addDaysYmd(un,60))}else if(kt==="fertileEggs"||kt==="slugs"){const un=Tt??"";if(un==="")en.clutch[kt]="";else{const Cn=Number(un);en.clutch[kt]=Number.isFinite(Cn)?Math.max(0,Cn):en.clutch[kt]}const pn=typeof en.clutch.fertileEggs=="number"&&Number.isFinite(en.clutch.fertileEggs)?Math.max(0,en.clutch.fertileEggs):null,qt=typeof en.clutch.slugs=="number"&&Number.isFinite(en.clutch.slugs)?Math.max(0,en.clutch.slugs):null;if(pn===null&&qt===null)en.clutch.eggsTotal="";else{const Cn=Math.max(0,pn??0)+Math.max(0,qt??0);en.clutch.eggsTotal=Cn}}else kt==="notes"&&(en.clutch.notes=Tt||"");return en})},[s]),jt=reactExports.useCallback(()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});return Tt.hatch={...pairingLifecycleDefaults().hatch},Tt})},[s]),St=reactExports.useCallback(()=>{d("hatched")},[d]),At=reactExports.useCallback(()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});let zt=Number(_.fertileEggs);(!Number.isFinite(zt)||zt<0)&&(zt=0);let en=_.slugs===""?0:Number(_.slugs);return(!Number.isFinite(en)||en<0)&&(en=0),Tt.clutch.recorded=!0,Tt.clutch.date=Tt.clutch.date||localYMD(new Date),Tt.clutch.fertileEggs=zt,Tt.clutch.slugs=en,Tt.clutch.eggsTotal=zt+en,!Tt.hatch.scheduledDate&&Tt.clutch.date&&(Tt.hatch.scheduledDate=addDaysYmd(Tt.clutch.date,60)),Tt}),d(null)},[_,s,d]),mt=reactExports.useCallback(()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});if(Tt.ovulation.observed=!0,Tt.ovulation.date=g.date||"",Tt.ovulation.notes=g.notes||"",Tt.ovulation.date&&(Tt.appointments=trimAppointmentsAfterOvulation(Tt.appointments||[],Tt.ovulation.date)),Tt.preLayShed.observed&&Tt.preLayShed.date){const zt=diffInDays(Tt.ovulation.date,Tt.preLayShed.date);Tt.preLayShed.intervalFromOvulation=Number.isFinite(zt)?zt:null}return Tt}),d(null)},[g,s,d]),ht=reactExports.useCallback(()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});Tt.preLayShed.observed=!0,Tt.preLayShed.date=j.date||"",Tt.preLayShed.notes=j.notes||"";const zt=Tt.ovulation.observed&&Tt.ovulation.date&&j.date?diffInDays(Tt.ovulation.date,j.date):null;return Tt.preLayShed.intervalFromOvulation=Number.isFinite(zt)?zt:null,Tt}),d(null)},[j,s,d]),vt=reactExports.useMemo(()=>{const kt=_.fertileEggs;if(kt==="")return!0;const Tt=Number(kt);if(!Number.isFinite(Tt)||Tt<0)return!0;if(_.slugs==="")return!1;const zt=Number(_.slugs);return!Number.isFinite(zt)||zt<0},[_]),Rt=reactExports.useMemo(()=>{const kt=_.fertileEggs,Tt=_.slugs,zt=kt!==""&&Number.isFinite(Number(kt)),en=Tt!==""&&Number.isFinite(Number(Tt));if(!zt&&!en)return null;const un=zt?Math.max(0,Number(kt)):0,pn=en?Math.max(0,Number(Tt)):0;return un+pn},[_]),Pt=reactExports.useCallback(()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});let zt=tt.hatchedCount===""?0:Number(tt.hatchedCount);(!Number.isFinite(zt)||zt<0)&&(zt=0);const en=typeof Tt.clutch.fertileEggs=="number"&&Number.isFinite(Tt.clutch.fertileEggs)?Math.max(0,Tt.clutch.fertileEggs):typeof Tt.clutch.eggsTotal=="number"&&Number.isFinite(Tt.clutch.eggsTotal)?Math.max(0,Tt.clutch.eggsTotal):null;return typeof en=="number"&&(zt=Math.min(zt,en)),Tt.hatch={...Tt.hatch,recorded:!0,date:tt.date,hatchedCount:zt,notes:tt.notes||""},Tt}),d(null)},[tt,s]),Bt="rounded-xl border border-neutral-200 bg-white p-2 flex flex-col gap-2 text-[11px] min-w-0 overflow-hidden";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm p-3 flex flex-col gap-3 h-full max-h-[60vh] min-h-0 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500",children:"Breeding cycle"}),jsxRuntimeExports.jsx("div",{className:"text-[12px] text-neutral-500",children:"Track sheds, clutches, and hatch"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2.5 min-w-0 overflow-auto pr-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2.5 lg:grid lg:grid-cols-2 lg:gap-2.5 lg:items-stretch",children:[jsxRuntimeExports.jsxs("div",{className:cx(Bt,"flex-1 lg:h-full"),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 text-center space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide text-neutral-500",children:"Ovulation"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-700 text-[13px]",children:it?formatDateForDisplay(it):""}),ut&&((Qt=e==null?void 0:e.ovulation)!=null&&Qt.notes)?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 leading-snug max-h-12 overflow-hidden mx-auto",children:e.ovulation.notes}):null,ut&&rt&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500",children:["Pre-lay window ",formatDateForDisplay(rt)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>d("ovulation"),children:ut?"Edit details":"Log ovulation"}),ut&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});return Tt.ovulation={observed:!1,date:"",notes:""},Tt.preLayShed={...pairingLifecycleDefaults().preLayShed},Tt})},children:"Clear"})]})]}),jsxRuntimeExports.jsxs("div",{className:cx(Bt,"flex-1 lg:h-full"),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 text-center space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide text-neutral-500",children:"Pre-Lay Shed"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-700 text-[13px]",children:et?formatDateForDisplay(et):""}),_e&&Number.isFinite((tn=e==null?void 0:e.preLayShed)==null?void 0:tn.intervalFromOvulation)&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500",children:[e.preLayShed.intervalFromOvulation," days after ovulation"]}),_e&&((an=e==null?void 0:e.preLayShed)!=null&&an.notes)?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 leading-snug max-h-12 overflow-hidden mx-auto",children:e.preLayShed.notes}):null,_e&&lt&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500",children:["Egg window ",formatDateForDisplay(lt)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>d("preLay"),disabled:!ut,children:_e?"Edit details":"Log pre-lay shed"}),_e&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>{s(kt=>{const Tt=withPairingLifecycleDefaults({...kt});return Tt.preLayShed={...pairingLifecycleDefaults().preLayShed},Tt})},children:"Clear"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:cx(Bt,"w-full lg:max-w-xl"),children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold uppercase tracking-wide text-neutral-500",children:"Clutch & Hatch"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-700 text-[13px]",children:$&&ot?`Laid ${formatDateForDisplay(ot)}`:"No egg laid recorded"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 w-full text-left space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-semibold uppercase tracking-wide text-neutral-500",children:"Egg laying date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2 text-xs",value:ot,onChange:kt=>yt("date",kt.target.value),disabled:!$})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-semibold uppercase tracking-wide text-neutral-500",children:"Number of fertile eggs"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",className:"mt-1 w-full border rounded-xl px-3 py-2 text-xs",value:Et,onChange:kt=>yt("fertileEggs",kt.target.value),disabled:!$})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-[10px] font-semibold uppercase tracking-wide text-neutral-500",children:"Number of slugs"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",className:"mt-1 w-full border rounded-xl px-3 py-2 text-xs",value:gt,onChange:kt=>yt("slugs",kt.target.value),disabled:!$})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex flex-col gap-2 items-center text-xs text-neutral-600",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500",children:$?"Egg laid recorded":"No egg laid yet"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-neutral-500",children:[jsxRuntimeExports.jsx("span",{children:"Expected on"}),jsxRuntimeExports.jsx("span",{className:"text-neutral-700 font-medium",children:ft?formatDateForDisplay(ft):""})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[!$&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>d("clutch"),children:"Eggs laid"}),$&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:()=>o==null?void 0:o(),disabled:!bt,children:"Create clutch card"}),!at&&jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:St,children:"Eggs hatched"}),jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg text-rose-600 border-rose-300",onClick:()=>_t(!1),children:"Clear egg record"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-neutral-200 bg-neutral-50 px-3 py-2 mt-2 flex items-start justify-between gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] font-medium uppercase tracking-wide text-neutral-500",children:"Hatched"}),jsxRuntimeExports.jsx("div",{className:"text-[13px] text-neutral-700",children:at&&((Wt=e==null?void 0:e.hatch)!=null&&Wt.date)?`Hatched ${formatDateForDisplay(e.hatch.date)}`:"Not yet"}),at&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:["Hatched count: ",((Xt=e==null?void 0:e.hatch)==null?void 0:Xt.hatchedCount)||0]}),(wt=e==null?void 0:e.hatch)!=null&&wt.notes?jsxRuntimeExports.jsxs("div",{children:["Notes: ",e.hatch.notes]}):null]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-end gap-2",children:at&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-2",children:[jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg",onClick:St,children:"View / edit hatch"}),jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2.5 py-1 border rounded-lg text-rose-600 border-rose-300",onClick:jt,children:"Clear hatch record"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-[11px] text-neutral-500",children:["Total eggs laid: ",typeof Lt=="number"?Lt:""," (fertile + slugs)"]})]})})]})]}),c==="ovulation"&&jsxRuntimeExports.jsx(FloatingDialog,{title:"Ovulation details",theme:i,onClose:()=>d(null),onConfirm:mt,disableConfirm:!g.date,children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Ovulation date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2",value:g.date,onChange:kt=>h(Tt=>({...Tt,date:kt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{rows:3,className:"mt-1 w-full border rounded-xl px-3 py-2",value:g.notes,onChange:kt=>h(Tt=>({...Tt,notes:kt.target.value}))})]})]})}),c==="preLay"&&jsxRuntimeExports.jsx(FloatingDialog,{title:"Pre-Lay shed details",theme:i,onClose:()=>d(null),onConfirm:ht,disableConfirm:!j.date,children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Pre-Lay shed date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2",value:j.date,onChange:kt=>b(Tt=>({...Tt,date:kt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{rows:3,className:"mt-1 w-full border rounded-xl px-3 py-2",value:j.notes,onChange:kt=>b(Tt=>({...Tt,notes:kt.target.value}))})]})]})}),c==="clutch"&&jsxRuntimeExports.jsx(FloatingDialog,{title:"Log eggs laid",theme:i,onClose:()=>d(null),onConfirm:At,disableConfirm:vt,children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Number of fertile eggs"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",className:"mt-1 w-full border rounded-xl px-3 py-2",value:_.fertileEggs,onChange:kt=>{const Tt=kt.target.value;if(Tt===""){st(en=>({...en,fertileEggs:""}));return}let zt=Number(Tt);Number.isFinite(zt)&&(zt<0&&(zt=0),st(en=>({...en,fertileEggs:String(zt)})))}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Number of slugs"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",className:"mt-1 w-full border rounded-xl px-3 py-2",value:_.slugs,onChange:kt=>{const Tt=kt.target.value;if(Tt===""){st(en=>({...en,slugs:""}));return}let zt=Number(Tt);Number.isFinite(zt)&&(zt<0&&(zt=0),st(en=>({...en,slugs:String(zt)})))}}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:["Total eggs laid will be saved as fertile eggs + slugs",typeof Rt=="number"?` = ${Rt}`:"","."]})]})]})}),c==="hatched"&&jsxRuntimeExports.jsx(FloatingDialog,{title:"Hatch details",theme:i,onClose:()=>d(null),onConfirm:Pt,disableConfirm:!tt.date,children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Hatch date"}),jsxRuntimeExports.jsx("input",{type:"date",className:"mt-1 w-full border rounded-xl px-3 py-2",value:tt.date,onChange:kt=>nt(Tt=>({...Tt,date:kt.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Number hatched"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:Dt??void 0,className:"mt-1 w-full border rounded-xl px-3 py-2",value:tt.hatchedCount,onChange:kt=>{const Tt=kt.target.value;if(Tt===""){nt(en=>({...en,hatchedCount:""}));return}let zt=Number(Tt);(!Number.isFinite(zt)||zt<0)&&(zt=0),Dt!==null&&zt>Dt&&(zt=Dt),nt(en=>({...en,hatchedCount:String(zt)}))}}),Dt!==null&&jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-neutral-500",children:["Maximum allowed: ",Dt," (",Ft,")"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Notes"}),jsxRuntimeExports.jsx("textarea",{rows:3,className:"mt-1 w-full border rounded-xl px-3 py-2",value:tt.notes,onChange:kt=>nt(Tt=>({...Tt,notes:kt.target.value}))})]})]})})]})}function CycleTimersFrame({lifecycle:e,theme:s="blue",className:i}){const o=(e==null?void 0:e.timerQueue)||[],a=o.length>0,[c,d]=reactExports.useState(new Date),g=!!(e!=null&&e.hatchedRecorded),h=(e==null?void 0:e.hatchDate)||"",j=!!(e&&(e.ovulationObserved||e.preLayObserved||e.clutchRecorded||e.hatchedRecorded||e.ovulationDate||e.preLayDate||e.clutchDate));return reactExports.useEffect(()=>{if(a||g)return;const b=setInterval(()=>d(new Date),6e4);return()=>clearInterval(b)},[a,g]),!a&&!j?null:g?jsxRuntimeExports.jsxs("div",{className:cx("border rounded-2xl bg-white shadow-sm p-4 sm:p-5 flex flex-col gap-4",i),children:[jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-end justify-between gap-2",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500",children:"Cycle timers"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600",children:"Breeding cycle status"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 text-sm text-neutral-600",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-neutral-700",children:"This breeding cycle is over."}),h?jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:["Hatched on ",formatDateForDisplay(h)]}):null]})]}):jsxRuntimeExports.jsxs("div",{className:cx("border rounded-2xl bg-white shadow-sm p-4 sm:p-5 flex flex-col gap-4",i),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-neutral-500",children:"Cycle timers"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600",children:"Upcoming breeding milestones"})]}),a&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500",children:[o.length," active"]})]}),a?jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:o.map(b=>jsxRuntimeExports.jsx(CountdownBadge,{label:b.label,targetDate:b.targetDate,totalDays:typeof b.totalDays=="number"?b.totalDays:null,theme:s,size:"lg"},b.key))}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 text-sm text-neutral-600",children:[jsxRuntimeExports.jsx("div",{children:"No active timers yet. Log ovulation, pre-lay, or clutch events to start tracking milestones."}),jsxRuntimeExports.jsxs("div",{className:"text-xs font-medium text-neutral-500",children:["Current time: ",formatDateTimeForDisplay(c)]})]})]})}function FloatingDialog({title:e,onClose:s,onConfirm:i,children:o,theme:a="blue",confirmLabel:c="Save",disableConfirm:d=!1}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[70]",onClick:s,children:jsxRuntimeExports.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-xl border p-5",onClick:g=>g.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:e}),jsxRuntimeExports.jsx("button",{className:"text-sm px-2 py-1",onClick:s,children:"Close"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-auto pr-1",children:o}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:s,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm",primaryBtnClass(a,!0)),onClick:i,disabled:d,children:c})]})]})})}function CountdownBadge({label:e,targetDate:s,totalDays:i=null,theme:o="blue",size:a="sm"}){const[c,d]=reactExports.useState(Date.now());if(reactExports.useEffect(()=>{if(!s)return;const nt=setInterval(()=>d(Date.now()),6e4);return()=>clearInterval(nt)},[s]),!s)return null;const g=parseYmd(s);if(!g)return null;const h=g.getTime()-c,j=h<0,b=j?`Overdue by ${formatDurationFromMs(-h)}`:`Due in ${formatDurationFromMs(h)}`;let _=null;if(i&&i>0){const nt=i*864e5,xt=nt-h;_=j?100:Math.min(100,Math.max(0,xt/nt*100))}const st=o==="green"?"bg-emerald-100 border border-emerald-300 text-emerald-700":o==="dark"?"bg-slate-200 border border-slate-400 text-slate-800":"bg-sky-100 border border-sky-300 text-sky-700",tt=a==="lg"?"px-4 py-3 rounded-2xl gap-3 text-sm sm:text-base":"px-3 py-1.5 rounded-full gap-2 text-xs";return jsxRuntimeExports.jsxs("div",{className:cx("countdown-badge flex flex-wrap items-center font-semibold w-full",tt,st,j&&"overdue"),children:[_!==null&&jsxRuntimeExports.jsx("span",{className:"countdown-progress",style:{width:`${_}%`}}),jsxRuntimeExports.jsx("span",{className:"break-words leading-tight",children:e}),jsxRuntimeExports.jsx("span",{className:"break-words leading-tight",children:b}),jsxRuntimeExports.jsx("span",{className:"break-words leading-tight",children:formatDateForDisplay(s)})]})}function formatDurationFromMs(e){const s=Math.max(0,Math.floor(e)),i=Math.round(s/6e4),o=Math.floor(i/(60*24)),a=Math.floor((i-o*60*24)/60),c=i-o*60*24-a*60;return o>0?`${o}d ${a}h`:a>0?`${a}h ${c}m`:`${Math.max(c,0)}m`}function trimAppointmentsAfterOvulation(e=[],s){return!s||!Array.isArray(e)||!e.length||e.filter(o=>(o.date||"")<=s).length<3?e:e.filter(o=>(o.date||"")<=s)}function diffInDays(e,s){const i=parseYmd(e),o=parseYmd(s);if(!i||!o)return null;const a=o.getTime()-i.getTime();return Math.round(a/864e5)}function parseYmd(e){if(!e)return null;const[s,i,o]=String(e).split("-").map(Number);if(!s||!i||!o)return null;const a=new Date(s,i-1,o,12);return isNaN(a.getTime())?null:a}function ImportSection({importText:e,setImportText:s,importPreview:i,setImportPreview:o,runImportPreview:a,applyImport:c,theme:d="blue",onCancel:g}){const[h,j]=reactExports.useState(null),[b,_]=reactExports.useState(!1),st=reactExports.useRef();return jsxRuntimeExports.jsxs(Card,{title:"Import snakes from text",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Paste text exported from the PDF"}),jsxRuntimeExports.jsx("textarea",{className:"mt-1 w-full h-64 border rounded-xl px-3 py-2",value:e,onChange:tt=>s(tt.target.value.replace(/Ball Python\s*\(Python regius\)/ig,"")),placeholder:"Paste content here..."}),jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium",children:"Upload PDF"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{id:"import-pdf-input",type:"file",accept:"application/pdf",className:"hidden",onChange:async tt=>{const nt=tt.target.files&&tt.target.files[0];if(j(nt||null),!!nt){_(!0);try{const xt=await extractPdfText(nt);s(xt);let ut=parseFourLineBlocks(xt);if(ut&&ut.length){const et=ut.map(ot=>{const rt=ensureSex(ot.sex,"F");return{name:ot.name,sex:rt,morphs:ot.morphs||[],hets:ot.hets||[],previewText:formatParsedPreview({...ot,sex:rt})}});o(et);return}const $=xt.split(/\r?\n/).map(et=>et.trim()).filter(Boolean).map(et=>parseOneLineSnake(et)).filter(Boolean);if($&&$.length){const et=$.map(ot=>{const rt=[],lt=[];(ot.genetics||[]).forEach(dt=>{const ct=String(dt).toLowerCase();/^het\b|\bhet\b|^66%|^50%|possible/i.test(ct)?lt.push(dt):rt.push(dt)});const ft=ensureSex(ot.gender&&ot.gender[0],"F");return{name:ot.name,sex:ft,morphs:rt,hets:lt,previewText:formatParsedPreview({name:ot.name,id:ot.id||"",sex:ft,morphs:rt,hets:lt})}});o(et);return}const at=parsePipeSeparatedLines(xt);if(at&&at.length){const et=at.map(ot=>{const rt=ensureSex(ot.sex,"F");return{name:ot.name,sex:rt,morphs:ot.morphs||[],hets:ot.hets||[],previewText:formatParsedPreview({name:ot.name,id:"",sex:rt,morphs:ot.morphs,hets:ot.hets})}});o(et);return}const it=parseReptileBuddyText(xt);o(it)}catch(xt){console.error("pdf parse failed",xt),alert("Failed to parse PDF")}finally{_(!1)}}}}),jsxRuntimeExports.jsx("input",{id:"import-sheet-input",ref:st,type:"file",accept:".csv,.xlsx,.xls,text/csv",className:"hidden",onChange:async tt=>{const nt=tt.target.files&&tt.target.files[0];if(nt){_(!0);try{const xt=(nt.name||"").toLowerCase();let ut="";if(xt.endsWith(".csv")||xt.endsWith(".txt"))ut=await nt.text();else if(xt.endsWith(".xlsx")||xt.endsWith(".xls")){let lt;try{lt=await __vitePreload(()=>import("./xlsx-D_0l8YDs.js"),[])}catch(gt){console.error("xlsx import failed",gt),alert('To import Excel files please install the "xlsx" package: npm install xlsx');return}const ft=await nt.arrayBuffer(),dt=lt.read(ft,{type:"array"}),ct=dt.SheetNames[0],Et=dt.Sheets[ct];ut=lt.utils.sheet_to_csv(Et)}else{alert("Unsupported file type. Please upload CSV or XLSX.");return}const _e=parseCsvToRows(ut||"");if(!_e||!_e.length){o([]);return}const{index:$,hasHeader:at}=buildHeaderIndex(_e[0]||[]),it=lt=>{if(!lt||!lt.length)return null;const ft=lt.map(It=>(It||"").toString());if(ft.every(It=>!It.trim()))return null;const dt=It=>{const Ht=getHeaderValues(ft,$,It);return Ht.length?Ht[0].trim():""},ct=It=>getHeaderValues(ft,$,It).flatMap(splitMultiValueCell),Et=dt("name"),gt=dt("id"),Lt=dt("sex"),Dt=dt("status"),Ft=dt("year"),bt=dt("weight"),_t=dt("birthDate"),yt=dt("notes"),jt=[...ct("genetics"),...ct("morphs")],St=ct("hets").map(It=>{const Ht=It.trim();if(!Ht)return"";const Qt=Ht.toLowerCase();return Qt.includes("het")||/\d+%/.test(Qt)||Qt.includes("possible")?Ht:`het ${Ht}`}).filter(Boolean),{morphs:At,hets:mt}=normalizeMorphHetLists([...jt,...St]),ht=Array.from(new Set(ct("groups"))),vt=Array.from(new Set(ct("tags"))),Rt=ensureSex(Lt,"F"),Pt=Number(Ft),Bt=bt&&bt.trim()?bt:"",Ut=normalizeDateInput(_t)||_t||null,Nt=Dt?Dt.trim():"";return!Et&&!gt&&!At.length&&!mt.length&&!ht.length&&!vt.length?null:{name:Et,id:gt,sex:Rt,morphs:At,hets:mt,groups:ht,tags:vt,weight:Bt,year:Number.isFinite(Pt)?Pt:void 0,birthDate:Ut,status:Nt,notes:yt||void 0}},et=at?_e.slice(1):_e;let ot=at?et.map(it).filter(Boolean):[];if(!ot.length){let lt=_e;_e[0].map(ct=>(ct||"").toString().toLowerCase()).some(ct=>ct.includes("name")||ct.includes("gender")||ct.includes("gen"))&&(lt=_e.slice(1)),ot=lt.map(ct=>{const Et=ct.map(ht=>(ht||"").trim());if(!Et.length||Et.every(ht=>!ht))return null;const gt=Et[0]||"",Lt=(Et[1]||"").trim(),Dt=(Et[2]||"").trim(),Ft=(Et[3]||"").trim(),bt=(Et[4]||"").trim(),_t=Lt.toLowerCase();let yt="F";/^f$/.test(_t)||/\bfemale\b/.test(_t)?yt="F":(/^m$/.test(_t)||/\bmale\b/.test(_t))&&(yt="M");const jt=Dt?Dt.split(GENE_TOKEN_SPLIT_REGEX).map(ht=>ht.trim()).filter(Boolean):[],St=normalizeMorphHetLists(jt),At=Ft?Ft.split(/[;,|]/).map(ht=>ht.trim()).filter(Boolean):[],mt=bt?bt.split(/[;,|]/).map(ht=>ht.trim()).filter(Boolean):[];return gt||St.morphs.length||St.hets.length||At.length||mt.length?{name:gt,id:"",sex:yt,morphs:St.morphs,hets:St.hets,groups:At,tags:mt}:null}).filter(Boolean)}if(!ot.length){o([]);return}const rt=ot.map(lt=>{const ft=ensureSex(lt.sex,"F"),dt={name:lt.name,id:lt.id||"",sex:ft,morphs:lt.morphs||[],hets:lt.hets||[]};return{...lt,sex:ft,previewText:formatParsedPreview(dt)}});o(rt),s(ut)}catch(xt){console.error("sheet import error",xt),o([])}finally{_(!1);try{tt.target.value=null}catch{}}}}}),jsxRuntimeExports.jsx("button",{className:cx("text-xs px-2 py-1 rounded-lg",primaryBtnClass(d,!0)),onClick:()=>{const tt=document.getElementById("import-pdf-input");tt&&tt.click()},disabled:b,children:b?"Parsing":"Upload PDF"}),jsxRuntimeExports.jsx("button",{className:cx("text-xs px-2 py-1 rounded-lg","ml-2",primaryBtnClass(d,!0)),onClick:()=>{const tt=document.getElementById("import-sheet-input");tt&&tt.click()},disabled:b,children:b?"Parsing":"Upload Sheet"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:h?h.name:"No file selected"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:a,children:"Preview"}),jsxRuntimeExports.jsx("button",{className:cx("px-3 py-2 rounded-xl text-sm border","bg-white"),onClick:()=>{s(""),j(null),o([]),g&&g()},children:"Cancel"}),jsxRuntimeExports.jsxs("button",{className:cx("px-3 py-2 rounded-xl text-sm text-white",i.length?primaryBtnClass(d,!0):primaryBtnClass(d,!1)),disabled:!i.length,onClick:c,children:["Import ",i.length?`(${i.length})`:""]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium",children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 border rounded-xl p-2 h-64 overflow-auto bg-neutral-50",children:[!i.length&&jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500",children:"Click Preview to see parsed snakes."}),i.map((tt,nt)=>jsxRuntimeExports.jsx("div",{className:"text-sm py-1 border-b last:border-b-0",children:tt.previewText?jsxRuntimeExports.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:tt.previewText}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[tt.name," ",jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-500",children:["(",tt.sex,")"]})]}),(()=>{const xt=combineMorphsAndHetsForDisplay(tt.morphs,tt.hets,tt.possibleHets);return jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-1 text-[10px]",children:xt.length?jsxRuntimeExports.jsx(GeneLine,{label:"Genetics",genes:xt,size:"xs"}):jsxRuntimeExports.jsx("div",{className:"text-neutral-500 uppercase tracking-wide",children:"Genetics: -"})})})()]})},nt))]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-3",children:"Row 1 column titles (Name, ID, Gender, Morphs, etc.) are mapped automaticallydouble-check the preview before importing."})]})}async function extractPdfText(e){const s=await e.arrayBuffer(),i=new Uint8Array(s);let o;try{o=await pdfExports.getDocument({data:i}).promise}catch(c){throw console.error("pdfjs failed to load document",c),c}let a="";for(let c=1;c<=o.numPages;c++){const h=(await(await o.getPage(c)).getTextContent()).items||[];let j=[],b=null,_="";for(const tt of h){const nt=tt.str||"",xt=tt.transform&&typeof tt.transform[5]<"u"?Math.round(tt.transform[5]):0;if(b===null){b=xt,_=nt;continue}Math.abs(xt-b)>5?(j.push(_.trim()),_=nt,b=xt):_=(_?_+" ":"")+nt}_&&j.push(_.trim());const st=j.join(`
`);a+=st+`

`}return a}function GroupsSection({groups:e,setGroups:s,snakes:i,onDeleteGroup:o,onOpenSnake:a,theme:c="blue"}){const[d,g]=reactExports.useState("");return jsxRuntimeExports.jsxs(Card,{title:"Groups",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"flex-1 border rounded-xl px-3 py-2",placeholder:"New group name",value:d,onChange:h=>g(h.target.value)}),jsxRuntimeExports.jsx("button",{className:"px-3 py-2 rounded-xl text-sm border",onClick:()=>{const h=d.trim();h&&(s(j=>j.includes(h)?j:[...j,h]),g(""))},children:"Add"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-4",children:[e.map(h=>{const j=i.filter(b=>(b.groups||[]).includes(h));return jsxRuntimeExports.jsxs("div",{className:"p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[h," ",jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-500",children:["(",j.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 mt-1",children:"Members"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>o(h),children:"Delete"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:j.length?j.map(b=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>a&&a(b),className:"text-sm px-2 py-1 rounded-full border bg-neutral-50 flex items-center gap-2 hover:bg-neutral-100 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-sky-200",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:b.name}),(()=>{const _=normalizeSexValue(b.sex),st=_==="M"?"":_==="F"?"":"";return jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500",children:st})})()]},b.id)):jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No snakes in this group."})})]},h)}),!e.length&&jsxRuntimeExports.jsx("div",{className:"py-2 text-xs text-neutral-500",children:"No groups yet."})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-xs text-neutral-500",children:"Tip: Edit a snake to assign or change its group."})]})}function LogsEditor({editSnakeDraft:e,setEditSnakeDraft:s,lastFeedDefaults:i,setLastFeedDefaults:o}){const a=reactExports.useRef(null),c=reactExports.useRef(null),d=reactExports.useRef(null),g=reactExports.useRef(null),h=reactExports.useRef(null),j=(b,_)=>{s(st=>{const tt=[...st.logs[b]||[]];return tt.splice(_,1),{...st,logs:{...st.logs,[b]:tt}}})};return reactExports.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e.logs.feeds.length]),reactExports.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[e.logs.weights.length]),reactExports.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[e.logs.sheds.length]),reactExports.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[e.logs.cleanings.length]),reactExports.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[e.logs.meds.length]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Feeds"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const b=localYMD(new Date),_=i||{feed:"Mouse",size:"",form:"Frozen/thawed",formDetail:"",notes:""},st=_.form||"Frozen/thawed",tt=_.formDetail||"";s(nt=>({...nt,logs:{...nt.logs,feeds:[...nt.logs.feeds,{date:b,feed:_.feed||"Mouse",size:_.size||"",weightGrams:0,method:st,methodDetail:tt,notes:_.notes||"",refused:!1}]}}))},children:"+ Add"})]}),jsxRuntimeExports.jsxs("div",{ref:a,className:"mt-2 space-y-2 max-h-40 overflow-auto",children:[e.logs.feeds.map((b,_)=>b.refused?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-7 gap-2 items-center text-xs",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1 text-xs text-neutral-900 sm:col-span-2 min-w-[8rem] w-full",value:b.date,onChange:tt=>updateLog(s,"feeds",_,{date:tt.target.value})}),jsxRuntimeExports.jsx("div",{className:"sm:col-span-3 font-semibold text-rose-600",children:"Refused feed"}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-2 flex justify-end gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>updateLog(s,"feeds",_,{refused:!1}),children:"Undo refused"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600",onClick:()=>j("feeds",_),children:"Delete"})]})]},_):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-7 gap-2 items-center text-xs",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1 text-xs text-neutral-900 sm:col-span-2 min-w-[8rem] w-full",value:b.date,onChange:tt=>updateLog(s,"feeds",_,{date:tt.target.value})}),jsxRuntimeExports.jsxs("select",{className:"border rounded-lg px-2 py-1 text-xs sm:col-span-1 w-full",value:b.feed||"",onChange:tt=>updateLog(s,"feeds",_,{feed:tt.target.value,size:tt.target.value==="Mouse"||tt.target.value==="Rat"?b.size||"pinky":""}),children:[jsxRuntimeExports.jsx("option",{value:"Mouse",children:"Mouse"}),jsxRuntimeExports.jsx("option",{value:"Rat",children:"Rat"}),jsxRuntimeExports.jsx("option",{value:"Chick",children:"Chick"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}),b.feed==="Mouse"||b.feed==="Rat"?jsxRuntimeExports.jsxs("select",{className:"border rounded-lg px-2 py-1 text-xs sm:col-span-1 w-full",value:b.size||"",onChange:tt=>updateLog(s,"feeds",_,{size:tt.target.value}),children:[jsxRuntimeExports.jsx("option",{value:"pinky",children:"pinky"}),jsxRuntimeExports.jsx("option",{value:"fuzzy",children:"fuzzy"}),jsxRuntimeExports.jsx("option",{value:"medium",children:"medium"}),jsxRuntimeExports.jsx("option",{value:"adult",children:"adult"})]}):jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 text-xs sm:col-span-1 w-full",placeholder:"Size",value:b.size||"",onChange:tt=>updateLog(s,"feeds",_,{size:tt.target.value})}),jsxRuntimeExports.jsx("input",{type:"number",className:"border rounded-lg px-2 py-1 text-xs w-full sm:col-span-1",placeholder:"g",value:typeof b.weightGrams=="number"?b.weightGrams:b.weightGrams||0,onChange:tt=>updateLog(s,"feeds",_,{weightGrams:Number(tt.target.value)||0})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 sm:col-span-2",children:[jsxRuntimeExports.jsxs("select",{className:"border rounded-lg px-2 py-1 text-xs w-full sm:w-auto",value:b.method||"",onChange:tt=>updateLog(s,"feeds",_,{method:tt.target.value}),children:[jsxRuntimeExports.jsx("option",{value:"Live",children:"Live"}),jsxRuntimeExports.jsx("option",{value:"Freshly killed",children:"Freshly killed"}),jsxRuntimeExports.jsx("option",{value:"Frozen/thawed",children:"Frozen/thawed"}),jsxRuntimeExports.jsx("option",{value:"Other",children:"Other"})]}),b.method==="Other"&&jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 text-xs w-full sm:w-auto",placeholder:"Method details",value:b.methodDetail||"",onChange:tt=>updateLog(s,"feeds",_,{methodDetail:tt.target.value})})]}),jsxRuntimeExports.jsx("div",{className:"sm:col-span-7",children:jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 text-xs w-full",placeholder:"Notes",value:b.notes||"",onChange:tt=>updateLog(s,"feeds",_,{notes:tt.target.value})})}),jsxRuntimeExports.jsxs("div",{className:"sm:col-span-7 flex justify-end items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>updateLog(s,"feeds",_,{refused:!0}),children:"Mark refused"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600",onClick:()=>j("feeds",_),children:"Delete"})]})]},_)),!e.logs.feeds.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No records."})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Weights"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const b=localYMD(new Date);s(_=>({..._,logs:{..._.logs,weights:[..._.logs.weights,{date:b,grams:0,notes:""}]}}))},children:"+ Add"})]}),jsxRuntimeExports.jsxs("div",{ref:c,className:"mt-2 space-y-2 max-h-40 overflow-auto",children:[e.logs.weights.map((b,_)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1",value:b.date,onChange:st=>updateLog(s,"weights",_,{date:st.target.value})}),jsxRuntimeExports.jsx("input",{type:"number",className:"border rounded-lg px-2 py-1",placeholder:"grams",value:b.grams,onChange:st=>updateLog(s,"weights",_,{grams:Number(st.target.value)||0})}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 md:col-span-2",placeholder:"Notes",value:b.notes||"",onChange:st=>updateLog(s,"weights",_,{notes:st.target.value})}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600 md:col-start-5",onClick:()=>j("weights",_),children:"Delete"})]},_)),!e.logs.weights.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No records."})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Sheds"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const b=localYMD(new Date);s(_=>({..._,logs:{..._.logs,sheds:[..._.logs.sheds,{date:b,complete:!0,notes:""}]}}))},children:"+ Add"})]}),jsxRuntimeExports.jsxs("div",{ref:d,className:"mt-2 space-y-2 max-h-40 overflow-auto",children:[e.logs.sheds.map((b,_)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1",value:b.date,onChange:st=>updateLog(s,"sheds",_,{date:st.target.value})}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!b.complete,onChange:st=>updateLog(s,"sheds",_,{complete:st.target.checked})}),"Complete"]}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 md:col-span-2",placeholder:"Notes",value:b.notes||"",onChange:st=>updateLog(s,"sheds",_,{notes:st.target.value})}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600 md:col-start-5",onClick:()=>j("sheds",_),children:"Delete"})]},_)),!e.logs.sheds.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No records."})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Cleanings"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const b=localYMD(new Date);s(_=>({..._,logs:{..._.logs,cleanings:[..._.logs.cleanings,{date:b,deep:!1,notes:""}]}}))},children:"+ Add"})]}),jsxRuntimeExports.jsxs("div",{ref:g,className:"mt-2 space-y-2 max-h-40 overflow-auto",children:[e.logs.cleanings.map((b,_)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1",value:b.date,onChange:st=>updateLog(s,"cleanings",_,{date:st.target.value})}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!b.deep,onChange:st=>updateLog(s,"cleanings",_,{deep:st.target.checked})}),"Deep clean"]}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 md:col-span-2",placeholder:"Notes",value:b.notes||"",onChange:st=>updateLog(s,"cleanings",_,{notes:st.target.value})}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600 md:col-start-5",onClick:()=>j("cleanings",_),children:"Delete"})]},_)),!e.logs.cleanings.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No records."})]})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Meds"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg",onClick:()=>{const b=localYMD(new Date);s(_=>({..._,logs:{..._.logs,meds:[..._.logs.meds,{date:b,drug:"",dose:"",notes:""}]}}))},children:"+ Add"})]}),jsxRuntimeExports.jsxs("div",{ref:h,className:"mt-2 space-y-2 max-h-40 overflow-auto",children:[e.logs.meds.map((b,_)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{type:"date",className:"border rounded-lg px-2 py-1",value:b.date,onChange:st=>updateLog(s,"meds",_,{date:st.target.value})}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1",placeholder:"Drug",value:b.drug||"",onChange:st=>updateLog(s,"meds",_,{drug:st.target.value})}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1",placeholder:"Dose",value:b.dose||"",onChange:st=>updateLog(s,"meds",_,{dose:st.target.value})}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 md:col-span-2",placeholder:"Notes",value:b.notes||"",onChange:st=>updateLog(s,"meds",_,{notes:st.target.value})}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 border rounded-lg text-rose-600 md:col-start-6",onClick:()=>j("meds",_),children:"Delete"})]},_)),!e.logs.meds.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No records."})]})]})]})}function CalendarSection({snakes:e,pairings:s,theme:i="blue",onOpenPairing:o}){const a=new Date,[c,d]=reactExports.useState(a.getFullYear()),[g,h]=reactExports.useState(a.getMonth()),[j,b]=reactExports.useState([]),[_,st]=reactExports.useState({feeds:!0,weights:!0,cleanings:!0,sheds:!0,meds:!0,breeding:!0,clutch:!0}),[tt,nt]=reactExports.useState(null),xt=reactExports.useMemo(()=>Object.fromEntries(e.filter(dt=>dt.sex==="M").map(dt=>[dt.id,dt])),[e]),ut=reactExports.useMemo(()=>Object.fromEntries(e.filter(dt=>dt.sex==="F").map(dt=>[dt.id,dt])),[e]),_e=buildMonthGrid(c,g),$=reactExports.useCallback(dt=>{st(ct=>({...ct,[dt]:!ct[dt]}))},[]),at=reactExports.useCallback(dt=>{nt(ct=>ct===dt?null:dt)},[]),it=reactExports.useMemo(()=>[{key:"feeds",label:"Feeds"},{key:"weights",label:"Weights"},{key:"cleanings",label:"Cleaning"},{key:"sheds",label:"Sheds"},{key:"meds",label:"Meds"},{key:"breeding",label:"Breeding appointments"},{key:"clutch",label:"Clutch actions"}],[]),et=reactExports.useCallback(dt=>{let ct=g+dt,Et=c;for(;ct<0;)ct+=12,Et-=1;for(;ct>11;)ct-=12,Et+=1;d(Et),h(ct)},[g,c]),ot=reactExports.useCallback(dt=>{d(ct=>ct+dt)},[]),rt=reactExports.useCallback(()=>{const dt=daysInMonth(c,g),ct=[],Et={};s.forEach(gt=>{(gt.appointments||[]).forEach(Lt=>{var bt;const Dt=new Date(Lt.date);if(Dt.getFullYear()!==c||Dt.getMonth()!==g)return;Et[gt.maleId]||(Et[gt.maleId]={});const Ft=Dt.getDate();Et[gt.maleId][Ft]||(Et[gt.maleId][Ft]=[]),Et[gt.maleId][Ft].push({pairing:gt,appt:Lt,femaleName:((bt=ut[gt.femaleId])==null?void 0:bt.name)||gt.femaleId})})}),Object.keys(Et).forEach(gt=>{const Lt=Et[gt];Object.keys(Lt).map(Dt=>Number(Dt)).sort((Dt,Ft)=>Dt-Ft).forEach(Dt=>{const Ft=Lt[Dt].sort((St,At)=>(St.femaleName||"").localeCompare(At.femaleName||"")),bt=new Set,_t=St=>{for(const At of bt)if(Math.abs(At-St)<3)return!1;return!0},jt=()=>{for(let At=0;At<50;At++){let mt;At===0?mt=0:At%2===1?mt=(At+1)/2*3:mt=-(At/2)*3;const ht=Dt+mt;if(!(ht<1||ht>dt)&&!bt.has(ht)&&_t(ht))return ht}return null};for(let St=0;St<Ft.length;St++){const At=Ft[St];let mt=jt();if(mt===null){let vt=null;for(let Rt=0;Rt<=dt;Rt++){const Pt=[Dt-Rt,Dt+Rt].filter(Bt=>Bt>=1&&Bt<=dt);for(const Bt of Pt)if(!bt.has(Bt)&&_t(Bt)){vt=Bt;break}if(vt!==null)break}mt=vt}if(mt===null){for(let vt=1;vt<=dt;vt++)if(!bt.has(vt)){mt=vt;break}}mt===null&&(mt=Math.min(Math.max(Dt,1),dt)),bt.add(mt),mt+1<=dt&&bt.add(mt+1),mt+2<=dt&&bt.add(mt+2);const ht=new Date(c,g,mt);for(let vt=0;vt<3;vt++){const Rt=new Date(ht);Rt.setDate(Rt.getDate()+vt),Rt.getFullYear()===c&&Rt.getMonth()===g&&ct.push({date:localYMD(Rt),maleId:gt,femaleId:At.pairing.femaleId,pairingId:At.pairing.id,apptId:At.appt.id,type:"pairing",spanOffset:vt,notes:At.appt.notes||"",lockObserved:!!At.appt.lockObserved,lockLoggedAt:At.appt.lockLoggedAt||null})}}})}),s.forEach(gt=>{var Dt,Ft,bt,_t,yt,jt,St,At;const Lt=(mt,ht)=>{if(!mt)return;const vt=new Date(mt);Number.isNaN(vt.getTime())||vt.getFullYear()!==c||vt.getMonth()!==g||ct.push({date:localYMD(vt),type:"clutch",stage:ht,pairingId:gt.id,maleId:gt.maleId,femaleId:gt.femaleId})};(Dt=gt==null?void 0:gt.ovulation)!=null&&Dt.observed&&((Ft=gt==null?void 0:gt.ovulation)!=null&&Ft.date)&&Lt(gt.ovulation.date,"ovulation"),(bt=gt==null?void 0:gt.preLayShed)!=null&&bt.observed&&((_t=gt==null?void 0:gt.preLayShed)!=null&&_t.date)&&Lt(gt.preLayShed.date,"preLay"),(yt=gt==null?void 0:gt.clutch)!=null&&yt.recorded&&((jt=gt==null?void 0:gt.clutch)!=null&&jt.date)&&Lt(gt.clutch.date,"clutch"),(St=gt==null?void 0:gt.hatch)!=null&&St.recorded&&((At=gt==null?void 0:gt.hatch)!=null&&At.date)&&Lt(gt.hatch.date,"hatch")}),e.forEach(gt=>{const Lt=gt.logs||{},Dt=Ft=>{(Lt[Ft]||[]).forEach(bt=>{try{const _t=new Date(bt.date);_t.getFullYear()===c&&_t.getMonth()===g&&ct.push({date:localYMD(_t),type:"activity",activityKey:Ft,snakeId:gt.id,entry:bt})}catch{}})};["feeds","weights","sheds","cleanings","meds"].forEach(Dt)}),b(ct)},[c,g,s,ut,e]);reactExports.useEffect(()=>{rt()},[rt]);const lt=reactExports.useMemo(()=>j.filter(dt=>{if(dt.type==="activity"){const ct=dt.activityKey;return ct?_[ct]!==!1:!0}return dt.type==="pairing"?!(_.breeding===!1||tt&&dt.maleId&&dt.maleId!==tt):dt.type==="clutch"?!(_.clutch===!1||tt&&dt.maleId&&dt.maleId!==tt):!(tt&&dt.maleId&&dt.maleId!==tt)}),[j,_,tt]),ft=reactExports.useMemo(()=>Array.from(new Set(j.filter(ct=>ct.type==="pairing").map(ct=>ct.maleId).filter(Boolean))).map(ct=>{var Et;return{id:ct,name:((Et=xt[ct])==null?void 0:Et.name)||ct,colors:ct?maleColorTokens(ct,i):null,isActive:tt===ct}}),[j,xt,i,tt]);return jsxRuntimeExports.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-b flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold mr-2",children:"Monthly calendar"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-1 border rounded-lg text-xs",onClick:()=>et(-1),"aria-label":"Previous month",children:""}),jsxRuntimeExports.jsx("select",{className:"border rounded-lg px-2 py-1 text-sm",value:g,onChange:dt=>h(Number(dt.target.value)),children:Array.from({length:12},(dt,ct)=>ct).map(dt=>jsxRuntimeExports.jsx("option",{value:dt,children:new Date(2e3,dt,1).toLocaleString("en",{month:"long"})},dt))}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-1 border rounded-lg text-xs",onClick:()=>et(1),"aria-label":"Next month",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-1 border rounded-lg text-xs",onClick:()=>ot(-1),"aria-label":"Previous year",children:""}),jsxRuntimeExports.jsx("input",{className:"border rounded-lg px-2 py-1 w-24",type:"number",value:c,onChange:dt=>d(Number(dt.target.value)||c)}),jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-1 border rounded-lg text-xs",onClick:()=>ot(1),"aria-label":"Next year",children:""})]}),jsxRuntimeExports.jsx("button",{className:cx("ml-auto px-3 py-2 rounded-xl text-sm",primaryBtnClass(i,!0)),onClick:rt,children:"Refresh"})]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-b bg-neutral-50",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs text-neutral-700",children:it.map(dt=>jsxRuntimeExports.jsxs("label",{className:cx("flex items-center gap-2 rounded-lg border px-2 py-1 bg-white",_[dt.key]?"border-sky-200 shadow-sm":"border-neutral-200 opacity-80"),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:!!_[dt.key],onChange:()=>$(dt.key)}),jsxRuntimeExports.jsx("span",{children:dt.label})]},dt.key))})}),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 text-xs font-medium text-neutral-500",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(dt=>jsxRuntimeExports.jsx("div",{className:"p-2",children:dt},dt))}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 rounded-lg overflow-hidden",children:_e.map((dt,ct)=>jsxRuntimeExports.jsxs("div",{className:cx("min-h[110px] bg-white p-2",dt.current?"":"bg-neutral-50"),children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:dt.day}),lt.filter(Et=>Et.date===ymd(dt.year,dt.month,dt.day)).map((Et,gt)=>{var jt,St,At,mt,ht,vt,Rt,Pt,Bt,Ut,Nt,It;if(Et.type==="activity"){const Ht=activityPalettes[Et.activityKey]||{bg:"#efefef",border:"#ddd"},Qt=e.find(tn=>tn.id===Et.snakeId);if(Et.activityKey==="feeds"&&Et.entry){const tn=Et.entry,an=(tn.feed||tn.item||"").trim(),Wt=(tn.size||"").trim(),Xt=typeof tn.weightGrams=="number"&&tn.weightGrams>0?`${tn.weightGrams} g`:typeof tn.grams=="number"&&tn.grams>0?`${tn.grams} g`:"",wt=tn.method?tn.methodDetail?`${tn.method} (${tn.methodDetail})`:tn.method:"";let kt="";if(!tn.refused){const zt=[];an&&zt.push(an),Wt&&zt.push(Wt),Xt&&zt.push(Xt),wt&&zt.push(wt),kt=zt.join("  ")}const Tt=tn.refused?"Refused feed":kt||"Feed";return jsxRuntimeExports.jsx("div",{className:cx("text-[11px] px-2 py-1 rounded-full border flex items-start gap-2"),style:{backgroundColor:Ht.bg,borderColor:Ht.border},children:jsxRuntimeExports.jsxs("div",{className:"truncate",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium truncate",children:[(Qt==null?void 0:Qt.name)||Et.snakeId,"  ",Tt]}),tn.refused&&kt?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 truncate",children:kt}):null,tn.notes?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 truncate",children:tn.notes}):null]})},gt)}return jsxRuntimeExports.jsxs("div",{className:cx("text-[11px] px-2 py-0.5 rounded-full border flex items-center gap-2"),style:{backgroundColor:Ht.bg,borderColor:Ht.border},children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:(Qt==null?void 0:Qt.name)||Et.snakeId}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-700",children:Et.activityKey.replace(/s$/,"")})]},gt)}if(Et.type==="clutch"){const Ht=s.find(wt=>wt.id===Et.pairingId),Qt=((jt=xt[Et.maleId])==null?void 0:jt.name)||Et.maleId,tn=((St=ut[Et.femaleId])==null?void 0:St.name)||Et.femaleId,an={ovulation:"Ovulation observed",preLay:"Pre-lay shed",clutch:"Clutch laid",hatch:"Hatch recorded"},Wt={ovulation:"border-sky-200 bg-sky-50",preLay:"border-amber-200 bg-amber-50",clutch:"border-rose-200 bg-rose-50",hatch:"border-emerald-200 bg-emerald-50"};let Xt="";if(Et.stage==="clutch"){const wt=(At=Ht==null?void 0:Ht.clutch)==null?void 0:At.eggsTotal,kt=(mt=Ht==null?void 0:Ht.clutch)==null?void 0:mt.slugs,Tt=[];typeof wt=="number"&&Number.isFinite(wt)&&Tt.push(`Eggs: ${wt}`),typeof kt=="number"&&Number.isFinite(kt)&&Tt.push(`Slugs: ${kt}`),Tt.length?Xt=Tt.join("  "):(ht=Ht==null?void 0:Ht.clutch)!=null&&ht.notes&&(Xt=Ht.clutch.notes)}else if(Et.stage==="hatch"){const wt=(vt=Ht==null?void 0:Ht.hatch)==null?void 0:vt.hatchedCount;typeof wt=="number"&&Number.isFinite(wt)?Xt=`Hatched: ${wt}`:(Rt=Ht==null?void 0:Ht.hatch)!=null&&Rt.notes&&(Xt=Ht.hatch.notes)}else Et.stage==="preLay"?(Pt=Ht==null?void 0:Ht.preLayShed)!=null&&Pt.intervalFromOvulation&&Number.isFinite(Ht.preLayShed.intervalFromOvulation)?Xt=`${Ht.preLayShed.intervalFromOvulation} days after ovulation`:(Bt=Ht==null?void 0:Ht.preLayShed)!=null&&Bt.notes&&(Xt=Ht.preLayShed.notes):Et.stage==="ovulation"&&(Xt=((Ut=Ht==null?void 0:Ht.ovulation)==null?void 0:Ut.notes)||"");return jsxRuntimeExports.jsxs("button",{onClick:()=>{o&&o(Et.pairingId)},className:cx("text-xs px-2 py-1 rounded-lg border flex flex-col text-left w-full",Wt[Et.stage]||"border-neutral-200 bg-neutral-50"),children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:an[Et.stage]||"Clutch action"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-neutral-500 truncate",children:[Qt,"  ",tn]}),Xt?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 truncate",children:Xt}):null]},gt)}const Lt=s.find(Ht=>Ht.id===Et.pairingId),Dt=((Nt=xt[Et.maleId])==null?void 0:Nt.name)||Et.maleId,Ft=((It=ut[Et.femaleId])==null?void 0:It.name)||Et.femaleId,bt=maleColorTokens(Et.maleId,i),_t=Et.spanOffset===0&&Et.lockObserved&&Et.lockLoggedAt?buildLockLogLine(Et.lockLoggedAt):null;let yt=null;return Et.spanOffset===0&&Et.notes&&(yt=Et.notes.split(`
`).map(Qt=>Qt.trim()).filter(Boolean).find(Qt=>!_t||Qt!==_t)||null),jsxRuntimeExports.jsxs("button",{onClick:()=>{o&&o(Et.pairingId)},className:"text-xs px-2 py-1 rounded-lg border flex items-center gap-2 text-left w-full",style:{borderColor:bt.border,background:bt.fill},children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1 align-middle",style:{backgroundColor:bt.dot}}),jsxRuntimeExports.jsxs("div",{className:"truncate",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium truncate",children:[Dt,"  ",Ft]}),Lt!=null&&Lt.label?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 truncate",children:Lt.label}):null,_t?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-emerald-600 truncate",children:_t}):null,yt?jsxRuntimeExports.jsx("div",{className:"text-[11px] text-neutral-500 truncate",children:yt}):null]})]},gt)})]},ct))}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[ft.map(dt=>{const ct=dt.colors?{borderColor:dt.colors.border,background:dt.isActive?dt.colors.fill:void 0,opacity:tt&&!dt.isActive?.5:1}:void 0;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>at(dt.id),className:"text-xs px-2 py-1 border rounded-lg flex items-center gap-1 transition-opacity",style:ct,"aria-pressed":dt.isActive,children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1 align-middle",style:dt.colors?{backgroundColor:dt.colors.dot}:void 0}),dt.name]},dt.id)}),!ft.length&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"No appointments in this view."})]})]})]})}function daysInMonth(e,s){return new Date(e,s+1,0).getDate()}function ymd(e,s,i){return`${e}-${String(s+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`}function buildMonthGrid(e,s){const i=new Date(e,s,1).getDay(),o=daysInMonth(e,s),a=s-1,c=a<0?e-1:e,d=daysInMonth(c,(a+12)%12),g=[];for(let b=0;b<i;b++)g.push({year:c,month:(a+12)%12,day:d-i+1+b,current:!1});for(let b=1;b<=o;b++)g.push({year:e,month:s,day:b,current:!0});const h=(s+1)%12,j=h===0?e+1:e;for(;g.length%7;)g.push({year:j,month:h,day:g.length%7,current:!1});return g}function maleColorIdx(e){const s=typeof e=="string"||typeof e=="number"?String(e):"";let i=0;for(let o=0;o<s.length;o++)i=i*31+s.charCodeAt(o)>>>0;return i}function maleColorTokens(e,s="blue"){const o=maleColorIdx(e)%360,a=s==="dark"?55:62,c=s==="dark"?55:45,d=s==="dark"?38:50,g=s==="dark"?22:92,h=s==="dark"?.35:.25;return{border:`hsl(${o}, ${a}%, ${d}%)`,dot:`hsl(${o}, ${a}%, ${c}%)`,fill:`hsla(${o}, ${a}%, ${g}%, ${h})`}}const activityPalettes={feeds:{bg:"#9EB7B8",border:"#9EB7B8"},weights:{bg:"#BBC7B4",border:"#BBC7B4"},cleanings:{bg:"#E6B6A0",border:"#E6B6A0"},sheds:{bg:"#ECD1A5",border:"#ECD1A5"},meds:{bg:"#DCAD9A",border:"#DCAD9A"},groups:{bg:"#FAF5EE",border:"#FAF5EE"},pairing:{bg:"#ECB5CE",border:"#ECB5CE"}},HET_GENE_COLOR_CLASSES="bg-violet-200 border border-violet-300 text-violet-800",GENE_GROUP_COLOR_CLASSES={Het:HET_GENE_COLOR_CLASSES,Recessive:"bg-violet-300 border border-violet-400","Incomplete Dominant":"bg-rose-300 border border-rose-400",Dominant:"bg-sky-300 border border-sky-400",Other:"bg-emerald-300 border border-emerald-400"};function getGeneChipClasses(e,s){if(isHetGeneToken(e))return GENE_GROUP_COLOR_CLASSES.Het;const i=s||getGeneDisplayGroup(e);return GENE_GROUP_COLOR_CLASSES[i]||GENE_GROUP_COLOR_CLASSES.Other}const GENE_LEGEND_ITEMS=[{key:"Recessive",label:"Recessive"},{key:"Het",label:"Het / Possible Het"},{key:"Incomplete Dominant",label:"Incomplete Dominant"},{key:"Dominant",label:"Dominant"},{key:"Other",label:"Other / Polygenic"}],GENE_LINE_SIZE_STYLES={sm:{container:"text-[11px]",label:"text-[10px]",chip:"text-[11px] px-2 py-0.5"},md:{container:"text-sm",label:"text-[11px]",chip:"text-xs px-2 py-0.5"},xs:{container:"text-[10px]",label:"text-[9px]",chip:"text-[10px] px-1.5 py-0.5"}};function GeneLine({label:e,genes:s=[],size:i="sm",className:o}){const a=Array.isArray(s)?s.filter(Boolean):[];if(!a.length)return null;const c=GENE_LINE_SIZE_STYLES[i]||GENE_LINE_SIZE_STYLES.sm;return jsxRuntimeExports.jsxs("div",{className:cx("flex flex-wrap items-center gap-1 leading-snug",c.container,o),children:[jsxRuntimeExports.jsxs("span",{className:cx("uppercase tracking-wide text-neutral-500 mr-1",c.label),children:[e,":"]}),a.map((d,g)=>{const h=getGeneDisplayGroup(d),j=getGeneChipClasses(d,h);return jsxRuntimeExports.jsx("span",{className:cx("inline-flex items-center rounded-md border font-medium break-words",c.chip,j),children:d},`${e}-${d}-${g}`)})]})}function GeneLegend({className:e}){return jsxRuntimeExports.jsx("div",{className:cx("flex flex-wrap items-center justify-center gap-3 text-[11px] font-normal",e),children:GENE_LEGEND_ITEMS.map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:cx("inline-block h-3 w-3 rounded-sm",GENE_GROUP_COLOR_CLASSES[s.key])}),jsxRuntimeExports.jsx("span",{className:"text-neutral-600 whitespace-nowrap",children:s.label})]},s.key))})}function ScrollToTopButton({theme:e="blue",className:s}){const[i,o]=reactExports.useState(!1);return reactExports.useEffect(()=>{function a(){o(window.scrollY>200)}return window.addEventListener("scroll",a,{passive:!0}),a(),()=>window.removeEventListener("scroll",a)},[]),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:cx("fixed bottom-6 right-6 z-50 rounded-full shadow-lg border backdrop-blur-sm transition-opacity duration-200 flex items-center justify-center h-12 w-12 text-white",i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none",primaryBtnClass(e,!0),s),"aria-label":"Scroll to top",children:jsxRuntimeExports.jsx("span",{className:"text-xl leading-none",children:""})})}function addDaysYmd(e,s){const i=new Date(e);return i.setDate(i.getDate()+s),`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}const root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BreedingPlannerApp,{})}));export{__vitePreload as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
